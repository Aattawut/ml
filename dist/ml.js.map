{"version":3,"file":"ml.js","sources":["../node_modules/is-any-array/src/index.js","../node_modules/ml-array-max/lib-es6/index.js","../node_modules/ml-array-min/lib-es6/index.js","../node_modules/ml-array-rescale/lib-es6/index.js","../node_modules/ml-matrix/src/util.js","../node_modules/ml-matrix/src/stat.js","../node_modules/ml-matrix/src/inspect.js","../node_modules/ml-matrix/src/mathOperations.js","../node_modules/ml-matrix/src/matrix.js","../node_modules/ml-matrix/src/views/base.js","../node_modules/ml-matrix/src/views/column.js","../node_modules/ml-matrix/src/views/columnSelection.js","../node_modules/ml-matrix/src/views/flipColumn.js","../node_modules/ml-matrix/src/views/flipRow.js","../node_modules/ml-matrix/src/views/row.js","../node_modules/ml-matrix/src/views/rowSelection.js","../node_modules/ml-matrix/src/views/selection.js","../node_modules/ml-matrix/src/views/sub.js","../node_modules/ml-matrix/src/views/transpose.js","../node_modules/ml-matrix/src/wrap/WrapperMatrix1D.js","../node_modules/ml-matrix/src/wrap/WrapperMatrix2D.js","../node_modules/ml-matrix/src/wrap/wrap.js","../node_modules/ml-matrix/src/dc/lu.js","../node_modules/ml-matrix/src/dc/util.js","../node_modules/ml-matrix/src/dc/qr.js","../node_modules/ml-matrix/src/dc/svd.js","../node_modules/ml-matrix/src/decompositions.js","../node_modules/ml-matrix/src/determinant.js","../node_modules/ml-matrix/src/linearDependencies.js","../node_modules/ml-matrix/src/pseudoInverse.js","../node_modules/ml-matrix/src/covariance.js","../node_modules/ml-matrix/src/correlation.js","../node_modules/ml-matrix/src/dc/evd.js","../node_modules/ml-matrix/src/dc/cholesky.js","../node_modules/ml-matrix/src/dc/nipals.js","../node_modules/ml-array-mean/lib-es6/index.js","../node_modules/ml-cart/src/utils.js","../node_modules/ml-cart/src/TreeNode.js","../node_modules/ml-cart/src/DecisionTreeClassifier.js","../node_modules/ml-cart/src/DecisionTreeRegression.js","../node_modules/random-js/dist/random-js.esm.js","../node_modules/ml-random-forest/src/utils.js","../node_modules/ml-random-forest/src/RandomForestBase.js","../node_modules/ml-random-forest/src/RandomForestClassifier.js","../node_modules/median-quickselect/lib/median-quickselect.min.js","../node_modules/ml-array-median/lib-es6/index.js","../node_modules/ml-random-forest/src/RandomForestRegression.js","../node_modules/ml-pca/src/pca.js","../node_modules/ml-distance-euclidean/lib-es6/euclidean.js","../node_modules/ml-distance-matrix/src/index.js","../node_modules/heap/lib/heap.js","../node_modules/heap/index.js","../node_modules/ml-hclust/src/Cluster.js","../node_modules/ml-hclust/src/agnes.js","../node_modules/ml-hclust/src/index.js","../node_modules/ml-nearest-vector/lib-es6/index.js","../node_modules/ml-kmeans/src/utils.js","../node_modules/ml-xsadd/lib-es6/xsadd.js","../node_modules/ml-random/lib-es6/choice.js","../node_modules/ml-random/lib-es6/index.js","../node_modules/ml-kmeans/src/initialization.js","../node_modules/ml-kmeans/src/KMeansResult.js","../node_modules/ml-kmeans/src/kmeans.js","../node_modules/ml-naivebayes/src/utils.js","../node_modules/ml-naivebayes/src/GaussianNB.js","../node_modules/ml-naivebayes/src/MultinomialNB.js","../node_modules/ml-knn/src/KDTree.js","../node_modules/ml-knn/src/index.js","../node_modules/ml-pls/src/utils.js","../node_modules/ml-pls/src/pls.js","../node_modules/ml-pls/src/kopls.js","../node_modules/ml-confusion-matrix/src/index.js","../node_modules/ml-combinations/src/index.js","../node_modules/ml-cross-validation/src/index.js","../node_modules/ml-fnn/FeedForwardNeuralNetwork.js","../node_modules/ml-som/src/node-square.js","../node_modules/ml-som/src/node-hexagonal.js","../node_modules/ml-som/src/index.js","../node_modules/ml-regression-base/src/maybeToPrecision.js","../node_modules/ml-regression-base/src/checkArrayLength.js","../node_modules/ml-regression-base/src/index.js","../node_modules/ml-regression-polynomial/src/index.js","../node_modules/ml-regression-simple-linear/src/index.js","../node_modules/ml-regression-exponential/src/index.js","../node_modules/ml-regression-power/src/index.js","../node_modules/ml-regression-multivariate-linear/src/index.js","../node_modules/ml-kernel-gaussian/gaussian-kernel.js","../node_modules/ml-kernel-polynomial/polynomial-kernel.js","../node_modules/ml-kernel-sigmoid/sigmoid-kernel.js","../node_modules/ml-kernel/src/kernels/anova-kernel.js","../node_modules/ml-kernel/src/kernels/cauchy-kernel.js","../node_modules/ml-kernel/src/kernels/exponential-kernel.js","../node_modules/ml-kernel/src/kernels/histogram-intersection-kernel.js","../node_modules/ml-kernel/src/kernels/laplacian-kernel.js","../node_modules/ml-kernel/src/kernels/multiquadratic-kernel.js","../node_modules/ml-kernel/src/kernels/rational-quadratic-kernel.js","../node_modules/ml-kernel/src/kernel.js","../node_modules/ml-regression-theil-sen/src/index.js","../node_modules/ml-regression-robust-polynomial/src/index.js","../node_modules/ml-levenberg-marquardt/src/errorCalculation.js","../node_modules/ml-levenberg-marquardt/src/step.js","../node_modules/ml-levenberg-marquardt/src/index.js","../node_modules/ml-fcnnls/src/util/selection.js","../node_modules/ml-fcnnls/src/util/sortCollectionSet.js","../node_modules/ml-fcnnls/src/cssls.js","../node_modules/ml-fcnnls/src/initialisation.js","../node_modules/ml-fcnnls/src/util/setDifference.js","../node_modules/ml-fcnnls/src/optimality.js","../node_modules/ml-fcnnls/src/fcnnls.js","../node_modules/ml-fcnnls/src/fcnnlsVector.js","../node_modules/binary-search/index.js","../node_modules/num-sort/index.js","../node_modules/ml-hash-table/src/primeFinder.js","../node_modules/ml-hash-table/src/HashTable.js","../node_modules/ml-sparse-matrix/src/index.js","../node_modules/ml-distance/src/distances/additiveSymmetric.js","../node_modules/ml-distance/src/distances/avg.js","../node_modules/ml-distance/src/distances/bhattacharyya.js","../node_modules/ml-distance/src/distances/canberra.js","../node_modules/ml-distance/src/distances/chebyshev.js","../node_modules/ml-distance/src/distances/clark.js","../node_modules/ml-distance/src/similarities/czekanowski.js","../node_modules/ml-distance/src/distances/czekanowski.js","../node_modules/ml-distance/src/distances/dice.js","../node_modules/ml-distance/src/distances/divergence.js","../node_modules/ml-distance/src/distances/fidelity.js","../node_modules/ml-distance/src/distances/gower.js","../node_modules/ml-distance/src/distances/harmonicMean.js","../node_modules/ml-distance/src/distances/hellinger.js","../node_modules/ml-distance/src/distances/innerProduct.js","../node_modules/ml-distance/src/distances/intersection.js","../node_modules/ml-distance/src/distances/jaccard.js","../node_modules/ml-distance/src/distances/jeffreys.js","../node_modules/ml-distance/src/distances/jensenDifference.js","../node_modules/ml-distance/src/distances/jensenShannon.js","../node_modules/ml-distance/src/distances/kdivergence.js","../node_modules/ml-distance/src/distances/kulczynski.js","../node_modules/ml-distance/src/distances/kullbackLeibler.js","../node_modules/ml-distance/src/distances/kumarHassebrook.js","../node_modules/ml-distance/src/distances/kumarJohnson.js","../node_modules/ml-distance/src/distances/lorentzian.js","../node_modules/ml-distance/src/distances/manhattan.js","../node_modules/ml-distance/src/distances/matusita.js","../node_modules/ml-distance/src/distances/minkowski.js","../node_modules/ml-distance/src/distances/motyka.js","../node_modules/ml-distance/src/distances/neyman.js","../node_modules/ml-distance/src/distances/pearson.js","../node_modules/ml-distance/src/distances/probabilisticSymmetric.js","../node_modules/ml-distance/src/distances/ruzicka.js","../node_modules/ml-distance/src/distances/soergel.js","../node_modules/ml-distance/src/distances/sorensen.js","../node_modules/ml-distance/src/distances/squared.js","../node_modules/ml-distance/src/distances/squaredChord.js","../node_modules/ml-distance/src/distances/taneja.js","../node_modules/ml-distance/src/similarities/tanimoto.js","../node_modules/ml-distance/src/distances/tanimoto.js","../node_modules/ml-distance/src/distances/topsoe.js","../node_modules/ml-distance/src/distances/waveHedges.js","../node_modules/ml-tree-similarity/src/createTree.js","../node_modules/ml-tree-similarity/src/getSimilarity.js","../node_modules/ml-tree-similarity/src/index.js","../node_modules/ml-distance/src/similarities/cosine.js","../node_modules/ml-distance/src/similarities/dice.js","../node_modules/ml-distance/src/similarities/intersection.js","../node_modules/ml-distance/src/similarities/jaccard.js","../node_modules/ml-distance/src/similarities/kulczynski.js","../node_modules/ml-distance/src/similarities/motyka.js","../node_modules/ml-distance/src/similarities/pearson.js","../node_modules/ml-distance/src/similarities/squaredChord.js","../node_modules/ml-performance/src/measures.js","../node_modules/ml-performance/src/index.js","../node_modules/ml-pad-array/src/index.js","../node_modules/ml-savitzky-golay/src/index.js","../node_modules/ml-bit-array/src/creator.js","../node_modules/ml-bit-array/src/index.js","../node_modules/ml-array-mode/lib-es6/index.js","../node_modules/ml-array-normed/lib-es6/index.js","../node_modules/ml-array-sequential-fill/lib-es6/index.js","../node_modules/ml-array-variance/lib-es6/index.js","../node_modules/ml-array-standard-deviation/lib-es6/index.js","../node_modules/ml-array-xy-centroids-merge/src/index.js","../node_modules/ml-arrayxy-closestx/src/index.js","../node_modules/ml-array-xy-max-merge/src/index.js","../node_modules/ml-array-xy-max-y/src/index.js","../node_modules/ml-array-xy-sort-x/src/index.js","../node_modules/ml-arrayxy-uniquex/src/index.js","../node_modules/ml-array-xy-weighted-merge/src/index.js","../node_modules/ml-array-xy-equally-spaced/src/integral.js","../node_modules/ml-array-xy-equally-spaced/src/equallySpacedSmooth.js","../node_modules/ml-array-xy-equally-spaced/src/equallySpacedSlot.js","../node_modules/ml-array-xy-equally-spaced/src/getZones.js","../node_modules/ml-array-xy-equally-spaced/src/index.js","../node_modules/ml-array-xy-filter-x/src/getZones.js","../node_modules/ml-array-xy-filter-x/src/index.js","../src/index.js"],"sourcesContent":["'use strict';\n\nconst toString = Object.prototype.toString;\n\nfunction isAnyArray(object) {\n  return toString.call(object).endsWith('Array]');\n}\n\nmodule.exports = isAnyArray;\n","import isArray from 'is-any-array';\n\n/**\n * Computes the maximum of the given values\n * @param {Array<number>} input\n * @return {number}\n */\n\nfunction max(input) {\n  if (!isArray(input)) {\n    throw new TypeError('input must be an array');\n  }\n\n  if (input.length === 0) {\n    throw new TypeError('input must not be empty');\n  }\n\n  var max = input[0];\n\n  for (var i = 1; i < input.length; i++) {\n    if (input[i] > max) max = input[i];\n  }\n\n  return max;\n}\n\nexport default max;\n","import isArray from 'is-any-array';\n\n/**\n * Computes the minimum of the given values\n * @param {Array<number>} input\n * @return {number}\n */\n\nfunction min(input) {\n  if (!isArray(input)) {\n    throw new TypeError('input must be an array');\n  }\n\n  if (input.length === 0) {\n    throw new TypeError('input must not be empty');\n  }\n\n  var min = input[0];\n\n  for (var i = 1; i < input.length; i++) {\n    if (input[i] < min) min = input[i];\n  }\n\n  return min;\n}\n\nexport default min;\n","import max from 'ml-array-max';\nimport min from 'ml-array-min';\nimport isArray from 'is-any-array';\n\nfunction rescale(input) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!isArray(input)) {\n    throw new TypeError('input must be an array');\n  } else if (input.length === 0) {\n    throw new TypeError('input must not be empty');\n  }\n\n  var output;\n\n  if (options.output !== undefined) {\n    if (!isArray(options.output)) {\n      throw new TypeError('output option must be an array if specified');\n    }\n\n    output = options.output;\n  } else {\n    output = new Array(input.length);\n  }\n\n  var currentMin = min(input);\n  var currentMax = max(input);\n\n  if (currentMin === currentMax) {\n    throw new RangeError('minimum and maximum input values are equal. Cannot rescale a constant array');\n  }\n\n  var _options$min = options.min,\n      minValue = _options$min === void 0 ? options.autoMinMax ? currentMin : 0 : _options$min,\n      _options$max = options.max,\n      maxValue = _options$max === void 0 ? options.autoMinMax ? currentMax : 1 : _options$max;\n\n  if (minValue >= maxValue) {\n    throw new RangeError('min option must be smaller than max option');\n  }\n\n  var factor = (maxValue - minValue) / (currentMax - currentMin);\n\n  for (var i = 0; i < input.length; i++) {\n    output[i] = (input[i] - currentMin) * factor + minValue;\n  }\n\n  return output;\n}\n\nexport default rescale;\n","/**\n * @private\n * Check that a row index is not out of bounds\n * @param {Matrix} matrix\n * @param {number} index\n * @param {boolean} [outer]\n */\nexport function checkRowIndex(matrix, index, outer) {\n  let max = outer ? matrix.rows : matrix.rows - 1;\n  if (index < 0 || index > max) {\n    throw new RangeError('Row index out of range');\n  }\n}\n\n/**\n * @private\n * Check that a column index is not out of bounds\n * @param {Matrix} matrix\n * @param {number} index\n * @param {boolean} [outer]\n */\nexport function checkColumnIndex(matrix, index, outer) {\n  let max = outer ? matrix.columns : matrix.columns - 1;\n  if (index < 0 || index > max) {\n    throw new RangeError('Column index out of range');\n  }\n}\n\n/**\n * @private\n * Check that the provided vector is an array with the right length\n * @param {Matrix} matrix\n * @param {Array|Matrix} vector\n * @return {Array}\n * @throws {RangeError}\n */\nexport function checkRowVector(matrix, vector) {\n  if (vector.to1DArray) {\n    vector = vector.to1DArray();\n  }\n  if (vector.length !== matrix.columns) {\n    throw new RangeError(\n      'vector size must be the same as the number of columns',\n    );\n  }\n  return vector;\n}\n\n/**\n * @private\n * Check that the provided vector is an array with the right length\n * @param {Matrix} matrix\n * @param {Array|Matrix} vector\n * @return {Array}\n * @throws {RangeError}\n */\nexport function checkColumnVector(matrix, vector) {\n  if (vector.to1DArray) {\n    vector = vector.to1DArray();\n  }\n  if (vector.length !== matrix.rows) {\n    throw new RangeError('vector size must be the same as the number of rows');\n  }\n  return vector;\n}\n\nexport function checkIndices(matrix, rowIndices, columnIndices) {\n  return {\n    row: checkRowIndices(matrix, rowIndices),\n    column: checkColumnIndices(matrix, columnIndices),\n  };\n}\n\nexport function checkRowIndices(matrix, rowIndices) {\n  if (typeof rowIndices !== 'object') {\n    throw new TypeError('unexpected type for row indices');\n  }\n\n  let rowOut = rowIndices.some((r) => {\n    return r < 0 || r >= matrix.rows;\n  });\n\n  if (rowOut) {\n    throw new RangeError('row indices are out of range');\n  }\n\n  if (!Array.isArray(rowIndices)) rowIndices = Array.from(rowIndices);\n\n  return rowIndices;\n}\n\nexport function checkColumnIndices(matrix, columnIndices) {\n  if (typeof columnIndices !== 'object') {\n    throw new TypeError('unexpected type for column indices');\n  }\n\n  let columnOut = columnIndices.some((c) => {\n    return c < 0 || c >= matrix.columns;\n  });\n\n  if (columnOut) {\n    throw new RangeError('column indices are out of range');\n  }\n  if (!Array.isArray(columnIndices)) columnIndices = Array.from(columnIndices);\n\n  return columnIndices;\n}\n\nexport function checkRange(matrix, startRow, endRow, startColumn, endColumn) {\n  if (arguments.length !== 5) {\n    throw new RangeError('expected 4 arguments');\n  }\n  checkNumber('startRow', startRow);\n  checkNumber('endRow', endRow);\n  checkNumber('startColumn', startColumn);\n  checkNumber('endColumn', endColumn);\n  if (\n    startRow > endRow ||\n    startColumn > endColumn ||\n    startRow < 0 ||\n    startRow >= matrix.rows ||\n    endRow < 0 ||\n    endRow >= matrix.rows ||\n    startColumn < 0 ||\n    startColumn >= matrix.columns ||\n    endColumn < 0 ||\n    endColumn >= matrix.columns\n  ) {\n    throw new RangeError('Submatrix indices are out of range');\n  }\n}\n\nexport function newArray(length, value = 0) {\n  let array = [];\n  for (let i = 0; i < length; i++) {\n    array.push(value);\n  }\n  return array;\n}\n\nfunction checkNumber(name, value) {\n  if (typeof value !== 'number') {\n    throw new TypeError(`${name} must be a number`);\n  }\n}\n","import { newArray } from './util';\n\nexport function sumByRow(matrix) {\n  let sum = newArray(matrix.rows);\n  for (let i = 0; i < matrix.rows; ++i) {\n    for (let j = 0; j < matrix.columns; ++j) {\n      sum[i] += matrix.get(i, j);\n    }\n  }\n  return sum;\n}\n\nexport function sumByColumn(matrix) {\n  let sum = newArray(matrix.columns);\n  for (let i = 0; i < matrix.rows; ++i) {\n    for (let j = 0; j < matrix.columns; ++j) {\n      sum[j] += matrix.get(i, j);\n    }\n  }\n  return sum;\n}\n\nexport function sumAll(matrix) {\n  let v = 0;\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      v += matrix.get(i, j);\n    }\n  }\n  return v;\n}\n\nexport function productByRow(matrix) {\n  let sum = newArray(matrix.rows, 1);\n  for (let i = 0; i < matrix.rows; ++i) {\n    for (let j = 0; j < matrix.columns; ++j) {\n      sum[i] *= matrix.get(i, j);\n    }\n  }\n  return sum;\n}\n\nexport function productByColumn(matrix) {\n  let sum = newArray(matrix.columns, 1);\n  for (let i = 0; i < matrix.rows; ++i) {\n    for (let j = 0; j < matrix.columns; ++j) {\n      sum[j] *= matrix.get(i, j);\n    }\n  }\n  return sum;\n}\n\nexport function productAll(matrix) {\n  let v = 1;\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      v *= matrix.get(i, j);\n    }\n  }\n  return v;\n}\n\nexport function varianceByRow(matrix, unbiased, mean) {\n  const rows = matrix.rows;\n  const cols = matrix.columns;\n  const variance = [];\n\n  for (let i = 0; i < rows; i++) {\n    let sum1 = 0;\n    let sum2 = 0;\n    let x = 0;\n    for (let j = 0; j < cols; j++) {\n      x = matrix.get(i, j) - mean[i];\n      sum1 += x;\n      sum2 += x * x;\n    }\n    if (unbiased) {\n      variance.push((sum2 - (sum1 * sum1) / cols) / (cols - 1));\n    } else {\n      variance.push((sum2 - (sum1 * sum1) / cols) / cols);\n    }\n  }\n  return variance;\n}\n\nexport function varianceByColumn(matrix, unbiased, mean) {\n  const rows = matrix.rows;\n  const cols = matrix.columns;\n  const variance = [];\n\n  for (let j = 0; j < cols; j++) {\n    let sum1 = 0;\n    let sum2 = 0;\n    let x = 0;\n    for (let i = 0; i < rows; i++) {\n      x = matrix.get(i, j) - mean[j];\n      sum1 += x;\n      sum2 += x * x;\n    }\n    if (unbiased) {\n      variance.push((sum2 - (sum1 * sum1) / rows) / (rows - 1));\n    } else {\n      variance.push((sum2 - (sum1 * sum1) / rows) / rows);\n    }\n  }\n  return variance;\n}\n\nexport function varianceAll(matrix, unbiased, mean) {\n  const rows = matrix.rows;\n  const cols = matrix.columns;\n  const size = rows * cols;\n\n  let sum1 = 0;\n  let sum2 = 0;\n  let x = 0;\n  for (let i = 0; i < rows; i++) {\n    for (let j = 0; j < cols; j++) {\n      x = matrix.get(i, j) - mean;\n      sum1 += x;\n      sum2 += x * x;\n    }\n  }\n  if (unbiased) {\n    return (sum2 - (sum1 * sum1) / size) / (size - 1);\n  } else {\n    return (sum2 - (sum1 * sum1) / size) / size;\n  }\n}\n\nexport function centerByRow(matrix, mean) {\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      matrix.set(i, j, matrix.get(i, j) - mean[i]);\n    }\n  }\n}\n\nexport function centerByColumn(matrix, mean) {\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      matrix.set(i, j, matrix.get(i, j) - mean[j]);\n    }\n  }\n}\n\nexport function centerAll(matrix, mean) {\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      matrix.set(i, j, matrix.get(i, j) - mean);\n    }\n  }\n}\n\nexport function getScaleByRow(matrix) {\n  const scale = [];\n  for (let i = 0; i < matrix.rows; i++) {\n    let sum = 0;\n    for (let j = 0; j < matrix.columns; j++) {\n      sum += Math.pow(matrix.get(i, j), 2) / (matrix.columns - 1);\n    }\n    scale.push(Math.sqrt(sum));\n  }\n  return scale;\n}\n\nexport function scaleByRow(matrix, scale) {\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      matrix.set(i, j, matrix.get(i, j) / scale[i]);\n    }\n  }\n}\n\nexport function getScaleByColumn(matrix) {\n  const scale = [];\n  for (let j = 0; j < matrix.columns; j++) {\n    let sum = 0;\n    for (let i = 0; i < matrix.rows; i++) {\n      sum += Math.pow(matrix.get(i, j), 2) / (matrix.rows - 1);\n    }\n    scale.push(Math.sqrt(sum));\n  }\n  return scale;\n}\n\nexport function scaleByColumn(matrix, scale) {\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      matrix.set(i, j, matrix.get(i, j) / scale[j]);\n    }\n  }\n}\n\nexport function getScaleAll(matrix) {\n  const divider = matrix.size - 1;\n  let sum = 0;\n  for (let j = 0; j < matrix.columns; j++) {\n    for (let i = 0; i < matrix.rows; i++) {\n      sum += Math.pow(matrix.get(i, j), 2) / divider;\n    }\n  }\n  return Math.sqrt(sum);\n}\n\nexport function scaleAll(matrix, scale) {\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      matrix.set(i, j, matrix.get(i, j) / scale);\n    }\n  }\n}\n","export function inspectMatrix() {\n  const indent = ' '.repeat(2);\n  const indentData = ' '.repeat(4);\n  return `${this.constructor.name} {\n${indent}[\n${indentData}${inspectData(this, indentData)}\n${indent}]\n${indent}rows: ${this.rows}\n${indent}columns: ${this.columns}\n}`;\n}\n\nconst maxRows = 15;\nconst maxColumns = 10;\nconst maxNumSize = 8;\n\nfunction inspectData(matrix, indent) {\n  const { rows, columns } = matrix;\n  const maxI = Math.min(rows, maxRows);\n  const maxJ = Math.min(columns, maxColumns);\n  const result = [];\n  for (let i = 0; i < maxI; i++) {\n    let line = [];\n    for (let j = 0; j < maxJ; j++) {\n      line.push(formatNumber(matrix.get(i, j)));\n    }\n    result.push(`${line.join(' ')}`);\n  }\n  if (maxJ !== columns) {\n    result[result.length - 1] += ` ... ${columns - maxColumns} more columns`;\n  }\n  if (maxI !== rows) {\n    result.push(`... ${rows - maxRows} more rows`);\n  }\n  return result.join(`\\n${indent}`);\n}\n\nfunction formatNumber(num) {\n  const numStr = String(num);\n  if (numStr.length <= maxNumSize) {\n    return numStr.padEnd(maxNumSize, ' ');\n  }\n  const precise = num.toPrecision(maxNumSize - 2);\n  if (precise.length <= maxNumSize) {\n    return precise;\n  }\n  const exponential = num.toExponential(maxNumSize - 2);\n  const eIndex = exponential.indexOf('e');\n  const e = exponential.substring(eIndex);\n  return exponential.substring(0, maxNumSize - e.length) + e;\n}\n","export function installMathOperations(AbstractMatrix, Matrix) {\n  AbstractMatrix.prototype.add = function add(value) {\n    if (typeof value === 'number') return this.addS(value);\n    return this.addM(value);\n  };\n\n  AbstractMatrix.prototype.addS = function addS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) + value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.addM = function addM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) + matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.add = function add(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.add(value);\n  };\n\n  AbstractMatrix.prototype.sub = function sub(value) {\n    if (typeof value === 'number') return this.subS(value);\n    return this.subM(value);\n  };\n\n  AbstractMatrix.prototype.subS = function subS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) - value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.subM = function subM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) - matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.sub = function sub(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.sub(value);\n  };\n  AbstractMatrix.prototype.subtract = AbstractMatrix.prototype.sub;\n  AbstractMatrix.prototype.subtractS = AbstractMatrix.prototype.subS;\n  AbstractMatrix.prototype.subtractM = AbstractMatrix.prototype.subM;\n  AbstractMatrix.subtract = AbstractMatrix.sub;\n\n  AbstractMatrix.prototype.mul = function mul(value) {\n    if (typeof value === 'number') return this.mulS(value);\n    return this.mulM(value);\n  };\n\n  AbstractMatrix.prototype.mulS = function mulS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) * value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.mulM = function mulM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) * matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.mul = function mul(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.mul(value);\n  };\n  AbstractMatrix.prototype.multiply = AbstractMatrix.prototype.mul;\n  AbstractMatrix.prototype.multiplyS = AbstractMatrix.prototype.mulS;\n  AbstractMatrix.prototype.multiplyM = AbstractMatrix.prototype.mulM;\n  AbstractMatrix.multiply = AbstractMatrix.mul;\n\n  AbstractMatrix.prototype.div = function div(value) {\n    if (typeof value === 'number') return this.divS(value);\n    return this.divM(value);\n  };\n\n  AbstractMatrix.prototype.divS = function divS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) / value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.divM = function divM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) / matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.div = function div(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.div(value);\n  };\n  AbstractMatrix.prototype.divide = AbstractMatrix.prototype.div;\n  AbstractMatrix.prototype.divideS = AbstractMatrix.prototype.divS;\n  AbstractMatrix.prototype.divideM = AbstractMatrix.prototype.divM;\n  AbstractMatrix.divide = AbstractMatrix.div;\n\n  AbstractMatrix.prototype.mod = function mod(value) {\n    if (typeof value === 'number') return this.modS(value);\n    return this.modM(value);\n  };\n\n  AbstractMatrix.prototype.modS = function modS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) % value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.modM = function modM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) % matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.mod = function mod(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.mod(value);\n  };\n  AbstractMatrix.prototype.modulus = AbstractMatrix.prototype.mod;\n  AbstractMatrix.prototype.modulusS = AbstractMatrix.prototype.modS;\n  AbstractMatrix.prototype.modulusM = AbstractMatrix.prototype.modM;\n  AbstractMatrix.modulus = AbstractMatrix.mod;\n\n  AbstractMatrix.prototype.and = function and(value) {\n    if (typeof value === 'number') return this.andS(value);\n    return this.andM(value);\n  };\n\n  AbstractMatrix.prototype.andS = function andS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) & value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.andM = function andM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) & matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.and = function and(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.and(value);\n  };\n\n  AbstractMatrix.prototype.or = function or(value) {\n    if (typeof value === 'number') return this.orS(value);\n    return this.orM(value);\n  };\n\n  AbstractMatrix.prototype.orS = function orS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) | value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.orM = function orM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) | matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.or = function or(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.or(value);\n  };\n\n  AbstractMatrix.prototype.xor = function xor(value) {\n    if (typeof value === 'number') return this.xorS(value);\n    return this.xorM(value);\n  };\n\n  AbstractMatrix.prototype.xorS = function xorS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) ^ value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.xorM = function xorM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) ^ matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.xor = function xor(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.xor(value);\n  };\n\n  AbstractMatrix.prototype.leftShift = function leftShift(value) {\n    if (typeof value === 'number') return this.leftShiftS(value);\n    return this.leftShiftM(value);\n  };\n\n  AbstractMatrix.prototype.leftShiftS = function leftShiftS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) << value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.leftShiftM = function leftShiftM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) << matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.leftShift = function leftShift(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.leftShift(value);\n  };\n\n  AbstractMatrix.prototype.signPropagatingRightShift = function signPropagatingRightShift(value) {\n    if (typeof value === 'number') return this.signPropagatingRightShiftS(value);\n    return this.signPropagatingRightShiftM(value);\n  };\n\n  AbstractMatrix.prototype.signPropagatingRightShiftS = function signPropagatingRightShiftS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) >> value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.signPropagatingRightShiftM = function signPropagatingRightShiftM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) >> matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.signPropagatingRightShift = function signPropagatingRightShift(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.signPropagatingRightShift(value);\n  };\n\n  AbstractMatrix.prototype.rightShift = function rightShift(value) {\n    if (typeof value === 'number') return this.rightShiftS(value);\n    return this.rightShiftM(value);\n  };\n\n  AbstractMatrix.prototype.rightShiftS = function rightShiftS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) >>> value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.rightShiftM = function rightShiftM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) >>> matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.rightShift = function rightShift(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.rightShift(value);\n  };\n  AbstractMatrix.prototype.zeroFillRightShift = AbstractMatrix.prototype.rightShift;\n  AbstractMatrix.prototype.zeroFillRightShiftS = AbstractMatrix.prototype.rightShiftS;\n  AbstractMatrix.prototype.zeroFillRightShiftM = AbstractMatrix.prototype.rightShiftM;\n  AbstractMatrix.zeroFillRightShift = AbstractMatrix.rightShift;\n\n  AbstractMatrix.prototype.not = function not() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, ~(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.not = function not(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.not();\n  };\n\n  AbstractMatrix.prototype.abs = function abs() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.abs(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.abs = function abs(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.abs();\n  };\n\n  AbstractMatrix.prototype.acos = function acos() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.acos(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.acos = function acos(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.acos();\n  };\n\n  AbstractMatrix.prototype.acosh = function acosh() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.acosh(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.acosh = function acosh(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.acosh();\n  };\n\n  AbstractMatrix.prototype.asin = function asin() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.asin(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.asin = function asin(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.asin();\n  };\n\n  AbstractMatrix.prototype.asinh = function asinh() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.asinh(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.asinh = function asinh(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.asinh();\n  };\n\n  AbstractMatrix.prototype.atan = function atan() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.atan(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.atan = function atan(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.atan();\n  };\n\n  AbstractMatrix.prototype.atanh = function atanh() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.atanh(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.atanh = function atanh(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.atanh();\n  };\n\n  AbstractMatrix.prototype.cbrt = function cbrt() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.cbrt(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.cbrt = function cbrt(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.cbrt();\n  };\n\n  AbstractMatrix.prototype.ceil = function ceil() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.ceil(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.ceil = function ceil(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.ceil();\n  };\n\n  AbstractMatrix.prototype.clz32 = function clz32() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.clz32(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.clz32 = function clz32(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.clz32();\n  };\n\n  AbstractMatrix.prototype.cos = function cos() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.cos(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.cos = function cos(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.cos();\n  };\n\n  AbstractMatrix.prototype.cosh = function cosh() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.cosh(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.cosh = function cosh(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.cosh();\n  };\n\n  AbstractMatrix.prototype.exp = function exp() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.exp(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.exp = function exp(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.exp();\n  };\n\n  AbstractMatrix.prototype.expm1 = function expm1() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.expm1(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.expm1 = function expm1(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.expm1();\n  };\n\n  AbstractMatrix.prototype.floor = function floor() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.floor(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.floor = function floor(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.floor();\n  };\n\n  AbstractMatrix.prototype.fround = function fround() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.fround(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.fround = function fround(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.fround();\n  };\n\n  AbstractMatrix.prototype.log = function log() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.log(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.log = function log(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.log();\n  };\n\n  AbstractMatrix.prototype.log1p = function log1p() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.log1p(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.log1p = function log1p(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.log1p();\n  };\n\n  AbstractMatrix.prototype.log10 = function log10() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.log10(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.log10 = function log10(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.log10();\n  };\n\n  AbstractMatrix.prototype.log2 = function log2() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.log2(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.log2 = function log2(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.log2();\n  };\n\n  AbstractMatrix.prototype.round = function round() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.round(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.round = function round(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.round();\n  };\n\n  AbstractMatrix.prototype.sign = function sign() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.sign(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.sign = function sign(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.sign();\n  };\n\n  AbstractMatrix.prototype.sin = function sin() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.sin(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.sin = function sin(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.sin();\n  };\n\n  AbstractMatrix.prototype.sinh = function sinh() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.sinh(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.sinh = function sinh(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.sinh();\n  };\n\n  AbstractMatrix.prototype.sqrt = function sqrt() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.sqrt(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.sqrt = function sqrt(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.sqrt();\n  };\n\n  AbstractMatrix.prototype.tan = function tan() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.tan(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.tan = function tan(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.tan();\n  };\n\n  AbstractMatrix.prototype.tanh = function tanh() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.tanh(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.tanh = function tanh(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.tanh();\n  };\n\n  AbstractMatrix.prototype.trunc = function trunc() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.trunc(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.trunc = function trunc(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.trunc();\n  };\n\n  AbstractMatrix.pow = function pow(matrix, arg0) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.pow(arg0);\n  };\n\n  AbstractMatrix.prototype.pow = function pow(value) {\n    if (typeof value === 'number') return this.powS(value);\n    return this.powM(value);\n  };\n\n  AbstractMatrix.prototype.powS = function powS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.pow(this.get(i, j), value));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.powM = function powM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.pow(this.get(i, j), matrix.get(i, j)));\n      }\n    }\n    return this;\n  };\n}\n","import rescale from 'ml-array-rescale';\n\nimport {\n  checkRowVector,\n  checkRowIndex,\n  checkColumnIndex,\n  checkColumnVector,\n  checkRange,\n  checkIndices,\n} from './util';\nimport {\n  sumByRow,\n  sumByColumn,\n  sumAll,\n  productByRow,\n  productByColumn,\n  productAll,\n  varianceByRow,\n  varianceByColumn,\n  varianceAll,\n  centerByRow,\n  centerByColumn,\n  centerAll,\n  scaleByRow,\n  scaleByColumn,\n  scaleAll,\n  getScaleByRow,\n  getScaleByColumn,\n  getScaleAll,\n} from './stat';\nimport { inspectMatrix } from './inspect';\nimport { installMathOperations } from './mathOperations';\n\nexport class AbstractMatrix {\n  static from1DArray(newRows, newColumns, newData) {\n    let length = newRows * newColumns;\n    if (length !== newData.length) {\n      throw new RangeError('data length does not match given dimensions');\n    }\n    let newMatrix = new Matrix(newRows, newColumns);\n    for (let row = 0; row < newRows; row++) {\n      for (let column = 0; column < newColumns; column++) {\n        newMatrix.set(row, column, newData[row * newColumns + column]);\n      }\n    }\n    return newMatrix;\n  }\n\n  static rowVector(newData) {\n    let vector = new Matrix(1, newData.length);\n    for (let i = 0; i < newData.length; i++) {\n      vector.set(0, i, newData[i]);\n    }\n    return vector;\n  }\n\n  static columnVector(newData) {\n    let vector = new Matrix(newData.length, 1);\n    for (let i = 0; i < newData.length; i++) {\n      vector.set(i, 0, newData[i]);\n    }\n    return vector;\n  }\n\n  static zeros(rows, columns) {\n    return new Matrix(rows, columns);\n  }\n\n  static ones(rows, columns) {\n    return new Matrix(rows, columns).fill(1);\n  }\n\n  static rand(rows, columns, options = {}) {\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { random = Math.random } = options;\n    let matrix = new Matrix(rows, columns);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < columns; j++) {\n        matrix.set(i, j, random());\n      }\n    }\n    return matrix;\n  }\n\n  static randInt(rows, columns, options = {}) {\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { min = 0, max = 1000, random = Math.random } = options;\n    if (!Number.isInteger(min)) throw new TypeError('min must be an integer');\n    if (!Number.isInteger(max)) throw new TypeError('max must be an integer');\n    if (min >= max) throw new RangeError('min must be smaller than max');\n    let interval = max - min;\n    let matrix = new Matrix(rows, columns);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < columns; j++) {\n        let value = min + Math.round(random() * interval);\n        matrix.set(i, j, value);\n      }\n    }\n    return matrix;\n  }\n\n  static eye(rows, columns, value) {\n    if (columns === undefined) columns = rows;\n    if (value === undefined) value = 1;\n    let min = Math.min(rows, columns);\n    let matrix = this.zeros(rows, columns);\n    for (let i = 0; i < min; i++) {\n      matrix.set(i, i, value);\n    }\n    return matrix;\n  }\n\n  static diag(data, rows, columns) {\n    let l = data.length;\n    if (rows === undefined) rows = l;\n    if (columns === undefined) columns = rows;\n    let min = Math.min(l, rows, columns);\n    let matrix = this.zeros(rows, columns);\n    for (let i = 0; i < min; i++) {\n      matrix.set(i, i, data[i]);\n    }\n    return matrix;\n  }\n\n  static min(matrix1, matrix2) {\n    matrix1 = this.checkMatrix(matrix1);\n    matrix2 = this.checkMatrix(matrix2);\n    let rows = matrix1.rows;\n    let columns = matrix1.columns;\n    let result = new Matrix(rows, columns);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < columns; j++) {\n        result.set(i, j, Math.min(matrix1.get(i, j), matrix2.get(i, j)));\n      }\n    }\n    return result;\n  }\n\n  static max(matrix1, matrix2) {\n    matrix1 = this.checkMatrix(matrix1);\n    matrix2 = this.checkMatrix(matrix2);\n    let rows = matrix1.rows;\n    let columns = matrix1.columns;\n    let result = new this(rows, columns);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < columns; j++) {\n        result.set(i, j, Math.max(matrix1.get(i, j), matrix2.get(i, j)));\n      }\n    }\n    return result;\n  }\n\n  static checkMatrix(value) {\n    return AbstractMatrix.isMatrix(value) ? value : new Matrix(value);\n  }\n\n  static isMatrix(value) {\n    return value != null && value.klass === 'Matrix';\n  }\n\n  get size() {\n    return this.rows * this.columns;\n  }\n\n  apply(callback) {\n    if (typeof callback !== 'function') {\n      throw new TypeError('callback must be a function');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        callback.call(this, i, j);\n      }\n    }\n    return this;\n  }\n\n  to1DArray() {\n    let array = [];\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        array.push(this.get(i, j));\n      }\n    }\n    return array;\n  }\n\n  to2DArray() {\n    let copy = [];\n    for (let i = 0; i < this.rows; i++) {\n      copy.push([]);\n      for (let j = 0; j < this.columns; j++) {\n        copy[i].push(this.get(i, j));\n      }\n    }\n    return copy;\n  }\n\n  toJSON() {\n    return this.to2DArray();\n  }\n\n  isRowVector() {\n    return this.rows === 1;\n  }\n\n  isColumnVector() {\n    return this.columns === 1;\n  }\n\n  isVector() {\n    return this.rows === 1 || this.columns === 1;\n  }\n\n  isSquare() {\n    return this.rows === this.columns;\n  }\n\n  isSymmetric() {\n    if (this.isSquare()) {\n      for (let i = 0; i < this.rows; i++) {\n        for (let j = 0; j <= i; j++) {\n          if (this.get(i, j) !== this.get(j, i)) {\n            return false;\n          }\n        }\n      }\n      return true;\n    }\n    return false;\n  }\n\n  isEchelonForm() {\n    let i = 0;\n    let j = 0;\n    let previousColumn = -1;\n    let isEchelonForm = true;\n    let checked = false;\n    while (i < this.rows && isEchelonForm) {\n      j = 0;\n      checked = false;\n      while (j < this.columns && checked === false) {\n        if (this.get(i, j) === 0) {\n          j++;\n        } else if (this.get(i, j) === 1 && j > previousColumn) {\n          checked = true;\n          previousColumn = j;\n        } else {\n          isEchelonForm = false;\n          checked = true;\n        }\n      }\n      i++;\n    }\n    return isEchelonForm;\n  }\n\n  isReducedEchelonForm() {\n    let i = 0;\n    let j = 0;\n    let previousColumn = -1;\n    let isReducedEchelonForm = true;\n    let checked = false;\n    while (i < this.rows && isReducedEchelonForm) {\n      j = 0;\n      checked = false;\n      while (j < this.columns && checked === false) {\n        if (this.get(i, j) === 0) {\n          j++;\n        } else if (this.get(i, j) === 1 && j > previousColumn) {\n          checked = true;\n          previousColumn = j;\n        } else {\n          isReducedEchelonForm = false;\n          checked = true;\n        }\n      }\n      for (let k = j + 1; k < this.rows; k++) {\n        if (this.get(i, k) !== 0) {\n          isReducedEchelonForm = false;\n        }\n      }\n      i++;\n    }\n    return isReducedEchelonForm;\n  }\n\n  echelonForm() {\n    let result = this.clone();\n    let h = 0;\n    let k = 0;\n    while (h < result.rows && k < result.columns) {\n      let iMax = h;\n      for (let i = h; i < result.rows; i++) {\n        if (result.get(i, k) > result.get(iMax, k)) {\n          iMax = i;\n        }\n      }\n      if (result.get(iMax, k) === 0) {\n        k++;\n      } else {\n        result.swapRows(h, iMax);\n        let tmp = result.get(h, k);\n        for (let j = k; j < result.columns; j++) {\n          result.set(h, j, result.get(h, j) / tmp);\n        }\n        for (let i = h + 1; i < result.rows; i++) {\n          let factor = result.get(i, k) / result.get(h, k);\n          result.set(i, k, 0);\n          for (let j = k + 1; j < result.columns; j++) {\n            result.set(i, j, result.get(i, j) - result.get(h, j) * factor);\n          }\n        }\n        h++;\n        k++;\n      }\n    }\n    return result;\n  }\n\n  reducedEchelonForm() {\n    let result = this.echelonForm();\n    let m = result.columns;\n    let n = result.rows;\n    let h = n - 1;\n    while (h >= 0) {\n      if (result.maxRow(h) === 0) {\n        h--;\n      } else {\n        let p = 0;\n        let pivot = false;\n        while (p < n && pivot === false) {\n          if (result.get(h, p) === 1) {\n            pivot = true;\n          } else {\n            p++;\n          }\n        }\n        for (let i = 0; i < h; i++) {\n          let factor = result.get(i, p);\n          for (let j = p; j < m; j++) {\n            let tmp = result.get(i, j) - factor * result.get(h, j);\n            result.set(i, j, tmp);\n          }\n        }\n        h--;\n      }\n    }\n    return result;\n  }\n\n  set() {\n    throw new Error('set method is unimplemented');\n  }\n\n  get() {\n    throw new Error('get method is unimplemented');\n  }\n\n  repeat(options = {}) {\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { rows = 1, columns = 1 } = options;\n    if (!Number.isInteger(rows) || rows <= 0) {\n      throw new TypeError('rows must be a positive integer');\n    }\n    if (!Number.isInteger(columns) || columns <= 0) {\n      throw new TypeError('columns must be a positive integer');\n    }\n    let matrix = new Matrix(this.rows * rows, this.columns * columns);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < columns; j++) {\n        matrix.setSubMatrix(this, this.rows * i, this.columns * j);\n      }\n    }\n    return matrix;\n  }\n\n  fill(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, value);\n      }\n    }\n    return this;\n  }\n\n  neg() {\n    return this.mulS(-1);\n  }\n\n  getRow(index) {\n    checkRowIndex(this, index);\n    let row = [];\n    for (let i = 0; i < this.columns; i++) {\n      row.push(this.get(index, i));\n    }\n    return row;\n  }\n\n  getRowVector(index) {\n    return Matrix.rowVector(this.getRow(index));\n  }\n\n  setRow(index, array) {\n    checkRowIndex(this, index);\n    array = checkRowVector(this, array);\n    for (let i = 0; i < this.columns; i++) {\n      this.set(index, i, array[i]);\n    }\n    return this;\n  }\n\n  swapRows(row1, row2) {\n    checkRowIndex(this, row1);\n    checkRowIndex(this, row2);\n    for (let i = 0; i < this.columns; i++) {\n      let temp = this.get(row1, i);\n      this.set(row1, i, this.get(row2, i));\n      this.set(row2, i, temp);\n    }\n    return this;\n  }\n\n  getColumn(index) {\n    checkColumnIndex(this, index);\n    let column = [];\n    for (let i = 0; i < this.rows; i++) {\n      column.push(this.get(i, index));\n    }\n    return column;\n  }\n\n  getColumnVector(index) {\n    return Matrix.columnVector(this.getColumn(index));\n  }\n\n  setColumn(index, array) {\n    checkColumnIndex(this, index);\n    array = checkColumnVector(this, array);\n    for (let i = 0; i < this.rows; i++) {\n      this.set(i, index, array[i]);\n    }\n    return this;\n  }\n\n  swapColumns(column1, column2) {\n    checkColumnIndex(this, column1);\n    checkColumnIndex(this, column2);\n    for (let i = 0; i < this.rows; i++) {\n      let temp = this.get(i, column1);\n      this.set(i, column1, this.get(i, column2));\n      this.set(i, column2, temp);\n    }\n    return this;\n  }\n\n  addRowVector(vector) {\n    vector = checkRowVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) + vector[j]);\n      }\n    }\n    return this;\n  }\n\n  subRowVector(vector) {\n    vector = checkRowVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) - vector[j]);\n      }\n    }\n    return this;\n  }\n\n  mulRowVector(vector) {\n    vector = checkRowVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) * vector[j]);\n      }\n    }\n    return this;\n  }\n\n  divRowVector(vector) {\n    vector = checkRowVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) / vector[j]);\n      }\n    }\n    return this;\n  }\n\n  addColumnVector(vector) {\n    vector = checkColumnVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) + vector[i]);\n      }\n    }\n    return this;\n  }\n\n  subColumnVector(vector) {\n    vector = checkColumnVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) - vector[i]);\n      }\n    }\n    return this;\n  }\n\n  mulColumnVector(vector) {\n    vector = checkColumnVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) * vector[i]);\n      }\n    }\n    return this;\n  }\n\n  divColumnVector(vector) {\n    vector = checkColumnVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) / vector[i]);\n      }\n    }\n    return this;\n  }\n\n  mulRow(index, value) {\n    checkRowIndex(this, index);\n    for (let i = 0; i < this.columns; i++) {\n      this.set(index, i, this.get(index, i) * value);\n    }\n    return this;\n  }\n\n  mulColumn(index, value) {\n    checkColumnIndex(this, index);\n    for (let i = 0; i < this.rows; i++) {\n      this.set(i, index, this.get(i, index) * value);\n    }\n    return this;\n  }\n\n  max() {\n    let v = this.get(0, 0);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        if (this.get(i, j) > v) {\n          v = this.get(i, j);\n        }\n      }\n    }\n    return v;\n  }\n\n  maxIndex() {\n    let v = this.get(0, 0);\n    let idx = [0, 0];\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        if (this.get(i, j) > v) {\n          v = this.get(i, j);\n          idx[0] = i;\n          idx[1] = j;\n        }\n      }\n    }\n    return idx;\n  }\n\n  min() {\n    let v = this.get(0, 0);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        if (this.get(i, j) < v) {\n          v = this.get(i, j);\n        }\n      }\n    }\n    return v;\n  }\n\n  minIndex() {\n    let v = this.get(0, 0);\n    let idx = [0, 0];\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        if (this.get(i, j) < v) {\n          v = this.get(i, j);\n          idx[0] = i;\n          idx[1] = j;\n        }\n      }\n    }\n    return idx;\n  }\n\n  maxRow(row) {\n    checkRowIndex(this, row);\n    let v = this.get(row, 0);\n    for (let i = 1; i < this.columns; i++) {\n      if (this.get(row, i) > v) {\n        v = this.get(row, i);\n      }\n    }\n    return v;\n  }\n\n  maxRowIndex(row) {\n    checkRowIndex(this, row);\n    let v = this.get(row, 0);\n    let idx = [row, 0];\n    for (let i = 1; i < this.columns; i++) {\n      if (this.get(row, i) > v) {\n        v = this.get(row, i);\n        idx[1] = i;\n      }\n    }\n    return idx;\n  }\n\n  minRow(row) {\n    checkRowIndex(this, row);\n    let v = this.get(row, 0);\n    for (let i = 1; i < this.columns; i++) {\n      if (this.get(row, i) < v) {\n        v = this.get(row, i);\n      }\n    }\n    return v;\n  }\n\n  minRowIndex(row) {\n    checkRowIndex(this, row);\n    let v = this.get(row, 0);\n    let idx = [row, 0];\n    for (let i = 1; i < this.columns; i++) {\n      if (this.get(row, i) < v) {\n        v = this.get(row, i);\n        idx[1] = i;\n      }\n    }\n    return idx;\n  }\n\n  maxColumn(column) {\n    checkColumnIndex(this, column);\n    let v = this.get(0, column);\n    for (let i = 1; i < this.rows; i++) {\n      if (this.get(i, column) > v) {\n        v = this.get(i, column);\n      }\n    }\n    return v;\n  }\n\n  maxColumnIndex(column) {\n    checkColumnIndex(this, column);\n    let v = this.get(0, column);\n    let idx = [0, column];\n    for (let i = 1; i < this.rows; i++) {\n      if (this.get(i, column) > v) {\n        v = this.get(i, column);\n        idx[0] = i;\n      }\n    }\n    return idx;\n  }\n\n  minColumn(column) {\n    checkColumnIndex(this, column);\n    let v = this.get(0, column);\n    for (let i = 1; i < this.rows; i++) {\n      if (this.get(i, column) < v) {\n        v = this.get(i, column);\n      }\n    }\n    return v;\n  }\n\n  minColumnIndex(column) {\n    checkColumnIndex(this, column);\n    let v = this.get(0, column);\n    let idx = [0, column];\n    for (let i = 1; i < this.rows; i++) {\n      if (this.get(i, column) < v) {\n        v = this.get(i, column);\n        idx[0] = i;\n      }\n    }\n    return idx;\n  }\n\n  diag() {\n    let min = Math.min(this.rows, this.columns);\n    let diag = [];\n    for (let i = 0; i < min; i++) {\n      diag.push(this.get(i, i));\n    }\n    return diag;\n  }\n\n  norm(type = 'frobenius') {\n    let result = 0;\n    if (type === 'max') {\n      return this.max();\n    } else if (type === 'frobenius') {\n      for (let i = 0; i < this.rows; i++) {\n        for (let j = 0; j < this.columns; j++) {\n          result = result + this.get(i, j) * this.get(i, j);\n        }\n      }\n      return Math.sqrt(result);\n    } else {\n      throw new RangeError(`unknown norm type: ${type}`);\n    }\n  }\n\n  cumulativeSum() {\n    let sum = 0;\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        sum += this.get(i, j);\n        this.set(i, j, sum);\n      }\n    }\n    return this;\n  }\n\n  dot(vector2) {\n    if (AbstractMatrix.isMatrix(vector2)) vector2 = vector2.to1DArray();\n    let vector1 = this.to1DArray();\n    if (vector1.length !== vector2.length) {\n      throw new RangeError('vectors do not have the same size');\n    }\n    let dot = 0;\n    for (let i = 0; i < vector1.length; i++) {\n      dot += vector1[i] * vector2[i];\n    }\n    return dot;\n  }\n\n  mmul(other) {\n    other = Matrix.checkMatrix(other);\n\n    let m = this.rows;\n    let n = this.columns;\n    let p = other.columns;\n\n    let result = new Matrix(m, p);\n\n    let Bcolj = new Float64Array(n);\n    for (let j = 0; j < p; j++) {\n      for (let k = 0; k < n; k++) {\n        Bcolj[k] = other.get(k, j);\n      }\n\n      for (let i = 0; i < m; i++) {\n        let s = 0;\n        for (let k = 0; k < n; k++) {\n          s += this.get(i, k) * Bcolj[k];\n        }\n\n        result.set(i, j, s);\n      }\n    }\n    return result;\n  }\n\n  strassen2x2(other) {\n    other = Matrix.checkMatrix(other);\n    let result = new Matrix(2, 2);\n    const a11 = this.get(0, 0);\n    const b11 = other.get(0, 0);\n    const a12 = this.get(0, 1);\n    const b12 = other.get(0, 1);\n    const a21 = this.get(1, 0);\n    const b21 = other.get(1, 0);\n    const a22 = this.get(1, 1);\n    const b22 = other.get(1, 1);\n\n    // Compute intermediate values.\n    const m1 = (a11 + a22) * (b11 + b22);\n    const m2 = (a21 + a22) * b11;\n    const m3 = a11 * (b12 - b22);\n    const m4 = a22 * (b21 - b11);\n    const m5 = (a11 + a12) * b22;\n    const m6 = (a21 - a11) * (b11 + b12);\n    const m7 = (a12 - a22) * (b21 + b22);\n\n    // Combine intermediate values into the output.\n    const c00 = m1 + m4 - m5 + m7;\n    const c01 = m3 + m5;\n    const c10 = m2 + m4;\n    const c11 = m1 - m2 + m3 + m6;\n\n    result.set(0, 0, c00);\n    result.set(0, 1, c01);\n    result.set(1, 0, c10);\n    result.set(1, 1, c11);\n    return result;\n  }\n\n  strassen3x3(other) {\n    other = Matrix.checkMatrix(other);\n    let result = new Matrix(3, 3);\n\n    const a00 = this.get(0, 0);\n    const a01 = this.get(0, 1);\n    const a02 = this.get(0, 2);\n    const a10 = this.get(1, 0);\n    const a11 = this.get(1, 1);\n    const a12 = this.get(1, 2);\n    const a20 = this.get(2, 0);\n    const a21 = this.get(2, 1);\n    const a22 = this.get(2, 2);\n\n    const b00 = other.get(0, 0);\n    const b01 = other.get(0, 1);\n    const b02 = other.get(0, 2);\n    const b10 = other.get(1, 0);\n    const b11 = other.get(1, 1);\n    const b12 = other.get(1, 2);\n    const b20 = other.get(2, 0);\n    const b21 = other.get(2, 1);\n    const b22 = other.get(2, 2);\n\n    const m1 = (a00 + a01 + a02 - a10 - a11 - a21 - a22) * b11;\n    const m2 = (a00 - a10) * (-b01 + b11);\n    const m3 = a11 * (-b00 + b01 + b10 - b11 - b12 - b20 + b22);\n    const m4 = (-a00 + a10 + a11) * (b00 - b01 + b11);\n    const m5 = (a10 + a11) * (-b00 + b01);\n    const m6 = a00 * b00;\n    const m7 = (-a00 + a20 + a21) * (b00 - b02 + b12);\n    const m8 = (-a00 + a20) * (b02 - b12);\n    const m9 = (a20 + a21) * (-b00 + b02);\n    const m10 = (a00 + a01 + a02 - a11 - a12 - a20 - a21) * b12;\n    const m11 = a21 * (-b00 + b02 + b10 - b11 - b12 - b20 + b21);\n    const m12 = (-a02 + a21 + a22) * (b11 + b20 - b21);\n    const m13 = (a02 - a22) * (b11 - b21);\n    const m14 = a02 * b20;\n    const m15 = (a21 + a22) * (-b20 + b21);\n    const m16 = (-a02 + a11 + a12) * (b12 + b20 - b22);\n    const m17 = (a02 - a12) * (b12 - b22);\n    const m18 = (a11 + a12) * (-b20 + b22);\n    const m19 = a01 * b10;\n    const m20 = a12 * b21;\n    const m21 = a10 * b02;\n    const m22 = a20 * b01;\n    const m23 = a22 * b22;\n\n    const c00 = m6 + m14 + m19;\n    const c01 = m1 + m4 + m5 + m6 + m12 + m14 + m15;\n    const c02 = m6 + m7 + m9 + m10 + m14 + m16 + m18;\n    const c10 = m2 + m3 + m4 + m6 + m14 + m16 + m17;\n    const c11 = m2 + m4 + m5 + m6 + m20;\n    const c12 = m14 + m16 + m17 + m18 + m21;\n    const c20 = m6 + m7 + m8 + m11 + m12 + m13 + m14;\n    const c21 = m12 + m13 + m14 + m15 + m22;\n    const c22 = m6 + m7 + m8 + m9 + m23;\n\n    result.set(0, 0, c00);\n    result.set(0, 1, c01);\n    result.set(0, 2, c02);\n    result.set(1, 0, c10);\n    result.set(1, 1, c11);\n    result.set(1, 2, c12);\n    result.set(2, 0, c20);\n    result.set(2, 1, c21);\n    result.set(2, 2, c22);\n    return result;\n  }\n\n  mmulStrassen(y) {\n    y = Matrix.checkMatrix(y);\n    let x = this.clone();\n    let r1 = x.rows;\n    let c1 = x.columns;\n    let r2 = y.rows;\n    let c2 = y.columns;\n    if (c1 !== r2) {\n      // eslint-disable-next-line no-console\n      console.warn(\n        `Multiplying ${r1} x ${c1} and ${r2} x ${c2} matrix: dimensions do not match.`,\n      );\n    }\n\n    // Put a matrix into the top left of a matrix of zeros.\n    // `rows` and `cols` are the dimensions of the output matrix.\n    function embed(mat, rows, cols) {\n      let r = mat.rows;\n      let c = mat.columns;\n      if (r === rows && c === cols) {\n        return mat;\n      } else {\n        let resultat = AbstractMatrix.zeros(rows, cols);\n        resultat = resultat.setSubMatrix(mat, 0, 0);\n        return resultat;\n      }\n    }\n\n    // Make sure both matrices are the same size.\n    // This is exclusively for simplicity:\n    // this algorithm can be implemented with matrices of different sizes.\n\n    let r = Math.max(r1, r2);\n    let c = Math.max(c1, c2);\n    x = embed(x, r, c);\n    y = embed(y, r, c);\n\n    // Our recursive multiplication function.\n    function blockMult(a, b, rows, cols) {\n      // For small matrices, resort to naive multiplication.\n      if (rows <= 512 || cols <= 512) {\n        return a.mmul(b); // a is equivalent to this\n      }\n\n      // Apply dynamic padding.\n      if (rows % 2 === 1 && cols % 2 === 1) {\n        a = embed(a, rows + 1, cols + 1);\n        b = embed(b, rows + 1, cols + 1);\n      } else if (rows % 2 === 1) {\n        a = embed(a, rows + 1, cols);\n        b = embed(b, rows + 1, cols);\n      } else if (cols % 2 === 1) {\n        a = embed(a, rows, cols + 1);\n        b = embed(b, rows, cols + 1);\n      }\n\n      let halfRows = parseInt(a.rows / 2, 10);\n      let halfCols = parseInt(a.columns / 2, 10);\n      // Subdivide input matrices.\n      let a11 = a.subMatrix(0, halfRows - 1, 0, halfCols - 1);\n      let b11 = b.subMatrix(0, halfRows - 1, 0, halfCols - 1);\n\n      let a12 = a.subMatrix(0, halfRows - 1, halfCols, a.columns - 1);\n      let b12 = b.subMatrix(0, halfRows - 1, halfCols, b.columns - 1);\n\n      let a21 = a.subMatrix(halfRows, a.rows - 1, 0, halfCols - 1);\n      let b21 = b.subMatrix(halfRows, b.rows - 1, 0, halfCols - 1);\n\n      let a22 = a.subMatrix(halfRows, a.rows - 1, halfCols, a.columns - 1);\n      let b22 = b.subMatrix(halfRows, b.rows - 1, halfCols, b.columns - 1);\n\n      // Compute intermediate values.\n      let m1 = blockMult(\n        AbstractMatrix.add(a11, a22),\n        AbstractMatrix.add(b11, b22),\n        halfRows,\n        halfCols,\n      );\n      let m2 = blockMult(AbstractMatrix.add(a21, a22), b11, halfRows, halfCols);\n      let m3 = blockMult(a11, AbstractMatrix.sub(b12, b22), halfRows, halfCols);\n      let m4 = blockMult(a22, AbstractMatrix.sub(b21, b11), halfRows, halfCols);\n      let m5 = blockMult(AbstractMatrix.add(a11, a12), b22, halfRows, halfCols);\n      let m6 = blockMult(\n        AbstractMatrix.sub(a21, a11),\n        AbstractMatrix.add(b11, b12),\n        halfRows,\n        halfCols,\n      );\n      let m7 = blockMult(\n        AbstractMatrix.sub(a12, a22),\n        AbstractMatrix.add(b21, b22),\n        halfRows,\n        halfCols,\n      );\n\n      // Combine intermediate values into the output.\n      let c11 = AbstractMatrix.add(m1, m4);\n      c11.sub(m5);\n      c11.add(m7);\n      let c12 = AbstractMatrix.add(m3, m5);\n      let c21 = AbstractMatrix.add(m2, m4);\n      let c22 = AbstractMatrix.sub(m1, m2);\n      c22.add(m3);\n      c22.add(m6);\n\n      // Crop output to the desired size (undo dynamic padding).\n      let resultat = AbstractMatrix.zeros(2 * c11.rows, 2 * c11.columns);\n      resultat = resultat.setSubMatrix(c11, 0, 0);\n      resultat = resultat.setSubMatrix(c12, c11.rows, 0);\n      resultat = resultat.setSubMatrix(c21, 0, c11.columns);\n      resultat = resultat.setSubMatrix(c22, c11.rows, c11.columns);\n      return resultat.subMatrix(0, rows - 1, 0, cols - 1);\n    }\n    return blockMult(x, y, r, c);\n  }\n\n  scaleRows(options = {}) {\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { min = 0, max = 1 } = options;\n    if (!Number.isFinite(min)) throw new TypeError('min must be a number');\n    if (!Number.isFinite(max)) throw new TypeError('max must be a number');\n    if (min >= max) throw new RangeError('min must be smaller than max');\n    let newMatrix = new Matrix(this.rows, this.columns);\n    for (let i = 0; i < this.rows; i++) {\n      const row = this.getRow(i);\n      rescale(row, { min, max, output: row });\n      newMatrix.setRow(i, row);\n    }\n    return newMatrix;\n  }\n\n  scaleColumns(options = {}) {\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { min = 0, max = 1 } = options;\n    if (!Number.isFinite(min)) throw new TypeError('min must be a number');\n    if (!Number.isFinite(max)) throw new TypeError('max must be a number');\n    if (min >= max) throw new RangeError('min must be smaller than max');\n    let newMatrix = new Matrix(this.rows, this.columns);\n    for (let i = 0; i < this.columns; i++) {\n      const column = this.getColumn(i);\n      rescale(column, {\n        min: min,\n        max: max,\n        output: column,\n      });\n      newMatrix.setColumn(i, column);\n    }\n    return newMatrix;\n  }\n\n  flipRows() {\n    const middle = Math.ceil(this.columns / 2);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < middle; j++) {\n        let first = this.get(i, j);\n        let last = this.get(i, this.columns - 1 - j);\n        this.set(i, j, last);\n        this.set(i, this.columns - 1 - j, first);\n      }\n    }\n    return this;\n  }\n\n  flipColumns() {\n    const middle = Math.ceil(this.rows / 2);\n    for (let j = 0; j < this.columns; j++) {\n      for (let i = 0; i < middle; i++) {\n        let first = this.get(i, j);\n        let last = this.get(this.rows - 1 - i, j);\n        this.set(i, j, last);\n        this.set(this.rows - 1 - i, j, first);\n      }\n    }\n    return this;\n  }\n\n  kroneckerProduct(other) {\n    other = Matrix.checkMatrix(other);\n\n    let m = this.rows;\n    let n = this.columns;\n    let p = other.rows;\n    let q = other.columns;\n\n    let result = new Matrix(m * p, n * q);\n    for (let i = 0; i < m; i++) {\n      for (let j = 0; j < n; j++) {\n        for (let k = 0; k < p; k++) {\n          for (let l = 0; l < q; l++) {\n            result.set(p * i + k, q * j + l, this.get(i, j) * other.get(k, l));\n          }\n        }\n      }\n    }\n    return result;\n  }\n\n  transpose() {\n    let result = new Matrix(this.columns, this.rows);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        result.set(j, i, this.get(i, j));\n      }\n    }\n    return result;\n  }\n\n  sortRows(compareFunction = compareNumbers) {\n    for (let i = 0; i < this.rows; i++) {\n      this.setRow(i, this.getRow(i).sort(compareFunction));\n    }\n    return this;\n  }\n\n  sortColumns(compareFunction = compareNumbers) {\n    for (let i = 0; i < this.columns; i++) {\n      this.setColumn(i, this.getColumn(i).sort(compareFunction));\n    }\n    return this;\n  }\n\n  subMatrix(startRow, endRow, startColumn, endColumn) {\n    checkRange(this, startRow, endRow, startColumn, endColumn);\n    let newMatrix = new Matrix(\n      endRow - startRow + 1,\n      endColumn - startColumn + 1,\n    );\n    for (let i = startRow; i <= endRow; i++) {\n      for (let j = startColumn; j <= endColumn; j++) {\n        newMatrix.set(i - startRow, j - startColumn, this.get(i, j));\n      }\n    }\n    return newMatrix;\n  }\n\n  subMatrixRow(indices, startColumn, endColumn) {\n    if (startColumn === undefined) startColumn = 0;\n    if (endColumn === undefined) endColumn = this.columns - 1;\n    if (\n      startColumn > endColumn ||\n      startColumn < 0 ||\n      startColumn >= this.columns ||\n      endColumn < 0 ||\n      endColumn >= this.columns\n    ) {\n      throw new RangeError('Argument out of range');\n    }\n\n    let newMatrix = new Matrix(indices.length, endColumn - startColumn + 1);\n    for (let i = 0; i < indices.length; i++) {\n      for (let j = startColumn; j <= endColumn; j++) {\n        if (indices[i] < 0 || indices[i] >= this.rows) {\n          throw new RangeError(`Row index out of range: ${indices[i]}`);\n        }\n        newMatrix.set(i, j - startColumn, this.get(indices[i], j));\n      }\n    }\n    return newMatrix;\n  }\n\n  subMatrixColumn(indices, startRow, endRow) {\n    if (startRow === undefined) startRow = 0;\n    if (endRow === undefined) endRow = this.rows - 1;\n    if (\n      startRow > endRow ||\n      startRow < 0 ||\n      startRow >= this.rows ||\n      endRow < 0 ||\n      endRow >= this.rows\n    ) {\n      throw new RangeError('Argument out of range');\n    }\n\n    let newMatrix = new Matrix(endRow - startRow + 1, indices.length);\n    for (let i = 0; i < indices.length; i++) {\n      for (let j = startRow; j <= endRow; j++) {\n        if (indices[i] < 0 || indices[i] >= this.columns) {\n          throw new RangeError(`Column index out of range: ${indices[i]}`);\n        }\n        newMatrix.set(j - startRow, i, this.get(j, indices[i]));\n      }\n    }\n    return newMatrix;\n  }\n\n  setSubMatrix(matrix, startRow, startColumn) {\n    matrix = Matrix.checkMatrix(matrix);\n    let endRow = startRow + matrix.rows - 1;\n    let endColumn = startColumn + matrix.columns - 1;\n    checkRange(this, startRow, endRow, startColumn, endColumn);\n    for (let i = 0; i < matrix.rows; i++) {\n      for (let j = 0; j < matrix.columns; j++) {\n        this.set(startRow + i, startColumn + j, matrix.get(i, j));\n      }\n    }\n    return this;\n  }\n\n  selection(rowIndices, columnIndices) {\n    let indices = checkIndices(this, rowIndices, columnIndices);\n    let newMatrix = new Matrix(rowIndices.length, columnIndices.length);\n    for (let i = 0; i < indices.row.length; i++) {\n      let rowIndex = indices.row[i];\n      for (let j = 0; j < indices.column.length; j++) {\n        let columnIndex = indices.column[j];\n        newMatrix.set(i, j, this.get(rowIndex, columnIndex));\n      }\n    }\n    return newMatrix;\n  }\n\n  trace() {\n    let min = Math.min(this.rows, this.columns);\n    let trace = 0;\n    for (let i = 0; i < min; i++) {\n      trace += this.get(i, i);\n    }\n    return trace;\n  }\n\n  clone() {\n    let newMatrix = new Matrix(this.rows, this.columns);\n    for (let row = 0; row < this.rows; row++) {\n      for (let column = 0; column < this.columns; column++) {\n        newMatrix.set(row, column, this.get(row, column));\n      }\n    }\n    return newMatrix;\n  }\n\n  sum(by) {\n    switch (by) {\n      case 'row':\n        return sumByRow(this);\n      case 'column':\n        return sumByColumn(this);\n      case undefined:\n        return sumAll(this);\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  product(by) {\n    switch (by) {\n      case 'row':\n        return productByRow(this);\n      case 'column':\n        return productByColumn(this);\n      case undefined:\n        return productAll(this);\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  mean(by) {\n    const sum = this.sum(by);\n    switch (by) {\n      case 'row': {\n        for (let i = 0; i < this.rows; i++) {\n          sum[i] /= this.columns;\n        }\n        return sum;\n      }\n      case 'column': {\n        for (let i = 0; i < this.columns; i++) {\n          sum[i] /= this.rows;\n        }\n        return sum;\n      }\n      case undefined:\n        return sum / this.size;\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  variance(by, options = {}) {\n    if (typeof by === 'object') {\n      options = by;\n      by = undefined;\n    }\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { unbiased = true, mean = this.mean(by) } = options;\n    if (typeof unbiased !== 'boolean') {\n      throw new TypeError('unbiased must be a boolean');\n    }\n    switch (by) {\n      case 'row': {\n        if (!Array.isArray(mean)) {\n          throw new TypeError('mean must be an array');\n        }\n        return varianceByRow(this, unbiased, mean);\n      }\n      case 'column': {\n        if (!Array.isArray(mean)) {\n          throw new TypeError('mean must be an array');\n        }\n        return varianceByColumn(this, unbiased, mean);\n      }\n      case undefined: {\n        if (typeof mean !== 'number') {\n          throw new TypeError('mean must be a number');\n        }\n        return varianceAll(this, unbiased, mean);\n      }\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  standardDeviation(by, options) {\n    if (typeof by === 'object') {\n      options = by;\n      by = undefined;\n    }\n    const variance = this.variance(by, options);\n    if (by === undefined) {\n      return Math.sqrt(variance);\n    } else {\n      for (let i = 0; i < variance.length; i++) {\n        variance[i] = Math.sqrt(variance[i]);\n      }\n      return variance;\n    }\n  }\n\n  center(by, options = {}) {\n    if (typeof by === 'object') {\n      options = by;\n      by = undefined;\n    }\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { center = this.mean(by) } = options;\n    switch (by) {\n      case 'row': {\n        if (!Array.isArray(center)) {\n          throw new TypeError('center must be an array');\n        }\n        centerByRow(this, center);\n        return this;\n      }\n      case 'column': {\n        if (!Array.isArray(center)) {\n          throw new TypeError('center must be an array');\n        }\n        centerByColumn(this, center);\n        return this;\n      }\n      case undefined: {\n        if (typeof center !== 'number') {\n          throw new TypeError('center must be a number');\n        }\n        centerAll(this, center);\n        return this;\n      }\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  scale(by, options = {}) {\n    if (typeof by === 'object') {\n      options = by;\n      by = undefined;\n    }\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    let scale = options.scale;\n    switch (by) {\n      case 'row': {\n        if (scale === undefined) {\n          scale = getScaleByRow(this);\n        } else if (!Array.isArray(scale)) {\n          throw new TypeError('scale must be an array');\n        }\n        scaleByRow(this, scale);\n        return this;\n      }\n      case 'column': {\n        if (scale === undefined) {\n          scale = getScaleByColumn(this);\n        } else if (!Array.isArray(scale)) {\n          throw new TypeError('scale must be an array');\n        }\n        scaleByColumn(this, scale);\n        return this;\n      }\n      case undefined: {\n        if (scale === undefined) {\n          scale = getScaleAll(this);\n        } else if (typeof scale !== 'number') {\n          throw new TypeError('scale must be a number');\n        }\n        scaleAll(this, scale);\n        return this;\n      }\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n}\n\nAbstractMatrix.prototype.klass = 'Matrix';\nif (typeof Symbol !== 'undefined') {\n  AbstractMatrix.prototype[\n    Symbol.for('nodejs.util.inspect.custom')\n  ] = inspectMatrix;\n}\n\nfunction compareNumbers(a, b) {\n  return a - b;\n}\n\n// Synonyms\nAbstractMatrix.random = AbstractMatrix.rand;\nAbstractMatrix.randomInt = AbstractMatrix.randInt;\nAbstractMatrix.diagonal = AbstractMatrix.diag;\nAbstractMatrix.prototype.diagonal = AbstractMatrix.prototype.diag;\nAbstractMatrix.identity = AbstractMatrix.eye;\nAbstractMatrix.prototype.negate = AbstractMatrix.prototype.neg;\nAbstractMatrix.prototype.tensorProduct =\n  AbstractMatrix.prototype.kroneckerProduct;\n\nexport default class Matrix extends AbstractMatrix {\n  constructor(nRows, nColumns) {\n    super();\n    if (Matrix.isMatrix(nRows)) {\n      return nRows.clone();\n    } else if (Number.isInteger(nRows) && nRows > 0) {\n      // Create an empty matrix\n      this.data = [];\n      if (Number.isInteger(nColumns) && nColumns > 0) {\n        for (let i = 0; i < nRows; i++) {\n          this.data.push(new Float64Array(nColumns));\n        }\n      } else {\n        throw new TypeError('nColumns must be a positive integer');\n      }\n    } else if (Array.isArray(nRows)) {\n      // Copy the values from the 2D array\n      const arrayData = nRows;\n      nRows = arrayData.length;\n      nColumns = arrayData[0].length;\n      if (typeof nColumns !== 'number' || nColumns === 0) {\n        throw new TypeError(\n          'Data must be a 2D array with at least one element',\n        );\n      }\n      this.data = [];\n      for (let i = 0; i < nRows; i++) {\n        if (arrayData[i].length !== nColumns) {\n          throw new RangeError('Inconsistent array dimensions');\n        }\n        this.data.push(Float64Array.from(arrayData[i]));\n      }\n    } else {\n      throw new TypeError(\n        'First argument must be a positive number or an array',\n      );\n    }\n    this.rows = nRows;\n    this.columns = nColumns;\n    return this;\n  }\n\n  set(rowIndex, columnIndex, value) {\n    this.data[rowIndex][columnIndex] = value;\n    return this;\n  }\n\n  get(rowIndex, columnIndex) {\n    return this.data[rowIndex][columnIndex];\n  }\n\n  removeRow(index) {\n    checkRowIndex(this, index);\n    if (this.rows === 1) {\n      throw new RangeError('A matrix cannot have less than one row');\n    }\n    this.data.splice(index, 1);\n    this.rows -= 1;\n    return this;\n  }\n\n  addRow(index, array) {\n    if (array === undefined) {\n      array = index;\n      index = this.rows;\n    }\n    checkRowIndex(this, index, true);\n    array = Float64Array.from(checkRowVector(this, array, true));\n    this.data.splice(index, 0, array);\n    this.rows += 1;\n    return this;\n  }\n\n  removeColumn(index) {\n    checkColumnIndex(this, index);\n    if (this.columns === 1) {\n      throw new RangeError('A matrix cannot have less than one column');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      const newRow = new Float64Array(this.columns - 1);\n      for (let j = 0; j < index; j++) {\n        newRow[j] = this.data[i][j];\n      }\n      for (let j = index + 1; j < this.columns; j++) {\n        newRow[j - 1] = this.data[i][j];\n      }\n      this.data[i] = newRow;\n    }\n    this.columns -= 1;\n    return this;\n  }\n\n  addColumn(index, array) {\n    if (typeof array === 'undefined') {\n      array = index;\n      index = this.columns;\n    }\n    checkColumnIndex(this, index, true);\n    array = checkColumnVector(this, array);\n    for (let i = 0; i < this.rows; i++) {\n      const newRow = new Float64Array(this.columns + 1);\n      let j = 0;\n      for (; j < index; j++) {\n        newRow[j] = this.data[i][j];\n      }\n      newRow[j++] = array[i];\n      for (; j < this.columns + 1; j++) {\n        newRow[j] = this.data[i][j - 1];\n      }\n      this.data[i] = newRow;\n    }\n    this.columns += 1;\n    return this;\n  }\n}\n\ninstallMathOperations(AbstractMatrix, Matrix);\n","import { AbstractMatrix } from '../matrix';\n\nexport default class BaseView extends AbstractMatrix {\n  constructor(matrix, rows, columns) {\n    super();\n    this.matrix = matrix;\n    this.rows = rows;\n    this.columns = columns;\n  }\n}\n","import { checkColumnIndex } from '../util';\n\nimport BaseView from './base';\n\nexport default class MatrixColumnView extends BaseView {\n  constructor(matrix, column) {\n    checkColumnIndex(matrix, column);\n    super(matrix, matrix.rows, 1);\n    this.column = column;\n  }\n\n  set(rowIndex, columnIndex, value) {\n    this.matrix.set(rowIndex, this.column, value);\n    return this;\n  }\n\n  get(rowIndex) {\n    return this.matrix.get(rowIndex, this.column);\n  }\n}\n","import { checkColumnIndices } from '../util';\r\n\r\nimport BaseView from './base';\r\n\r\nexport default class MatrixColumnSelectionView extends BaseView {\r\n  constructor(matrix, columnIndices) {\r\n    columnIndices = checkColumnIndices(matrix, columnIndices);\r\n    super(matrix, matrix.rows, columnIndices.length);\r\n    this.columnIndices = columnIndices;\r\n  }\r\n\r\n  set(rowIndex, columnIndex, value) {\r\n    this.matrix.set(rowIndex, this.columnIndices[columnIndex], value);\r\n    return this;\r\n  }\r\n\r\n  get(rowIndex, columnIndex) {\r\n    return this.matrix.get(rowIndex, this.columnIndices[columnIndex]);\r\n  }\r\n}\r\n","import BaseView from './base';\r\n\r\nexport default class MatrixFlipColumnView extends BaseView {\r\n  constructor(matrix) {\r\n    super(matrix, matrix.rows, matrix.columns);\r\n  }\r\n\r\n  set(rowIndex, columnIndex, value) {\r\n    this.matrix.set(rowIndex, this.columns - columnIndex - 1, value);\r\n    return this;\r\n  }\r\n\r\n  get(rowIndex, columnIndex) {\r\n    return this.matrix.get(rowIndex, this.columns - columnIndex - 1);\r\n  }\r\n}\r\n","import BaseView from './base';\r\n\r\nexport default class MatrixFlipRowView extends BaseView {\r\n  constructor(matrix) {\r\n    super(matrix, matrix.rows, matrix.columns);\r\n  }\r\n\r\n  set(rowIndex, columnIndex, value) {\r\n    this.matrix.set(this.rows - rowIndex - 1, columnIndex, value);\r\n    return this;\r\n  }\r\n\r\n  get(rowIndex, columnIndex) {\r\n    return this.matrix.get(this.rows - rowIndex - 1, columnIndex);\r\n  }\r\n}\r\n","import { checkRowIndex } from '../util';\n\nimport BaseView from './base';\n\nexport default class MatrixRowView extends BaseView {\n  constructor(matrix, row) {\n    checkRowIndex(matrix, row);\n    super(matrix, 1, matrix.columns);\n    this.row = row;\n  }\n\n  set(rowIndex, columnIndex, value) {\n    this.matrix.set(this.row, columnIndex, value);\n    return this;\n  }\n\n  get(rowIndex, columnIndex) {\n    return this.matrix.get(this.row, columnIndex);\n  }\n}\n","import { checkRowIndices } from '../util';\r\n\r\nimport BaseView from './base';\r\n\r\nexport default class MatrixRowSelectionView extends BaseView {\r\n  constructor(matrix, rowIndices) {\r\n    rowIndices = checkRowIndices(matrix, rowIndices);\r\n    super(matrix, rowIndices.length, matrix.columns);\r\n    this.rowIndices = rowIndices;\r\n  }\r\n\r\n  set(rowIndex, columnIndex, value) {\r\n    this.matrix.set(this.rowIndices[rowIndex], columnIndex, value);\r\n    return this;\r\n  }\r\n\r\n  get(rowIndex, columnIndex) {\r\n    return this.matrix.get(this.rowIndices[rowIndex], columnIndex);\r\n  }\r\n}\r\n","import { checkIndices } from '../util';\n\nimport BaseView from './base';\n\nexport default class MatrixSelectionView extends BaseView {\n  constructor(matrix, rowIndices, columnIndices) {\n    let indices = checkIndices(matrix, rowIndices, columnIndices);\n    super(matrix, indices.row.length, indices.column.length);\n    this.rowIndices = indices.row;\n    this.columnIndices = indices.column;\n  }\n\n  set(rowIndex, columnIndex, value) {\n    this.matrix.set(\n      this.rowIndices[rowIndex],\n      this.columnIndices[columnIndex],\n      value,\n    );\n    return this;\n  }\n\n  get(rowIndex, columnIndex) {\n    return this.matrix.get(\n      this.rowIndices[rowIndex],\n      this.columnIndices[columnIndex],\n    );\n  }\n}\n","import { checkRange } from '../util';\n\nimport BaseView from './base';\n\nexport default class MatrixSubView extends BaseView {\n  constructor(matrix, startRow, endRow, startColumn, endColumn) {\n    checkRange(matrix, startRow, endRow, startColumn, endColumn);\n    super(matrix, endRow - startRow + 1, endColumn - startColumn + 1);\n    this.startRow = startRow;\n    this.startColumn = startColumn;\n  }\n\n  set(rowIndex, columnIndex, value) {\n    this.matrix.set(\n      this.startRow + rowIndex,\n      this.startColumn + columnIndex,\n      value,\n    );\n    return this;\n  }\n\n  get(rowIndex, columnIndex) {\n    return this.matrix.get(\n      this.startRow + rowIndex,\n      this.startColumn + columnIndex,\n    );\n  }\n}\n","import BaseView from './base';\r\n\r\nexport default class MatrixTransposeView extends BaseView {\r\n  constructor(matrix) {\r\n    super(matrix, matrix.columns, matrix.rows);\r\n  }\r\n\r\n  set(rowIndex, columnIndex, value) {\r\n    this.matrix.set(columnIndex, rowIndex, value);\r\n    return this;\r\n  }\r\n\r\n  get(rowIndex, columnIndex) {\r\n    return this.matrix.get(columnIndex, rowIndex);\r\n  }\r\n}\r\n","import { AbstractMatrix } from '../matrix';\n\nexport default class WrapperMatrix1D extends AbstractMatrix {\n  constructor(data, options = {}) {\n    const { rows = 1 } = options;\n\n    if (data.length % rows !== 0) {\n      throw new Error('the data length is not divisible by the number of rows');\n    }\n    super();\n    this.rows = rows;\n    this.columns = data.length / rows;\n    this.data = data;\n  }\n\n  set(rowIndex, columnIndex, value) {\n    let index = this._calculateIndex(rowIndex, columnIndex);\n    this.data[index] = value;\n    return this;\n  }\n\n  get(rowIndex, columnIndex) {\n    let index = this._calculateIndex(rowIndex, columnIndex);\n    return this.data[index];\n  }\n\n  _calculateIndex(row, column) {\n    return row * this.columns + column;\n  }\n}\n","import { AbstractMatrix } from '../matrix';\n\nexport default class WrapperMatrix2D extends AbstractMatrix {\n  constructor(data) {\n    super();\n    this.data = data;\n    this.rows = data.length;\n    this.columns = data[0].length;\n  }\n\n  set(rowIndex, columnIndex, value) {\n    this.data[rowIndex][columnIndex] = value;\n    return this;\n  }\n\n  get(rowIndex, columnIndex) {\n    return this.data[rowIndex][columnIndex];\n  }\n}\n","import WrapperMatrix1D from './WrapperMatrix1D';\nimport WrapperMatrix2D from './WrapperMatrix2D';\n\nexport function wrap(array, options) {\n  if (Array.isArray(array)) {\n    if (array[0] && Array.isArray(array[0])) {\n      return new WrapperMatrix2D(array);\n    } else {\n      return new WrapperMatrix1D(array, options);\n    }\n  } else {\n    throw new Error('the argument is not an array');\n  }\n}\n","import Matrix from '../matrix';\nimport WrapperMatrix2D from '../wrap/WrapperMatrix2D';\n\nexport default class LuDecomposition {\n  constructor(matrix) {\n    matrix = WrapperMatrix2D.checkMatrix(matrix);\n\n    let lu = matrix.clone();\n    let rows = lu.rows;\n    let columns = lu.columns;\n    let pivotVector = new Float64Array(rows);\n    let pivotSign = 1;\n    let i, j, k, p, s, t, v;\n    let LUcolj, kmax;\n\n    for (i = 0; i < rows; i++) {\n      pivotVector[i] = i;\n    }\n\n    LUcolj = new Float64Array(rows);\n\n    for (j = 0; j < columns; j++) {\n      for (i = 0; i < rows; i++) {\n        LUcolj[i] = lu.get(i, j);\n      }\n\n      for (i = 0; i < rows; i++) {\n        kmax = Math.min(i, j);\n        s = 0;\n        for (k = 0; k < kmax; k++) {\n          s += lu.get(i, k) * LUcolj[k];\n        }\n        LUcolj[i] -= s;\n        lu.set(i, j, LUcolj[i]);\n      }\n\n      p = j;\n      for (i = j + 1; i < rows; i++) {\n        if (Math.abs(LUcolj[i]) > Math.abs(LUcolj[p])) {\n          p = i;\n        }\n      }\n\n      if (p !== j) {\n        for (k = 0; k < columns; k++) {\n          t = lu.get(p, k);\n          lu.set(p, k, lu.get(j, k));\n          lu.set(j, k, t);\n        }\n\n        v = pivotVector[p];\n        pivotVector[p] = pivotVector[j];\n        pivotVector[j] = v;\n\n        pivotSign = -pivotSign;\n      }\n\n      if (j < rows && lu.get(j, j) !== 0) {\n        for (i = j + 1; i < rows; i++) {\n          lu.set(i, j, lu.get(i, j) / lu.get(j, j));\n        }\n      }\n    }\n\n    this.LU = lu;\n    this.pivotVector = pivotVector;\n    this.pivotSign = pivotSign;\n  }\n\n  isSingular() {\n    let data = this.LU;\n    let col = data.columns;\n    for (let j = 0; j < col; j++) {\n      if (data.get(j, j) === 0) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  solve(value) {\n    value = Matrix.checkMatrix(value);\n\n    let lu = this.LU;\n    let rows = lu.rows;\n\n    if (rows !== value.rows) {\n      throw new Error('Invalid matrix dimensions');\n    }\n    if (this.isSingular()) {\n      throw new Error('LU matrix is singular');\n    }\n\n    let count = value.columns;\n    let X = value.subMatrixRow(this.pivotVector, 0, count - 1);\n    let columns = lu.columns;\n    let i, j, k;\n\n    for (k = 0; k < columns; k++) {\n      for (i = k + 1; i < columns; i++) {\n        for (j = 0; j < count; j++) {\n          X.set(i, j, X.get(i, j) - X.get(k, j) * lu.get(i, k));\n        }\n      }\n    }\n    for (k = columns - 1; k >= 0; k--) {\n      for (j = 0; j < count; j++) {\n        X.set(k, j, X.get(k, j) / lu.get(k, k));\n      }\n      for (i = 0; i < k; i++) {\n        for (j = 0; j < count; j++) {\n          X.set(i, j, X.get(i, j) - X.get(k, j) * lu.get(i, k));\n        }\n      }\n    }\n    return X;\n  }\n\n  get determinant() {\n    let data = this.LU;\n    if (!data.isSquare()) {\n      throw new Error('Matrix must be square');\n    }\n    let determinant = this.pivotSign;\n    let col = data.columns;\n    for (let j = 0; j < col; j++) {\n      determinant *= data.get(j, j);\n    }\n    return determinant;\n  }\n\n  get lowerTriangularMatrix() {\n    let data = this.LU;\n    let rows = data.rows;\n    let columns = data.columns;\n    let X = new Matrix(rows, columns);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < columns; j++) {\n        if (i > j) {\n          X.set(i, j, data.get(i, j));\n        } else if (i === j) {\n          X.set(i, j, 1);\n        } else {\n          X.set(i, j, 0);\n        }\n      }\n    }\n    return X;\n  }\n\n  get upperTriangularMatrix() {\n    let data = this.LU;\n    let rows = data.rows;\n    let columns = data.columns;\n    let X = new Matrix(rows, columns);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < columns; j++) {\n        if (i <= j) {\n          X.set(i, j, data.get(i, j));\n        } else {\n          X.set(i, j, 0);\n        }\n      }\n    }\n    return X;\n  }\n\n  get pivotPermutationVector() {\n    return Array.from(this.pivotVector);\n  }\n}\n","export function hypotenuse(a, b) {\n  let r = 0;\n  if (Math.abs(a) > Math.abs(b)) {\n    r = b / a;\n    return Math.abs(a) * Math.sqrt(1 + r * r);\n  }\n  if (b !== 0) {\n    r = a / b;\n    return Math.abs(b) * Math.sqrt(1 + r * r);\n  }\n  return 0;\n}\n","import Matrix from '../matrix';\nimport WrapperMatrix2D from '../wrap/WrapperMatrix2D';\n\nimport { hypotenuse } from './util';\n\nexport default class QrDecomposition {\n  constructor(value) {\n    value = WrapperMatrix2D.checkMatrix(value);\n\n    let qr = value.clone();\n    let m = value.rows;\n    let n = value.columns;\n    let rdiag = new Float64Array(n);\n    let i, j, k, s;\n\n    for (k = 0; k < n; k++) {\n      let nrm = 0;\n      for (i = k; i < m; i++) {\n        nrm = hypotenuse(nrm, qr.get(i, k));\n      }\n      if (nrm !== 0) {\n        if (qr.get(k, k) < 0) {\n          nrm = -nrm;\n        }\n        for (i = k; i < m; i++) {\n          qr.set(i, k, qr.get(i, k) / nrm);\n        }\n        qr.set(k, k, qr.get(k, k) + 1);\n        for (j = k + 1; j < n; j++) {\n          s = 0;\n          for (i = k; i < m; i++) {\n            s += qr.get(i, k) * qr.get(i, j);\n          }\n          s = -s / qr.get(k, k);\n          for (i = k; i < m; i++) {\n            qr.set(i, j, qr.get(i, j) + s * qr.get(i, k));\n          }\n        }\n      }\n      rdiag[k] = -nrm;\n    }\n\n    this.QR = qr;\n    this.Rdiag = rdiag;\n  }\n\n  solve(value) {\n    value = Matrix.checkMatrix(value);\n\n    let qr = this.QR;\n    let m = qr.rows;\n\n    if (value.rows !== m) {\n      throw new Error('Matrix row dimensions must agree');\n    }\n    if (!this.isFullRank()) {\n      throw new Error('Matrix is rank deficient');\n    }\n\n    let count = value.columns;\n    let X = value.clone();\n    let n = qr.columns;\n    let i, j, k, s;\n\n    for (k = 0; k < n; k++) {\n      for (j = 0; j < count; j++) {\n        s = 0;\n        for (i = k; i < m; i++) {\n          s += qr.get(i, k) * X.get(i, j);\n        }\n        s = -s / qr.get(k, k);\n        for (i = k; i < m; i++) {\n          X.set(i, j, X.get(i, j) + s * qr.get(i, k));\n        }\n      }\n    }\n    for (k = n - 1; k >= 0; k--) {\n      for (j = 0; j < count; j++) {\n        X.set(k, j, X.get(k, j) / this.Rdiag[k]);\n      }\n      for (i = 0; i < k; i++) {\n        for (j = 0; j < count; j++) {\n          X.set(i, j, X.get(i, j) - X.get(k, j) * qr.get(i, k));\n        }\n      }\n    }\n\n    return X.subMatrix(0, n - 1, 0, count - 1);\n  }\n\n  isFullRank() {\n    let columns = this.QR.columns;\n    for (let i = 0; i < columns; i++) {\n      if (this.Rdiag[i] === 0) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  get upperTriangularMatrix() {\n    let qr = this.QR;\n    let n = qr.columns;\n    let X = new Matrix(n, n);\n    let i, j;\n    for (i = 0; i < n; i++) {\n      for (j = 0; j < n; j++) {\n        if (i < j) {\n          X.set(i, j, qr.get(i, j));\n        } else if (i === j) {\n          X.set(i, j, this.Rdiag[i]);\n        } else {\n          X.set(i, j, 0);\n        }\n      }\n    }\n    return X;\n  }\n\n  get orthogonalMatrix() {\n    let qr = this.QR;\n    let rows = qr.rows;\n    let columns = qr.columns;\n    let X = new Matrix(rows, columns);\n    let i, j, k, s;\n\n    for (k = columns - 1; k >= 0; k--) {\n      for (i = 0; i < rows; i++) {\n        X.set(i, k, 0);\n      }\n      X.set(k, k, 1);\n      for (j = k; j < columns; j++) {\n        if (qr.get(k, k) !== 0) {\n          s = 0;\n          for (i = k; i < rows; i++) {\n            s += qr.get(i, k) * X.get(i, j);\n          }\n\n          s = -s / qr[k][k];\n\n          for (i = k; i < rows; i++) {\n            X.set(i, j, X.get(i, j) + s * qr.get(i, k));\n          }\n        }\n      }\n    }\n    return X;\n  }\n}\n","import Matrix from '../matrix';\nimport WrapperMatrix2D from '../wrap/WrapperMatrix2D';\n\nimport { hypotenuse } from './util';\n\nexport default class SingularValueDecomposition {\n  constructor(value, options = {}) {\n    value = WrapperMatrix2D.checkMatrix(value);\n\n    let m = value.rows;\n    let n = value.columns;\n\n    const {\n      computeLeftSingularVectors = true,\n      computeRightSingularVectors = true,\n      autoTranspose = false,\n    } = options;\n\n    let wantu = Boolean(computeLeftSingularVectors);\n    let wantv = Boolean(computeRightSingularVectors);\n\n    let swapped = false;\n    let a;\n    if (m < n) {\n      if (!autoTranspose) {\n        a = value.clone();\n        // eslint-disable-next-line no-console\n        console.warn(\n          'Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose',\n        );\n      } else {\n        a = value.transpose();\n        m = a.rows;\n        n = a.columns;\n        swapped = true;\n        let aux = wantu;\n        wantu = wantv;\n        wantv = aux;\n      }\n    } else {\n      a = value.clone();\n    }\n\n    let nu = Math.min(m, n);\n    let ni = Math.min(m + 1, n);\n    let s = new Float64Array(ni);\n    let U = new Matrix(m, nu);\n    let V = new Matrix(n, n);\n\n    let e = new Float64Array(n);\n    let work = new Float64Array(m);\n\n    let si = new Float64Array(ni);\n    for (let i = 0; i < ni; i++) si[i] = i;\n\n    let nct = Math.min(m - 1, n);\n    let nrt = Math.max(0, Math.min(n - 2, m));\n    let mrc = Math.max(nct, nrt);\n\n    for (let k = 0; k < mrc; k++) {\n      if (k < nct) {\n        s[k] = 0;\n        for (let i = k; i < m; i++) {\n          s[k] = hypotenuse(s[k], a.get(i, k));\n        }\n        if (s[k] !== 0) {\n          if (a.get(k, k) < 0) {\n            s[k] = -s[k];\n          }\n          for (let i = k; i < m; i++) {\n            a.set(i, k, a.get(i, k) / s[k]);\n          }\n          a.set(k, k, a.get(k, k) + 1);\n        }\n        s[k] = -s[k];\n      }\n\n      for (let j = k + 1; j < n; j++) {\n        if (k < nct && s[k] !== 0) {\n          let t = 0;\n          for (let i = k; i < m; i++) {\n            t += a.get(i, k) * a.get(i, j);\n          }\n          t = -t / a.get(k, k);\n          for (let i = k; i < m; i++) {\n            a.set(i, j, a.get(i, j) + t * a.get(i, k));\n          }\n        }\n        e[j] = a.get(k, j);\n      }\n\n      if (wantu && k < nct) {\n        for (let i = k; i < m; i++) {\n          U.set(i, k, a.get(i, k));\n        }\n      }\n\n      if (k < nrt) {\n        e[k] = 0;\n        for (let i = k + 1; i < n; i++) {\n          e[k] = hypotenuse(e[k], e[i]);\n        }\n        if (e[k] !== 0) {\n          if (e[k + 1] < 0) {\n            e[k] = 0 - e[k];\n          }\n          for (let i = k + 1; i < n; i++) {\n            e[i] /= e[k];\n          }\n          e[k + 1] += 1;\n        }\n        e[k] = -e[k];\n        if (k + 1 < m && e[k] !== 0) {\n          for (let i = k + 1; i < m; i++) {\n            work[i] = 0;\n          }\n          for (let i = k + 1; i < m; i++) {\n            for (let j = k + 1; j < n; j++) {\n              work[i] += e[j] * a.get(i, j);\n            }\n          }\n          for (let j = k + 1; j < n; j++) {\n            let t = -e[j] / e[k + 1];\n            for (let i = k + 1; i < m; i++) {\n              a.set(i, j, a.get(i, j) + t * work[i]);\n            }\n          }\n        }\n        if (wantv) {\n          for (let i = k + 1; i < n; i++) {\n            V.set(i, k, e[i]);\n          }\n        }\n      }\n    }\n\n    let p = Math.min(n, m + 1);\n    if (nct < n) {\n      s[nct] = a.get(nct, nct);\n    }\n    if (m < p) {\n      s[p - 1] = 0;\n    }\n    if (nrt + 1 < p) {\n      e[nrt] = a.get(nrt, p - 1);\n    }\n    e[p - 1] = 0;\n\n    if (wantu) {\n      for (let j = nct; j < nu; j++) {\n        for (let i = 0; i < m; i++) {\n          U.set(i, j, 0);\n        }\n        U.set(j, j, 1);\n      }\n      for (let k = nct - 1; k >= 0; k--) {\n        if (s[k] !== 0) {\n          for (let j = k + 1; j < nu; j++) {\n            let t = 0;\n            for (let i = k; i < m; i++) {\n              t += U.get(i, k) * U.get(i, j);\n            }\n            t = -t / U.get(k, k);\n            for (let i = k; i < m; i++) {\n              U.set(i, j, U.get(i, j) + t * U.get(i, k));\n            }\n          }\n          for (let i = k; i < m; i++) {\n            U.set(i, k, -U.get(i, k));\n          }\n          U.set(k, k, 1 + U.get(k, k));\n          for (let i = 0; i < k - 1; i++) {\n            U.set(i, k, 0);\n          }\n        } else {\n          for (let i = 0; i < m; i++) {\n            U.set(i, k, 0);\n          }\n          U.set(k, k, 1);\n        }\n      }\n    }\n\n    if (wantv) {\n      for (let k = n - 1; k >= 0; k--) {\n        if (k < nrt && e[k] !== 0) {\n          for (let j = k + 1; j < n; j++) {\n            let t = 0;\n            for (let i = k + 1; i < n; i++) {\n              t += V.get(i, k) * V.get(i, j);\n            }\n            t = -t / V.get(k + 1, k);\n            for (let i = k + 1; i < n; i++) {\n              V.set(i, j, V.get(i, j) + t * V.get(i, k));\n            }\n          }\n        }\n        for (let i = 0; i < n; i++) {\n          V.set(i, k, 0);\n        }\n        V.set(k, k, 1);\n      }\n    }\n\n    let pp = p - 1;\n    let iter = 0;\n    let eps = Number.EPSILON;\n    while (p > 0) {\n      let k, kase;\n      for (k = p - 2; k >= -1; k--) {\n        if (k === -1) {\n          break;\n        }\n        const alpha =\n          Number.MIN_VALUE + eps * Math.abs(s[k] + Math.abs(s[k + 1]));\n        if (Math.abs(e[k]) <= alpha || Number.isNaN(e[k])) {\n          e[k] = 0;\n          break;\n        }\n      }\n      if (k === p - 2) {\n        kase = 4;\n      } else {\n        let ks;\n        for (ks = p - 1; ks >= k; ks--) {\n          if (ks === k) {\n            break;\n          }\n          let t =\n            (ks !== p ? Math.abs(e[ks]) : 0) +\n            (ks !== k + 1 ? Math.abs(e[ks - 1]) : 0);\n          if (Math.abs(s[ks]) <= eps * t) {\n            s[ks] = 0;\n            break;\n          }\n        }\n        if (ks === k) {\n          kase = 3;\n        } else if (ks === p - 1) {\n          kase = 1;\n        } else {\n          kase = 2;\n          k = ks;\n        }\n      }\n\n      k++;\n\n      switch (kase) {\n        case 1: {\n          let f = e[p - 2];\n          e[p - 2] = 0;\n          for (let j = p - 2; j >= k; j--) {\n            let t = hypotenuse(s[j], f);\n            let cs = s[j] / t;\n            let sn = f / t;\n            s[j] = t;\n            if (j !== k) {\n              f = -sn * e[j - 1];\n              e[j - 1] = cs * e[j - 1];\n            }\n            if (wantv) {\n              for (let i = 0; i < n; i++) {\n                t = cs * V.get(i, j) + sn * V.get(i, p - 1);\n                V.set(i, p - 1, -sn * V.get(i, j) + cs * V.get(i, p - 1));\n                V.set(i, j, t);\n              }\n            }\n          }\n          break;\n        }\n        case 2: {\n          let f = e[k - 1];\n          e[k - 1] = 0;\n          for (let j = k; j < p; j++) {\n            let t = hypotenuse(s[j], f);\n            let cs = s[j] / t;\n            let sn = f / t;\n            s[j] = t;\n            f = -sn * e[j];\n            e[j] = cs * e[j];\n            if (wantu) {\n              for (let i = 0; i < m; i++) {\n                t = cs * U.get(i, j) + sn * U.get(i, k - 1);\n                U.set(i, k - 1, -sn * U.get(i, j) + cs * U.get(i, k - 1));\n                U.set(i, j, t);\n              }\n            }\n          }\n          break;\n        }\n        case 3: {\n          const scale = Math.max(\n            Math.abs(s[p - 1]),\n            Math.abs(s[p - 2]),\n            Math.abs(e[p - 2]),\n            Math.abs(s[k]),\n            Math.abs(e[k]),\n          );\n          const sp = s[p - 1] / scale;\n          const spm1 = s[p - 2] / scale;\n          const epm1 = e[p - 2] / scale;\n          const sk = s[k] / scale;\n          const ek = e[k] / scale;\n          const b = ((spm1 + sp) * (spm1 - sp) + epm1 * epm1) / 2;\n          const c = sp * epm1 * (sp * epm1);\n          let shift = 0;\n          if (b !== 0 || c !== 0) {\n            if (b < 0) {\n              shift = 0 - Math.sqrt(b * b + c);\n            } else {\n              shift = Math.sqrt(b * b + c);\n            }\n            shift = c / (b + shift);\n          }\n          let f = (sk + sp) * (sk - sp) + shift;\n          let g = sk * ek;\n          for (let j = k; j < p - 1; j++) {\n            let t = hypotenuse(f, g);\n            if (t === 0) t = Number.MIN_VALUE;\n            let cs = f / t;\n            let sn = g / t;\n            if (j !== k) {\n              e[j - 1] = t;\n            }\n            f = cs * s[j] + sn * e[j];\n            e[j] = cs * e[j] - sn * s[j];\n            g = sn * s[j + 1];\n            s[j + 1] = cs * s[j + 1];\n            if (wantv) {\n              for (let i = 0; i < n; i++) {\n                t = cs * V.get(i, j) + sn * V.get(i, j + 1);\n                V.set(i, j + 1, -sn * V.get(i, j) + cs * V.get(i, j + 1));\n                V.set(i, j, t);\n              }\n            }\n            t = hypotenuse(f, g);\n            if (t === 0) t = Number.MIN_VALUE;\n            cs = f / t;\n            sn = g / t;\n            s[j] = t;\n            f = cs * e[j] + sn * s[j + 1];\n            s[j + 1] = -sn * e[j] + cs * s[j + 1];\n            g = sn * e[j + 1];\n            e[j + 1] = cs * e[j + 1];\n            if (wantu && j < m - 1) {\n              for (let i = 0; i < m; i++) {\n                t = cs * U.get(i, j) + sn * U.get(i, j + 1);\n                U.set(i, j + 1, -sn * U.get(i, j) + cs * U.get(i, j + 1));\n                U.set(i, j, t);\n              }\n            }\n          }\n          e[p - 2] = f;\n          iter = iter + 1;\n          break;\n        }\n        case 4: {\n          if (s[k] <= 0) {\n            s[k] = s[k] < 0 ? -s[k] : 0;\n            if (wantv) {\n              for (let i = 0; i <= pp; i++) {\n                V.set(i, k, -V.get(i, k));\n              }\n            }\n          }\n          while (k < pp) {\n            if (s[k] >= s[k + 1]) {\n              break;\n            }\n            let t = s[k];\n            s[k] = s[k + 1];\n            s[k + 1] = t;\n            if (wantv && k < n - 1) {\n              for (let i = 0; i < n; i++) {\n                t = V.get(i, k + 1);\n                V.set(i, k + 1, V.get(i, k));\n                V.set(i, k, t);\n              }\n            }\n            if (wantu && k < m - 1) {\n              for (let i = 0; i < m; i++) {\n                t = U.get(i, k + 1);\n                U.set(i, k + 1, U.get(i, k));\n                U.set(i, k, t);\n              }\n            }\n            k++;\n          }\n          iter = 0;\n          p--;\n          break;\n        }\n        // no default\n      }\n    }\n\n    if (swapped) {\n      let tmp = V;\n      V = U;\n      U = tmp;\n    }\n\n    this.m = m;\n    this.n = n;\n    this.s = s;\n    this.U = U;\n    this.V = V;\n  }\n\n  solve(value) {\n    let Y = value;\n    let e = this.threshold;\n    let scols = this.s.length;\n    let Ls = Matrix.zeros(scols, scols);\n\n    for (let i = 0; i < scols; i++) {\n      if (Math.abs(this.s[i]) <= e) {\n        Ls.set(i, i, 0);\n      } else {\n        Ls.set(i, i, 1 / this.s[i]);\n      }\n    }\n\n    let U = this.U;\n    let V = this.rightSingularVectors;\n\n    let VL = V.mmul(Ls);\n    let vrows = V.rows;\n    let urows = U.rows;\n    let VLU = Matrix.zeros(vrows, urows);\n\n    for (let i = 0; i < vrows; i++) {\n      for (let j = 0; j < urows; j++) {\n        let sum = 0;\n        for (let k = 0; k < scols; k++) {\n          sum += VL.get(i, k) * U.get(j, k);\n        }\n        VLU.set(i, j, sum);\n      }\n    }\n\n    return VLU.mmul(Y);\n  }\n\n  solveForDiagonal(value) {\n    return this.solve(Matrix.diag(value));\n  }\n\n  inverse() {\n    let V = this.V;\n    let e = this.threshold;\n    let vrows = V.rows;\n    let vcols = V.columns;\n    let X = new Matrix(vrows, this.s.length);\n\n    for (let i = 0; i < vrows; i++) {\n      for (let j = 0; j < vcols; j++) {\n        if (Math.abs(this.s[j]) > e) {\n          X.set(i, j, V.get(i, j) / this.s[j]);\n        }\n      }\n    }\n\n    let U = this.U;\n\n    let urows = U.rows;\n    let ucols = U.columns;\n    let Y = new Matrix(vrows, urows);\n\n    for (let i = 0; i < vrows; i++) {\n      for (let j = 0; j < urows; j++) {\n        let sum = 0;\n        for (let k = 0; k < ucols; k++) {\n          sum += X.get(i, k) * U.get(j, k);\n        }\n        Y.set(i, j, sum);\n      }\n    }\n\n    return Y;\n  }\n\n  get condition() {\n    return this.s[0] / this.s[Math.min(this.m, this.n) - 1];\n  }\n\n  get norm2() {\n    return this.s[0];\n  }\n\n  get rank() {\n    let tol = Math.max(this.m, this.n) * this.s[0] * Number.EPSILON;\n    let r = 0;\n    let s = this.s;\n    for (let i = 0, ii = s.length; i < ii; i++) {\n      if (s[i] > tol) {\n        r++;\n      }\n    }\n    return r;\n  }\n\n  get diagonal() {\n    return Array.from(this.s);\n  }\n\n  get threshold() {\n    return (Number.EPSILON / 2) * Math.max(this.m, this.n) * this.s[0];\n  }\n\n  get leftSingularVectors() {\n    return this.U;\n  }\n\n  get rightSingularVectors() {\n    return this.V;\n  }\n\n  get diagonalMatrix() {\n    return Matrix.diag(this.s);\n  }\n}\n","import LuDecomposition from './dc/lu';\nimport QrDecomposition from './dc/qr';\nimport SingularValueDecomposition from './dc/svd';\nimport Matrix from './matrix';\nimport WrapperMatrix2D from './wrap/WrapperMatrix2D';\n\nexport function inverse(matrix, useSVD = false) {\n  matrix = WrapperMatrix2D.checkMatrix(matrix);\n  if (useSVD) {\n    return new SingularValueDecomposition(matrix).inverse();\n  } else {\n    return solve(matrix, Matrix.eye(matrix.rows));\n  }\n}\n\nexport function solve(leftHandSide, rightHandSide, useSVD = false) {\n  leftHandSide = WrapperMatrix2D.checkMatrix(leftHandSide);\n  rightHandSide = WrapperMatrix2D.checkMatrix(rightHandSide);\n  if (useSVD) {\n    return new SingularValueDecomposition(leftHandSide).solve(rightHandSide);\n  } else {\n    return leftHandSide.isSquare()\n      ? new LuDecomposition(leftHandSide).solve(rightHandSide)\n      : new QrDecomposition(leftHandSide).solve(rightHandSide);\n  }\n}\n","import Matrix from './matrix';\nimport LuDecomposition from './dc/lu';\nimport MatrixSelectionView from './views/selection';\n\nexport function determinant(matrix) {\n  matrix = Matrix.checkMatrix(matrix);\n  if (matrix.isSquare()) {\n    let a, b, c, d;\n    if (matrix.columns === 2) {\n      // 2 x 2 matrix\n      a = matrix.get(0, 0);\n      b = matrix.get(0, 1);\n      c = matrix.get(1, 0);\n      d = matrix.get(1, 1);\n\n      return a * d - b * c;\n    } else if (matrix.columns === 3) {\n      // 3 x 3 matrix\n      let subMatrix0, subMatrix1, subMatrix2;\n      subMatrix0 = new MatrixSelectionView(matrix, [1, 2], [1, 2]);\n      subMatrix1 = new MatrixSelectionView(matrix, [1, 2], [0, 2]);\n      subMatrix2 = new MatrixSelectionView(matrix, [1, 2], [0, 1]);\n      a = matrix.get(0, 0);\n      b = matrix.get(0, 1);\n      c = matrix.get(0, 2);\n\n      return (\n        a * determinant(subMatrix0) -\n        b * determinant(subMatrix1) +\n        c * determinant(subMatrix2)\n      );\n    } else {\n      // general purpose determinant using the LU decomposition\n      return new LuDecomposition(matrix).determinant;\n    }\n  } else {\n    throw Error('determinant can only be calculated for a square matrix');\n  }\n}\n","import Matrix from './matrix';\nimport SingularValueDecomposition from './dc/svd';\n\nfunction xrange(n, exception) {\n  let range = [];\n  for (let i = 0; i < n; i++) {\n    if (i !== exception) {\n      range.push(i);\n    }\n  }\n  return range;\n}\n\nfunction dependenciesOneRow(\n  error,\n  matrix,\n  index,\n  thresholdValue = 10e-10,\n  thresholdError = 10e-10,\n) {\n  if (error > thresholdError) {\n    return new Array(matrix.rows + 1).fill(0);\n  } else {\n    let returnArray = matrix.addRow(index, [0]);\n    for (let i = 0; i < returnArray.rows; i++) {\n      if (Math.abs(returnArray.get(i, 0)) < thresholdValue) {\n        returnArray.set(i, 0, 0);\n      }\n    }\n    return returnArray.to1DArray();\n  }\n}\n\nexport function linearDependencies(matrix, options = {}) {\n  const { thresholdValue = 10e-10, thresholdError = 10e-10 } = options;\n  matrix = Matrix.checkMatrix(matrix);\n\n  let n = matrix.rows;\n  let results = new Matrix(n, n);\n\n  for (let i = 0; i < n; i++) {\n    let b = Matrix.columnVector(matrix.getRow(i));\n    let Abis = matrix.subMatrixRow(xrange(n, i)).transpose();\n    let svd = new SingularValueDecomposition(Abis);\n    let x = svd.solve(b);\n    let error = Matrix.sub(b, Abis.mmul(x))\n      .abs()\n      .max();\n    results.setRow(\n      i,\n      dependenciesOneRow(error, x, i, thresholdValue, thresholdError),\n    );\n  }\n  return results;\n}\n","import SVD from './dc/svd';\nimport Matrix from './matrix';\n\nexport function pseudoInverse(matrix, threshold = Number.EPSILON) {\n  matrix = Matrix.checkMatrix(matrix);\n  let svdSolution = new SVD(matrix, { autoTranspose: true });\n\n  let U = svdSolution.leftSingularVectors;\n  let V = svdSolution.rightSingularVectors;\n  let s = svdSolution.diagonal;\n\n  for (let i = 0; i < s.length; i++) {\n    if (Math.abs(s[i]) > threshold) {\n      s[i] = 1.0 / s[i];\n    } else {\n      s[i] = 0.0;\n    }\n  }\n\n  return V.mmul(Matrix.diag(s).mmul(U.transpose()));\n}\n","import Matrix from './matrix';\n\nexport function covariance(xMatrix, yMatrix = xMatrix, options = {}) {\n  xMatrix = Matrix.checkMatrix(xMatrix);\n  let yIsSame = false;\n  if (\n    typeof yMatrix === 'object' &&\n    !Matrix.isMatrix(yMatrix) &&\n    !Array.isArray(yMatrix)\n  ) {\n    options = yMatrix;\n    yMatrix = xMatrix;\n    yIsSame = true;\n  } else {\n    yMatrix = Matrix.checkMatrix(yMatrix);\n  }\n  if (xMatrix.rows !== yMatrix.rows) {\n    throw new TypeError('Both matrices must have the same number of rows');\n  }\n  const { center = true } = options;\n  if (center) {\n    xMatrix = xMatrix.center('column');\n    if (!yIsSame) {\n      yMatrix = yMatrix.center('column');\n    }\n  }\n  const cov = xMatrix.transpose().mmul(yMatrix);\n  for (let i = 0; i < cov.rows; i++) {\n    for (let j = 0; j < cov.columns; j++) {\n      cov.set(i, j, cov.get(i, j) * (1 / (xMatrix.rows - 1)));\n    }\n  }\n  return cov;\n}\n","import Matrix from './matrix';\n\nexport function correlation(xMatrix, yMatrix = xMatrix, options = {}) {\n  xMatrix = Matrix.checkMatrix(xMatrix);\n  let yIsSame = false;\n  if (\n    typeof yMatrix === 'object' &&\n    !Matrix.isMatrix(yMatrix) &&\n    !Array.isArray(yMatrix)\n  ) {\n    options = yMatrix;\n    yMatrix = xMatrix;\n    yIsSame = true;\n  } else {\n    yMatrix = Matrix.checkMatrix(yMatrix);\n  }\n  if (xMatrix.rows !== yMatrix.rows) {\n    throw new TypeError('Both matrices must have the same number of rows');\n  }\n\n  const { center = true, scale = true } = options;\n  if (center) {\n    xMatrix.center('column');\n    if (!yIsSame) {\n      yMatrix.center('column');\n    }\n  }\n  if (scale) {\n    xMatrix.scale('column');\n    if (!yIsSame) {\n      yMatrix.scale('column');\n    }\n  }\n\n  const sdx = xMatrix.standardDeviation('column', { unbiased: true });\n  const sdy = yIsSame\n    ? sdx\n    : yMatrix.standardDeviation('column', { unbiased: true });\n\n  const corr = xMatrix.transpose().mmul(yMatrix);\n  for (let i = 0; i < corr.rows; i++) {\n    for (let j = 0; j < corr.columns; j++) {\n      corr.set(\n        i,\n        j,\n        corr.get(i, j) * (1 / (sdx[i] * sdy[j])) * (1 / (xMatrix.rows - 1)),\n      );\n    }\n  }\n  return corr;\n}\n","import Matrix from '../matrix';\nimport WrapperMatrix2D from '../wrap/WrapperMatrix2D';\n\nimport { hypotenuse } from './util';\n\nexport default class EigenvalueDecomposition {\n  constructor(matrix, options = {}) {\n    const { assumeSymmetric = false } = options;\n\n    matrix = WrapperMatrix2D.checkMatrix(matrix);\n    if (!matrix.isSquare()) {\n      throw new Error('Matrix is not a square matrix');\n    }\n\n    let n = matrix.columns;\n    let V = new Matrix(n, n);\n    let d = new Float64Array(n);\n    let e = new Float64Array(n);\n    let value = matrix;\n    let i, j;\n\n    let isSymmetric = false;\n    if (assumeSymmetric) {\n      isSymmetric = true;\n    } else {\n      isSymmetric = matrix.isSymmetric();\n    }\n\n    if (isSymmetric) {\n      for (i = 0; i < n; i++) {\n        for (j = 0; j < n; j++) {\n          V.set(i, j, value.get(i, j));\n        }\n      }\n      tred2(n, e, d, V);\n      tql2(n, e, d, V);\n    } else {\n      let H = new Matrix(n, n);\n      let ort = new Float64Array(n);\n      for (j = 0; j < n; j++) {\n        for (i = 0; i < n; i++) {\n          H.set(i, j, value.get(i, j));\n        }\n      }\n      orthes(n, H, ort, V);\n      hqr2(n, e, d, V, H);\n    }\n\n    this.n = n;\n    this.e = e;\n    this.d = d;\n    this.V = V;\n  }\n\n  get realEigenvalues() {\n    return Array.from(this.d);\n  }\n\n  get imaginaryEigenvalues() {\n    return Array.from(this.e);\n  }\n\n  get eigenvectorMatrix() {\n    return this.V;\n  }\n\n  get diagonalMatrix() {\n    let n = this.n;\n    let e = this.e;\n    let d = this.d;\n    let X = new Matrix(n, n);\n    let i, j;\n    for (i = 0; i < n; i++) {\n      for (j = 0; j < n; j++) {\n        X.set(i, j, 0);\n      }\n      X.set(i, i, d[i]);\n      if (e[i] > 0) {\n        X.set(i, i + 1, e[i]);\n      } else if (e[i] < 0) {\n        X.set(i, i - 1, e[i]);\n      }\n    }\n    return X;\n  }\n}\n\nfunction tred2(n, e, d, V) {\n  let f, g, h, i, j, k, hh, scale;\n\n  for (j = 0; j < n; j++) {\n    d[j] = V.get(n - 1, j);\n  }\n\n  for (i = n - 1; i > 0; i--) {\n    scale = 0;\n    h = 0;\n    for (k = 0; k < i; k++) {\n      scale = scale + Math.abs(d[k]);\n    }\n\n    if (scale === 0) {\n      e[i] = d[i - 1];\n      for (j = 0; j < i; j++) {\n        d[j] = V.get(i - 1, j);\n        V.set(i, j, 0);\n        V.set(j, i, 0);\n      }\n    } else {\n      for (k = 0; k < i; k++) {\n        d[k] /= scale;\n        h += d[k] * d[k];\n      }\n\n      f = d[i - 1];\n      g = Math.sqrt(h);\n      if (f > 0) {\n        g = -g;\n      }\n\n      e[i] = scale * g;\n      h = h - f * g;\n      d[i - 1] = f - g;\n      for (j = 0; j < i; j++) {\n        e[j] = 0;\n      }\n\n      for (j = 0; j < i; j++) {\n        f = d[j];\n        V.set(j, i, f);\n        g = e[j] + V.get(j, j) * f;\n        for (k = j + 1; k <= i - 1; k++) {\n          g += V.get(k, j) * d[k];\n          e[k] += V.get(k, j) * f;\n        }\n        e[j] = g;\n      }\n\n      f = 0;\n      for (j = 0; j < i; j++) {\n        e[j] /= h;\n        f += e[j] * d[j];\n      }\n\n      hh = f / (h + h);\n      for (j = 0; j < i; j++) {\n        e[j] -= hh * d[j];\n      }\n\n      for (j = 0; j < i; j++) {\n        f = d[j];\n        g = e[j];\n        for (k = j; k <= i - 1; k++) {\n          V.set(k, j, V.get(k, j) - (f * e[k] + g * d[k]));\n        }\n        d[j] = V.get(i - 1, j);\n        V.set(i, j, 0);\n      }\n    }\n    d[i] = h;\n  }\n\n  for (i = 0; i < n - 1; i++) {\n    V.set(n - 1, i, V.get(i, i));\n    V.set(i, i, 1);\n    h = d[i + 1];\n    if (h !== 0) {\n      for (k = 0; k <= i; k++) {\n        d[k] = V.get(k, i + 1) / h;\n      }\n\n      for (j = 0; j <= i; j++) {\n        g = 0;\n        for (k = 0; k <= i; k++) {\n          g += V.get(k, i + 1) * V.get(k, j);\n        }\n        for (k = 0; k <= i; k++) {\n          V.set(k, j, V.get(k, j) - g * d[k]);\n        }\n      }\n    }\n\n    for (k = 0; k <= i; k++) {\n      V.set(k, i + 1, 0);\n    }\n  }\n\n  for (j = 0; j < n; j++) {\n    d[j] = V.get(n - 1, j);\n    V.set(n - 1, j, 0);\n  }\n\n  V.set(n - 1, n - 1, 1);\n  e[0] = 0;\n}\n\nfunction tql2(n, e, d, V) {\n  let g, h, i, j, k, l, m, p, r, dl1, c, c2, c3, el1, s, s2, iter;\n\n  for (i = 1; i < n; i++) {\n    e[i - 1] = e[i];\n  }\n\n  e[n - 1] = 0;\n\n  let f = 0;\n  let tst1 = 0;\n  let eps = Number.EPSILON;\n\n  for (l = 0; l < n; l++) {\n    tst1 = Math.max(tst1, Math.abs(d[l]) + Math.abs(e[l]));\n    m = l;\n    while (m < n) {\n      if (Math.abs(e[m]) <= eps * tst1) {\n        break;\n      }\n      m++;\n    }\n\n    if (m > l) {\n      iter = 0;\n      do {\n        iter = iter + 1;\n\n        g = d[l];\n        p = (d[l + 1] - g) / (2 * e[l]);\n        r = hypotenuse(p, 1);\n        if (p < 0) {\n          r = -r;\n        }\n\n        d[l] = e[l] / (p + r);\n        d[l + 1] = e[l] * (p + r);\n        dl1 = d[l + 1];\n        h = g - d[l];\n        for (i = l + 2; i < n; i++) {\n          d[i] -= h;\n        }\n\n        f = f + h;\n\n        p = d[m];\n        c = 1;\n        c2 = c;\n        c3 = c;\n        el1 = e[l + 1];\n        s = 0;\n        s2 = 0;\n        for (i = m - 1; i >= l; i--) {\n          c3 = c2;\n          c2 = c;\n          s2 = s;\n          g = c * e[i];\n          h = c * p;\n          r = hypotenuse(p, e[i]);\n          e[i + 1] = s * r;\n          s = e[i] / r;\n          c = p / r;\n          p = c * d[i] - s * g;\n          d[i + 1] = h + s * (c * g + s * d[i]);\n\n          for (k = 0; k < n; k++) {\n            h = V.get(k, i + 1);\n            V.set(k, i + 1, s * V.get(k, i) + c * h);\n            V.set(k, i, c * V.get(k, i) - s * h);\n          }\n        }\n\n        p = (-s * s2 * c3 * el1 * e[l]) / dl1;\n        e[l] = s * p;\n        d[l] = c * p;\n      } while (Math.abs(e[l]) > eps * tst1);\n    }\n    d[l] = d[l] + f;\n    e[l] = 0;\n  }\n\n  for (i = 0; i < n - 1; i++) {\n    k = i;\n    p = d[i];\n    for (j = i + 1; j < n; j++) {\n      if (d[j] < p) {\n        k = j;\n        p = d[j];\n      }\n    }\n\n    if (k !== i) {\n      d[k] = d[i];\n      d[i] = p;\n      for (j = 0; j < n; j++) {\n        p = V.get(j, i);\n        V.set(j, i, V.get(j, k));\n        V.set(j, k, p);\n      }\n    }\n  }\n}\n\nfunction orthes(n, H, ort, V) {\n  let low = 0;\n  let high = n - 1;\n  let f, g, h, i, j, m;\n  let scale;\n\n  for (m = low + 1; m <= high - 1; m++) {\n    scale = 0;\n    for (i = m; i <= high; i++) {\n      scale = scale + Math.abs(H.get(i, m - 1));\n    }\n\n    if (scale !== 0) {\n      h = 0;\n      for (i = high; i >= m; i--) {\n        ort[i] = H.get(i, m - 1) / scale;\n        h += ort[i] * ort[i];\n      }\n\n      g = Math.sqrt(h);\n      if (ort[m] > 0) {\n        g = -g;\n      }\n\n      h = h - ort[m] * g;\n      ort[m] = ort[m] - g;\n\n      for (j = m; j < n; j++) {\n        f = 0;\n        for (i = high; i >= m; i--) {\n          f += ort[i] * H.get(i, j);\n        }\n\n        f = f / h;\n        for (i = m; i <= high; i++) {\n          H.set(i, j, H.get(i, j) - f * ort[i]);\n        }\n      }\n\n      for (i = 0; i <= high; i++) {\n        f = 0;\n        for (j = high; j >= m; j--) {\n          f += ort[j] * H.get(i, j);\n        }\n\n        f = f / h;\n        for (j = m; j <= high; j++) {\n          H.set(i, j, H.get(i, j) - f * ort[j]);\n        }\n      }\n\n      ort[m] = scale * ort[m];\n      H.set(m, m - 1, scale * g);\n    }\n  }\n\n  for (i = 0; i < n; i++) {\n    for (j = 0; j < n; j++) {\n      V.set(i, j, i === j ? 1 : 0);\n    }\n  }\n\n  for (m = high - 1; m >= low + 1; m--) {\n    if (H.get(m, m - 1) !== 0) {\n      for (i = m + 1; i <= high; i++) {\n        ort[i] = H.get(i, m - 1);\n      }\n\n      for (j = m; j <= high; j++) {\n        g = 0;\n        for (i = m; i <= high; i++) {\n          g += ort[i] * V.get(i, j);\n        }\n\n        g = g / ort[m] / H.get(m, m - 1);\n        for (i = m; i <= high; i++) {\n          V.set(i, j, V.get(i, j) + g * ort[i]);\n        }\n      }\n    }\n  }\n}\n\nfunction hqr2(nn, e, d, V, H) {\n  let n = nn - 1;\n  let low = 0;\n  let high = nn - 1;\n  let eps = Number.EPSILON;\n  let exshift = 0;\n  let norm = 0;\n  let p = 0;\n  let q = 0;\n  let r = 0;\n  let s = 0;\n  let z = 0;\n  let iter = 0;\n  let i, j, k, l, m, t, w, x, y;\n  let ra, sa, vr, vi;\n  let notlast, cdivres;\n\n  for (i = 0; i < nn; i++) {\n    if (i < low || i > high) {\n      d[i] = H.get(i, i);\n      e[i] = 0;\n    }\n\n    for (j = Math.max(i - 1, 0); j < nn; j++) {\n      norm = norm + Math.abs(H.get(i, j));\n    }\n  }\n\n  while (n >= low) {\n    l = n;\n    while (l > low) {\n      s = Math.abs(H.get(l - 1, l - 1)) + Math.abs(H.get(l, l));\n      if (s === 0) {\n        s = norm;\n      }\n      if (Math.abs(H.get(l, l - 1)) < eps * s) {\n        break;\n      }\n      l--;\n    }\n\n    if (l === n) {\n      H.set(n, n, H.get(n, n) + exshift);\n      d[n] = H.get(n, n);\n      e[n] = 0;\n      n--;\n      iter = 0;\n    } else if (l === n - 1) {\n      w = H.get(n, n - 1) * H.get(n - 1, n);\n      p = (H.get(n - 1, n - 1) - H.get(n, n)) / 2;\n      q = p * p + w;\n      z = Math.sqrt(Math.abs(q));\n      H.set(n, n, H.get(n, n) + exshift);\n      H.set(n - 1, n - 1, H.get(n - 1, n - 1) + exshift);\n      x = H.get(n, n);\n\n      if (q >= 0) {\n        z = p >= 0 ? p + z : p - z;\n        d[n - 1] = x + z;\n        d[n] = d[n - 1];\n        if (z !== 0) {\n          d[n] = x - w / z;\n        }\n        e[n - 1] = 0;\n        e[n] = 0;\n        x = H.get(n, n - 1);\n        s = Math.abs(x) + Math.abs(z);\n        p = x / s;\n        q = z / s;\n        r = Math.sqrt(p * p + q * q);\n        p = p / r;\n        q = q / r;\n\n        for (j = n - 1; j < nn; j++) {\n          z = H.get(n - 1, j);\n          H.set(n - 1, j, q * z + p * H.get(n, j));\n          H.set(n, j, q * H.get(n, j) - p * z);\n        }\n\n        for (i = 0; i <= n; i++) {\n          z = H.get(i, n - 1);\n          H.set(i, n - 1, q * z + p * H.get(i, n));\n          H.set(i, n, q * H.get(i, n) - p * z);\n        }\n\n        for (i = low; i <= high; i++) {\n          z = V.get(i, n - 1);\n          V.set(i, n - 1, q * z + p * V.get(i, n));\n          V.set(i, n, q * V.get(i, n) - p * z);\n        }\n      } else {\n        d[n - 1] = x + p;\n        d[n] = x + p;\n        e[n - 1] = z;\n        e[n] = -z;\n      }\n\n      n = n - 2;\n      iter = 0;\n    } else {\n      x = H.get(n, n);\n      y = 0;\n      w = 0;\n      if (l < n) {\n        y = H.get(n - 1, n - 1);\n        w = H.get(n, n - 1) * H.get(n - 1, n);\n      }\n\n      if (iter === 10) {\n        exshift += x;\n        for (i = low; i <= n; i++) {\n          H.set(i, i, H.get(i, i) - x);\n        }\n        s = Math.abs(H.get(n, n - 1)) + Math.abs(H.get(n - 1, n - 2));\n        x = y = 0.75 * s;\n        w = -0.4375 * s * s;\n      }\n\n      if (iter === 30) {\n        s = (y - x) / 2;\n        s = s * s + w;\n        if (s > 0) {\n          s = Math.sqrt(s);\n          if (y < x) {\n            s = -s;\n          }\n          s = x - w / ((y - x) / 2 + s);\n          for (i = low; i <= n; i++) {\n            H.set(i, i, H.get(i, i) - s);\n          }\n          exshift += s;\n          x = y = w = 0.964;\n        }\n      }\n\n      iter = iter + 1;\n\n      m = n - 2;\n      while (m >= l) {\n        z = H.get(m, m);\n        r = x - z;\n        s = y - z;\n        p = (r * s - w) / H.get(m + 1, m) + H.get(m, m + 1);\n        q = H.get(m + 1, m + 1) - z - r - s;\n        r = H.get(m + 2, m + 1);\n        s = Math.abs(p) + Math.abs(q) + Math.abs(r);\n        p = p / s;\n        q = q / s;\n        r = r / s;\n        if (m === l) {\n          break;\n        }\n        if (\n          Math.abs(H.get(m, m - 1)) * (Math.abs(q) + Math.abs(r)) <\n          eps *\n            (Math.abs(p) *\n              (Math.abs(H.get(m - 1, m - 1)) +\n                Math.abs(z) +\n                Math.abs(H.get(m + 1, m + 1))))\n        ) {\n          break;\n        }\n        m--;\n      }\n\n      for (i = m + 2; i <= n; i++) {\n        H.set(i, i - 2, 0);\n        if (i > m + 2) {\n          H.set(i, i - 3, 0);\n        }\n      }\n\n      for (k = m; k <= n - 1; k++) {\n        notlast = k !== n - 1;\n        if (k !== m) {\n          p = H.get(k, k - 1);\n          q = H.get(k + 1, k - 1);\n          r = notlast ? H.get(k + 2, k - 1) : 0;\n          x = Math.abs(p) + Math.abs(q) + Math.abs(r);\n          if (x !== 0) {\n            p = p / x;\n            q = q / x;\n            r = r / x;\n          }\n        }\n\n        if (x === 0) {\n          break;\n        }\n\n        s = Math.sqrt(p * p + q * q + r * r);\n        if (p < 0) {\n          s = -s;\n        }\n\n        if (s !== 0) {\n          if (k !== m) {\n            H.set(k, k - 1, -s * x);\n          } else if (l !== m) {\n            H.set(k, k - 1, -H.get(k, k - 1));\n          }\n\n          p = p + s;\n          x = p / s;\n          y = q / s;\n          z = r / s;\n          q = q / p;\n          r = r / p;\n\n          for (j = k; j < nn; j++) {\n            p = H.get(k, j) + q * H.get(k + 1, j);\n            if (notlast) {\n              p = p + r * H.get(k + 2, j);\n              H.set(k + 2, j, H.get(k + 2, j) - p * z);\n            }\n\n            H.set(k, j, H.get(k, j) - p * x);\n            H.set(k + 1, j, H.get(k + 1, j) - p * y);\n          }\n\n          for (i = 0; i <= Math.min(n, k + 3); i++) {\n            p = x * H.get(i, k) + y * H.get(i, k + 1);\n            if (notlast) {\n              p = p + z * H.get(i, k + 2);\n              H.set(i, k + 2, H.get(i, k + 2) - p * r);\n            }\n\n            H.set(i, k, H.get(i, k) - p);\n            H.set(i, k + 1, H.get(i, k + 1) - p * q);\n          }\n\n          for (i = low; i <= high; i++) {\n            p = x * V.get(i, k) + y * V.get(i, k + 1);\n            if (notlast) {\n              p = p + z * V.get(i, k + 2);\n              V.set(i, k + 2, V.get(i, k + 2) - p * r);\n            }\n\n            V.set(i, k, V.get(i, k) - p);\n            V.set(i, k + 1, V.get(i, k + 1) - p * q);\n          }\n        }\n      }\n    }\n  }\n\n  if (norm === 0) {\n    return;\n  }\n\n  for (n = nn - 1; n >= 0; n--) {\n    p = d[n];\n    q = e[n];\n\n    if (q === 0) {\n      l = n;\n      H.set(n, n, 1);\n      for (i = n - 1; i >= 0; i--) {\n        w = H.get(i, i) - p;\n        r = 0;\n        for (j = l; j <= n; j++) {\n          r = r + H.get(i, j) * H.get(j, n);\n        }\n\n        if (e[i] < 0) {\n          z = w;\n          s = r;\n        } else {\n          l = i;\n          if (e[i] === 0) {\n            H.set(i, n, w !== 0 ? -r / w : -r / (eps * norm));\n          } else {\n            x = H.get(i, i + 1);\n            y = H.get(i + 1, i);\n            q = (d[i] - p) * (d[i] - p) + e[i] * e[i];\n            t = (x * s - z * r) / q;\n            H.set(i, n, t);\n            H.set(\n              i + 1,\n              n,\n              Math.abs(x) > Math.abs(z) ? (-r - w * t) / x : (-s - y * t) / z,\n            );\n          }\n\n          t = Math.abs(H.get(i, n));\n          if (eps * t * t > 1) {\n            for (j = i; j <= n; j++) {\n              H.set(j, n, H.get(j, n) / t);\n            }\n          }\n        }\n      }\n    } else if (q < 0) {\n      l = n - 1;\n\n      if (Math.abs(H.get(n, n - 1)) > Math.abs(H.get(n - 1, n))) {\n        H.set(n - 1, n - 1, q / H.get(n, n - 1));\n        H.set(n - 1, n, -(H.get(n, n) - p) / H.get(n, n - 1));\n      } else {\n        cdivres = cdiv(0, -H.get(n - 1, n), H.get(n - 1, n - 1) - p, q);\n        H.set(n - 1, n - 1, cdivres[0]);\n        H.set(n - 1, n, cdivres[1]);\n      }\n\n      H.set(n, n - 1, 0);\n      H.set(n, n, 1);\n      for (i = n - 2; i >= 0; i--) {\n        ra = 0;\n        sa = 0;\n        for (j = l; j <= n; j++) {\n          ra = ra + H.get(i, j) * H.get(j, n - 1);\n          sa = sa + H.get(i, j) * H.get(j, n);\n        }\n\n        w = H.get(i, i) - p;\n\n        if (e[i] < 0) {\n          z = w;\n          r = ra;\n          s = sa;\n        } else {\n          l = i;\n          if (e[i] === 0) {\n            cdivres = cdiv(-ra, -sa, w, q);\n            H.set(i, n - 1, cdivres[0]);\n            H.set(i, n, cdivres[1]);\n          } else {\n            x = H.get(i, i + 1);\n            y = H.get(i + 1, i);\n            vr = (d[i] - p) * (d[i] - p) + e[i] * e[i] - q * q;\n            vi = (d[i] - p) * 2 * q;\n            if (vr === 0 && vi === 0) {\n              vr =\n                eps *\n                norm *\n                (Math.abs(w) +\n                  Math.abs(q) +\n                  Math.abs(x) +\n                  Math.abs(y) +\n                  Math.abs(z));\n            }\n            cdivres = cdiv(\n              x * r - z * ra + q * sa,\n              x * s - z * sa - q * ra,\n              vr,\n              vi,\n            );\n            H.set(i, n - 1, cdivres[0]);\n            H.set(i, n, cdivres[1]);\n            if (Math.abs(x) > Math.abs(z) + Math.abs(q)) {\n              H.set(\n                i + 1,\n                n - 1,\n                (-ra - w * H.get(i, n - 1) + q * H.get(i, n)) / x,\n              );\n              H.set(\n                i + 1,\n                n,\n                (-sa - w * H.get(i, n) - q * H.get(i, n - 1)) / x,\n              );\n            } else {\n              cdivres = cdiv(\n                -r - y * H.get(i, n - 1),\n                -s - y * H.get(i, n),\n                z,\n                q,\n              );\n              H.set(i + 1, n - 1, cdivres[0]);\n              H.set(i + 1, n, cdivres[1]);\n            }\n          }\n\n          t = Math.max(Math.abs(H.get(i, n - 1)), Math.abs(H.get(i, n)));\n          if (eps * t * t > 1) {\n            for (j = i; j <= n; j++) {\n              H.set(j, n - 1, H.get(j, n - 1) / t);\n              H.set(j, n, H.get(j, n) / t);\n            }\n          }\n        }\n      }\n    }\n  }\n\n  for (i = 0; i < nn; i++) {\n    if (i < low || i > high) {\n      for (j = i; j < nn; j++) {\n        V.set(i, j, H.get(i, j));\n      }\n    }\n  }\n\n  for (j = nn - 1; j >= low; j--) {\n    for (i = low; i <= high; i++) {\n      z = 0;\n      for (k = low; k <= Math.min(j, high); k++) {\n        z = z + V.get(i, k) * H.get(k, j);\n      }\n      V.set(i, j, z);\n    }\n  }\n}\n\nfunction cdiv(xr, xi, yr, yi) {\n  let r, d;\n  if (Math.abs(yr) > Math.abs(yi)) {\n    r = yi / yr;\n    d = yr + r * yi;\n    return [(xr + r * xi) / d, (xi - r * xr) / d];\n  } else {\n    r = yr / yi;\n    d = yi + r * yr;\n    return [(r * xr + xi) / d, (r * xi - xr) / d];\n  }\n}\n","import Matrix from '../matrix';\nimport WrapperMatrix2D from '../wrap/WrapperMatrix2D';\n\nexport default class CholeskyDecomposition {\n  constructor(value) {\n    value = WrapperMatrix2D.checkMatrix(value);\n    if (!value.isSymmetric()) {\n      throw new Error('Matrix is not symmetric');\n    }\n\n    let a = value;\n    let dimension = a.rows;\n    let l = new Matrix(dimension, dimension);\n    let positiveDefinite = true;\n    let i, j, k;\n\n    for (j = 0; j < dimension; j++) {\n      let d = 0;\n      for (k = 0; k < j; k++) {\n        let s = 0;\n        for (i = 0; i < k; i++) {\n          s += l.get(k, i) * l.get(j, i);\n        }\n        s = (a.get(j, k) - s) / l.get(k, k);\n        l.set(j, k, s);\n        d = d + s * s;\n      }\n\n      d = a.get(j, j) - d;\n\n      positiveDefinite &= d > 0;\n      l.set(j, j, Math.sqrt(Math.max(d, 0)));\n      for (k = j + 1; k < dimension; k++) {\n        l.set(j, k, 0);\n      }\n    }\n\n    this.L = l;\n    this.positiveDefinite = Boolean(positiveDefinite);\n  }\n\n  isPositiveDefinite() {\n    return this.positiveDefinite;\n  }\n\n  solve(value) {\n    value = WrapperMatrix2D.checkMatrix(value);\n\n    let l = this.L;\n    let dimension = l.rows;\n\n    if (value.rows !== dimension) {\n      throw new Error('Matrix dimensions do not match');\n    }\n    if (this.isPositiveDefinite() === false) {\n      throw new Error('Matrix is not positive definite');\n    }\n\n    let count = value.columns;\n    let B = value.clone();\n    let i, j, k;\n\n    for (k = 0; k < dimension; k++) {\n      for (j = 0; j < count; j++) {\n        for (i = 0; i < k; i++) {\n          B.set(k, j, B.get(k, j) - B.get(i, j) * l.get(k, i));\n        }\n        B.set(k, j, B.get(k, j) / l.get(k, k));\n      }\n    }\n\n    for (k = dimension - 1; k >= 0; k--) {\n      for (j = 0; j < count; j++) {\n        for (i = k + 1; i < dimension; i++) {\n          B.set(k, j, B.get(k, j) - B.get(i, j) * l.get(i, k));\n        }\n        B.set(k, j, B.get(k, j) / l.get(k, k));\n      }\n    }\n\n    return B;\n  }\n\n  get lowerTriangularMatrix() {\n    return this.L;\n  }\n}\n","import WrapperMatrix2D from '../wrap/WrapperMatrix2D';\nimport Matrix from '../matrix';\n\nexport default class nipals {\n  constructor(X, options = {}) {\n    X = WrapperMatrix2D.checkMatrix(X);\n    let { Y } = options;\n    const {\n      scaleScores = false,\n      maxIterations = 1000,\n      terminationCriteria = 1e-10,\n    } = options;\n\n    let u;\n    if (Y) {\n      if (Array.isArray(Y) && typeof Y[0] === 'number') {\n        Y = Matrix.columnVector(Y);\n      } else {\n        Y = WrapperMatrix2D.checkMatrix(Y);\n      }\n      if (!Y.isColumnVector() || Y.rows !== X.rows) {\n        throw new Error('Y must be a column vector of length X.rows');\n      }\n      u = Y;\n    } else {\n      u = X.getColumnVector(0);\n    }\n\n    let diff = 1;\n    let t, q, w, tOld;\n\n    for (\n      let counter = 0;\n      counter < maxIterations && diff > terminationCriteria;\n      counter++\n    ) {\n      w = X.transpose()\n        .mmul(u)\n        .div(\n          u\n            .transpose()\n            .mmul(u)\n            .get(0, 0),\n        );\n      w = w.div(w.norm());\n\n      t = X.mmul(w).div(\n        w\n          .transpose()\n          .mmul(w)\n          .get(0, 0),\n      );\n\n      if (counter > 0) {\n        diff = t\n          .clone()\n          .sub(tOld)\n          .pow(2)\n          .sum();\n      }\n      tOld = t.clone();\n\n      if (Y) {\n        q = Y.transpose()\n          .mmul(t)\n          .div(\n            t\n              .transpose()\n              .mmul(t)\n              .get(0, 0),\n          );\n        q = q.div(q.norm());\n\n        u = Y.mmul(q).div(\n          q\n            .transpose()\n            .mmul(q)\n            .get(0, 0),\n        );\n      } else {\n        u = t;\n      }\n    }\n\n    if (Y) {\n      let p = X.transpose()\n        .mmul(t)\n        .div(\n          t\n            .transpose()\n            .mmul(t)\n            .get(0, 0),\n        );\n      p = p.div(p.norm());\n      let xResidual = X.clone().sub(t.clone().mmul(p.transpose()));\n      let residual = u\n        .transpose()\n        .mmul(t)\n        .div(\n          t\n            .transpose()\n            .mmul(t)\n            .get(0, 0),\n        );\n      let yResidual = Y.clone().sub(\n        t\n          .clone()\n          .mulS(residual.get(0, 0))\n          .mmul(q.transpose()),\n      );\n\n      this.t = t;\n      this.p = p.transpose();\n      this.w = w.transpose();\n      this.q = q;\n      this.u = u;\n      this.s = t.transpose().mmul(t);\n      this.xResidual = xResidual;\n      this.yResidual = yResidual;\n      this.betas = residual;\n    } else {\n      this.w = w.transpose();\n      this.s = t\n        .transpose()\n        .mmul(t)\n        .sqrt();\n      if (scaleScores) {\n        this.t = t.clone().div(this.s.get(0, 0));\n      } else {\n        this.t = t;\n      }\n      this.xResidual = X.sub(t.mmul(w.transpose()));\n    }\n  }\n}\n","import isArray from 'is-any-array';\n\n/**\n * Computes the mean of the given values\n * @param {Array<number>} input\n * @return {number}\n */\n\nfunction mean(input) {\n  if (!isArray(input)) {\n    throw new TypeError('input must be an array');\n  }\n\n  if (input.length === 0) {\n    throw new TypeError('input must not be empty');\n  }\n\n  var sum = 0;\n\n  for (var i = 0; i < input.length; i++) {\n    sum += input[i];\n  }\n\n  return sum / input.length;\n}\n\nexport default mean;\n","import Matrix from 'ml-matrix';\nimport meanArray from 'ml-array-mean';\n\n/**\n * @private\n * return an array of probabilities of each class\n * @param {Array} array - contains the classes\n * @param {number} numberOfClasses\n * @return {Matrix} - rowVector of probabilities.\n */\nexport function toDiscreteDistribution(array, numberOfClasses) {\n  var counts = new Array(numberOfClasses).fill(0);\n  for (var i = 0; i < array.length; ++i) {\n    counts[array[i]] += 1 / array.length;\n  }\n\n  return Matrix.rowVector(counts);\n}\n\n/**\n * @private\n * Retrieves the impurity of array of predictions\n * @param {Array} array - predictions.\n * @return {number} Gini impurity\n */\nexport function giniImpurity(array) {\n  if (array.length === 0) {\n    return 0;\n  }\n\n  var probabilities = toDiscreteDistribution(\n    array,\n    getNumberOfClasses(array)\n  ).getRow(0);\n\n  var sum = 0.0;\n  for (var i = 0; i < probabilities.length; ++i) {\n    sum += probabilities[i] * probabilities[i];\n  }\n\n  return 1 - sum;\n}\n\n/**\n * @private\n * Return the number of classes given the array of predictions.\n * @param {Array} array - predictions.\n * @return {number} Number of classes.\n */\nexport function getNumberOfClasses(array) {\n  return array.filter(function (val, i, arr) {\n    return arr.indexOf(val) === i;\n  }).length;\n}\n\n/**\n * @private\n * Calculates the Gini Gain of an array of predictions and those predictions splitted by a feature.\n * @para {Array} array - Predictions\n * @param {object} splitted - Object with elements \"greater\" and \"lesser\" that contains an array of predictions splitted.\n * @return {number} - Gini Gain.\n */\n\nexport function giniGain(array, splitted) {\n  var splitsImpurity = 0.0;\n  var splits = ['greater', 'lesser'];\n\n  for (var i = 0; i < splits.length; ++i) {\n    var currentSplit = splitted[splits[i]];\n    splitsImpurity +=\n      (giniImpurity(currentSplit) * currentSplit.length) / array.length;\n  }\n\n  return giniImpurity(array) - splitsImpurity;\n}\n\n/**\n * @private\n * Calculates the squared error of a predictions values.\n * @param {Array} array - predictions values\n * @return {number} squared error.\n */\nexport function squaredError(array) {\n  var l = array.length;\n\n  var m = meanArray(array);\n  var squaredError = 0.0;\n\n  for (var i = 0; i < l; ++i) {\n    var currentElement = array[i];\n    squaredError += (currentElement - m) * (currentElement - m);\n  }\n\n  return squaredError;\n}\n\n/**\n * @private\n * Calculates the sum of squared error of the two arrays that contains the splitted values.\n * @param {Array} array - this argument is no necessary but is used to fit with the main interface.\n * @param {object} splitted - Object with elements \"greater\" and \"lesser\" that contains an array of predictions splitted.\n * @return {number} - sum of squared errors.\n */\nexport function regressionError(array, splitted) {\n  var error = 0.0;\n  var splits = ['greater', 'lesser'];\n\n  for (var i = 0; i < splits.length; ++i) {\n    var currentSplit = splitted[splits[i]];\n    error += squaredError(currentSplit);\n  }\n  return error;\n}\n\n/**\n * @private\n * Split the training set and values from a given column of the training set if is less than a value\n * @param {Matrix} X - Training set.\n * @param {Array} y - Training values.\n * @param {number} column - Column to split.\n * @param {number} value - value to split the Training set and values.\n * @return {object} - Object that contains the splitted values.\n */\nexport function matrixSplitter(X, y, column, value) {\n  var lesserX = [];\n  var greaterX = [];\n  var lesserY = [];\n  var greaterY = [];\n\n  for (var i = 0; i < X.rows; ++i) {\n    if (X.get(i, column) < value) {\n      lesserX.push(X.getRow(i));\n      lesserY.push(y[i]);\n    } else {\n      greaterX.push(X.getRow(i));\n      greaterY.push(y[i]);\n    }\n  }\n\n  return {\n    greaterX: greaterX,\n    greaterY: greaterY,\n    lesserX: lesserX,\n    lesserY: lesserY\n  };\n}\n\n/**\n * @private\n * Calculates the mean between two values\n * @param {number} a\n * @param {number} b\n * @return {number}\n */\nexport function mean(a, b) {\n  return (a + b) / 2;\n}\n\n/**\n * @private\n * Returns a list of tuples that contains the i-th element of each array.\n * @param {Array} a\n * @param {Array} b\n * @return {Array} list of tuples.\n */\nexport function zip(a, b) {\n  if (a.length !== b.length) {\n    throw new TypeError(\n      `Error on zip: the size of a: ${a.length} is different from b: ${\n        b.length\n      }`\n    );\n  }\n\n  var ret = new Array(a.length);\n  for (var i = 0; i < a.length; ++i) {\n    ret[i] = [a[i], b[i]];\n  }\n\n  return ret;\n}\n","import Matrix from 'ml-matrix';\nimport mean from 'ml-array-mean';\n\nimport * as Utils from './utils';\n\nconst gainFunctions = {\n  gini: Utils.giniGain,\n  regression: Utils.regressionError\n};\n\nconst splitFunctions = {\n  mean: Utils.mean\n};\n\nexport default class TreeNode {\n  /**\n   * @private\n   * Constructor for a tree node given the options received on the main classes (DecisionTreeClassifier, DecisionTreeRegression)\n   * @param {object|TreeNode} options for loading\n   * @constructor\n   */\n  constructor(options) {\n    // options parameters\n    this.kind = options.kind;\n    this.gainFunction = options.gainFunction;\n    this.splitFunction = options.splitFunction;\n    this.minNumSamples = options.minNumSamples;\n    this.maxDepth = options.maxDepth;\n  }\n\n  /**\n   * @private\n   * Function that retrieve the best feature to make the split.\n   * @param {Matrix} XTranspose - Training set transposed\n   * @param {Array} y - labels or values (depending of the decision tree)\n   * @return {object} - return tree values, the best gain, column and the split value.\n   */\n  bestSplit(XTranspose, y) {\n    // Depending in the node tree class, we set the variables to check information gain (to classify)\n    // or error (for regression)\n\n    var bestGain = this.kind === 'classifier' ? -Infinity : Infinity;\n    var check = this.kind === 'classifier' ? (a, b) => a > b : (a, b) => a < b;\n\n    var maxColumn;\n    var maxValue;\n\n    for (var i = 0; i < XTranspose.rows; ++i) {\n      var currentFeature = XTranspose.getRow(i);\n      var splitValues = this.featureSplit(currentFeature, y);\n      for (var j = 0; j < splitValues.length; ++j) {\n        var currentSplitVal = splitValues[j];\n        var splitted = this.split(currentFeature, y, currentSplitVal);\n\n        var gain = gainFunctions[this.gainFunction](y, splitted);\n        if (check(gain, bestGain)) {\n          maxColumn = i;\n          maxValue = currentSplitVal;\n          bestGain = gain;\n        }\n      }\n    }\n\n    return {\n      maxGain: bestGain,\n      maxColumn: maxColumn,\n      maxValue: maxValue\n    };\n  }\n\n  /**\n   * @private\n   * Makes the split of the training labels or values from the training set feature given a split value.\n   * @param {Array} x - Training set feature\n   * @param {Array} y - Training set value or label\n   * @param {number} splitValue\n   * @return {object}\n   */\n  split(x, y, splitValue) {\n    var lesser = [];\n    var greater = [];\n\n    for (var i = 0; i < x.length; ++i) {\n      if (x[i] < splitValue) {\n        lesser.push(y[i]);\n      } else {\n        greater.push(y[i]);\n      }\n    }\n\n    return {\n      greater: greater,\n      lesser: lesser\n    };\n  }\n\n  /**\n   * @private\n   * Calculates the possible points to split over the tree given a training set feature and corresponding labels or values.\n   * @param {Array} x - Training set feature\n   * @param {Array} y - Training set value or label\n   * @return {Array} possible split values.\n   */\n  featureSplit(x, y) {\n    var splitValues = [];\n    var arr = Utils.zip(x, y);\n    arr.sort(function (a, b) {\n      return a[0] - b[0];\n    });\n\n    for (var i = 1; i < arr.length; ++i) {\n      if (arr[i - 1][1] !== arr[i][1]) {\n        splitValues.push(\n          splitFunctions[this.splitFunction](arr[i - 1][0], arr[i][0])\n        );\n      }\n    }\n\n    return splitValues;\n  }\n\n  /**\n   * @private\n   * Calculate the predictions of a leaf tree node given the training labels or values\n   * @param {Array} y\n   */\n  calculatePrediction(y) {\n    if (this.kind === 'classifier') {\n      this.distribution = Utils.toDiscreteDistribution(\n        y,\n        Utils.getNumberOfClasses(y)\n      );\n      if (this.distribution.columns === 0) {\n        throw new TypeError('Error on calculate the prediction');\n      }\n    } else {\n      this.distribution = mean(y);\n    }\n  }\n\n  /**\n   * @private\n   * Train a node given the training set and labels, because it trains recursively, it also receive\n   * the current depth of the node, parent gain to avoid infinite recursion and boolean value to check if\n   * the training set is transposed.\n   * @param {Matrix} X - Training set (could be transposed or not given transposed).\n   * @param {Array} y - Training labels or values.\n   * @param {number} currentDepth - Current depth of the node.\n   * @param {number} parentGain - parent node gain or error.\n   */\n  train(X, y, currentDepth, parentGain) {\n    if (X.rows <= this.minNumSamples) {\n      this.calculatePrediction(y);\n      return;\n    }\n    if (parentGain === undefined) parentGain = 0.0;\n\n    var XTranspose = X.transpose();\n    var split = this.bestSplit(XTranspose, y);\n\n    this.splitValue = split.maxValue;\n    this.splitColumn = split.maxColumn;\n    this.gain = split.maxGain;\n\n    var splittedMatrix = Utils.matrixSplitter(\n      X,\n      y,\n      this.splitColumn,\n      this.splitValue\n    );\n\n    if (\n      currentDepth < this.maxDepth &&\n      (this.gain > 0.01 && this.gain !== parentGain) &&\n      (splittedMatrix.lesserX.length > 0 && splittedMatrix.greaterX.length > 0)\n    ) {\n      this.left = new TreeNode(this);\n      this.right = new TreeNode(this);\n\n      var lesserX = new Matrix(splittedMatrix.lesserX);\n      var greaterX = new Matrix(splittedMatrix.greaterX);\n\n      this.left.train(\n        lesserX,\n        splittedMatrix.lesserY,\n        currentDepth + 1,\n        this.gain\n      );\n      this.right.train(\n        greaterX,\n        splittedMatrix.greaterY,\n        currentDepth + 1,\n        this.gain\n      );\n    } else {\n      this.calculatePrediction(y);\n    }\n  }\n\n  /**\n   * @private\n   * Calculates the prediction of a given element.\n   * @param {Array} row\n   * @return {number|Array} prediction\n   *          * if a node is a classifier returns an array of probabilities of each class.\n   *          * if a node is for regression returns a number with the prediction.\n   */\n  classify(row) {\n    if (this.right && this.left) {\n      if (row[this.splitColumn] < this.splitValue) {\n        return this.left.classify(row);\n      } else {\n        return this.right.classify(row);\n      }\n    }\n\n    return this.distribution;\n  }\n\n  /**\n   * @private\n   * Set the parameter of the current node and their children.\n   * @param {object} node - parameters of the current node and the children.\n   */\n  setNodeParameters(node) {\n    if (node.distribution !== undefined) {\n      this.distribution =\n        node.distribution.constructor === Array\n          ? new Matrix(node.distribution)\n          : node.distribution;\n    } else {\n      this.distribution = undefined;\n      this.splitValue = node.splitValue;\n      this.splitColumn = node.splitColumn;\n      this.gain = node.gain;\n\n      this.left = new TreeNode(this);\n      this.right = new TreeNode(this);\n\n      if (node.left !== {}) {\n        this.left.setNodeParameters(node.left);\n      }\n      if (node.right !== {}) {\n        this.right.setNodeParameters(node.right);\n      }\n    }\n  }\n}\n","import Matrix from 'ml-matrix';\n\nimport Tree from './TreeNode';\n\nconst defaultOptions = {\n  gainFunction: 'gini',\n  splitFunction: 'mean',\n  minNumSamples: 3,\n  maxDepth: Infinity\n};\n\nexport class DecisionTreeClassifier {\n  /**\n   * Create new Decision Tree Classifier with CART implementation with the given options\n   * @param {object} options\n   * @param {string} [options.gainFunction=\"gini\"] - gain function to get the best split, \"gini\" the only one supported.\n   * @param {string} [options.splitFunction=\"mean\"] - given two integers from a split feature, get the value to split, \"mean\" the only one supported.\n   * @param {number} [options.minNumSamples=3] - minimum number of samples to create a leaf node to decide a class.\n   * @param {number} [options.maxDepth=Infinity] - Max depth of the tree.\n   * @param {object} model - for load purposes.\n   * @constructor\n   */\n  constructor(options, model) {\n    if (options === true) {\n      this.options = model.options;\n      this.root = new Tree(model.options);\n      this.root.setNodeParameters(model.root);\n    } else {\n      this.options = Object.assign({}, defaultOptions, options);\n      this.options.kind = 'classifier';\n    }\n  }\n\n  /**\n   * Train the decision tree with the given training set and labels.\n   * @param {Matrix|MatrixTransposeView|Array} trainingSet\n   * @param {Array} trainingLabels\n   */\n  train(trainingSet, trainingLabels) {\n    this.root = new Tree(this.options);\n    trainingSet = Matrix.checkMatrix(trainingSet);\n    this.root.train(trainingSet, trainingLabels, 0, null);\n  }\n\n  /**\n   * Predicts the output given the matrix to predict.\n   * @param {Matrix|MatrixTransposeView|Array} toPredict\n   * @return {Array} predictions\n   */\n  predict(toPredict) {\n    toPredict = Matrix.checkMatrix(toPredict);\n    var predictions = new Array(toPredict.rows);\n\n    for (var i = 0; i < toPredict.rows; ++i) {\n      predictions[i] = this.root\n        .classify(toPredict.getRow(i))\n        .maxRowIndex(0)[1];\n    }\n\n    return predictions;\n  }\n\n  /**\n   * Export the current model to JSON.\n   * @return {object} - Current model.\n   */\n  toJSON() {\n    return {\n      options: this.options,\n      root: this.root,\n      name: 'DTClassifier'\n    };\n  }\n\n  /**\n   * Load a Decision tree classifier with the given model.\n   * @param {object} model\n   * @return {DecisionTreeClassifier}\n   */\n  static load(model) {\n    if (model.name !== 'DTClassifier') {\n      throw new RangeError(`Invalid model: ${model.name}`);\n    }\n\n    return new DecisionTreeClassifier(true, model);\n  }\n}\n","import Matrix from 'ml-matrix';\n\nimport Tree from './TreeNode';\n\nconst defaultOptions = {\n  gainFunction: 'regression',\n  splitFunction: 'mean',\n  minNumSamples: 3,\n  maxDepth: Infinity\n};\n\nexport class DecisionTreeRegression {\n  /**\n   * Create new Decision Tree Regression with CART implementation with the given options.\n   * @param {object} options\n   * @param {string} [options.gainFunction=\"regression\"] - gain function to get the best split, \"regression\" the only one supported.\n   * @param {string} [options.splitFunction=\"mean\"] - given two integers from a split feature, get the value to split, \"mean\" the only one supported.\n   * @param {number} [options.minNumSamples=3] - minimum number of samples to create a leaf node to decide a class.\n   * @param {number} [options.maxDepth=Infinity] - Max depth of the tree.\n   * @param {object} model - for load purposes.\n   */\n  constructor(options, model) {\n    if (options === true) {\n      this.options = model.options;\n      this.root = new Tree(model.options);\n      this.root.setNodeParameters(model.root);\n    } else {\n      this.options = Object.assign({}, defaultOptions, options);\n      this.options.kind = 'regression';\n    }\n  }\n\n  /**\n   * Train the decision tree with the given training set and values.\n   * @param {Matrix|MatrixTransposeView|Array} trainingSet\n   * @param {Array} trainingValues\n   */\n  train(trainingSet, trainingValues) {\n    this.root = new Tree(this.options);\n\n    if (typeof trainingSet[0] !== 'undefined' && trainingSet[0].length === undefined) {\n      trainingSet = Matrix.columnVector(trainingSet);\n    } else {\n      trainingSet = Matrix.checkMatrix(trainingSet);\n    }\n    this.root.train(trainingSet, trainingValues, 0);\n  }\n\n  /**\n   * Predicts the values given the matrix to predict.\n   * @param {Matrix|MatrixTransposeView|Array} toPredict\n   * @return {Array} predictions\n   */\n  predict(toPredict) {\n    if (typeof toPredict[0] !== 'undefined' && toPredict[0].length === undefined) {\n      toPredict = Matrix.columnVector(toPredict);\n    }\n    toPredict = Matrix.checkMatrix(toPredict);\n\n    var predictions = new Array(toPredict.rows);\n    for (var i = 0; i < toPredict.rows; ++i) {\n      predictions[i] = this.root.classify(toPredict.getRow(i));\n    }\n\n    return predictions;\n  }\n\n  /**\n   * Export the current model to JSON.\n   * @return {object} - Current model.\n   */\n  toJSON() {\n    return {\n      options: this.options,\n      root: this.root,\n      name: 'DTRegression'\n    };\n  }\n\n  /**\n   * Load a Decision tree regression with the given model.\n   * @param {object} model\n   * @return {DecisionTreeRegression}\n   */\n  static load(model) {\n    if (model.name !== 'DTRegression') {\n      throw new RangeError(`Invalid model:${model.name}`);\n    }\n\n    return new DecisionTreeRegression(true, model);\n  }\n}\n","const SMALLEST_UNSAFE_INTEGER = 0x20000000000000;\r\nconst LARGEST_SAFE_INTEGER = SMALLEST_UNSAFE_INTEGER - 1;\r\nconst UINT32_MAX = -1 >>> 0;\r\nconst UINT32_SIZE = UINT32_MAX + 1;\r\nconst INT32_SIZE = UINT32_SIZE / 2;\r\nconst INT32_MAX = INT32_SIZE - 1;\r\nconst UINT21_SIZE = 1 << 21;\r\nconst UINT21_MAX = UINT21_SIZE - 1;\n\n/**\r\n * Returns a value within [-0x80000000, 0x7fffffff]\r\n */\r\nfunction int32(engine) {\r\n    return engine.next() | 0;\r\n}\n\nfunction add(distribution, addend) {\r\n    if (addend === 0) {\r\n        return distribution;\r\n    }\r\n    else {\r\n        return engine => distribution(engine) + addend;\r\n    }\r\n}\n\n/**\r\n * Returns a value within [-0x20000000000000, 0x1fffffffffffff]\r\n */\r\nfunction int53(engine) {\r\n    const high = engine.next() | 0;\r\n    const low = engine.next() >>> 0;\r\n    return ((high & UINT21_MAX) * UINT32_SIZE +\r\n        low +\r\n        (high & UINT21_SIZE ? -SMALLEST_UNSAFE_INTEGER : 0));\r\n}\n\n/**\r\n * Returns a value within [-0x20000000000000, 0x20000000000000]\r\n */\r\nfunction int53Full(engine) {\r\n    while (true) {\r\n        const high = engine.next() | 0;\r\n        if (high & 0x400000) {\r\n            if ((high & 0x7fffff) === 0x400000 && (engine.next() | 0) === 0) {\r\n                return SMALLEST_UNSAFE_INTEGER;\r\n            }\r\n        }\r\n        else {\r\n            const low = engine.next() >>> 0;\r\n            return ((high & UINT21_MAX) * UINT32_SIZE +\r\n                low +\r\n                (high & UINT21_SIZE ? -SMALLEST_UNSAFE_INTEGER : 0));\r\n        }\r\n    }\r\n}\n\n/**\r\n * Returns a value within [0, 0xffffffff]\r\n */\r\nfunction uint32(engine) {\r\n    return engine.next() >>> 0;\r\n}\n\n/**\r\n * Returns a value within [0, 0x1fffffffffffff]\r\n */\r\nfunction uint53(engine) {\r\n    const high = engine.next() & UINT21_MAX;\r\n    const low = engine.next() >>> 0;\r\n    return high * UINT32_SIZE + low;\r\n}\n\n/**\r\n * Returns a value within [0, 0x20000000000000]\r\n */\r\nfunction uint53Full(engine) {\r\n    while (true) {\r\n        const high = engine.next() | 0;\r\n        if (high & UINT21_SIZE) {\r\n            if ((high & UINT21_MAX) === 0 && (engine.next() | 0) === 0) {\r\n                return SMALLEST_UNSAFE_INTEGER;\r\n            }\r\n        }\r\n        else {\r\n            const low = engine.next() >>> 0;\r\n            return (high & UINT21_MAX) * UINT32_SIZE + low;\r\n        }\r\n    }\r\n}\n\nfunction isPowerOfTwoMinusOne(value) {\r\n    return ((value + 1) & value) === 0;\r\n}\r\nfunction bitmask(masking) {\r\n    return (engine) => engine.next() & masking;\r\n}\r\nfunction downscaleToLoopCheckedRange(range) {\r\n    const extendedRange = range + 1;\r\n    const maximum = extendedRange * Math.floor(UINT32_SIZE / extendedRange);\r\n    return engine => {\r\n        let value = 0;\r\n        do {\r\n            value = engine.next() >>> 0;\r\n        } while (value >= maximum);\r\n        return value % extendedRange;\r\n    };\r\n}\r\nfunction downscaleToRange(range) {\r\n    if (isPowerOfTwoMinusOne(range)) {\r\n        return bitmask(range);\r\n    }\r\n    else {\r\n        return downscaleToLoopCheckedRange(range);\r\n    }\r\n}\r\nfunction isEvenlyDivisibleByMaxInt32(value) {\r\n    return (value | 0) === 0;\r\n}\r\nfunction upscaleWithHighMasking(masking) {\r\n    return engine => {\r\n        const high = engine.next() & masking;\r\n        const low = engine.next() >>> 0;\r\n        return high * UINT32_SIZE + low;\r\n    };\r\n}\r\nfunction upscaleToLoopCheckedRange(extendedRange) {\r\n    const maximum = extendedRange * Math.floor(SMALLEST_UNSAFE_INTEGER / extendedRange);\r\n    return engine => {\r\n        let ret = 0;\r\n        do {\r\n            const high = engine.next() & UINT21_MAX;\r\n            const low = engine.next() >>> 0;\r\n            ret = high * UINT32_SIZE + low;\r\n        } while (ret >= maximum);\r\n        return ret % extendedRange;\r\n    };\r\n}\r\nfunction upscaleWithinU53(range) {\r\n    const extendedRange = range + 1;\r\n    if (isEvenlyDivisibleByMaxInt32(extendedRange)) {\r\n        const highRange = ((extendedRange / UINT32_SIZE) | 0) - 1;\r\n        if (isPowerOfTwoMinusOne(highRange)) {\r\n            return upscaleWithHighMasking(highRange);\r\n        }\r\n    }\r\n    return upscaleToLoopCheckedRange(extendedRange);\r\n}\r\nfunction upscaleWithinI53AndLoopCheck(min, max) {\r\n    return engine => {\r\n        let ret = 0;\r\n        do {\r\n            const high = engine.next() | 0;\r\n            const low = engine.next() >>> 0;\r\n            ret =\r\n                (high & UINT21_MAX) * UINT32_SIZE +\r\n                    low +\r\n                    (high & UINT21_SIZE ? -SMALLEST_UNSAFE_INTEGER : 0);\r\n        } while (ret < min || ret > max);\r\n        return ret;\r\n    };\r\n}\r\n/**\r\n * Returns a Distribution to return a value within [min, max]\r\n * @param min The minimum integer value, inclusive. No less than -0x20000000000000.\r\n * @param max The maximum integer value, inclusive. No greater than 0x20000000000000.\r\n */\r\nfunction integer(min, max) {\r\n    min = Math.floor(min);\r\n    max = Math.floor(max);\r\n    if (min < -SMALLEST_UNSAFE_INTEGER || !isFinite(min)) {\r\n        throw new RangeError(`Expected min to be at least ${-SMALLEST_UNSAFE_INTEGER}`);\r\n    }\r\n    else if (max > SMALLEST_UNSAFE_INTEGER || !isFinite(max)) {\r\n        throw new RangeError(`Expected max to be at most ${SMALLEST_UNSAFE_INTEGER}`);\r\n    }\r\n    const range = max - min;\r\n    if (range <= 0 || !isFinite(range)) {\r\n        return () => min;\r\n    }\r\n    else if (range === UINT32_MAX) {\r\n        if (min === 0) {\r\n            return uint32;\r\n        }\r\n        else {\r\n            return add(int32, min + INT32_SIZE);\r\n        }\r\n    }\r\n    else if (range < UINT32_MAX) {\r\n        return add(downscaleToRange(range), min);\r\n    }\r\n    else if (range === LARGEST_SAFE_INTEGER) {\r\n        return add(uint53, min);\r\n    }\r\n    else if (range < LARGEST_SAFE_INTEGER) {\r\n        return add(upscaleWithinU53(range), min);\r\n    }\r\n    else if (max - 1 - min === LARGEST_SAFE_INTEGER) {\r\n        return add(uint53Full, min);\r\n    }\r\n    else if (min === -SMALLEST_UNSAFE_INTEGER &&\r\n        max === SMALLEST_UNSAFE_INTEGER) {\r\n        return int53Full;\r\n    }\r\n    else if (min === -SMALLEST_UNSAFE_INTEGER && max === LARGEST_SAFE_INTEGER) {\r\n        return int53;\r\n    }\r\n    else if (min === -LARGEST_SAFE_INTEGER && max === SMALLEST_UNSAFE_INTEGER) {\r\n        return add(int53, 1);\r\n    }\r\n    else if (max === SMALLEST_UNSAFE_INTEGER) {\r\n        return add(upscaleWithinI53AndLoopCheck(min - 1, max - 1), 1);\r\n    }\r\n    else {\r\n        return upscaleWithinI53AndLoopCheck(min, max);\r\n    }\r\n}\n\nfunction isLeastBitTrue(engine) {\r\n    return (engine.next() & 1) === 1;\r\n}\r\nfunction lessThan(distribution, value) {\r\n    return engine => distribution(engine) < value;\r\n}\r\nfunction probability(percentage) {\r\n    if (percentage <= 0) {\r\n        return () => false;\r\n    }\r\n    else if (percentage >= 1) {\r\n        return () => true;\r\n    }\r\n    else {\r\n        const scaled = percentage * UINT32_SIZE;\r\n        if (scaled % 1 === 0) {\r\n            return lessThan(int32, (scaled - INT32_SIZE) | 0);\r\n        }\r\n        else {\r\n            return lessThan(uint53, Math.round(percentage * SMALLEST_UNSAFE_INTEGER));\r\n        }\r\n    }\r\n}\r\nfunction bool(numerator, denominator) {\r\n    if (denominator == null) {\r\n        if (numerator == null) {\r\n            return isLeastBitTrue;\r\n        }\r\n        return probability(numerator);\r\n    }\r\n    else {\r\n        if (numerator <= 0) {\r\n            return () => false;\r\n        }\r\n        else if (numerator >= denominator) {\r\n            return () => true;\r\n        }\r\n        return lessThan(integer(0, denominator - 1), numerator);\r\n    }\r\n}\n\n/**\r\n * Returns a Distribution that returns a random `Date` within the inclusive\r\n * range of [`start`, `end`].\r\n * @param start The minimum `Date`\r\n * @param end The maximum `Date`\r\n */\r\nfunction date(start, end) {\r\n    const distribution = integer(+start, +end);\r\n    return engine => new Date(distribution(engine));\r\n}\n\n/**\r\n * Returns a Distribution to return a value within [1, sideCount]\r\n * @param sideCount The number of sides of the die\r\n */\r\nfunction die(sideCount) {\r\n    return integer(1, sideCount);\r\n}\n\n/**\r\n * Returns a distribution that returns an array of length `dieCount` of values\r\n * within [1, `sideCount`]\r\n * @param sideCount The number of sides of each die\r\n * @param dieCount The number of dice\r\n */\r\nfunction dice(sideCount, dieCount) {\r\n    const distribution = die(sideCount);\r\n    return engine => {\r\n        const result = [];\r\n        for (let i = 0; i < dieCount; ++i) {\r\n            result.push(distribution(engine));\r\n        }\r\n        return result;\r\n    };\r\n}\n\n// tslint:disable:unified-signatures\r\n// has 2**x chars, for faster uniform distribution\r\nconst DEFAULT_STRING_POOL = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_-\";\r\nfunction string(pool = DEFAULT_STRING_POOL) {\r\n    const poolLength = pool.length;\r\n    if (!poolLength) {\r\n        throw new Error(\"Expected pool not to be an empty string\");\r\n    }\r\n    const distribution = integer(0, poolLength - 1);\r\n    return (engine, length) => {\r\n        let result = \"\";\r\n        for (let i = 0; i < length; ++i) {\r\n            const j = distribution(engine);\r\n            result += pool.charAt(j);\r\n        }\r\n        return result;\r\n    };\r\n}\n\nconst LOWER_HEX_POOL = \"0123456789abcdef\";\r\nconst lowerHex = string(LOWER_HEX_POOL);\r\nconst upperHex = string(LOWER_HEX_POOL.toUpperCase());\r\n/**\r\n * Returns a Distribution that returns a random string comprised of numbers\r\n * or the characters `abcdef` (or `ABCDEF`) of length `length`.\r\n * @param length Length of the result string\r\n * @param uppercase Whether the string should use `ABCDEF` instead of `abcdef`\r\n */\r\nfunction hex(uppercase) {\r\n    if (uppercase) {\r\n        return upperHex;\r\n    }\r\n    else {\r\n        return lowerHex;\r\n    }\r\n}\n\nfunction convertSliceArgument(value, length) {\r\n    if (value < 0) {\r\n        return Math.max(value + length, 0);\r\n    }\r\n    else {\r\n        return Math.min(value, length);\r\n    }\r\n}\n\nfunction toInteger(value) {\r\n    const num = +value;\r\n    if (num < 0) {\r\n        return Math.ceil(num);\r\n    }\r\n    else {\r\n        return Math.floor(num);\r\n    }\r\n}\n\n/**\r\n * Returns a random value within the provided `source` within the sliced\r\n * bounds of `begin` and `end`.\r\n * @param source an array of items to pick from\r\n * @param begin the beginning slice index (defaults to `0`)\r\n * @param end the ending slice index (defaults to `source.length`)\r\n */\r\nfunction pick(engine, source, begin, end) {\r\n    const length = source.length;\r\n    if (length === 0) {\r\n        throw new RangeError(\"Cannot pick from an empty array\");\r\n    }\r\n    const start = begin == null ? 0 : convertSliceArgument(toInteger(begin), length);\r\n    const finish = end === void 0 ? length : convertSliceArgument(toInteger(end), length);\r\n    if (start >= finish) {\r\n        throw new RangeError(`Cannot pick between bounds ${start} and ${finish}`);\r\n    }\r\n    const distribution = integer(start, finish - 1);\r\n    return source[distribution(engine)];\r\n}\n\nfunction multiply(distribution, multiplier) {\r\n    if (multiplier === 1) {\r\n        return distribution;\r\n    }\r\n    else if (multiplier === 0) {\r\n        return () => 0;\r\n    }\r\n    else {\r\n        return engine => distribution(engine) * multiplier;\r\n    }\r\n}\n\n/**\r\n * Returns a floating-point value within [0.0, 1.0)\r\n */\r\nfunction realZeroToOneExclusive(engine) {\r\n    return uint53(engine) / SMALLEST_UNSAFE_INTEGER;\r\n}\n\n/**\r\n * Returns a floating-point value within [0.0, 1.0]\r\n */\r\nfunction realZeroToOneInclusive(engine) {\r\n    return uint53Full(engine) / SMALLEST_UNSAFE_INTEGER;\r\n}\n\n/**\r\n * Returns a floating-point value within [min, max) or [min, max]\r\n * @param min The minimum floating-point value, inclusive.\r\n * @param max The maximum floating-point value.\r\n * @param inclusive If true, `max` will be inclusive.\r\n */\r\nfunction real(min, max, inclusive = false) {\r\n    if (!isFinite(min)) {\r\n        throw new RangeError(\"Expected min to be a finite number\");\r\n    }\r\n    else if (!isFinite(max)) {\r\n        throw new RangeError(\"Expected max to be a finite number\");\r\n    }\r\n    return add(multiply(inclusive ? realZeroToOneInclusive : realZeroToOneExclusive, max - min), min);\r\n}\n\nconst sliceArray = Array.prototype.slice;\n\n/**\r\n * Shuffles an array in-place\r\n * @param engine The Engine to use when choosing random values\r\n * @param array The array to shuffle\r\n * @param downTo minimum index to shuffle. Only used internally.\r\n */\r\nfunction shuffle(engine, array, downTo = 0) {\r\n    const length = array.length;\r\n    if (length) {\r\n        for (let i = (length - 1) >>> 0; i > downTo; --i) {\r\n            const distribution = integer(0, i);\r\n            const j = distribution(engine);\r\n            if (i !== j) {\r\n                const tmp = array[i];\r\n                array[i] = array[j];\r\n                array[j] = tmp;\r\n            }\r\n        }\r\n    }\r\n    return array;\r\n}\n\n/**\r\n * From the population array, produce an array with sampleSize elements that\r\n * are randomly chosen without repeats.\r\n * @param engine The Engine to use when choosing random values\r\n * @param population An array that has items to choose a sample from\r\n * @param sampleSize The size of the result array\r\n */\r\nfunction sample(engine, population, sampleSize) {\r\n    if (sampleSize < 0 ||\r\n        sampleSize > population.length ||\r\n        !isFinite(sampleSize)) {\r\n        throw new RangeError(\"Expected sampleSize to be within 0 and the length of the population\");\r\n    }\r\n    if (sampleSize === 0) {\r\n        return [];\r\n    }\r\n    const clone = sliceArray.call(population);\r\n    const length = clone.length;\r\n    if (length === sampleSize) {\r\n        return shuffle(engine, clone, 0);\r\n    }\r\n    const tailLength = length - sampleSize;\r\n    return shuffle(engine, clone, tailLength - 1).slice(tailLength);\r\n}\n\nconst stringRepeat = (() => {\r\n    try {\r\n        if (\"x\".repeat(3) === \"xxx\") {\r\n            return (pattern, count) => pattern.repeat(count);\r\n        }\r\n    }\r\n    catch (_) {\r\n        // nothing to do here\r\n    }\r\n    return (pattern, count) => {\r\n        let result = \"\";\r\n        while (count > 0) {\r\n            if (count & 1) {\r\n                result += pattern;\r\n            }\r\n            count >>= 1;\r\n            pattern += pattern;\r\n        }\r\n        return result;\r\n    };\r\n})();\n\nfunction zeroPad(text, zeroCount) {\r\n    return stringRepeat(\"0\", zeroCount - text.length) + text;\r\n}\r\n/**\r\n * Returns a Universally Unique Identifier Version 4.\r\n *\r\n * See http://en.wikipedia.org/wiki/Universally_unique_identifier\r\n */\r\nfunction uuid4(engine) {\r\n    const a = engine.next() >>> 0;\r\n    const b = engine.next() | 0;\r\n    const c = engine.next() | 0;\r\n    const d = engine.next() >>> 0;\r\n    return (zeroPad(a.toString(16), 8) +\r\n        \"-\" +\r\n        zeroPad((b & 0xffff).toString(16), 4) +\r\n        \"-\" +\r\n        zeroPad((((b >> 4) & 0x0fff) | 0x4000).toString(16), 4) +\r\n        \"-\" +\r\n        zeroPad(((c & 0x3fff) | 0x8000).toString(16), 4) +\r\n        \"-\" +\r\n        zeroPad(((c >> 4) & 0xffff).toString(16), 4) +\r\n        zeroPad(d.toString(16), 8));\r\n}\n\n/**\r\n * An int32-producing Engine that uses `Math.random()`\r\n */\r\nconst nativeMath = {\r\n    next() {\r\n        return (Math.random() * UINT32_SIZE) | 0;\r\n    }\r\n};\n\n// tslint:disable:unified-signatures\r\n/**\r\n * A wrapper around an Engine that provides easy-to-use methods for\r\n * producing values based on known distributions\r\n */\r\nclass Random {\r\n    /**\r\n     * Creates a new Random wrapper\r\n     * @param engine The engine to use (defaults to a `Math.random`-based implementation)\r\n     */\r\n    constructor(engine = nativeMath) {\r\n        this.engine = engine;\r\n    }\r\n    /**\r\n     * Returns a value within [-0x80000000, 0x7fffffff]\r\n     */\r\n    int32() {\r\n        return int32(this.engine);\r\n    }\r\n    /**\r\n     * Returns a value within [0, 0xffffffff]\r\n     */\r\n    uint32() {\r\n        return uint32(this.engine);\r\n    }\r\n    /**\r\n     * Returns a value within [0, 0x1fffffffffffff]\r\n     */\r\n    uint53() {\r\n        return uint53(this.engine);\r\n    }\r\n    /**\r\n     * Returns a value within [0, 0x20000000000000]\r\n     */\r\n    uint53Full() {\r\n        return uint53Full(this.engine);\r\n    }\r\n    /**\r\n     * Returns a value within [-0x20000000000000, 0x1fffffffffffff]\r\n     */\r\n    int53() {\r\n        return int53(this.engine);\r\n    }\r\n    /**\r\n     * Returns a value within [-0x20000000000000, 0x20000000000000]\r\n     */\r\n    int53Full() {\r\n        return int53Full(this.engine);\r\n    }\r\n    /**\r\n     * Returns a value within [min, max]\r\n     * @param min The minimum integer value, inclusive. No less than -0x20000000000000.\r\n     * @param max The maximum integer value, inclusive. No greater than 0x20000000000000.\r\n     */\r\n    integer(min, max) {\r\n        return integer(min, max)(this.engine);\r\n    }\r\n    /**\r\n     * Returns a floating-point value within [0.0, 1.0]\r\n     */\r\n    realZeroToOneInclusive() {\r\n        return realZeroToOneInclusive(this.engine);\r\n    }\r\n    /**\r\n     * Returns a floating-point value within [0.0, 1.0)\r\n     */\r\n    realZeroToOneExclusive() {\r\n        return realZeroToOneExclusive(this.engine);\r\n    }\r\n    /**\r\n     * Returns a floating-point value within [min, max) or [min, max]\r\n     * @param min The minimum floating-point value, inclusive.\r\n     * @param max The maximum floating-point value.\r\n     * @param inclusive If true, `max` will be inclusive.\r\n     */\r\n    real(min, max, inclusive = false) {\r\n        return real(min, max, inclusive)(this.engine);\r\n    }\r\n    bool(numerator, denominator) {\r\n        return bool(numerator, denominator)(this.engine);\r\n    }\r\n    /**\r\n     * Return a random value within the provided `source` within the sliced\r\n     * bounds of `begin` and `end`.\r\n     * @param source an array of items to pick from\r\n     * @param begin the beginning slice index (defaults to `0`)\r\n     * @param end the ending slice index (defaults to `source.length`)\r\n     */\r\n    pick(source, begin, end) {\r\n        return pick(this.engine, source, begin, end);\r\n    }\r\n    /**\r\n     * Shuffles an array in-place\r\n     * @param array The array to shuffle\r\n     */\r\n    shuffle(array) {\r\n        return shuffle(this.engine, array);\r\n    }\r\n    /**\r\n     * From the population array, returns an array with sampleSize elements that\r\n     * are randomly chosen without repeats.\r\n     * @param population An array that has items to choose a sample from\r\n     * @param sampleSize The size of the result array\r\n     */\r\n    sample(population, sampleSize) {\r\n        return sample(this.engine, population, sampleSize);\r\n    }\r\n    /**\r\n     * Returns a value within [1, sideCount]\r\n     * @param sideCount The number of sides of the die\r\n     */\r\n    die(sideCount) {\r\n        return die(sideCount)(this.engine);\r\n    }\r\n    /**\r\n     * Returns an array of length `dieCount` of values within [1, sideCount]\r\n     * @param sideCount The number of sides of each die\r\n     * @param dieCount The number of dice\r\n     */\r\n    dice(sideCount, dieCount) {\r\n        return dice(sideCount, dieCount)(this.engine);\r\n    }\r\n    /**\r\n     * Returns a Universally Unique Identifier Version 4.\r\n     *\r\n     * See http://en.wikipedia.org/wiki/Universally_unique_identifier\r\n     */\r\n    uuid4() {\r\n        return uuid4(this.engine);\r\n    }\r\n    string(length, pool) {\r\n        return string(pool)(this.engine, length);\r\n    }\r\n    /**\r\n     * Returns a random string comprised of numbers or the characters `abcdef`\r\n     * (or `ABCDEF`) of length `length`.\r\n     * @param length Length of the result string\r\n     * @param uppercase Whether the string should use `ABCDEF` instead of `abcdef`\r\n     */\r\n    hex(length, uppercase) {\r\n        return hex(uppercase)(this.engine, length);\r\n    }\r\n    /**\r\n     * Returns a random `Date` within the inclusive range of [`start`, `end`].\r\n     * @param start The minimum `Date`\r\n     * @param end The maximum `Date`\r\n     */\r\n    date(start, end) {\r\n        return date(start, end)(this.engine);\r\n    }\r\n}\n\n/**\r\n * See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int32Array\r\n */\r\nconst I32Array = (() => {\r\n    try {\r\n        const buffer = new ArrayBuffer(4);\r\n        const view = new Int32Array(buffer);\r\n        view[0] = INT32_SIZE;\r\n        if (view[0] === -INT32_SIZE) {\r\n            return Int32Array;\r\n        }\r\n    }\r\n    catch (_) {\r\n        // nothing to do here\r\n    }\r\n    return Array;\r\n})();\n\nlet data = null;\r\nconst COUNT = 128;\r\nlet index = COUNT;\r\n/**\r\n * An Engine that relies on the globally-available `crypto.getRandomValues`,\r\n * which is typically available in modern browsers.\r\n *\r\n * See https://developer.mozilla.org/en-US/docs/Web/API/Crypto/getRandomValues\r\n *\r\n * If unavailable or otherwise non-functioning, then `browserCrypto` will\r\n * likely `throw` on the first call to `next()`.\r\n */\r\nconst browserCrypto = {\r\n    next() {\r\n        if (index >= COUNT) {\r\n            if (data === null) {\r\n                data = new I32Array(COUNT);\r\n            }\r\n            crypto.getRandomValues(data);\r\n            index = 0;\r\n        }\r\n        return data[index++] | 0;\r\n    }\r\n};\n\n/**\r\n * Returns an array of random int32 values, based on current time\r\n * and a random number engine\r\n *\r\n * @param engine an Engine to pull random values from, default `nativeMath`\r\n * @param length the length of the Array, minimum 1, default 16\r\n */\r\nfunction createEntropy(engine = nativeMath, length = 16) {\r\n    const array = [];\r\n    array.push(new Date().getTime() | 0);\r\n    for (let i = 1; i < length; ++i) {\r\n        array[i] = engine.next() | 0;\r\n    }\r\n    return array;\r\n}\n\n/**\r\n * See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/imul\r\n */\r\nconst imul = (() => {\r\n    try {\r\n        if (Math.imul(UINT32_MAX, 5) === -5) {\r\n            return Math.imul;\r\n        }\r\n    }\r\n    catch (_) {\r\n        // nothing to do here\r\n    }\r\n    const UINT16_MAX = 0xffff;\r\n    return (a, b) => {\r\n        const ah = (a >>> 16) & UINT16_MAX;\r\n        const al = a & UINT16_MAX;\r\n        const bh = (b >>> 16) & UINT16_MAX;\r\n        const bl = b & UINT16_MAX;\r\n        // the shift by 0 fixes the sign on the high part\r\n        // the final |0 converts the unsigned value into a signed value\r\n        return (al * bl + (((ah * bl + al * bh) << 16) >>> 0)) | 0;\r\n    };\r\n})();\n\nconst ARRAY_SIZE = 624;\r\nconst ARRAY_MAX = ARRAY_SIZE - 1;\r\nconst M = 397;\r\nconst ARRAY_SIZE_MINUS_M = ARRAY_SIZE - M;\r\nconst A = 0x9908b0df;\r\n/**\r\n * An Engine that is a pseudorandom number generator using the Mersenne\r\n * Twister algorithm based on the prime 2**19937 − 1\r\n *\r\n * See http://en.wikipedia.org/wiki/Mersenne_twister\r\n */\r\nclass MersenneTwister19937 {\r\n    /**\r\n     * MersenneTwister19937 should not be instantiated directly.\r\n     * Instead, use the static methods `seed`, `seedWithArray`, or `autoSeed`.\r\n     */\r\n    constructor() {\r\n        this.data = new I32Array(ARRAY_SIZE);\r\n        this.index = 0; // integer within [0, 624]\r\n        this.uses = 0;\r\n    }\r\n    /**\r\n     * Returns a MersenneTwister19937 seeded with an initial int32 value\r\n     * @param initial the initial seed value\r\n     */\r\n    static seed(initial) {\r\n        return new MersenneTwister19937().seed(initial);\r\n    }\r\n    /**\r\n     * Returns a MersenneTwister19937 seeded with zero or more int32 values\r\n     * @param source A series of int32 values\r\n     */\r\n    static seedWithArray(source) {\r\n        return new MersenneTwister19937().seedWithArray(source);\r\n    }\r\n    /**\r\n     * Returns a MersenneTwister19937 seeded with the current time and\r\n     * a series of natively-generated random values\r\n     */\r\n    static autoSeed() {\r\n        return MersenneTwister19937.seedWithArray(createEntropy());\r\n    }\r\n    /**\r\n     * Returns the next int32 value of the sequence\r\n     */\r\n    next() {\r\n        if ((this.index | 0) >= ARRAY_SIZE) {\r\n            refreshData(this.data);\r\n            this.index = 0;\r\n        }\r\n        const value = this.data[this.index];\r\n        this.index = (this.index + 1) | 0;\r\n        this.uses += 1;\r\n        return temper(value) | 0;\r\n    }\r\n    /**\r\n     * Returns the number of times that the Engine has been used.\r\n     *\r\n     * This can be provided to an unused MersenneTwister19937 with the same\r\n     * seed, bringing it to the exact point that was left off.\r\n     */\r\n    getUseCount() {\r\n        return this.uses;\r\n    }\r\n    /**\r\n     * Discards one or more items from the engine\r\n     * @param count The count of items to discard\r\n     */\r\n    discard(count) {\r\n        if (count <= 0) {\r\n            return this;\r\n        }\r\n        this.uses += count;\r\n        if ((this.index | 0) >= ARRAY_SIZE) {\r\n            refreshData(this.data);\r\n            this.index = 0;\r\n        }\r\n        while (count + this.index > ARRAY_SIZE) {\r\n            count -= ARRAY_SIZE - this.index;\r\n            refreshData(this.data);\r\n            this.index = 0;\r\n        }\r\n        this.index = (this.index + count) | 0;\r\n        return this;\r\n    }\r\n    seed(initial) {\r\n        let previous = 0;\r\n        this.data[0] = previous = initial | 0;\r\n        for (let i = 1; i < ARRAY_SIZE; i = (i + 1) | 0) {\r\n            this.data[i] = previous =\r\n                (imul(previous ^ (previous >>> 30), 0x6c078965) + i) | 0;\r\n        }\r\n        this.index = ARRAY_SIZE;\r\n        this.uses = 0;\r\n        return this;\r\n    }\r\n    seedWithArray(source) {\r\n        this.seed(0x012bd6aa);\r\n        seedWithArray(this.data, source);\r\n        return this;\r\n    }\r\n}\r\nfunction refreshData(data) {\r\n    let k = 0;\r\n    let tmp = 0;\r\n    for (; (k | 0) < ARRAY_SIZE_MINUS_M; k = (k + 1) | 0) {\r\n        tmp = (data[k] & INT32_SIZE) | (data[(k + 1) | 0] & INT32_MAX);\r\n        data[k] = data[(k + M) | 0] ^ (tmp >>> 1) ^ (tmp & 0x1 ? A : 0);\r\n    }\r\n    for (; (k | 0) < ARRAY_MAX; k = (k + 1) | 0) {\r\n        tmp = (data[k] & INT32_SIZE) | (data[(k + 1) | 0] & INT32_MAX);\r\n        data[k] =\r\n            data[(k - ARRAY_SIZE_MINUS_M) | 0] ^ (tmp >>> 1) ^ (tmp & 0x1 ? A : 0);\r\n    }\r\n    tmp = (data[ARRAY_MAX] & INT32_SIZE) | (data[0] & INT32_MAX);\r\n    data[ARRAY_MAX] = data[M - 1] ^ (tmp >>> 1) ^ (tmp & 0x1 ? A : 0);\r\n}\r\nfunction temper(value) {\r\n    value ^= value >>> 11;\r\n    value ^= (value << 7) & 0x9d2c5680;\r\n    value ^= (value << 15) & 0xefc60000;\r\n    return value ^ (value >>> 18);\r\n}\r\nfunction seedWithArray(data, source) {\r\n    let i = 1;\r\n    let j = 0;\r\n    const sourceLength = source.length;\r\n    let k = Math.max(sourceLength, ARRAY_SIZE) | 0;\r\n    let previous = data[0] | 0;\r\n    for (; (k | 0) > 0; --k) {\r\n        data[i] = previous =\r\n            ((data[i] ^ imul(previous ^ (previous >>> 30), 0x0019660d)) +\r\n                (source[j] | 0) +\r\n                (j | 0)) |\r\n                0;\r\n        i = (i + 1) | 0;\r\n        ++j;\r\n        if ((i | 0) > ARRAY_MAX) {\r\n            data[0] = data[ARRAY_MAX];\r\n            i = 1;\r\n        }\r\n        if (j >= sourceLength) {\r\n            j = 0;\r\n        }\r\n    }\r\n    for (k = ARRAY_MAX; (k | 0) > 0; --k) {\r\n        data[i] = previous =\r\n            ((data[i] ^ imul(previous ^ (previous >>> 30), 0x5d588b65)) - i) | 0;\r\n        i = (i + 1) | 0;\r\n        if ((i | 0) > ARRAY_MAX) {\r\n            data[0] = data[ARRAY_MAX];\r\n            i = 1;\r\n        }\r\n    }\r\n    data[0] = INT32_SIZE;\r\n}\n\nlet data$1 = null;\r\nconst COUNT$1 = 128;\r\nlet index$1 = COUNT$1;\r\n/**\r\n * An Engine that relies on the node-available\r\n * `require('crypto').randomBytes`, which has been available since 0.58.\r\n *\r\n * See https://nodejs.org/api/crypto.html#crypto_crypto_randombytes_size_callback\r\n *\r\n * If unavailable or otherwise non-functioning, then `nodeCrypto` will\r\n * likely `throw` on the first call to `next()`.\r\n */\r\nconst nodeCrypto = {\r\n    next() {\r\n        if (index$1 >= COUNT$1) {\r\n            data$1 = new Int32Array(new Int8Array(require(\"crypto\").randomBytes(4 * COUNT$1)).buffer);\r\n            index$1 = 0;\r\n        }\r\n        return data$1[index$1++] | 0;\r\n    }\r\n};\n\n/**\r\n * Returns a Distribution to random value within the provided `source`\r\n * within the sliced bounds of `begin` and `end`.\r\n * @param source an array of items to pick from\r\n * @param begin the beginning slice index (defaults to `0`)\r\n * @param end the ending slice index (defaults to `source.length`)\r\n */\r\nfunction picker(source, begin, end) {\r\n    const clone = sliceArray.call(source, begin, end);\r\n    if (clone.length === 0) {\r\n        throw new RangeError(`Cannot pick from a source with no items`);\r\n    }\r\n    const distribution = integer(0, clone.length - 1);\r\n    return engine => clone[distribution(engine)];\r\n}\n\nexport { Random, browserCrypto, nativeMath, MersenneTwister19937, nodeCrypto, bool, date, dice, die, hex, int32, int53, int53Full, integer, pick, picker, real, realZeroToOneExclusive, realZeroToOneInclusive, sample, shuffle, string, uint32, uint53, uint53Full, uuid4, createEntropy };\n//# sourceMappingURL=random-js.esm.js.map\n","import * as Random from 'random-js';\nimport Matrix from 'ml-matrix';\n\nexport function checkFloat(n) {\n  return n > 0.0 && n <= 1.0;\n}\n\n\n/**\n * Select n with replacement elements on the training set and values, where n is the size of the training set.\n * @ignore\n * @param {Matrix} trainingSet\n * @param {Array} trainingValue\n * @param {number} seed - seed for the random selection, must be a 32-bit integer.\n * @return {object} with new X and y.\n */\nexport function examplesBaggingWithReplacement(\n  trainingSet,\n  trainingValue,\n  seed\n) {\n  var engine;\n  var distribution = Random.integer(0, trainingSet.rows - 1);\n  if (seed === undefined) {\n    engine = Random.MersenneTwister19937.autoSeed();\n  } else if (Number.isInteger(seed)) {\n    engine = Random.MersenneTwister19937.seed(seed);\n  } else {\n    throw new RangeError(\n      `Expected seed must be undefined or integer not ${seed}`\n    );\n  }\n\n  var Xr = new Array(trainingSet.rows);\n  var yr = new Array(trainingSet.rows);\n\n  for (var i = 0; i < trainingSet.rows; ++i) {\n    var index = distribution(engine);\n    Xr[i] = trainingSet.getRow(index);\n    yr[i] = trainingValue[index];\n  }\n\n  return {\n    X: new Matrix(Xr),\n    y: yr\n  };\n}\n\n/**\n * selects n features from the training set with or without replacement, returns the new training set and the indexes used.\n * @ignore\n * @param {Matrix} trainingSet\n * @param {number} n - features.\n * @param {boolean} replacement\n * @param {number} seed - seed for the random selection, must be a 32-bit integer.\n * @return {object}\n */\nexport function featureBagging(trainingSet, n, replacement, seed) {\n  if (trainingSet.columns < n) {\n    throw new RangeError(\n      'N should be less or equal to the number of columns of X'\n    );\n  }\n\n  var distribution = Random.integer(0, trainingSet.columns - 1);\n  var engine;\n  if (seed === undefined) {\n    engine = Random.MersenneTwister19937.autoSeed();\n  } else if (Number.isInteger(seed)) {\n    engine = Random.MersenneTwister19937.seed(seed);\n  } else {\n    throw new RangeError(\n      `Expected seed must be undefined or integer not ${seed}`\n    );\n  }\n\n  var toRet = new Matrix(trainingSet.rows, n);\n\n  if (replacement) {\n    var usedIndex = new Array(n);\n    for (var i = 0; i < n; ++i) {\n      var index = distribution(engine);\n      usedIndex[i] = index;\n      toRet.setColumn(i, trainingSet.getColumn(index));\n    }\n  } else {\n    usedIndex = new Set();\n    index = distribution(engine);\n    for (i = 0; i < n; ++i) {\n      while (usedIndex.has(index)) {\n        index = distribution(engine);\n      }\n      toRet.setColumn(i, trainingSet.getColumn(index));\n      usedIndex.add(index);\n    }\n    usedIndex = Array.from(usedIndex);\n  }\n\n  return {\n    X: toRet,\n    usedIndex: usedIndex\n  };\n}\n","import {\n  DecisionTreeClassifier as DTClassifier,\n  DecisionTreeRegression as DTRegression\n} from 'ml-cart';\nimport { Matrix, WrapperMatrix2D, MatrixTransposeView, MatrixColumnSelectionView } from 'ml-matrix';\n\nimport * as Utils from './utils';\n\n/**\n * @class RandomForestBase\n */\nexport class RandomForestBase {\n  /**\n   * Create a new base random forest for a classifier or regression model.\n   * @constructor\n   * @param {object} options\n   * @param {number|String} [options.maxFeatures] - the number of features used on each estimator.\n   *        * if is an integer it selects maxFeatures elements over the sample features.\n   *        * if is a float between (0, 1), it takes the percentage of features.\n   * @param {boolean} [options.replacement] - use replacement over the sample features.\n   * @param {number} [options.seed] - seed for feature and samples selection, must be a 32-bit integer.\n   * @param {number} [options.nEstimators] - number of estimator to use.\n   * @param {object} [options.treeOptions] - options for the tree classifier, see [ml-cart]{@link https://mljs.github.io/decision-tree-cart/}\n   * @param {boolean} [options.isClassifier] - boolean to check if is a classifier or regression model (used by subclasses).\n   * @param {boolean} [options.useSampleBagging] - use bagging over training samples.\n   * @param {object} model - for load purposes.\n   */\n  constructor(options, model) {\n    if (options === true) {\n      this.replacement = model.replacement;\n      this.maxFeatures = model.maxFeatures;\n      this.nEstimators = model.nEstimators;\n      this.treeOptions = model.treeOptions;\n      this.isClassifier = model.isClassifier;\n      this.seed = model.seed;\n      this.n = model.n;\n      this.indexes = model.indexes;\n      this.useSampleBagging = model.useSampleBagging;\n\n      var Estimator = this.isClassifier ? DTClassifier : DTRegression;\n      this.estimators = model.estimators.map((est) => Estimator.load(est));\n    } else {\n      this.replacement = options.replacement;\n      this.maxFeatures = options.maxFeatures;\n      this.nEstimators = options.nEstimators;\n      this.treeOptions = options.treeOptions;\n      this.isClassifier = options.isClassifier;\n      this.seed = options.seed;\n      this.useSampleBagging = options.useSampleBagging;\n    }\n  }\n\n  /**\n   * Train the decision tree with the given training set and labels.\n   * @param {Matrix|Array} trainingSet\n   * @param {Array} trainingValues\n   */\n  train(trainingSet, trainingValues) {\n    trainingSet = Matrix.checkMatrix(trainingSet);\n\n    this.maxFeatures = this.maxFeatures || trainingSet.columns;\n\n    if (Utils.checkFloat(this.maxFeatures)) {\n      this.n = Math.floor(trainingSet.columns * this.maxFeatures);\n    } else if (Number.isInteger(this.maxFeatures)) {\n      if (this.maxFeatures > trainingSet.columns) {\n        throw new RangeError(\n          `The maxFeatures parameter should be less than ${trainingSet.columns}`\n        );\n      } else {\n        this.n = this.maxFeatures;\n      }\n    } else {\n      throw new RangeError(\n        `Cannot process the maxFeatures parameter ${this.maxFeatures}`\n      );\n    }\n\n    if (this.isClassifier) {\n      var Estimator = DTClassifier;\n    } else {\n      Estimator = DTRegression;\n    }\n\n    this.estimators = new Array(this.nEstimators);\n    this.indexes = new Array(this.nEstimators);\n\n    for (var i = 0; i < this.nEstimators; ++i) {\n      var res = this.useSampleBagging\n        ? Utils.examplesBaggingWithReplacement(\n          trainingSet,\n          trainingValues,\n          this.seed\n        )\n        : { X: trainingSet, y: trainingValues };\n      var X = res.X;\n      var y = res.y;\n\n      res = Utils.featureBagging(X, this.n, this.replacement, this.seed);\n      X = res.X;\n\n      this.indexes[i] = res.usedIndex;\n      this.estimators[i] = new Estimator(this.treeOptions);\n      this.estimators[i].train(X, y);\n    }\n  }\n\n  /**\n   * Method that returns the way the algorithm generates the predictions, for example, in classification\n   * you can return the mode of all predictions retrieved by the trees, or in case of regression you can\n   * use the mean or the median.\n   * @abstract\n   * @param {Array} values - predictions of the estimators.\n   * @return {number} prediction.\n   */\n  // eslint-disable-next-line no-unused-vars\n  selection(values) {\n    throw new Error(\"Abstract method 'selection' not implemented!\");\n  }\n\n  /**\n   * Predicts the output given the matrix to predict.\n   * @param {Matrix|Array} toPredict\n   * @return {Array} predictions\n   */\n  predict(toPredict) {\n    var predictionValues = new Array(this.nEstimators);\n    toPredict = Matrix.checkMatrix(toPredict);\n    for (var i = 0; i < this.nEstimators; ++i) {\n      var X = new MatrixColumnSelectionView(toPredict, this.indexes[i]); // get features for estimator\n      predictionValues[i] = this.estimators[i].predict(X);\n    }\n\n    predictionValues = new MatrixTransposeView(new WrapperMatrix2D(predictionValues));\n    var predictions = new Array(predictionValues.rows);\n    for (i = 0; i < predictionValues.rows; ++i) {\n      predictions[i] = this.selection(predictionValues.getRow(i));\n    }\n\n    return predictions;\n  }\n\n  /**\n   * Export the current model to JSON.\n   * @return {object} - Current model.\n   */\n  toJSON() {\n    return {\n      indexes: this.indexes,\n      n: this.n,\n      replacement: this.replacement,\n      maxFeatures: this.maxFeatures,\n      nEstimators: this.nEstimators,\n      treeOptions: this.treeOptions,\n      isClassifier: this.isClassifier,\n      seed: this.seed,\n      estimators: this.estimators.map((est) => est.toJSON()),\n      useSampleBagging: this.useSampleBagging\n    };\n  }\n}\n","import { RandomForestBase } from './RandomForestBase';\n\nconst defaultOptions = {\n  maxFeatures: 1.0,\n  replacement: true,\n  nEstimators: 10,\n  seed: 42,\n  useSampleBagging: false\n};\n\n/**\n * @class RandomForestClassifier\n * @augments RandomForestBase\n */\nexport class RandomForestClassifier extends RandomForestBase {\n  /**\n   * Create a new base random forest for a classifier or regression model.\n   * @constructor\n   * @param {object} options\n   * @param {number} [options.maxFeatures=1.0] - the number of features used on each estimator.\n   *        * if is an integer it selects maxFeatures elements over the sample features.\n   *        * if is a float between (0, 1), it takes the percentage of features.\n   * @param {boolean} [options.replacement=true] - use replacement over the sample features.\n   * @param {number} [options.seed=42] - seed for feature and samples selection, must be a 32-bit integer.\n   * @param {number} [options.nEstimators=10] - number of estimator to use.\n   * @param {object} [options.treeOptions={}] - options for the tree classifier, see [ml-cart]{@link https://mljs.github.io/decision-tree-cart/}\n   * @param {boolean} [options.useSampleBagging=false] - use bagging over training samples.\n   * @param {object} model - for load purposes.\n   */\n  constructor(options, model) {\n    if (options === true) {\n      super(true, model.baseModel);\n    } else {\n      options = Object.assign({}, defaultOptions, options);\n      options.isClassifier = true;\n      super(options);\n    }\n  }\n\n  /**\n   * retrieve the prediction given the selection method.\n   * @param {Array} values - predictions of the estimators.\n   * @return {number} prediction\n   */\n  selection(values) {\n    return mode(values);\n  }\n\n  /**\n   * Export the current model to JSON.\n   * @return {object} - Current model.\n   */\n  toJSON() {\n    var baseModel = super.toJSON();\n    return {\n      baseModel: baseModel,\n      name: 'RFClassifier'\n    };\n  }\n\n  /**\n   * Load a Decision tree classifier with the given model.\n   * @param {object} model\n   * @return {RandomForestClassifier}\n   */\n  static load(model) {\n    if (model.name !== 'RFClassifier') {\n      throw new RangeError(`Invalid model: ${model.name}`);\n    }\n\n    return new RandomForestClassifier(true, model);\n  }\n}\n\n/**\n * Return the most repeated element on the array.\n * @param {Array} arr\n * @return {number} mode\n */\nfunction mode(arr) {\n  return arr\n    .sort(\n      (a, b) =>\n        arr.filter((v) => v === a).length - arr.filter((v) => v === b).length\n    )\n    .pop();\n}\n","(function(){function a(d){for(var e=0,f=d.length-1,g=void 0,h=void 0,i=void 0,j=c(e,f);!0;){if(f<=e)return d[j];if(f==e+1)return d[e]>d[f]&&b(d,e,f),d[j];for(g=c(e,f),d[g]>d[f]&&b(d,g,f),d[e]>d[f]&&b(d,e,f),d[g]>d[e]&&b(d,g,e),b(d,g,e+1),h=e+1,i=f;!0;){do h++;while(d[e]>d[h]);do i--;while(d[i]>d[e]);if(i<h)break;b(d,h,i)}b(d,e,i),i<=j&&(e=h),i>=j&&(f=i-1)}}var b=function b(d,e,f){var _ref;return _ref=[d[f],d[e]],d[e]=_ref[0],d[f]=_ref[1],_ref},c=function c(d,e){return~~((d+e)/2)};'undefined'!=typeof module&&module.exports?module.exports=a:window.median=a})();\n","import quickSelectMedian from 'median-quickselect';\nimport isArray from 'is-any-array';\n\n/**\n * Computes the median of the given values\n * @param {Array<number>} input\n * @return {number}\n */\n\nfunction median(input) {\n  if (!isArray(input)) {\n    throw new TypeError('input must be an array');\n  }\n\n  if (input.length === 0) {\n    throw new TypeError('input must not be empty');\n  }\n\n  return quickSelectMedian(input.slice());\n}\n\nexport default median;\n","import arrayMean from 'ml-array-mean';\nimport arrayMedian from 'ml-array-median';\n\nimport { RandomForestBase } from './RandomForestBase';\n\nconst selectionMethods = {\n  mean: arrayMean,\n  median: arrayMedian\n};\n\nconst defaultOptions = {\n  maxFeatures: 1.0,\n  replacement: false,\n  nEstimators: 10,\n  treeOptions: {},\n  selectionMethod: 'mean',\n  seed: 42,\n  useSampleBagging: false\n};\n\n/**\n * @class RandomForestRegression\n * @augments RandomForestBase\n */\nexport class RandomForestRegression extends RandomForestBase {\n  /**\n   * Create a new base random forest for a classifier or regression model.\n   * @constructor\n   * @param {object} options\n   * @param {number} [options.maxFeatures=1.0] - the number of features used on each estimator.\n   *        * if is an integer it selects maxFeatures elements over the sample features.\n   *        * if is a float between (0, 1), it takes the percentage of features.\n   * @param {boolean} [options.replacement=true] - use replacement over the sample features.\n   * @param {number} [options.seed=42] - seed for feature and samples selection, must be a 32-bit integer.\n   * @param {number} [options.nEstimators=10] - number of estimator to use.\n   * @param {object} [options.treeOptions={}] - options for the tree classifier, see [ml-cart]{@link https://mljs.github.io/decision-tree-cart/}\n   * @param {string} [options.selectionMethod=\"mean\"] - the way to calculate the prediction from estimators, \"mean\" and \"median\" are supported.\n   * @param {boolean} [options.useSampleBagging=false] - use bagging over training samples.\n   * @param {object} model - for load purposes.\n   */\n  constructor(options, model) {\n    if (options === true) {\n      super(true, model.baseModel);\n      this.selectionMethod = model.selectionMethod;\n    } else {\n      options = Object.assign({}, defaultOptions, options);\n\n      if (\n        !(\n          options.selectionMethod === 'mean' ||\n          options.selectionMethod === 'median'\n        )\n      ) {\n        throw new RangeError(\n          `Unsupported selection method ${options.selectionMethod}`\n        );\n      }\n\n      options.isClassifier = false;\n\n      super(options);\n      this.selectionMethod = options.selectionMethod;\n    }\n  }\n\n  /**\n   * retrieve the prediction given the selection method.\n   * @param {Array} values - predictions of the estimators.\n   * @return {number} prediction\n   */\n  selection(values) {\n    return selectionMethods[this.selectionMethod](values);\n  }\n\n  /**\n   * Export the current model to JSON.\n   * @return {object} - Current model.\n   */\n  toJSON() {\n    var baseModel = super.toJSON();\n    return {\n      baseModel: baseModel,\n      selectionMethod: this.selectionMethod,\n      name: 'RFRegression'\n    };\n  }\n\n  /**\n   * Load a Decision tree classifier with the given model.\n   * @param {object} model\n   * @return {RandomForestRegression}\n   */\n  static load(model) {\n    if (model.name !== 'RFRegression') {\n      throw new RangeError(`Invalid model: ${model.name}`);\n    }\n\n    return new RandomForestRegression(true, model);\n  }\n}\n","import { Matrix, MatrixTransposeView, EVD, SVD, NIPALS } from 'ml-matrix';\n\n/**\n * Creates new PCA (Principal Component Analysis) from the dataset\n * @param {Matrix} dataset - dataset or covariance matrix.\n * @param {Object} [options]\n * @param {boolean} [options.isCovarianceMatrix=false] - true if the dataset is a covariance matrix.\n * @param {boolean} [options.method='SVD'] - select which method to use: SVD (default), covarianceMatrirx or NIPALS.\n * @param {boolean} [options.nCompNIPALS=2] - number of components to be computed with NIPALS.\n * @param {boolean} [options.center=true] - should the data be centered (subtract the mean).\n * @param {boolean} [options.scale=false] - should the data be scaled (divide by the standard deviation).\n * @param {boolean} [options.ignoreZeroVariance=false] - ignore columns with zero variance if `scale` is `true`.\n * */\nexport class PCA {\n  constructor(dataset, options = {}) {\n    if (dataset === true) {\n      const model = options;\n      this.center = model.center;\n      this.scale = model.scale;\n      this.means = model.means;\n      this.stdevs = model.stdevs;\n      this.U = Matrix.checkMatrix(model.U);\n      this.S = model.S;\n      this.R = model.R;\n      this.excludedFeatures = model.excludedFeatures;\n      return;\n    }\n\n    dataset = new Matrix(dataset);\n\n    const {\n      isCovarianceMatrix = false,\n      method = 'SVD',\n      nCompNIPALS = 2,\n      center = true,\n      scale = false,\n      ignoreZeroVariance = false,\n    } = options;\n\n    this.center = center;\n    this.scale = scale;\n    this.means = null;\n    this.stdevs = null;\n    this.excludedFeatures = [];\n\n    if (isCovarianceMatrix) {\n      // User provided a covariance matrix instead of dataset.\n      this._computeFromCovarianceMatrix(dataset);\n      return;\n    }\n\n    this._adjust(dataset, ignoreZeroVariance);\n    switch (method) {\n      case 'covarianceMatrix': {\n        // User provided a dataset but wants us to compute and use the covariance matrix.\n        const covarianceMatrix = new MatrixTransposeView(dataset)\n          .mmul(dataset)\n          .div(dataset.rows - 1);\n        this._computeFromCovarianceMatrix(covarianceMatrix);\n        break;\n      }\n      case 'NIPALS': {\n        this._computeWithNIPALS(dataset, nCompNIPALS);\n        break;\n      }\n      case 'SVD': {\n        const svd = new SVD(dataset, {\n          computeLeftSingularVectors: false,\n          computeRightSingularVectors: true,\n          autoTranspose: true,\n        });\n\n        this.U = svd.rightSingularVectors;\n\n        const singularValues = svd.diagonal;\n        const eigenvalues = [];\n        for (const singularValue of singularValues) {\n          eigenvalues.push((singularValue * singularValue) / (dataset.rows - 1));\n        }\n        this.S = eigenvalues;\n        break;\n      }\n      default: {\n        throw new Error(`unknown method: ${method}`);\n      }\n    }\n  }\n\n  /**\n   * Load a PCA model from JSON\n   * @param {Object} model\n   * @return {PCA}\n   */\n  static load(model) {\n    if (typeof model.name !== 'string') {\n      throw new TypeError('model must have a name property');\n    }\n    if (model.name !== 'PCA') {\n      throw new RangeError(`invalid model: ${model.name}`);\n    }\n    return new PCA(true, model);\n  }\n\n  /**\n   * Project the dataset into the PCA space\n   * @param {Matrix} dataset\n   * @param {Object} options\n   * @return {Matrix} dataset projected in the PCA space\n   */\n  predict(dataset, options = {}) {\n    const { nComponents = this.U.columns } = options;\n    dataset = new Matrix(dataset);\n    if (this.center) {\n      dataset.subRowVector(this.means);\n      if (this.scale) {\n        for (let i of this.excludedFeatures) {\n          dataset.removeColumn(i);\n        }\n        dataset.divRowVector(this.stdevs);\n      }\n    }\n    var predictions = dataset.mmul(this.U);\n    return predictions.subMatrix(0, predictions.rows - 1, 0, nComponents - 1);\n  }\n\n  /**\n   * Calculates the inverse PCA transform\n   * @param {Matrix} dataset\n   * @return {Matrix} dataset projected in the PCA space\n   */\n  invert(dataset) {\n    dataset = Matrix.checkMatrix(dataset);\n\n    var inverse = dataset.mmul(this.U.transpose());\n\n    if (this.center) {\n      if (this.scale) {\n        inverse.mulRowVector(this.stdevs);\n      }\n      inverse.addRowVector(this.means);\n    }\n\n    return inverse;\n  }\n\n\n  /**\n   * Returns the proportion of variance for each component\n   * @return {[number]}\n   */\n  getExplainedVariance() {\n    var sum = 0;\n    for (const s of this.S) {\n      sum += s;\n    }\n    return this.S.map((value) => value / sum);\n  }\n\n  /**\n   * Returns the cumulative proportion of variance\n   * @return {[number]}\n   */\n  getCumulativeVariance() {\n    var explained = this.getExplainedVariance();\n    for (var i = 1; i < explained.length; i++) {\n      explained[i] += explained[i - 1];\n    }\n    return explained;\n  }\n\n  /**\n   * Returns the Eigenvectors of the covariance matrix\n   * @returns {Matrix}\n   */\n  getEigenvectors() {\n    return this.U;\n  }\n\n  /**\n   * Returns the Eigenvalues (on the diagonal)\n   * @returns {[number]}\n   */\n  getEigenvalues() {\n    return this.S;\n  }\n\n  /**\n   * Returns the standard deviations of the principal components\n   * @returns {[number]}\n   */\n  getStandardDeviations() {\n    return this.S.map((x) => Math.sqrt(x));\n  }\n\n  /**\n   * Returns the loadings matrix\n   * @return {Matrix}\n   */\n  getLoadings() {\n    return this.U.transpose();\n  }\n\n  /**\n   * Export the current model to a JSON object\n   * @return {Object} model\n   */\n  toJSON() {\n    return {\n      name: 'PCA',\n      center: this.center,\n      scale: this.scale,\n      means: this.means,\n      stdevs: this.stdevs,\n      U: this.U,\n      S: this.S,\n    };\n  }\n\n  _adjust(dataset, ignoreZeroVariance) {\n    if (this.center) {\n      const mean = dataset.mean('column');\n      const stdevs = this.scale\n        ? dataset.standardDeviation('column', { mean })\n        : null;\n      this.means = mean;\n      dataset.subRowVector(mean);\n      if (this.scale) {\n        for (let i = 0; i < stdevs.length; i++) {\n          if (stdevs[i] === 0) {\n            if (ignoreZeroVariance) {\n              dataset.removeColumn(i);\n              stdevs.splice(i, 1);\n              this.excludedFeatures.push(i);\n              i--;\n            } else {\n              throw new RangeError(\n                `Cannot scale the dataset (standard deviation is zero at index ${i}`,\n              );\n            }\n          }\n        }\n        this.stdevs = stdevs;\n        dataset.divRowVector(stdevs);\n      }\n    }\n  }\n\n  _computeFromCovarianceMatrix(dataset) {\n    const evd = new EVD(dataset, { assumeSymmetric: true });\n    this.U = evd.eigenvectorMatrix;\n    this.U.flipRows();\n    this.S = evd.realEigenvalues;\n    this.S.reverse();\n  }\n\n  _computeWithNIPALS(dataset, nCompNIPALS) {\n    this.U = new Matrix(nCompNIPALS, dataset.columns);\n    this.S = [];\n\n    let x = dataset;\n    for (let i = 0; i < nCompNIPALS; i++) {\n      let dc = new NIPALS(x);\n\n      this.U.setRow(i, dc.w.transpose());\n      this.S.push(Math.pow(dc.s.get(0, 0), 2));\n\n      x = dc.xResidual;\n    }\n    this.U = this.U.transpose(); // to be compatible with API\n  }\n}\n","export function squaredEuclidean(p, q) {\r\n    let d = 0;\r\n    for (let i = 0; i < p.length; i++) {\r\n        d += (p[i] - q[i]) * (p[i] - q[i]);\r\n    }\r\n    return d;\r\n}\r\nexport function euclidean(p, q) {\r\n    return Math.sqrt(squaredEuclidean(p, q));\r\n}\r\n","/**\n * Computes a distance/similarity matrix given an array of data and a distance/similarity function.\n * @param {Array} data An array of data\n * @param {function} distanceFn  A function that accepts two arguments and computes a distance/similarity between them\n * @return {Array<Array>} The distance/similarity matrix. The matrix is square and has a size equal to the length of\n * the data array\n */\nexport default function distanceMatrix(data, distanceFn) {\n  const result = getMatrix(data.length);\n\n  // Compute upper distance matrix\n  for (let i = 0; i < data.length; i++) {\n    for (let j = 0; j <= i; j++) {\n      result[i][j] = distanceFn(data[i], data[j]);\n      result[j][i] = result[i][j];\n    }\n  }\n\n  return result;\n}\n\nfunction getMatrix(size) {\n  const matrix = [];\n  for (let i = 0; i < size; i++) {\n    const row = [];\n    matrix.push(row);\n    for (let j = 0; j < size; j++) {\n      row.push(0);\n    }\n  }\n  return matrix;\n}\n","// Generated by CoffeeScript 1.8.0\n(function() {\n  var Heap, defaultCmp, floor, heapify, heappop, heappush, heappushpop, heapreplace, insort, min, nlargest, nsmallest, updateItem, _siftdown, _siftup;\n\n  floor = Math.floor, min = Math.min;\n\n\n  /*\n  Default comparison function to be used\n   */\n\n  defaultCmp = function(x, y) {\n    if (x < y) {\n      return -1;\n    }\n    if (x > y) {\n      return 1;\n    }\n    return 0;\n  };\n\n\n  /*\n  Insert item x in list a, and keep it sorted assuming a is sorted.\n  \n  If x is already in a, insert it to the right of the rightmost x.\n  \n  Optional args lo (default 0) and hi (default a.length) bound the slice\n  of a to be searched.\n   */\n\n  insort = function(a, x, lo, hi, cmp) {\n    var mid;\n    if (lo == null) {\n      lo = 0;\n    }\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    if (lo < 0) {\n      throw new Error('lo must be non-negative');\n    }\n    if (hi == null) {\n      hi = a.length;\n    }\n    while (lo < hi) {\n      mid = floor((lo + hi) / 2);\n      if (cmp(x, a[mid]) < 0) {\n        hi = mid;\n      } else {\n        lo = mid + 1;\n      }\n    }\n    return ([].splice.apply(a, [lo, lo - lo].concat(x)), x);\n  };\n\n\n  /*\n  Push item onto heap, maintaining the heap invariant.\n   */\n\n  heappush = function(array, item, cmp) {\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    array.push(item);\n    return _siftdown(array, 0, array.length - 1, cmp);\n  };\n\n\n  /*\n  Pop the smallest item off the heap, maintaining the heap invariant.\n   */\n\n  heappop = function(array, cmp) {\n    var lastelt, returnitem;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    lastelt = array.pop();\n    if (array.length) {\n      returnitem = array[0];\n      array[0] = lastelt;\n      _siftup(array, 0, cmp);\n    } else {\n      returnitem = lastelt;\n    }\n    return returnitem;\n  };\n\n\n  /*\n  Pop and return the current smallest value, and add the new item.\n  \n  This is more efficient than heappop() followed by heappush(), and can be\n  more appropriate when using a fixed size heap. Note that the value\n  returned may be larger than item! That constrains reasonable use of\n  this routine unless written as part of a conditional replacement:\n      if item > array[0]\n        item = heapreplace(array, item)\n   */\n\n  heapreplace = function(array, item, cmp) {\n    var returnitem;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    returnitem = array[0];\n    array[0] = item;\n    _siftup(array, 0, cmp);\n    return returnitem;\n  };\n\n\n  /*\n  Fast version of a heappush followed by a heappop.\n   */\n\n  heappushpop = function(array, item, cmp) {\n    var _ref;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    if (array.length && cmp(array[0], item) < 0) {\n      _ref = [array[0], item], item = _ref[0], array[0] = _ref[1];\n      _siftup(array, 0, cmp);\n    }\n    return item;\n  };\n\n\n  /*\n  Transform list into a heap, in-place, in O(array.length) time.\n   */\n\n  heapify = function(array, cmp) {\n    var i, _i, _j, _len, _ref, _ref1, _results, _results1;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    _ref1 = (function() {\n      _results1 = [];\n      for (var _j = 0, _ref = floor(array.length / 2); 0 <= _ref ? _j < _ref : _j > _ref; 0 <= _ref ? _j++ : _j--){ _results1.push(_j); }\n      return _results1;\n    }).apply(this).reverse();\n    _results = [];\n    for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n      i = _ref1[_i];\n      _results.push(_siftup(array, i, cmp));\n    }\n    return _results;\n  };\n\n\n  /*\n  Update the position of the given item in the heap.\n  This function should be called every time the item is being modified.\n   */\n\n  updateItem = function(array, item, cmp) {\n    var pos;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    pos = array.indexOf(item);\n    if (pos === -1) {\n      return;\n    }\n    _siftdown(array, 0, pos, cmp);\n    return _siftup(array, pos, cmp);\n  };\n\n\n  /*\n  Find the n largest elements in a dataset.\n   */\n\n  nlargest = function(array, n, cmp) {\n    var elem, result, _i, _len, _ref;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    result = array.slice(0, n);\n    if (!result.length) {\n      return result;\n    }\n    heapify(result, cmp);\n    _ref = array.slice(n);\n    for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n      elem = _ref[_i];\n      heappushpop(result, elem, cmp);\n    }\n    return result.sort(cmp).reverse();\n  };\n\n\n  /*\n  Find the n smallest elements in a dataset.\n   */\n\n  nsmallest = function(array, n, cmp) {\n    var elem, i, los, result, _i, _j, _len, _ref, _ref1, _results;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    if (n * 10 <= array.length) {\n      result = array.slice(0, n).sort(cmp);\n      if (!result.length) {\n        return result;\n      }\n      los = result[result.length - 1];\n      _ref = array.slice(n);\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        elem = _ref[_i];\n        if (cmp(elem, los) < 0) {\n          insort(result, elem, 0, null, cmp);\n          result.pop();\n          los = result[result.length - 1];\n        }\n      }\n      return result;\n    }\n    heapify(array, cmp);\n    _results = [];\n    for (i = _j = 0, _ref1 = min(n, array.length); 0 <= _ref1 ? _j < _ref1 : _j > _ref1; i = 0 <= _ref1 ? ++_j : --_j) {\n      _results.push(heappop(array, cmp));\n    }\n    return _results;\n  };\n\n  _siftdown = function(array, startpos, pos, cmp) {\n    var newitem, parent, parentpos;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    newitem = array[pos];\n    while (pos > startpos) {\n      parentpos = (pos - 1) >> 1;\n      parent = array[parentpos];\n      if (cmp(newitem, parent) < 0) {\n        array[pos] = parent;\n        pos = parentpos;\n        continue;\n      }\n      break;\n    }\n    return array[pos] = newitem;\n  };\n\n  _siftup = function(array, pos, cmp) {\n    var childpos, endpos, newitem, rightpos, startpos;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    endpos = array.length;\n    startpos = pos;\n    newitem = array[pos];\n    childpos = 2 * pos + 1;\n    while (childpos < endpos) {\n      rightpos = childpos + 1;\n      if (rightpos < endpos && !(cmp(array[childpos], array[rightpos]) < 0)) {\n        childpos = rightpos;\n      }\n      array[pos] = array[childpos];\n      pos = childpos;\n      childpos = 2 * pos + 1;\n    }\n    array[pos] = newitem;\n    return _siftdown(array, startpos, pos, cmp);\n  };\n\n  Heap = (function() {\n    Heap.push = heappush;\n\n    Heap.pop = heappop;\n\n    Heap.replace = heapreplace;\n\n    Heap.pushpop = heappushpop;\n\n    Heap.heapify = heapify;\n\n    Heap.updateItem = updateItem;\n\n    Heap.nlargest = nlargest;\n\n    Heap.nsmallest = nsmallest;\n\n    function Heap(cmp) {\n      this.cmp = cmp != null ? cmp : defaultCmp;\n      this.nodes = [];\n    }\n\n    Heap.prototype.push = function(x) {\n      return heappush(this.nodes, x, this.cmp);\n    };\n\n    Heap.prototype.pop = function() {\n      return heappop(this.nodes, this.cmp);\n    };\n\n    Heap.prototype.peek = function() {\n      return this.nodes[0];\n    };\n\n    Heap.prototype.contains = function(x) {\n      return this.nodes.indexOf(x) !== -1;\n    };\n\n    Heap.prototype.replace = function(x) {\n      return heapreplace(this.nodes, x, this.cmp);\n    };\n\n    Heap.prototype.pushpop = function(x) {\n      return heappushpop(this.nodes, x, this.cmp);\n    };\n\n    Heap.prototype.heapify = function() {\n      return heapify(this.nodes, this.cmp);\n    };\n\n    Heap.prototype.updateItem = function(x) {\n      return updateItem(this.nodes, x, this.cmp);\n    };\n\n    Heap.prototype.clear = function() {\n      return this.nodes = [];\n    };\n\n    Heap.prototype.empty = function() {\n      return this.nodes.length === 0;\n    };\n\n    Heap.prototype.size = function() {\n      return this.nodes.length;\n    };\n\n    Heap.prototype.clone = function() {\n      var heap;\n      heap = new Heap();\n      heap.nodes = this.nodes.slice(0);\n      return heap;\n    };\n\n    Heap.prototype.toArray = function() {\n      return this.nodes.slice(0);\n    };\n\n    Heap.prototype.insert = Heap.prototype.push;\n\n    Heap.prototype.top = Heap.prototype.peek;\n\n    Heap.prototype.front = Heap.prototype.peek;\n\n    Heap.prototype.has = Heap.prototype.contains;\n\n    Heap.prototype.copy = Heap.prototype.clone;\n\n    return Heap;\n\n  })();\n\n  (function(root, factory) {\n    if (typeof define === 'function' && define.amd) {\n      return define([], factory);\n    } else if (typeof exports === 'object') {\n      return module.exports = factory();\n    } else {\n      return root.Heap = factory();\n    }\n  })(this, function() {\n    return Heap;\n  });\n\n}).call(this);\n","module.exports = require('./lib/heap');\n","import Heap from 'heap';\n\nexport default class Cluster {\n  constructor() {\n    this.children = [];\n    this.height = 0;\n    this.size = 1;\n    this.index = -1;\n    this.isLeaf = false;\n  }\n\n  /**\n   * Creates an array of clusters where the maximum height is smaller than the threshold\n   * @param {number} threshold\n   * @return {Array<Cluster>}\n   */\n  cut(threshold) {\n    if (typeof threshold !== 'number') {\n      throw new TypeError('threshold must be a number');\n    }\n    if (threshold < 0) {\n      throw new RangeError('threshold must be a positive number');\n    }\n    let list = [this];\n    const ans = [];\n    while (list.length > 0) {\n      const aux = list.shift();\n      if (threshold >= aux.height) {\n        ans.push(aux);\n      } else {\n        list = list.concat(aux.children);\n      }\n    }\n    return ans;\n  }\n\n  /**\n   * Merge the leaves in the minimum way to have `groups` number of clusters.\n   * @param {number} groups - Them number of children the first level of the tree should have.\n   * @return {Cluster}\n   */\n  group(groups) {\n    if (!Number.isInteger(groups) || groups < 1) {\n      throw new RangeError('groups must be a positive integer');\n    }\n\n    const heap = new Heap((a, b) => {\n      return b.height - a.height;\n    });\n\n    heap.push(this);\n\n    while (heap.size() < groups) {\n      var first = heap.pop();\n      if (first.children.length === 0) {\n        break;\n      }\n      first.children.forEach((child) => heap.push(child));\n    }\n\n    var root = new Cluster();\n    root.children = heap.toArray();\n    root.height = this.height;\n\n    return root;\n  }\n\n  /**\n   * Traverses the tree depth-first and calls the provided callback with each individual node\n   * @param {function} cb - The callback to be called on each node encounter\n   */\n  traverse(cb) {\n    function visit(root, callback) {\n      callback(root);\n      if (root.children) {\n        for (const child of root.children) {\n          visit(child, callback);\n        }\n      }\n    }\n    visit(this, cb);\n  }\n\n  /**\n   * Returns a list of indices for all the leaves of this cluster.\n   * The list is ordered in such a way that a dendrogram could be drawn without crossing branches.\n   * @returns {Array<number>}\n   */\n  indices() {\n    const result = [];\n    this.traverse((cluster) => {\n      if (cluster.isLeaf) {\n        result.push(cluster.index);\n      }\n    });\n    return result;\n  }\n}\n","import { euclidean } from 'ml-distance-euclidean';\nimport getDistanceMatrix from 'ml-distance-matrix';\nimport { Matrix } from 'ml-matrix';\n\nimport Cluster from './Cluster';\n\nfunction singleLink(dKI, dKJ) {\n  return Math.min(dKI, dKJ);\n}\n\nfunction completeLink(dKI, dKJ) {\n  return Math.max(dKI, dKJ);\n}\n\nfunction averageLink(dKI, dKJ, dIJ, ni, nj) {\n  const ai = ni / (ni + nj);\n  const aj = nj / (ni + nj);\n  return ai * dKI + aj * dKJ;\n}\n\nfunction weightedAverageLink(dKI, dKJ) {\n  return (dKI + dKJ) / 2;\n}\n\nfunction centroidLink(dKI, dKJ, dIJ, ni, nj) {\n  const ai = ni / (ni + nj);\n  const aj = nj / (ni + nj);\n  const b = -(ni * nj) / (ni + nj) ** 2;\n  return ai * dKI + aj * dKJ + b * dIJ;\n}\n\nfunction medianLink(dKI, dKJ, dIJ) {\n  return dKI / 2 + dKJ / 2 - dIJ / 4;\n}\n\nfunction wardLink(dKI, dKJ, dIJ, ni, nj, nk) {\n  const ai = (ni + nk) / (ni + nj + nk);\n  const aj = (nj + nk) / (ni + nj + nk);\n  const b = -nk / (ni + nj + nk);\n  return ai * dKI + aj * dKJ + b * dIJ;\n}\n\nfunction wardLink2(dKI, dKJ, dIJ, ni, nj, nk) {\n  const ai = (ni + nk) / (ni + nj + nk);\n  const aj = (nj + nk) / (ni + nj + nk);\n  const b = -nk / (ni + nj + nk);\n  return Math.sqrt(ai * dKI * dKI + aj * dKJ * dKJ + b * dIJ * dIJ);\n}\n\n/**\n * Continuously merge nodes that have the least dissimilarity\n * @param {Array<Array<number>>} data - Array of points to be clustered\n * @param {object} [options]\n * @param {Function} [options.distanceFunction]\n * @param {string} [options.method] - Default: `'complete'`\n * @param {boolean} [options.isDistanceMatrix] - Is the input already a distance matrix?\n * @constructor\n */\nexport function agnes(data, options = {}) {\n  const {\n    distanceFunction = euclidean,\n    method = 'complete',\n    isDistanceMatrix = false,\n  } = options;\n\n  let updateFunc;\n  if (!isDistanceMatrix) {\n    data = getDistanceMatrix(data, distanceFunction);\n  }\n  let distanceMatrix = new Matrix(data);\n  const numLeaves = distanceMatrix.rows;\n\n  // allows to use a string or a given function\n  if (typeof method === 'string') {\n    switch (method.toLowerCase()) {\n      case 'single':\n        updateFunc = singleLink;\n        break;\n      case 'complete':\n        updateFunc = completeLink;\n        break;\n      case 'average':\n      case 'upgma':\n        updateFunc = averageLink;\n        break;\n      case 'wpgma':\n        updateFunc = weightedAverageLink;\n        break;\n      case 'centroid':\n      case 'upgmc':\n        updateFunc = centroidLink;\n        break;\n      case 'median':\n      case 'wpgmc':\n        updateFunc = medianLink;\n        break;\n      case 'ward':\n        updateFunc = wardLink;\n        break;\n      case 'ward2':\n        updateFunc = wardLink2;\n        break;\n      default:\n        throw new RangeError(`unknown clustering method: ${method}`);\n    }\n  } else if (typeof method !== 'function') {\n    throw new TypeError('method must be a string or function');\n  }\n\n  let clusters = [];\n  for (let i = 0; i < numLeaves; i++) {\n    const cluster = new Cluster();\n    cluster.isLeaf = true;\n    cluster.index = i;\n    clusters.push(cluster);\n  }\n\n  for (let n = 0; n < numLeaves - 1; n++) {\n    const [row, column, distance] = getSmallestDistance(distanceMatrix);\n    const cluster1 = clusters[row];\n    const cluster2 = clusters[column];\n    const newCluster = new Cluster();\n    newCluster.size = cluster1.size + cluster2.size;\n    newCluster.children.push(cluster1, cluster2);\n    newCluster.height = distance;\n\n    const newClusters = [newCluster];\n    const newDistanceMatrix = new Matrix(\n      distanceMatrix.rows - 1,\n      distanceMatrix.rows - 1,\n    );\n    const previous = (newIndex) =>\n      getPreviousIndex(newIndex, Math.min(row, column), Math.max(row, column));\n\n    for (let i = 1; i < newDistanceMatrix.rows; i++) {\n      const prevI = previous(i);\n      const prevICluster = clusters[prevI];\n      newClusters.push(prevICluster);\n      for (let j = 0; j < i; j++) {\n        if (j === 0) {\n          const dKI = distanceMatrix.get(row, prevI);\n          const dKJ = distanceMatrix.get(prevI, column);\n          const val = updateFunc(\n            dKI,\n            dKJ,\n            distance,\n            cluster1.size,\n            cluster2.size,\n            prevICluster.size,\n          );\n          newDistanceMatrix.set(i, j, val);\n          newDistanceMatrix.set(j, i, val);\n        } else {\n          // Just copy distance from previous matrix\n          const val = distanceMatrix.get(prevI, previous(j));\n          newDistanceMatrix.set(i, j, val);\n          newDistanceMatrix.set(j, i, val);\n        }\n      }\n    }\n\n    clusters = newClusters;\n    distanceMatrix = newDistanceMatrix;\n  }\n\n  return clusters[0];\n}\n\nfunction getSmallestDistance(distance) {\n  let smallest = Infinity;\n  let smallestI = 0;\n  let smallestJ = 0;\n  for (let i = 1; i < distance.rows; i++) {\n    for (let j = 0; j < i; j++) {\n      if (distance.get(i, j) < smallest) {\n        smallest = distance.get(i, j);\n        smallestI = i;\n        smallestJ = j;\n      }\n    }\n  }\n  return [smallestI, smallestJ, smallest];\n}\n\nfunction getPreviousIndex(newIndex, prev1, prev2) {\n  newIndex -= 1;\n  if (newIndex >= prev1) newIndex++;\n  if (newIndex >= prev2) newIndex++;\n  return newIndex;\n}\n","export * from './agnes';\n// export * from './diana';\n// export * from './birch';\n// export * './cure';\n// export * from './chameleon';\n","'use strict';\nimport { squaredEuclidean } from 'ml-distance-euclidean';\nconst defaultOptions = {\n    distanceFunction: squaredEuclidean\n};\nexport default function nearestVector(listVectors, vector, options = defaultOptions) {\n    const distanceFunction = options.distanceFunction || defaultOptions.distanceFunction;\n    const similarityFunction = options.similarityFunction || defaultOptions.similarityFunction;\n    let vectorIndex = -1;\n    if (typeof similarityFunction === 'function') {\n        // maximum similarity\n        let maxSim = Number.MIN_VALUE;\n        for (let j = 0; j < listVectors.length; j++) {\n            const sim = similarityFunction(vector, listVectors[j]);\n            if (sim > maxSim) {\n                maxSim = sim;\n                vectorIndex = j;\n            }\n        }\n    }\n    else if (typeof distanceFunction === 'function') {\n        // minimum distance\n        let minDist = Number.MAX_VALUE;\n        for (let i = 0; i < listVectors.length; i++) {\n            const dist = distanceFunction(vector, listVectors[i]);\n            if (dist < minDist) {\n                minDist = dist;\n                vectorIndex = i;\n            }\n        }\n    }\n    else {\n        throw new Error(\"A similarity or distance function it's required\");\n    }\n    return vectorIndex;\n}\nexport function findNearestVector(vectorList, vector, options = defaultOptions) {\n    const index = nearestVector(vectorList, vector, options);\n    return vectorList[index];\n}\n","import nearestVector from 'ml-nearest-vector';\n\n/**\n * Calculates the distance matrix for a given array of points\n * @ignore\n * @param {Array<Array<number>>} data - the [x,y,z,...] points to cluster\n * @param {function} distance - Distance function to use between the points\n * @return {Array<Array<number>>} - matrix with the distance values\n */\nexport function calculateDistanceMatrix(data, distance) {\n  var distanceMatrix = new Array(data.length);\n  for (var i = 0; i < data.length; ++i) {\n    for (var j = i; j < data.length; ++j) {\n      if (!distanceMatrix[i]) {\n        distanceMatrix[i] = new Array(data.length);\n      }\n      if (!distanceMatrix[j]) {\n        distanceMatrix[j] = new Array(data.length);\n      }\n      const dist = distance(data[i], data[j]);\n      distanceMatrix[i][j] = dist;\n      distanceMatrix[j][i] = dist;\n    }\n  }\n  return distanceMatrix;\n}\n\n/**\n * Updates the cluster identifier based in the new data\n * @ignore\n * @param {Array<Array<number>>} data - the [x,y,z,...] points to cluster\n * @param {Array<Array<number>>} centers - the K centers in format [x,y,z,...]\n * @param {Array <number>} clusterID - the cluster identifier for each data dot\n * @param {function} distance - Distance function to use between the points\n * @return {Array} the cluster identifier for each data dot\n */\nexport function updateClusterID(data, centers, clusterID, distance) {\n  for (var i = 0; i < data.length; i++) {\n    clusterID[i] = nearestVector(centers, data[i], {\n      distanceFunction: distance\n    });\n  }\n  return clusterID;\n}\n\n/**\n * Update the center values based in the new configurations of the clusters\n * @ignore\n * @param {Array<Array<number>>} prevCenters - Centroids from the previous iteration\n * @param {Array <Array <number>>} data - the [x,y,z,...] points to cluster\n * @param {Array <number>} clusterID - the cluster identifier for each data dot\n * @param {number} K - Number of clusters\n * @return {Array} he K centers in format [x,y,z,...]\n */\nexport function updateCenters(prevCenters, data, clusterID, K) {\n  const nDim = data[0].length;\n\n  // copy previous centers\n  var centers = new Array(K);\n  var centersLen = new Array(K);\n  for (var i = 0; i < K; i++) {\n    centers[i] = new Array(nDim);\n    centersLen[i] = 0;\n    for (var j = 0; j < nDim; j++) {\n      centers[i][j] = 0;\n    }\n  }\n\n  // add the value for all dimensions of the point\n  for (var l = 0; l < data.length; l++) {\n    centersLen[clusterID[l]]++;\n    for (var dim = 0; dim < nDim; dim++) {\n      centers[clusterID[l]][dim] += data[l][dim];\n    }\n  }\n\n  // divides by length\n  for (var id = 0; id < K; id++) {\n    for (var d = 0; d < nDim; d++) {\n      if (centersLen[id]) {\n        centers[id][d] /= centersLen[id];\n      } else {\n        centers[id][d] = prevCenters[id][d];\n      }\n    }\n  }\n  return centers;\n}\n\n/**\n * The centers have moved more than the tolerance value?\n * @ignore\n * @param {Array<Array<number>>} centers - the K centers in format [x,y,z,...]\n * @param {Array<Array<number>>} oldCenters - the K old centers in format [x,y,z,...]\n * @param {function} distanceFunction - Distance function to use between the points\n * @param {number} tolerance - Allowed distance for the centroids to move\n * @return {boolean}\n */\nexport function hasConverged(centers, oldCenters, distanceFunction, tolerance) {\n  for (var i = 0; i < centers.length; i++) {\n    if (distanceFunction(centers[i], oldCenters[i]) > tolerance) {\n      return false;\n    }\n  }\n  return true;\n}\n","const LOOP = 8;\nconst FLOAT_MUL = 1 / 16777216;\nconst sh1 = 15;\nconst sh2 = 18;\nconst sh3 = 11;\nfunction multiply_uint32(n, m) {\n    n >>>= 0;\n    m >>>= 0;\n    const nlo = n & 0xffff;\n    const nhi = n - nlo;\n    return (((nhi * m) >>> 0) + nlo * m) >>> 0;\n}\nexport default class XSadd {\n    constructor(seed = Date.now()) {\n        this.state = new Uint32Array(4);\n        this.init(seed);\n        this.random = this.getFloat.bind(this);\n    }\n    /**\n     * Returns a 32-bit integer r (0 <= r < 2^32)\n     */\n    getUint32() {\n        this.nextState();\n        return (this.state[3] + this.state[2]) >>> 0;\n    }\n    /**\n     * Returns a floating point number r (0.0 <= r < 1.0)\n     */\n    getFloat() {\n        return (this.getUint32() >>> 8) * FLOAT_MUL;\n    }\n    init(seed) {\n        if (!Number.isInteger(seed)) {\n            throw new TypeError('seed must be an integer');\n        }\n        this.state[0] = seed;\n        this.state[1] = 0;\n        this.state[2] = 0;\n        this.state[3] = 0;\n        for (let i = 1; i < LOOP; i++) {\n            this.state[i & 3] ^=\n                (i +\n                    multiply_uint32(1812433253, this.state[(i - 1) & 3] ^ ((this.state[(i - 1) & 3] >>> 30) >>> 0))) >>>\n                    0;\n        }\n        this.periodCertification();\n        for (let i = 0; i < LOOP; i++) {\n            this.nextState();\n        }\n    }\n    periodCertification() {\n        if (this.state[0] === 0 &&\n            this.state[1] === 0 &&\n            this.state[2] === 0 &&\n            this.state[3] === 0) {\n            this.state[0] = 88; // X\n            this.state[1] = 83; // S\n            this.state[2] = 65; // A\n            this.state[3] = 68; // D\n        }\n    }\n    nextState() {\n        let t = this.state[0];\n        t ^= t << sh1;\n        t ^= t >>> sh2;\n        t ^= this.state[3] << sh3;\n        this.state[0] = this.state[1];\n        this.state[1] = this.state[2];\n        this.state[2] = this.state[3];\n        this.state[3] = t;\n    }\n}\n","const PROB_TOLERANCE = 0.00000001;\nfunction randomChoice(values, options = {}, random = Math.random) {\n    const { size = 1, replace = false, probabilities } = options;\n    let valuesArr;\n    let cumSum;\n    if (typeof values === 'number') {\n        valuesArr = getArray(values);\n    }\n    else {\n        valuesArr = values.slice();\n    }\n    if (probabilities) {\n        if (!replace) {\n            throw new Error('choice with probabilities and no replacement is not implemented');\n        }\n        // check input is sane\n        if (probabilities.length !== valuesArr.length) {\n            throw new Error('the length of probabilities option should be equal to the number of choices');\n        }\n        cumSum = [probabilities[0]];\n        for (let i = 1; i < probabilities.length; i++) {\n            cumSum[i] = cumSum[i - 1] + probabilities[i];\n        }\n        if (Math.abs(1 - cumSum[cumSum.length - 1]) > PROB_TOLERANCE) {\n            throw new Error(`probabilities should sum to 1, but instead sums to ${cumSum[cumSum.length - 1]}`);\n        }\n    }\n    if (replace === false && size > valuesArr.length) {\n        throw new Error('size option is too large');\n    }\n    const result = [];\n    for (let i = 0; i < size; i++) {\n        const index = randomIndex(valuesArr.length, random, cumSum);\n        result.push(valuesArr[index]);\n        if (!replace) {\n            valuesArr.splice(index, 1);\n        }\n    }\n    return result;\n}\nfunction getArray(n) {\n    const arr = [];\n    for (let i = 0; i < n; i++) {\n        arr.push(i);\n    }\n    return arr;\n}\nfunction randomIndex(n, random, cumSum) {\n    const rand = random();\n    if (!cumSum) {\n        return Math.floor(rand * n);\n    }\n    else {\n        let idx = 0;\n        while (rand > cumSum[idx]) {\n            idx++;\n        }\n        return idx;\n    }\n}\nexport default randomChoice;\n","// tslint:disable-next-line\nimport XSAdd from 'ml-xsadd';\nimport choice from './choice';\n/**\n * @classdesc Random class\n */\nexport default class Random {\n    /**\n     * @param [seedOrRandom=Math.random] - Control the random number generator used by the Random class instance. Pass a random number generator function with a uniform distribution over the half-open interval [0, 1[. If seed will pass it to ml-xsadd to create a seeded random number generator. If undefined will use Math.random.\n     */\n    constructor(seedOrRandom = Math.random) {\n        if (typeof seedOrRandom === 'number') {\n            const xsadd = new XSAdd(seedOrRandom);\n            this.randomGenerator = xsadd.random;\n        }\n        else {\n            this.randomGenerator = seedOrRandom;\n        }\n    }\n    choice(values, options) {\n        if (typeof values === 'number') {\n            return choice(values, options, this.randomGenerator);\n        }\n        return choice(values, options, this.randomGenerator);\n    }\n    /**\n     * Draw a random number from a uniform distribution on [0,1)\n     * @return The random number\n     */\n    random() {\n        return this.randomGenerator();\n    }\n    /**\n     * Draw a random integer from a uniform distribution on [low, high). If only low is specified, the number is drawn on [0, low)\n     * @param low - The lower bound of the uniform distribution interval.\n     * @param high - The higher bound of the uniform distribution interval.\n     */\n    randInt(low, high) {\n        if (high === undefined) {\n            high = low;\n            low = 0;\n        }\n        return low + Math.floor(this.randomGenerator() * (high - low));\n    }\n    /**\n     * Draw several random number from a uniform distribution on [0, 1)\n     * @param size - The number of number to draw\n     * @return - The list of drawn numbers.\n     */\n    randomSample(size) {\n        const result = [];\n        for (let i = 0; i < size; i++) {\n            result.push(this.random());\n        }\n        return result;\n    }\n}\n","import Random from 'ml-random';\nimport { squaredEuclidean } from 'ml-distance-euclidean';\nimport { Matrix } from 'ml-matrix';\n\n/**\n * Choose K different random points from the original data\n * @ignore\n * @param {Array<Array<number>>} data - Points in the format to cluster [x,y,z,...]\n * @param {number} K - number of clusters\n * @param {number} seed - seed for random number generation\n * @return {Array<Array<number>>} - Initial random points\n */\nexport function random(data, K, seed) {\n  const random = new Random(seed);\n  return random.choice(data, { size: K });\n}\n\n/**\n * Chooses the most distant points to a first random pick\n * @ignore\n * @param {Array<Array<number>>} data - Points in the format to cluster [x,y,z,...]\n * @param {number} K - number of clusters\n * @param {Array<Array<number>>} distanceMatrix - matrix with the distance values\n * @param {number} seed - seed for random number generation\n * @return {Array<Array<number>>} - Initial random points\n */\nexport function mostDistant(data, K, distanceMatrix, seed) {\n  const random = new Random(seed);\n  var ans = new Array(K);\n  // chooses a random point as initial cluster\n  ans[0] = Math.floor(random.random() * data.length);\n\n  if (K > 1) {\n    // chooses the more distant point\n    var maxDist = { dist: -1, index: -1 };\n    for (var l = 0; l < data.length; ++l) {\n      if (distanceMatrix[ans[0]][l] > maxDist.dist) {\n        maxDist.dist = distanceMatrix[ans[0]][l];\n        maxDist.index = l;\n      }\n    }\n    ans[1] = maxDist.index;\n\n    if (K > 2) {\n      // chooses the set of points that maximises the min distance\n      for (var k = 2; k < K; ++k) {\n        var center = { dist: -1, index: -1 };\n        for (var m = 0; m < data.length; ++m) {\n          // minimum distance to centers\n          var minDistCent = { dist: Number.MAX_VALUE, index: -1 };\n          for (var n = 0; n < k; ++n) {\n            if (\n              distanceMatrix[n][m] < minDistCent.dist &&\n              ans.indexOf(m) === -1\n            ) {\n              minDistCent = {\n                dist: distanceMatrix[n][m],\n                index: m\n              };\n            }\n          }\n\n          if (\n            minDistCent.dist !== Number.MAX_VALUE &&\n            minDistCent.dist > center.dist\n          ) {\n            center = Object.assign({}, minDistCent);\n          }\n        }\n\n        ans[k] = center.index;\n      }\n    }\n  }\n\n  return ans.map((index) => data[index]);\n}\n\n// Implementation inspired from scikit\nexport function kmeanspp(X, K, options = {}) {\n  X = new Matrix(X);\n  const nSamples = X.rows;\n  const random = new Random(options.seed);\n  // Set the number of trials\n  const centers = [];\n  const localTrials = options.localTrials || 2 + Math.floor(Math.log(K));\n\n  // Pick the first center at random from the dataset\n  const firstCenterIdx = random.randInt(nSamples);\n  centers.push(X.getRow(firstCenterIdx));\n\n  // Init closest distances\n  let closestDistSquared = new Matrix(1, X.rows);\n  for (let i = 0; i < X.rows; i++) {\n    closestDistSquared.set(0, i, squaredEuclidean(X.getRow(i), centers[0]));\n  }\n  let cumSumClosestDistSquared = [cumSum(closestDistSquared.getRow(0))];\n  const factor = 1 / cumSumClosestDistSquared[0][nSamples - 1];\n  let probabilities = Matrix.mul(closestDistSquared, factor);\n\n  // Iterate over the remaining centers\n  for (let i = 1; i < K; i++) {\n    const candidateIdx = random.choice(nSamples, {\n      replace: true,\n      size: localTrials,\n      probabilities: probabilities[0]\n    });\n\n    const candidates = X.selection(candidateIdx, range(X.columns));\n    const distanceToCandidates = euclideanDistances(candidates, X);\n\n    let bestCandidate;\n    let bestPot;\n    let bestDistSquared;\n\n    for (let j = 0; j < localTrials; j++) {\n      const newDistSquared = Matrix.min(closestDistSquared, [distanceToCandidates.getRow(j)]);\n      const newPot = newDistSquared.sum();\n      if (bestCandidate === undefined || newPot < bestPot) {\n        bestCandidate = candidateIdx[j];\n        bestPot = newPot;\n        bestDistSquared = newDistSquared;\n      }\n    }\n    centers[i] = X.getRow(bestCandidate);\n    closestDistSquared = bestDistSquared;\n    cumSumClosestDistSquared = [cumSum(closestDistSquared.getRow(0))];\n    probabilities = Matrix.mul(\n      closestDistSquared,\n      1 / cumSumClosestDistSquared[0][nSamples - 1]\n    );\n  }\n  return centers;\n}\n\nfunction euclideanDistances(A, B) {\n  const result = new Matrix(A.rows, B.rows);\n  for (let i = 0; i < A.rows; i++) {\n    for (let j = 0; j < B.rows; j++) {\n      result.set(i, j, squaredEuclidean(A.getRow(i), B.getRow(j)));\n    }\n  }\n  return result;\n}\n\nfunction range(l) {\n  let r = [];\n  for (let i = 0; i < l; i++) {\n    r.push(i);\n  }\n  return r;\n}\n\nfunction cumSum(arr) {\n  let cumSum = [arr[0]];\n  for (let i = 1; i < arr.length; i++) {\n    cumSum[i] = cumSum[i - 1] + arr[i];\n  }\n  return cumSum;\n}\n","import { updateClusterID } from './utils';\n\nconst distanceSymbol = Symbol('distance');\n\nexport default class KMeansResult {\n  /**\n   * Result of the kmeans algorithm\n   * @param {Array<number>} clusters - the cluster identifier for each data dot\n   * @param {Array<Array<object>>} centroids - the K centers in format [x,y,z,...], the error and size of the cluster\n   * @param {boolean} converged - Converge criteria satisfied\n   * @param {number} iterations - Current number of iterations\n   * @param {function} distance - (*Private*) Distance function to use between the points\n   * @constructor\n   */\n  constructor(clusters, centroids, converged, iterations, distance) {\n    this.clusters = clusters;\n    this.centroids = centroids;\n    this.converged = converged;\n    this.iterations = iterations;\n    this[distanceSymbol] = distance;\n  }\n\n  /**\n   * Allows to compute for a new array of points their cluster id\n   * @param {Array<Array<number>>} data - the [x,y,z,...] points to cluster\n   * @return {Array<number>} - cluster id for each point\n   */\n  nearest(data) {\n    const clusterID = new Array(data.length);\n    const centroids = this.centroids.map(function (centroid) {\n      return centroid.centroid;\n    });\n    return updateClusterID(data, centroids, clusterID, this[distanceSymbol]);\n  }\n\n  /**\n   * Returns a KMeansResult with the error and size of the cluster\n   * @ignore\n   * @param {Array<Array<number>>} data - the [x,y,z,...] points to cluster\n   * @return {KMeansResult}\n   */\n  computeInformation(data) {\n    var enrichedCentroids = this.centroids.map(function (centroid) {\n      return {\n        centroid: centroid,\n        error: 0,\n        size: 0\n      };\n    });\n\n    for (var i = 0; i < data.length; i++) {\n      enrichedCentroids[this.clusters[i]].error += this[distanceSymbol](\n        data[i],\n        this.centroids[this.clusters[i]]\n      );\n      enrichedCentroids[this.clusters[i]].size++;\n    }\n\n    for (var j = 0; j < this.centroids.length; j++) {\n      if (enrichedCentroids[j].size) {\n        enrichedCentroids[j].error /= enrichedCentroids[j].size;\n      } else {\n        enrichedCentroids[j].error = null;\n      }\n    }\n\n    return new KMeansResult(\n      this.clusters,\n      enrichedCentroids,\n      this.converged,\n      this.iterations,\n      this[distanceSymbol]\n    );\n  }\n}\n","import { squaredEuclidean } from 'ml-distance-euclidean';\n\nimport {\n  updateClusterID,\n  updateCenters,\n  hasConverged,\n  calculateDistanceMatrix\n} from './utils';\nimport { mostDistant, random, kmeanspp } from './initialization';\nimport KMeansResult from './KMeansResult';\n\nconst defaultOptions = {\n  maxIterations: 100,\n  tolerance: 1e-6,\n  withIterations: false,\n  initialization: 'kmeans++',\n  distanceFunction: squaredEuclidean\n};\n\n/**\n * Each step operation for kmeans\n * @ignore\n * @param {Array<Array<number>>} centers - K centers in format [x,y,z,...]\n * @param {Array<Array<number>>} data - Points [x,y,z,...] to cluster\n * @param {Array<number>} clusterID - Cluster identifier for each data dot\n * @param {number} K - Number of clusters\n * @param {object} [options] - Option object\n * @param {number} iterations - Current number of iterations\n * @return {KMeansResult}\n */\nfunction step(centers, data, clusterID, K, options, iterations) {\n  clusterID = updateClusterID(\n    data,\n    centers,\n    clusterID,\n    options.distanceFunction\n  );\n  var newCenters = updateCenters(centers, data, clusterID, K);\n  var converged = hasConverged(\n    newCenters,\n    centers,\n    options.distanceFunction,\n    options.tolerance\n  );\n  return new KMeansResult(\n    clusterID,\n    newCenters,\n    converged,\n    iterations,\n    options.distanceFunction\n  );\n}\n\n/**\n * Generator version for the algorithm\n * @ignore\n * @param {Array<Array<number>>} centers - K centers in format [x,y,z,...]\n * @param {Array<Array<number>>} data - Points [x,y,z,...] to cluster\n * @param {Array<number>} clusterID - Cluster identifier for each data dot\n * @param {number} K - Number of clusters\n * @param {object} [options] - Option object\n */\nfunction* kmeansGenerator(centers, data, clusterID, K, options) {\n  var converged = false;\n  var stepNumber = 0;\n  var stepResult;\n  while (!converged && stepNumber < options.maxIterations) {\n    stepResult = step(centers, data, clusterID, K, options, ++stepNumber);\n    yield stepResult.computeInformation(data);\n    converged = stepResult.converged;\n    centers = stepResult.centroids;\n  }\n}\n\n/**\n * K-means algorithm\n * @param {Array<Array<number>>} data - Points in the format to cluster [x,y,z,...]\n * @param {number} K - Number of clusters\n * @param {object} [options] - Option object\n * @param {number} [options.maxIterations = 100] - Maximum of iterations allowed\n * @param {number} [options.tolerance = 1e-6] - Error tolerance\n * @param {boolean} [options.withIterations = false] - Store clusters and centroids for each iteration\n * @param {function} [options.distanceFunction = squaredDistance] - Distance function to use between the points\n * @param {number} [options.seed] - Seed for random initialization.\n * @param {string|Array<Array<number>>} [options.initialization = 'kmeans++'] - K centers in format [x,y,z,...] or a method for initialize the data:\n *  * You can either specify your custom start centroids, or select one of the following initialization method:\n *  * `'kmeans++'` will use the kmeans++ method as described by http://ilpubs.stanford.edu:8090/778/1/2006-13.pdf\n *  * `'random'` will choose K random different values.\n *  * `'mostDistant'` will choose the more distant points to a first random pick\n * @return {KMeansResult} - Cluster identifier for each data dot and centroids with the following fields:\n *  * `'clusters'`: Array of indexes for the clusters.\n *  * `'centroids'`: Array with the resulting centroids.\n *  * `'iterations'`: Number of iterations that took to converge\n */\nexport default function kmeans(data, K, options) {\n  options = Object.assign({}, defaultOptions, options);\n\n  if (K <= 0 || K > data.length || !Number.isInteger(K)) {\n    throw new Error(\n      'K should be a positive integer smaller than the number of points'\n    );\n  }\n\n  var centers;\n  if (Array.isArray(options.initialization)) {\n    if (options.initialization.length !== K) {\n      throw new Error('The initial centers should have the same length as K');\n    } else {\n      centers = options.initialization;\n    }\n  } else {\n    switch (options.initialization) {\n      case 'kmeans++':\n        centers = kmeanspp(data, K, options);\n        break;\n      case 'random':\n        centers = random(data, K, options.seed);\n        break;\n      case 'mostDistant':\n        centers = mostDistant(\n          data,\n          K,\n          calculateDistanceMatrix(data, options.distanceFunction),\n          options.seed\n        );\n        break;\n      default:\n        throw new Error(\n          `Unknown initialization method: \"${options.initialization}\"`\n        );\n    }\n  }\n\n  // infinite loop until convergence\n  if (options.maxIterations === 0) {\n    options.maxIterations = Number.MAX_VALUE;\n  }\n\n  var clusterID = new Array(data.length);\n  if (options.withIterations) {\n    return kmeansGenerator(centers, data, clusterID, K, options);\n  } else {\n    var converged = false;\n    var stepNumber = 0;\n    var stepResult;\n    while (!converged && stepNumber < options.maxIterations) {\n      stepResult = step(centers, data, clusterID, K, options, ++stepNumber);\n      converged = stepResult.converged;\n      centers = stepResult.centroids;\n    }\n    return stepResult.computeInformation(data);\n  }\n}\n","import Matrix from 'ml-matrix';\n\n/**\n * @private\n * Function that retuns an array of matrices of the cases that belong to each class.\n * @param {Matrix} X - dataset\n * @param {Array} y - predictions\n * @return {Array}\n */\nexport function separateClasses(X, y) {\n  var features = X.columns;\n\n  var classes = 0;\n  var totalPerClasses = new Array(10000); // max upperbound of classes\n  for (var i = 0; i < y.length; i++) {\n    if (totalPerClasses[y[i]] === undefined) {\n      totalPerClasses[y[i]] = 0;\n      classes++;\n    }\n    totalPerClasses[y[i]]++;\n  }\n  var separatedClasses = new Array(classes);\n  var currentIndex = new Array(classes);\n  for (i = 0; i < classes; ++i) {\n    separatedClasses[i] = new Matrix(totalPerClasses[i], features);\n    currentIndex[i] = 0;\n  }\n  for (i = 0; i < X.rows; ++i) {\n    separatedClasses[y[i]].setRow(currentIndex[y[i]], X.getRow(i));\n    currentIndex[y[i]]++;\n  }\n  return separatedClasses;\n}\n","import { Matrix } from 'ml-matrix';\n\nimport { separateClasses } from './utils';\n\nexport class GaussianNB {\n  /**\n   * Constructor for the Gaussian Naive Bayes classifier, the parameters here is just for loading purposes.\n   * @constructor\n   * @param {boolean} reload\n   * @param {object} model\n   */\n  constructor(reload, model) {\n    if (reload) {\n      this.means = model.means;\n      this.calculateProbabilities = model.calculateProbabilities;\n    }\n  }\n\n  /**\n   * Function that trains the classifier with a matrix that represents the training set and an array that\n   * represents the label of each row in the training set. the labels must be numbers between 0 to n-1 where\n   * n represents the number of classes.\n   *\n   * WARNING: in the case that one class, all the cases in one or more features have the same value, the\n   * Naive Bayes classifier will not work well.\n   * @param {Matrix|Array} trainingSet\n   * @param {Matrix|Array} trainingLabels\n   */\n  train(trainingSet, trainingLabels) {\n    var C1 = Math.sqrt(2 * Math.PI); // constant to precalculate the squared root\n    trainingSet = Matrix.checkMatrix(trainingSet);\n\n    if (trainingSet.rows !== trainingLabels.length) {\n      throw new RangeError(\n        'the size of the training set and the training labels must be the same.'\n      );\n    }\n\n    var separatedClasses = separateClasses(trainingSet, trainingLabels);\n    var calculateProbabilities = new Array(separatedClasses.length);\n    this.means = new Array(separatedClasses.length);\n    for (var i = 0; i < separatedClasses.length; ++i) {\n      var means = separatedClasses[i].mean('column');\n      var std = separatedClasses[i].standardDeviation('column', {\n        mean: means\n      });\n\n      var logPriorProbability = Math.log(\n        separatedClasses[i].rows / trainingSet.rows\n      );\n      calculateProbabilities[i] = new Array(means.length + 1);\n\n      calculateProbabilities[i][0] = logPriorProbability;\n      for (var j = 1; j < means.length + 1; ++j) {\n        var currentStd = std[j - 1];\n        calculateProbabilities[i][j] = [\n          1 / (C1 * currentStd),\n          -2 * currentStd * currentStd\n        ];\n      }\n\n      this.means[i] = means;\n    }\n\n    this.calculateProbabilities = calculateProbabilities;\n  }\n\n  /**\n   * function that predicts each row of the dataset (must be a matrix).\n   *\n   * @param {Matrix|Array} dataset\n   * @return {Array}\n   */\n  predict(dataset) {\n    dataset = Matrix.checkMatrix(dataset);\n    if (dataset.rows === this.calculateProbabilities[0].length) {\n      throw new RangeError(\n        'the dataset must have the same features as the training set'\n      );\n    }\n\n    var predictions = new Array(dataset.rows);\n\n    for (var i = 0; i < predictions.length; ++i) {\n      predictions[i] = getCurrentClass(\n        dataset.getRow(i),\n        this.means,\n        this.calculateProbabilities\n      );\n    }\n\n    return predictions;\n  }\n\n  /**\n   * Function that export the NaiveBayes model.\n   * @return {object}\n   */\n  toJSON() {\n    return {\n      modelName: 'NaiveBayes',\n      means: this.means,\n      calculateProbabilities: this.calculateProbabilities\n    };\n  }\n\n  /**\n   * Function that create a GaussianNB classifier with the given model.\n   * @param {object} model\n   * @return {GaussianNB}\n   */\n  static load(model) {\n    if (model.modelName !== 'NaiveBayes') {\n      throw new RangeError(\n        'The current model is not a Multinomial Naive Bayes, current model:',\n        model.name\n      );\n    }\n\n    return new GaussianNB(true, model);\n  }\n}\n\n/**\n * @private\n * Function the retrieves a prediction with one case.\n *\n * @param {Array} currentCase\n * @param {Array} mean - Precalculated means of each class trained\n * @param {Array} classes - Precalculated value of each class (Prior probability and probability function of each feature)\n * @return {number}\n */\nfunction getCurrentClass(currentCase, mean, classes) {\n  var maxProbability = 0;\n  var predictedClass = -1;\n\n  // going through all precalculated values for the classes\n  for (var i = 0; i < classes.length; ++i) {\n    var currentProbability = classes[i][0]; // initialize with the prior probability\n    for (var j = 1; j < classes[0][1].length + 1; ++j) {\n      currentProbability += calculateLogProbability(\n        currentCase[j - 1],\n        mean[i][j - 1],\n        classes[i][j][0],\n        classes[i][j][1]\n      );\n    }\n\n    currentProbability = Math.exp(currentProbability);\n    if (currentProbability > maxProbability) {\n      maxProbability = currentProbability;\n      predictedClass = i;\n    }\n  }\n\n  return predictedClass;\n}\n\n/**\n * @private\n * function that retrieves the probability of the feature given the class.\n * @param {number} value - value of the feature.\n * @param {number} mean - mean of the feature for the given class.\n * @param {number} C1 - precalculated value of (1 / (sqrt(2*pi) * std)).\n * @param {number} C2 - precalculated value of (2 * std^2) for the denominator of the exponential.\n * @return {number}\n */\nfunction calculateLogProbability(value, mean, C1, C2) {\n  value = value - mean;\n  return Math.log(C1 * Math.exp((value * value) / C2));\n}\n","import { Matrix } from 'ml-matrix';\n\nimport { separateClasses } from './utils';\n\nexport class MultinomialNB {\n  /**\n   * Constructor for Multinomial Naive Bayes, the model parameter is for load purposes.\n   * @constructor\n   * @param {object} model - for load purposes.\n   */\n  constructor(model) {\n    if (model) {\n      this.conditionalProbability = Matrix.checkMatrix(\n        model.conditionalProbability\n      );\n      this.priorProbability = Matrix.checkMatrix(model.priorProbability);\n    }\n  }\n\n  /**\n   * Train the classifier with the current training set and labels, the labels must be numbers between 0 and n.\n   * @param {Matrix|Array} trainingSet\n   * @param {Array} trainingLabels\n   */\n  train(trainingSet, trainingLabels) {\n    trainingSet = Matrix.checkMatrix(trainingSet);\n\n    if (trainingSet.rows !== trainingLabels.length) {\n      throw new RangeError(\n        'the size of the training set and the training labels must be the same.'\n      );\n    }\n\n    var separateClass = separateClasses(trainingSet, trainingLabels);\n\n    this.priorProbability = new Matrix(separateClass.length, 1);\n\n    for (var i = 0; i < separateClass.length; ++i) {\n      this.priorProbability.set(i, 0, Math.log(\n        separateClass[i].rows / trainingSet.rows\n      ));\n    }\n\n    var features = trainingSet.columns;\n    this.conditionalProbability = new Matrix(separateClass.length, features);\n    for (i = 0; i < separateClass.length; ++i) {\n      var classValues = Matrix.checkMatrix(separateClass[i]);\n      var total = classValues.sum();\n      var divisor = total + features;\n      this.conditionalProbability.setRow(\n        i,\n        Matrix.rowVector(classValues\n          .sum('column'))\n          .add(1)\n          .div(divisor)\n          .apply(matrixLog)\n      );\n    }\n  }\n\n  /**\n   * Retrieves the predictions for the dataset with the current model.\n   * @param {Matrix|Array} dataset\n   * @return {Array} - predictions from the dataset.\n   */\n  predict(dataset) {\n    dataset = Matrix.checkMatrix(dataset);\n    var predictions = new Array(dataset.rows);\n    for (var i = 0; i < dataset.rows; ++i) {\n      var currentElement = dataset.getRowVector(i);\n      const v = Matrix.columnVector(this.conditionalProbability\n        .clone()\n        .mulRowVector(currentElement)\n        .sum('row'));\n      predictions[i] = v\n        .add(this.priorProbability)\n        .maxIndex()[0];\n    }\n\n    return predictions;\n  }\n\n  /**\n   * Function that saves the current model.\n   * @return {object} - model in JSON format.\n   */\n  toJSON() {\n    return {\n      name: 'MultinomialNB',\n      priorProbability: this.priorProbability,\n      conditionalProbability: this.conditionalProbability\n    };\n  }\n\n  /**\n   * Creates a new MultinomialNB from the given model\n   * @param {object} model\n   * @return {MultinomialNB}\n   */\n  static load(model) {\n    if (model.name !== 'MultinomialNB') {\n      throw new RangeError(`${model.name} is not a Multinomial Naive Bayes`);\n    }\n\n    return new MultinomialNB(model);\n  }\n}\n\nfunction matrixLog(i, j) {\n  this.set(i, j, Math.log(this.get(i, j)));\n}\n","/*\n * Original code from:\n *\n * k-d Tree JavaScript - V 1.01\n *\n * https://github.com/ubilabs/kd-tree-javascript\n *\n * @author Mircea Pricop <pricop@ubilabs.net>, 2012\n * @author Martin Kleppe <kleppe@ubilabs.net>, 2012\n * @author Ubilabs http://ubilabs.net, 2012\n * @license MIT License <http://www.opensource.org/licenses/mit-license.php>\n */\n\nfunction Node(obj, dimension, parent) {\n  this.obj = obj;\n  this.left = null;\n  this.right = null;\n  this.parent = parent;\n  this.dimension = dimension;\n}\n\nexport default class KDTree {\n  constructor(points, metric) {\n    // If points is not an array, assume we're loading a pre-built tree\n    if (!Array.isArray(points)) {\n      this.dimensions = points.dimensions;\n      this.root = points;\n      restoreParent(this.root);\n    } else {\n      this.dimensions = new Array(points[0].length);\n      for (var i = 0; i < this.dimensions.length; i++) {\n        this.dimensions[i] = i;\n      }\n      this.root = buildTree(points, 0, null, this.dimensions);\n    }\n    this.metric = metric;\n  }\n\n  // Convert to a JSON serializable structure; this just requires removing\n  // the `parent` property\n  toJSON() {\n    const result = toJSONImpl(this.root, true);\n    result.dimensions = this.dimensions;\n    return result;\n  }\n\n  nearest(point, maxNodes, maxDistance) {\n    const metric = this.metric;\n    const dimensions = this.dimensions;\n    var i;\n\n    const bestNodes = new BinaryHeap(function (e) {\n      return -e[1];\n    });\n\n    function nearestSearch(node) {\n      const dimension = dimensions[node.dimension];\n      const ownDistance = metric(point, node.obj);\n      const linearPoint = {};\n      var bestChild, linearDistance, otherChild, i;\n\n      function saveNode(node, distance) {\n        bestNodes.push([node, distance]);\n        if (bestNodes.size() > maxNodes) {\n          bestNodes.pop();\n        }\n      }\n\n      for (i = 0; i < dimensions.length; i += 1) {\n        if (i === node.dimension) {\n          linearPoint[dimensions[i]] = point[dimensions[i]];\n        } else {\n          linearPoint[dimensions[i]] = node.obj[dimensions[i]];\n        }\n      }\n\n      linearDistance = metric(linearPoint, node.obj);\n\n      if (node.right === null && node.left === null) {\n        if (bestNodes.size() < maxNodes || ownDistance < bestNodes.peek()[1]) {\n          saveNode(node, ownDistance);\n        }\n        return;\n      }\n\n      if (node.right === null) {\n        bestChild = node.left;\n      } else if (node.left === null) {\n        bestChild = node.right;\n      } else {\n        if (point[dimension] < node.obj[dimension]) {\n          bestChild = node.left;\n        } else {\n          bestChild = node.right;\n        }\n      }\n\n      nearestSearch(bestChild);\n\n      if (bestNodes.size() < maxNodes || ownDistance < bestNodes.peek()[1]) {\n        saveNode(node, ownDistance);\n      }\n\n      if (\n        bestNodes.size() < maxNodes ||\n        Math.abs(linearDistance) < bestNodes.peek()[1]\n      ) {\n        if (bestChild === node.left) {\n          otherChild = node.right;\n        } else {\n          otherChild = node.left;\n        }\n        if (otherChild !== null) {\n          nearestSearch(otherChild);\n        }\n      }\n    }\n\n    if (maxDistance) {\n      for (i = 0; i < maxNodes; i += 1) {\n        bestNodes.push([null, maxDistance]);\n      }\n    }\n\n    if (this.root) {\n      nearestSearch(this.root);\n    }\n\n    const result = [];\n    for (i = 0; i < Math.min(maxNodes, bestNodes.content.length); i += 1) {\n      if (bestNodes.content[i][0]) {\n        result.push([bestNodes.content[i][0].obj, bestNodes.content[i][1]]);\n      }\n    }\n    return result;\n  }\n}\n\nfunction toJSONImpl(src) {\n  const dest = new Node(src.obj, src.dimension, null);\n  if (src.left) dest.left = toJSONImpl(src.left);\n  if (src.right) dest.right = toJSONImpl(src.right);\n  return dest;\n}\n\nfunction buildTree(points, depth, parent, dimensions) {\n  const dim = depth % dimensions.length;\n\n  if (points.length === 0) {\n    return null;\n  }\n  if (points.length === 1) {\n    return new Node(points[0], dim, parent);\n  }\n\n  points.sort((a, b) => a[dimensions[dim]] - b[dimensions[dim]]);\n\n  const median = Math.floor(points.length / 2);\n  const node = new Node(points[median], dim, parent);\n  node.left = buildTree(points.slice(0, median), depth + 1, node, dimensions);\n  node.right = buildTree(points.slice(median + 1), depth + 1, node, dimensions);\n\n  return node;\n}\n\nfunction restoreParent(root) {\n  if (root.left) {\n    root.left.parent = root;\n    restoreParent(root.left);\n  }\n\n  if (root.right) {\n    root.right.parent = root;\n    restoreParent(root.right);\n  }\n}\n\n// Binary heap implementation from:\n// http://eloquentjavascript.net/appendix2.html\nclass BinaryHeap {\n  constructor(scoreFunction) {\n    this.content = [];\n    this.scoreFunction = scoreFunction;\n  }\n\n  push(element) {\n    // Add the new element to the end of the array.\n    this.content.push(element);\n    // Allow it to bubble up.\n    this.bubbleUp(this.content.length - 1);\n  }\n\n  pop() {\n    // Store the first element so we can return it later.\n    var result = this.content[0];\n    // Get the element at the end of the array.\n    var end = this.content.pop();\n    // If there are any elements left, put the end element at the\n    // start, and let it sink down.\n    if (this.content.length > 0) {\n      this.content[0] = end;\n      this.sinkDown(0);\n    }\n    return result;\n  }\n\n  peek() {\n    return this.content[0];\n  }\n\n  size() {\n    return this.content.length;\n  }\n\n  bubbleUp(n) {\n    // Fetch the element that has to be moved.\n    var element = this.content[n];\n    // When at 0, an element can not go up any further.\n    while (n > 0) {\n      // Compute the parent element's index, and fetch it.\n      const parentN = Math.floor((n + 1) / 2) - 1;\n      const parent = this.content[parentN];\n      // Swap the elements if the parent is greater.\n      if (this.scoreFunction(element) < this.scoreFunction(parent)) {\n        this.content[parentN] = element;\n        this.content[n] = parent;\n        // Update 'n' to continue at the new position.\n        n = parentN;\n      } else {\n        // Found a parent that is less, no need to move it further.\n        break;\n      }\n    }\n  }\n\n  sinkDown(n) {\n    // Look up the target element and its score.\n    var length = this.content.length;\n    var element = this.content[n];\n    var elemScore = this.scoreFunction(element);\n\n    while (true) {\n      // Compute the indices of the child elements.\n      var child2N = (n + 1) * 2;\n      var child1N = child2N - 1;\n      // This is used to store the new position of the element,\n      // if any.\n      var swap = null;\n      // If the first child exists (is inside the array)...\n      if (child1N < length) {\n        // Look it up and compute its score.\n        var child1 = this.content[child1N];\n        var child1Score = this.scoreFunction(child1);\n        // If the score is less than our element's, we need to swap.\n        if (child1Score < elemScore) {\n          swap = child1N;\n        }\n      }\n      // Do the same checks for the other child.\n      if (child2N < length) {\n        var child2 = this.content[child2N];\n        var child2Score = this.scoreFunction(child2);\n        if (child2Score < (swap === null ? elemScore : child1Score)) {\n          swap = child2N;\n        }\n      }\n\n      // If the element needs to be moved, swap it, and continue.\n      if (swap !== null) {\n        this.content[n] = this.content[swap];\n        this.content[swap] = element;\n        n = swap;\n      } else {\n        // Otherwise, we are done.\n        break;\n      }\n    }\n  }\n}\n","import { euclidean as euclideanDistance } from 'ml-distance-euclidean';\n\nimport KDTree from './KDTree';\n\nexport default class KNN {\n  /**\n   * @param {Array} dataset\n   * @param {Array} labels\n   * @param {object} options\n   * @param {number} [options.k=numberOfClasses + 1] - Number of neighbors to classify.\n   * @param {function} [options.distance=euclideanDistance] - Distance function that takes two parameters.\n   */\n  constructor(dataset, labels, options = {}) {\n    if (dataset === true) {\n      const model = labels;\n      this.kdTree = new KDTree(model.kdTree, options);\n      this.k = model.k;\n      this.classes = new Set(model.classes);\n      this.isEuclidean = model.isEuclidean;\n      return;\n    }\n\n    const classes = new Set(labels);\n\n    const { distance = euclideanDistance, k = classes.size + 1 } = options;\n\n    const points = new Array(dataset.length);\n    for (var i = 0; i < points.length; ++i) {\n      points[i] = dataset[i].slice();\n    }\n\n    for (i = 0; i < labels.length; ++i) {\n      points[i].push(labels[i]);\n    }\n\n    this.kdTree = new KDTree(points, distance);\n    this.k = k;\n    this.classes = classes;\n    this.isEuclidean = distance === euclideanDistance;\n  }\n\n  /**\n   * Create a new KNN instance with the given model.\n   * @param {object} model\n   * @param {function} distance=euclideanDistance - distance function must be provided if the model wasn't trained with euclidean distance.\n   * @return {KNN}\n   */\n  static load(model, distance = euclideanDistance) {\n    if (model.name !== 'KNN') {\n      throw new Error(`invalid model: ${model.name}`);\n    }\n    if (!model.isEuclidean && distance === euclideanDistance) {\n      throw new Error(\n        'a custom distance function was used to create the model. Please provide it again'\n      );\n    }\n    if (model.isEuclidean && distance !== euclideanDistance) {\n      throw new Error(\n        'the model was created with the default distance function. Do not load it with another one'\n      );\n    }\n    return new KNN(true, model, distance);\n  }\n\n  /**\n   * Return a JSON containing the kd-tree model.\n   * @return {object} JSON KNN model.\n   */\n  toJSON() {\n    return {\n      name: 'KNN',\n      kdTree: this.kdTree,\n      k: this.k,\n      classes: Array.from(this.classes),\n      isEuclidean: this.isEuclidean\n    };\n  }\n\n  /**\n   * Predicts the output given the matrix to predict.\n   * @param {Array} dataset\n   * @return {Array} predictions\n   */\n  predict(dataset) {\n    if (Array.isArray(dataset)) {\n      if (typeof dataset[0] === 'number') {\n        return getSinglePrediction(this, dataset);\n      } else if (\n        Array.isArray(dataset[0]) &&\n        typeof dataset[0][0] === 'number'\n      ) {\n        const predictions = new Array(dataset.length);\n        for (var i = 0; i < dataset.length; i++) {\n          predictions[i] = getSinglePrediction(this, dataset[i]);\n        }\n        return predictions;\n      }\n    }\n    throw new TypeError('dataset to predict must be an array or a matrix');\n  }\n}\n\nfunction getSinglePrediction(knn, currentCase) {\n  var nearestPoints = knn.kdTree.nearest(currentCase, knn.k);\n  var pointsPerClass = {};\n  var predictedClass = -1;\n  var maxPoints = -1;\n  var lastElement = nearestPoints[0][0].length - 1;\n\n  for (var element of knn.classes) {\n    pointsPerClass[element] = 0;\n  }\n\n  for (var i = 0; i < nearestPoints.length; ++i) {\n    var currentClass = nearestPoints[i][0][lastElement];\n    var currentPoints = ++pointsPerClass[currentClass];\n    if (currentPoints > maxPoints) {\n      predictedClass = currentClass;\n      maxPoints = currentPoints;\n    }\n  }\n\n  return predictedClass;\n}\n","import Matrix from 'ml-matrix';\n\n/**\n * @private\n * Function that given vector, returns its norm\n * @param {Vector} X\n * @return {number} Norm of the vector\n */\nexport function norm(X) {\n  return Math.sqrt(X.clone().apply(pow2array).sum());\n}\n\n/**\n * @private\n * Function that pow 2 each element of a Matrix or a Vector,\n * used in the apply method of the Matrix object\n * @param {number} i - index i.\n * @param {number} j - index j.\n * @return {Matrix} The Matrix object modified at the index i, j.\n * */\nexport function pow2array(i, j) {\n  this.set(i, j, this.get(i, j) ** 2);\n}\n\n/**\n * @private\n * Function that normalize the dataset and return the means and\n * standard deviation of each feature.\n * @param {Matrix} dataset\n * @return {object} dataset normalized, means and standard deviations\n */\nexport function featureNormalize(dataset) {\n  var means = dataset.mean('column');\n  var std = dataset.standardDeviation('column', { mean: means, unbiased: true });\n  var result = Matrix.checkMatrix(dataset).subRowVector(means);\n  return { result: result.divRowVector(std), means: means, std: std };\n}\n\n/**\n * @private\n * Function that initialize an array of matrices.\n * @param {Array} array\n * @param {boolean} isMatrix\n * @return {Array} array with the matrices initialized.\n */\nexport function initializeMatrices(array, isMatrix) {\n  if (isMatrix) {\n    for (var i = 0; i < array.length; ++i) {\n      for (var j = 0; j < array[i].length; ++j) {\n        var elem = array[i][j];\n        array[i][j] = elem !== null ? new Matrix(array[i][j]) : undefined;\n      }\n    }\n  } else {\n    for (i = 0; i < array.length; ++i) {\n      array[i] = new Matrix(array[i]);\n    }\n  }\n\n  return array;\n}\n","import Matrix from 'ml-matrix';\n\nimport * as Utils from './utils';\n\n/**\n * @class PLS\n */\nexport class PLS {\n  /**\n   * Constructor for Partial Least Squares (PLS)\n   * @param {object} options\n   * @param {number} [options.latentVectors] - Number of latent vector to get (if the algorithm doesn't find a good model below the tolerance)\n   * @param {number} [options.tolerance=1e-5]\n   * @param {boolean} [options.scale=true] - rescale dataset using mean.\n   * @param {object} model - for load purposes.\n   */\n  constructor(options, model) {\n    if (options === true) {\n      this.meanX = model.meanX;\n      this.stdDevX = model.stdDevX;\n      this.meanY = model.meanY;\n      this.stdDevY = model.stdDevY;\n      this.PBQ = Matrix.checkMatrix(model.PBQ);\n      this.R2X = model.R2X;\n      this.scale = model.scale;\n      this.scaleMethod = model.scaleMethod;\n      this.tolerance = model.tolerance;\n    } else {\n      var {\n        tolerance = 1e-5,\n        scale = true,\n      } = options;\n      this.tolerance = tolerance;\n      this.scale = scale;\n      this.latentVectors = options.latentVectors;\n    }\n  }\n\n  /**\n   * Fits the model with the given data and predictions, in this function is calculated the\n   * following outputs:\n   *\n   * T - Score matrix of X\n   * P - Loading matrix of X\n   * U - Score matrix of Y\n   * Q - Loading matrix of Y\n   * B - Matrix of regression coefficient\n   * W - Weight matrix of X\n   *\n   * @param {Matrix|Array} trainingSet\n   * @param {Matrix|Array} trainingValues\n   */\n  train(trainingSet, trainingValues) {\n    trainingSet = Matrix.checkMatrix(trainingSet);\n    trainingValues = Matrix.checkMatrix(trainingValues);\n\n    if (trainingSet.length !== trainingValues.length) {\n      throw new RangeError('The number of X rows must be equal to the number of Y rows');\n    }\n\n    this.meanX = trainingSet.mean('column');\n    this.stdDevX = trainingSet.standardDeviation('column', { mean: this.meanX, unbiased: true });\n    this.meanY = trainingValues.mean('column');\n    this.stdDevY = trainingValues.standardDeviation('column', { mean: this.meanY, unbiased: true });\n\n    if (this.scale) {\n      trainingSet = trainingSet.clone().subRowVector(this.meanX).divRowVector(this.stdDevX);\n      trainingValues = trainingValues.clone().subRowVector(this.meanY).divRowVector(this.stdDevY);\n    }\n\n    if (this.latentVectors === undefined) {\n      this.latentVectors = Math.min(trainingSet.rows - 1, trainingSet.columns);\n    }\n\n    var rx = trainingSet.rows;\n    var cx = trainingSet.columns;\n    var ry = trainingValues.rows;\n    var cy = trainingValues.columns;\n\n    var ssqXcal = trainingSet.clone().mul(trainingSet).sum(); // for the r²\n    var sumOfSquaresY = trainingValues.clone().mul(trainingValues).sum();\n\n    var tolerance = this.tolerance;\n    var n = this.latentVectors;\n    var T = Matrix.zeros(rx, n);\n    var P = Matrix.zeros(cx, n);\n    var U = Matrix.zeros(ry, n);\n    var Q = Matrix.zeros(cy, n);\n    var B = Matrix.zeros(n, n);\n    var W = P.clone();\n    var k = 0;\n\n    while (Utils.norm(trainingValues) > tolerance && k < n) {\n      var transposeX = trainingSet.transpose();\n      var transposeY = trainingValues.transpose();\n\n      var tIndex = maxSumColIndex(trainingSet.clone().mul(trainingSet));\n      var uIndex = maxSumColIndex(trainingValues.clone().mul(trainingValues));\n\n      var t1 = trainingSet.getColumnVector(tIndex);\n      var u = trainingValues.getColumnVector(uIndex);\n      var t = Matrix.zeros(rx, 1);\n\n      while (Utils.norm(t1.clone().sub(t)) > tolerance) {\n        var w = transposeX.mmul(u);\n        w.div(Utils.norm(w));\n        t = t1;\n        t1 = trainingSet.mmul(w);\n        var q = transposeY.mmul(t1);\n        q.div(Utils.norm(q));\n        u = trainingValues.mmul(q);\n      }\n\n      t = t1;\n      var num = transposeX.mmul(t);\n      var den = t.transpose().mmul(t).get(0, 0);\n      var p = num.div(den);\n      var pnorm = Utils.norm(p);\n      p.div(pnorm);\n      t.mul(pnorm);\n      w.mul(pnorm);\n\n      num = u.transpose().mmul(t);\n      den = t.transpose().mmul(t).get(0, 0);\n      var b = num.div(den).get(0, 0);\n      trainingSet.sub(t.mmul(p.transpose()));\n      trainingValues.sub(t.clone().mul(b).mmul(q.transpose()));\n\n      T.setColumn(k, t);\n      P.setColumn(k, p);\n      U.setColumn(k, u);\n      Q.setColumn(k, q);\n      W.setColumn(k, w);\n\n      B.set(k, k, b);\n      k++;\n    }\n\n    k--;\n    T = T.subMatrix(0, T.rows - 1, 0, k);\n    P = P.subMatrix(0, P.rows - 1, 0, k);\n    U = U.subMatrix(0, U.rows - 1, 0, k);\n    Q = Q.subMatrix(0, Q.rows - 1, 0, k);\n    W = W.subMatrix(0, W.rows - 1, 0, k);\n    B = B.subMatrix(0, k, 0, k);\n\n    // TODO: review of R2Y\n    // this.R2Y = t.transpose().mmul(t).mul(q[k][0]*q[k][0]).divS(ssqYcal)[0][0];\n    //\n    this.ssqYcal = sumOfSquaresY;\n    this.E = trainingSet;\n    this.F = trainingValues;\n    this.T = T;\n    this.P = P;\n    this.U = U;\n    this.Q = Q;\n    this.W = W;\n    this.B = B;\n    this.PBQ = P.mmul(B).mmul(Q.transpose());\n    this.R2X = t.transpose().mmul(t).mmul(p.transpose().mmul(p)).div(ssqXcal).get(0, 0);\n  }\n\n  /**\n   * Predicts the behavior of the given dataset.\n   * @param {Matrix|Array} dataset - data to be predicted.\n   * @return {Matrix} - predictions of each element of the dataset.\n   */\n  predict(dataset) {\n    var X = Matrix.checkMatrix(dataset);\n    if (this.scale) {\n      X = X.subRowVector(this.meanX).divRowVector(this.stdDevX);\n    }\n    var Y = X.mmul(this.PBQ);\n    Y = Y.mulRowVector(this.stdDevY).addRowVector(this.meanY);\n    return Y;\n  }\n\n  /**\n   * Returns the explained variance on training of the PLS model\n   * @return {number}\n   */\n  getExplainedVariance() {\n    return this.R2X;\n  }\n\n  /**\n   * Export the current model to JSON.\n   * @return {object} - Current model.\n   */\n  toJSON() {\n    return {\n      name: 'PLS',\n      R2X: this.R2X,\n      meanX: this.meanX,\n      stdDevX: this.stdDevX,\n      meanY: this.meanY,\n      stdDevY: this.stdDevY,\n      PBQ: this.PBQ,\n      tolerance: this.tolerance,\n      scale: this.scale,\n    };\n  }\n\n  /**\n   * Load a PLS model from a JSON Object\n   * @param {object} model\n   * @return {PLS} - PLS object from the given model\n   */\n  static load(model) {\n    if (model.name !== 'PLS') {\n      throw new RangeError(`Invalid model: ${model.name}`);\n    }\n    return new PLS(true, model);\n  }\n}\n\n/**\n * @private\n * Function that returns the index where the sum of each\n * column vector is maximum.\n * @param {Matrix} data\n * @return {number} index of the maximum\n */\nfunction maxSumColIndex(data) {\n  return Matrix.rowVector(data.sum('column')).maxIndex()[0];\n}\n","import { Matrix, SingularValueDecomposition, inverse } from 'ml-matrix';\n\nimport { initializeMatrices } from './utils';\n\n/**\n * @class KOPLS\n */\nexport class KOPLS {\n  /**\n     * Constructor for Kernel-based Orthogonal Projections to Latent Structures (K-OPLS)\n     * @param {object} options\n     * @param {number} [options.predictiveComponents] - Number of predictive components to use.\n     * @param {number} [options.orthogonalComponents] - Number of Y-Orthogonal components.\n     * @param {Kernel} [options.kernel] - Kernel object to apply, see [ml-kernel](https://github.com/mljs/kernel).\n     * @param {object} model - for load purposes.\n     */\n  constructor(options, model) {\n    if (options === true) {\n      this.trainingSet = new Matrix(model.trainingSet);\n      this.YLoadingMat = new Matrix(model.YLoadingMat);\n      this.SigmaPow = new Matrix(model.SigmaPow);\n      this.YScoreMat = new Matrix(model.YScoreMat);\n      this.predScoreMat = initializeMatrices(model.predScoreMat, false);\n      this.YOrthLoadingVec = initializeMatrices(model.YOrthLoadingVec, false);\n      this.YOrthEigen = model.YOrthEigen;\n      this.YOrthScoreMat = initializeMatrices(model.YOrthScoreMat, false);\n      this.toNorm = initializeMatrices(model.toNorm, false);\n      this.TURegressionCoeff = initializeMatrices(model.TURegressionCoeff, false);\n      this.kernelX = initializeMatrices(model.kernelX, true);\n      this.kernel = model.kernel;\n      this.orthogonalComp = model.orthogonalComp;\n      this.predictiveComp = model.predictiveComp;\n    } else {\n      if (options.predictiveComponents === undefined) {\n        throw new RangeError('no predictive components found!');\n      }\n      if (options.orthogonalComponents === undefined) {\n        throw new RangeError('no orthogonal components found!');\n      }\n      if (options.kernel === undefined) {\n        throw new RangeError('no kernel found!');\n      }\n\n      this.orthogonalComp = options.orthogonalComponents;\n      this.predictiveComp = options.predictiveComponents;\n      this.kernel = options.kernel;\n    }\n  }\n\n  /**\n     * Train the K-OPLS model with the given training set and labels.\n     * @param {Matrix|Array} trainingSet\n     * @param {Matrix|Array} trainingValues\n     */\n  train(trainingSet, trainingValues) {\n    trainingSet = Matrix.checkMatrix(trainingSet);\n    trainingValues = Matrix.checkMatrix(trainingValues);\n\n    // to save and compute kernel with the prediction dataset.\n    this.trainingSet = trainingSet.clone();\n\n    var kernelX = this.kernel.compute(trainingSet);\n\n    var Identity = Matrix.eye(kernelX.rows, kernelX.rows, 1);\n    var temp = kernelX;\n    kernelX = new Array(this.orthogonalComp + 1);\n    for (let i = 0; i < this.orthogonalComp + 1; i++) {\n      kernelX[i] = new Array(this.orthogonalComp + 1);\n    }\n    kernelX[0][0] = temp;\n\n    var result = new SingularValueDecomposition(trainingValues.transpose().mmul(kernelX[0][0]).mmul(trainingValues), {\n      computeLeftSingularVectors: true,\n      computeRightSingularVectors: false\n    });\n    var YLoadingMat = result.leftSingularVectors;\n    var Sigma = result.diagonalMatrix;\n\n    YLoadingMat = YLoadingMat.subMatrix(0, YLoadingMat.rows - 1, 0, this.predictiveComp - 1);\n    Sigma = Sigma.subMatrix(0, this.predictiveComp - 1, 0, this.predictiveComp - 1);\n\n    var YScoreMat = trainingValues.mmul(YLoadingMat);\n\n    var predScoreMat = new Array(this.orthogonalComp + 1);\n    var TURegressionCoeff = new Array(this.orthogonalComp + 1);\n    var YOrthScoreMat = new Array(this.orthogonalComp);\n    var YOrthLoadingVec = new Array(this.orthogonalComp);\n    var YOrthEigen = new Array(this.orthogonalComp);\n    var YOrthScoreNorm = new Array(this.orthogonalComp);\n\n    var SigmaPow = Matrix.pow(Sigma, -0.5);\n    // to avoid errors, check infinity\n    SigmaPow.apply(function (i, j) {\n      if (this.get(i, j) === Infinity) {\n        this.set(i, j, 0);\n      }\n    });\n\n    for (var i = 0; i < this.orthogonalComp; ++i) {\n      predScoreMat[i] = kernelX[0][i].transpose().mmul(YScoreMat).mmul(SigmaPow);\n\n      var TpiPrime = predScoreMat[i].transpose();\n      TURegressionCoeff[i] = inverse(TpiPrime.mmul(predScoreMat[i])).mmul(TpiPrime).mmul(YScoreMat);\n\n      result = new SingularValueDecomposition(TpiPrime.mmul(Matrix.sub(kernelX[i][i], predScoreMat[i].mmul(TpiPrime))).mmul(predScoreMat[i]), {\n        computeLeftSingularVectors: true,\n        computeRightSingularVectors: false\n      });\n      var CoTemp = result.leftSingularVectors;\n      var SoTemp = result.diagonalMatrix;\n\n      YOrthLoadingVec[i] = CoTemp.subMatrix(0, CoTemp.rows - 1, 0, 0);\n      YOrthEigen[i] = SoTemp.get(0, 0);\n\n      YOrthScoreMat[i] = Matrix.sub(kernelX[i][i], predScoreMat[i].mmul(TpiPrime)).mmul(predScoreMat[i]).mmul(YOrthLoadingVec[i]).mul(Math.pow(YOrthEigen[i], -0.5));\n\n      var toiPrime = YOrthScoreMat[i].transpose();\n      YOrthScoreNorm[i] = Matrix.sqrt(toiPrime.mmul(YOrthScoreMat[i]));\n\n      YOrthScoreMat[i] = YOrthScoreMat[i].divRowVector(YOrthScoreNorm[i]);\n\n      var ITo = Matrix.sub(Identity, YOrthScoreMat[i].mmul(YOrthScoreMat[i].transpose()));\n\n      kernelX[0][i + 1] = kernelX[0][i].mmul(ITo);\n      kernelX[i + 1][i + 1] = ITo.mmul(kernelX[i][i]).mmul(ITo);\n    }\n\n    var lastScoreMat = predScoreMat[this.orthogonalComp] = kernelX[0][this.orthogonalComp].transpose().mmul(YScoreMat).mmul(SigmaPow);\n\n    var lastTpPrime = lastScoreMat.transpose();\n    TURegressionCoeff[this.orthogonalComp] = inverse(lastTpPrime.mmul(lastScoreMat)).mmul(lastTpPrime).mmul(YScoreMat);\n\n    this.YLoadingMat = YLoadingMat;\n    this.SigmaPow = SigmaPow;\n    this.YScoreMat = YScoreMat;\n    this.predScoreMat = predScoreMat;\n    this.YOrthLoadingVec = YOrthLoadingVec;\n    this.YOrthEigen = YOrthEigen;\n    this.YOrthScoreMat = YOrthScoreMat;\n    this.toNorm = YOrthScoreNorm;\n    this.TURegressionCoeff = TURegressionCoeff;\n    this.kernelX = kernelX;\n  }\n\n  /**\n     * Predicts the output given the matrix to predict.\n     * @param {Matrix|Array} toPredict\n     * @return {{y: Matrix, predScoreMat: Array<Matrix>, predYOrthVectors: Array<Matrix>}} predictions\n     */\n  predict(toPredict) {\n    var KTestTrain = this.kernel.compute(toPredict, this.trainingSet);\n\n    var temp = KTestTrain;\n    KTestTrain = new Array(this.orthogonalComp + 1);\n    for (let i = 0; i < this.orthogonalComp + 1; i++) {\n      KTestTrain[i] = new Array(this.orthogonalComp + 1);\n    }\n    KTestTrain[0][0] = temp;\n\n    var YOrthScoreVector = new Array(this.orthogonalComp);\n    var predScoreMat = new Array(this.orthogonalComp);\n\n    var i;\n    for (i = 0; i < this.orthogonalComp; ++i) {\n      predScoreMat[i] = KTestTrain[i][0].mmul(this.YScoreMat).mmul(this.SigmaPow);\n\n      YOrthScoreVector[i] = Matrix.sub(KTestTrain[i][i], predScoreMat[i].mmul(this.predScoreMat[i].transpose())).mmul(this.predScoreMat[i]).mmul(this.YOrthLoadingVec[i]).mul(Math.pow(this.YOrthEigen[i], -0.5));\n\n      YOrthScoreVector[i] = YOrthScoreVector[i].divRowVector(this.toNorm[i]);\n\n      var scoreMatPrime = this.YOrthScoreMat[i].transpose();\n      KTestTrain[i + 1][0] = Matrix.sub(KTestTrain[i][0], YOrthScoreVector[i].mmul(scoreMatPrime).mmul(this.kernelX[0][i].transpose()));\n\n      var p1 = Matrix.sub(KTestTrain[i][0], KTestTrain[i][i].mmul(this.YOrthScoreMat[i]).mmul(scoreMatPrime));\n      var p2 = YOrthScoreVector[i].mmul(scoreMatPrime).mmul(this.kernelX[i][i]);\n      var p3 = p2.mmul(this.YOrthScoreMat[i]).mmul(scoreMatPrime);\n\n      KTestTrain[i + 1][i + 1] = p1.sub(p2).add(p3);\n    }\n\n    predScoreMat[i] = KTestTrain[i][0].mmul(this.YScoreMat).mmul(this.SigmaPow);\n    var prediction = predScoreMat[i].mmul(this.TURegressionCoeff[i]).mmul(this.YLoadingMat.transpose());\n\n    return {\n      prediction: prediction,\n      predScoreMat: predScoreMat,\n      predYOrthVectors: YOrthScoreVector\n    };\n  }\n\n  /**\n     * Export the current model to JSON.\n     * @return {object} - Current model.\n     */\n  toJSON() {\n    return {\n      name: 'K-OPLS',\n      YLoadingMat: this.YLoadingMat,\n      SigmaPow: this.SigmaPow,\n      YScoreMat: this.YScoreMat,\n      predScoreMat: this.predScoreMat,\n      YOrthLoadingVec: this.YOrthLoadingVec,\n      YOrthEigen: this.YOrthEigen,\n      YOrthScoreMat: this.YOrthScoreMat,\n      toNorm: this.toNorm,\n      TURegressionCoeff: this.TURegressionCoeff,\n      kernelX: this.kernelX,\n      trainingSet: this.trainingSet,\n      orthogonalComp: this.orthogonalComp,\n      predictiveComp: this.predictiveComp\n    };\n  }\n\n  /**\n     * Load a K-OPLS with the given model.\n     * @param {object} model\n     * @param {Kernel} kernel - kernel used on the model, see [ml-kernel](https://github.com/mljs/kernel).\n     * @return {KOPLS}\n     */\n  static load(model, kernel) {\n    if (model.name !== 'K-OPLS') {\n      throw new RangeError(`Invalid model: ${model.name}`);\n    }\n\n    if (!kernel) {\n      throw new RangeError('You must provide a kernel for the model!');\n    }\n\n    model.kernel = kernel;\n    return new KOPLS(true, model);\n  }\n}\n","/**\n *  Constructs a confusion matrix\n * @class ConfusionMatrix\n * @example\n * const CM = new ConfusionMatrix([[13, 2], [10, 5]], ['cat', 'dog'])\n * @param {Array<Array<number>>} matrix - The confusion matrix, a 2D Array. Rows represent the actual label and columns\n *     the predicted label.\n * @param {Array<any>} labels - Labels of the confusion matrix, a 1D Array\n */\nclass ConfusionMatrix {\n    constructor(matrix, labels) {\n        if (matrix.length !== matrix[0].length) {\n            throw new Error('Confusion matrix must be square');\n        }\n        if (labels.length !== matrix.length) {\n            throw new Error('Confusion matrix and labels should have the same length');\n        }\n        this.labels = labels;\n        this.matrix = matrix;\n    }\n\n\n    /**\n     * Construct confusion matrix from the predicted and actual labels (classes). Be sure to provide the arguments in\n     * the correct order!\n     * @param {Array<any>} actual  - The predicted labels of the classification\n     * @param {Array<any>} predicted     - The actual labels of the classification. Has to be of same length as\n     *     predicted.\n     * @param {object} [options] - Additional options\n     * @param {Array<any>} [options.labels] - The list of labels that should be used. If not provided the distinct set\n     *     of labels present in predicted and actual is used. Labels are compared using the strict equality operator\n     *     '==='\n     * @return {ConfusionMatrix} - Confusion matrix\n     */\n    static fromLabels(actual, predicted, options = {}) {\n        if (predicted.length !== actual.length) {\n            throw new Error('predicted and actual must have the same length');\n        }\n        let distinctLabels;\n        if (options.labels) {\n            distinctLabels = new Set(options.labels);\n        } else {\n            distinctLabels = new Set([...actual, ...predicted]);\n        }\n        distinctLabels = Array.from(distinctLabels);\n        if (options.sort) {\n            distinctLabels.sort(options.sort);\n        }\n\n        // Create confusion matrix and fill with 0's\n        const matrix = Array.from({length: distinctLabels.length});\n        for (let i = 0; i < matrix.length; i++) {\n            matrix[i] = new Array(matrix.length);\n            matrix[i].fill(0);\n        }\n\n        for (let i = 0; i < predicted.length; i++) {\n            const actualIdx = distinctLabels.indexOf(actual[i]);\n            const predictedIdx = distinctLabels.indexOf(predicted[i]);\n            if (actualIdx >= 0 && predictedIdx >= 0) {\n                matrix[actualIdx][predictedIdx]++;\n            }\n        }\n\n        return new ConfusionMatrix(matrix, distinctLabels);\n    }\n\n    /**\n     * Get the confusion matrix\n     * @return {Array<Array<number> >}\n     */\n    getMatrix() {\n        return this.matrix;\n    }\n\n    getLabels() {\n        return this.labels;\n    }\n\n    /**\n     * Get the total number of samples\n     * @return {number}\n     */\n    getTotalCount() {\n        let predicted = 0;\n        for (var i = 0; i < this.matrix.length; i++) {\n            for (var j = 0; j < this.matrix.length; j++) {\n                predicted += this.matrix[i][j];\n            }\n        }\n        return predicted;\n    }\n\n    /**\n     * Get the total number of true predictions\n     * @return {number}\n     */\n    getTrueCount() {\n        var count = 0;\n        for (var i = 0; i < this.matrix.length; i++) {\n            count += this.matrix[i][i];\n        }\n        return count;\n    }\n\n    /**\n     * Get the total number of false predictions.\n     * @return {number}\n     */\n    getFalseCount() {\n        return this.getTotalCount() - this.getTrueCount();\n    }\n\n    /**\n     * Get the number of true positive predictions.\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getTruePositiveCount(label) {\n        const index = this.getIndex(label);\n        return this.matrix[index][index];\n    }\n\n    /**\n     * Get the number of true negative predictions\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getTrueNegativeCount(label) {\n        const index = this.getIndex(label);\n        var count = 0;\n        for (var i = 0; i < this.matrix.length; i++) {\n            for (var j = 0; j < this.matrix.length; j++) {\n                if (i !== index && j !== index) {\n                    count += this.matrix[i][j];\n                }\n            }\n        }\n        return count;\n    }\n\n    /**\n     * Get the number of false positive predictions.\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getFalsePositiveCount(label) {\n        const index = this.getIndex(label);\n        var count = 0;\n        for (var i = 0; i < this.matrix.length; i++) {\n            if (i !== index) {\n                count += this.matrix[i][index];\n            }\n        }\n        return count;\n    }\n\n    /**\n     * Get the number of false negative predictions.\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getFalseNegativeCount(label) {\n        const index = this.getIndex(label);\n        var count = 0;\n        for (var i = 0; i < this.matrix.length; i++) {\n            if (i !== index) {\n                count += this.matrix[index][i];\n            }\n        }\n        return count;\n    }\n\n    /**\n     * Get the number of real positive samples.\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getPositiveCount(label) {\n        return this.getTruePositiveCount(label) + this.getFalseNegativeCount(label);\n    }\n\n    /**\n     * Get the number of real negative samples.\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getNegativeCount(label) {\n        return this.getTrueNegativeCount(label) + this.getFalsePositiveCount(label);\n    }\n\n    /**\n     * Get the index in the confusion matrix that corresponds to the given label\n     * @param {any} label - The label to search for\n     * @throws if the label is not found\n     * @return {number}\n     */\n    getIndex(label) {\n        const index = this.labels.indexOf(label);\n        if (index === -1) throw new Error('The label does not exist');\n        return index;\n    }\n\n    /**\n     * Get the true positive rate a.k.a. sensitivity. Computes the ratio between the number of true positive predictions and the total number of positive samples.\n     * {@link https://en.wikipedia.org/wiki/Sensitivity_and_specificity}\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number} - The true positive rate [0-1]\n     */\n    getTruePositiveRate(label) {\n        return this.getTruePositiveCount(label) / this.getPositiveCount(label);\n    }\n\n    /**\n     * Get the true negative rate a.k.a. specificity. Computes the ration between the number of true negative predictions and the total number of negative samples.\n     * {@link https://en.wikipedia.org/wiki/Sensitivity_and_specificity}\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getTrueNegativeRate(label) {\n        return this.getTrueNegativeCount(label) / this.getNegativeCount(label);\n    }\n\n    /**\n     * Get the positive predictive value a.k.a. precision. Computes TP / (TP + FP)\n     * {@link https://en.wikipedia.org/wiki/Positive_and_negative_predictive_values}\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getPositivePredictiveValue(label) {\n        const TP = this.getTruePositiveCount(label);\n        return TP / (TP + this.getFalsePositiveCount(label));\n    }\n\n    /**\n     * Negative predictive value\n     * {@link https://en.wikipedia.org/wiki/Positive_and_negative_predictive_values}\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getNegativePredictiveValue(label) {\n        const TN = this.getTrueNegativeCount(label);\n        return TN / (TN + this.getFalseNegativeCount(label));\n    }\n\n    /**\n     * False negative rate a.k.a. miss rate.\n     * {@link https://en.wikipedia.org/wiki/Type_I_and_type_II_errors#False_positive_and_false_negative_rates}\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getFalseNegativeRate(label) {\n        return 1 - this.getTruePositiveRate(label);\n    }\n\n    /**\n     * False positive rate a.k.a. fall-out rate.\n     * {@link https://en.wikipedia.org/wiki/Type_I_and_type_II_errors#False_positive_and_false_negative_rates}\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getFalsePositiveRate(label) {\n        return 1 - this.getTrueNegativeRate(label);\n    }\n\n    /**\n     * False discovery rate (FDR)\n     * {@link https://en.wikipedia.org/wiki/False_discovery_rate}\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getFalseDiscoveryRate(label) {\n        const FP = this.getFalsePositiveCount(label);\n        return FP / (FP + this.getTruePositiveCount(label));\n    }\n\n    /**\n     * False omission rate (FOR)\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getFalseOmissionRate(label) {\n        const FN = this.getFalseNegativeCount(label);\n        return FN / (FN + this.getTruePositiveCount(label));\n    }\n\n    /**\n     * F1 score\n     * {@link https://en.wikipedia.org/wiki/F1_score}\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getF1Score(label) {\n        const TP = this.getTruePositiveCount(label);\n        return 2 * TP / (2 * TP + this.getFalsePositiveCount(label) + this.getFalseNegativeCount(label));\n    }\n\n    /**\n     * Matthews correlation coefficient (MCC)\n     * {@link https://en.wikipedia.org/wiki/Matthews_correlation_coefficient}\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getMatthewsCorrelationCoefficient(label) {\n        const TP = this.getTruePositiveCount(label);\n        const TN = this.getTrueNegativeCount(label);\n        const FP = this.getFalsePositiveCount(label);\n        const FN = this.getFalseNegativeCount(label);\n        return (TP * TN - FP * FN) / Math.sqrt((TP + FP) * (TP + FN) * (TN + FP) * (TN + FN));\n    }\n\n    /**\n     * Informedness\n     * {@link https://en.wikipedia.org/wiki/Youden%27s_J_statistic}\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getInformedness(label) {\n        return this.getTruePositiveRate(label) + this.getTrueNegativeRate(label) - 1;\n    }\n\n    /**\n     * Markedness\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getMarkedness(label) {\n        return this.getPositivePredictiveValue(label) + this.getNegativePredictiveValue(label) - 1;\n    }\n\n    /**\n     * Get the confusion table.\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {Array<Array<number> >} - The 2x2 confusion table. [[TP, FN], [FP, TN]]\n     */\n    getConfusionTable(label) {\n        return [\n            [\n                this.getTruePositiveCount(label),\n                this.getFalseNegativeCount(label)\n            ],\n            [\n                this.getFalsePositiveCount(label),\n                this.getTrueNegativeCount(label)\n            ]\n        ];\n    }\n\n    /**\n     * Get total accuracy.\n     * @return {number} - The ratio between the number of true predictions and total number of classifications ([0-1])\n     */\n    getAccuracy() {\n        let correct = 0;\n        let incorrect = 0;\n        for (var i = 0; i < this.matrix.length; i++) {\n            for (var j = 0; j < this.matrix.length; j++) {\n                if (i === j) correct += this.matrix[i][j];\n                else incorrect += this.matrix[i][j];\n            }\n        }\n        return correct / (correct + incorrect);\n    }\n\n\n    /**\n     * Returns the element in the confusion matrix that corresponds to the given actual and predicted labels.\n     * @param {any} actual - The true label\n     * @param {any} predicted - The predicted label\n     * @return {number} - The element in the confusion matrix\n     */\n    getCount(actual, predicted) {\n        const actualIndex = this.getIndex(actual);\n        const predictedIndex = this.getIndex(predicted);\n        return this.matrix[actualIndex][predictedIndex];\n    }\n\n    /**\n     * Compute the general prediction accuracy\n     * @deprecated Use getAccuracy\n     * @return {number} - The prediction accuracy ([0-1]\n     */\n    get accuracy() {\n        return this.getAccuracy();\n    }\n\n    /**\n     * Compute the number of predicted observations\n     * @deprecated Use getTotalCount\n     * @return {number}\n     */\n    get total() {\n        return this.getTotalCount();\n    }\n}\n\nmodule.exports = ConfusionMatrix;\n","'use strict';\nconst defaultOptions = {\n  mode: 'index'\n};\n\nmodule.exports = function *(M, N, options) {\n  options = Object.assign({}, defaultOptions, options);\n  var a = new Array(N);\n  var c = new Array(M);\n  var b = new Array(N);\n  var p = new Array(N + 2);\n  var x, y, z;\n\n  // init a and b\n  for (var i = 0; i < N; i++) {\n    a[i] = i;\n    if (i < N - M) b[i] = 0;\n    else b[i] = 1;\n  }\n\n  // init c\n  for (i = 0; i < M; i++) {\n    c[i] = N - M + i;\n  }\n\n  // init p\n  for (i = 0; i < p.length; i++) {\n    if (i === 0) p[i] = N + 1;\n    else if (i <= N - M) p[i] = 0;\n    else if (i <= N) p[i] = i - N + M;\n    else p[i] = -2;\n  }\n\n  function twiddle() {\n    var i, j, k;\n    j = 1;\n    while (p[j] <= 0) {\n      j++;\n    }\n    if (p[j - 1] === 0) {\n      for (i = j - 1; i !== 1; i--) {\n        p[i] = -1;\n      }\n      p[j] = 0;\n      x = z = 0;\n      p[1] = 1;\n      y = j - 1;\n    } else {\n      if (j > 1) {\n        p[j - 1] = 0;\n      }\n      do {\n        j++;\n      }\n      while (p[j] > 0);\n      k = j - 1;\n      i = j;\n      while (p[i] === 0) {\n        p[i++] = -1;\n      }\n      if (p[i] === -1) {\n        p[i] = p[k];\n        z = p[k] - 1;\n        x = i - 1;\n        y = k - 1;\n        p[k] = -1;\n      } else {\n        if (i === p[0]) {\n          return 0;\n        } else {\n          p[j] = p[i];\n          z = p[i] - 1;\n          p[i] = 0;\n          x = j - 1;\n          y = i - 1;\n        }\n      }\n    }\n    return 1;\n  }\n\n  if (options.mode === 'index') {\n    yield c.slice();\n    while (twiddle()) {\n      c[z] = a[x];\n      yield c.slice();\n    }\n  } else if (options.mode === 'mask') {\n    yield b.slice();\n    while (twiddle()) {\n      b[x] = 1;\n      b[y] = 0;\n      yield b.slice();\n    }\n  } else {\n    throw new Error('Invalid mode');\n  }\n};\n","'use strict';\n\nconst ConfusionMatrix = require('ml-confusion-matrix');\n\nconst CV = {};\nconst combinations = require('ml-combinations');\n\n/**\n * Performs a leave-one-out cross-validation (LOO-CV) of the given samples. In LOO-CV, 1 observation is used as the\n * validation set while the rest is used as the training set. This is repeated once for each observation. LOO-CV is a\n * special case of LPO-CV. @see leavePout\n * @param {function} Classifier - The classifier's constructor to use for the cross validation. Expect ml-classifier\n *     api.\n * @param {Array} features - The features for all samples of the data-set\n * @param {Array} labels - The classification class of all samples of the data-set\n * @param {object} classifierOptions - The classifier options with which the classifier should be instantiated.\n * @return {ConfusionMatrix} - The cross-validation confusion matrix\n */\nCV.leaveOneOut = function (Classifier, features, labels, classifierOptions) {\n    if (typeof labels === 'function') {\n        var callback = labels;\n        labels = features;\n        features = Classifier;\n        return CV.leavePOut(features, labels, 1, callback);\n    }\n    return CV.leavePOut(Classifier, features, labels, classifierOptions, 1);\n};\n\n\n/**\n * Performs a leave-p-out cross-validation (LPO-CV) of the given samples. In LPO-CV, p observations are used as the\n * validation set while the rest is used as the training set. This is repeated as many times as there are possible\n * ways to combine p observations from the set (unordered without replacement). Be aware that for relatively small\n * data-set size this can require a very large number of training and testing to do!\n * @param {function} Classifier - The classifier's constructor to use for the cross validation. Expect ml-classifier\n *     api.\n * @param {Array} features - The features for all samples of the data-set\n * @param {Array} labels - The classification class of all samples of the data-set\n * @param {object} classifierOptions - The classifier options with which the classifier should be instantiated.\n * @param {number} p - The size of the validation sub-samples' set\n * @return {ConfusionMatrix} - The cross-validation confusion matrix\n */\nCV.leavePOut = function (Classifier, features, labels, classifierOptions, p) {\n    if (typeof classifierOptions === 'function') {\n        var callback = classifierOptions;\n        p = labels;\n        labels = features;\n        features = Classifier;\n    }\n    check(features, labels);\n    const distinct = getDistinct(labels);\n    const confusionMatrix = initMatrix(distinct.length, distinct.length);\n\n    var N = features.length;\n    var gen = combinations(p, N);\n    var allIdx = new Array(N);\n    for (let i = 0; i < N; i++) {\n        allIdx[i] = i;\n    }\n    for (const testIdx of gen) {\n        var trainIdx = allIdx.slice();\n\n        for (let i = testIdx.length - 1; i >= 0; i--) {\n            trainIdx.splice(testIdx[i], 1);\n        }\n\n        if (callback) {\n            validateWithCallback(features, labels, testIdx, trainIdx, confusionMatrix, distinct, callback);\n        } else {\n            validate(Classifier, features, labels, classifierOptions, testIdx, trainIdx, confusionMatrix, distinct);\n        }\n\n    }\n\n    return new ConfusionMatrix(confusionMatrix, distinct);\n};\n\n/**\n * Performs k-fold cross-validation (KF-CV). KF-CV separates the data-set into k random equally sized partitions, and\n * uses each as a validation set, with all other partitions used in the training set. Observations left over from if k\n * does not divide the number of observations are left out of the cross-validation process.\n * @param {function} Classifier - The classifier's to use for the cross validation. Expect ml-classifier api.\n * @param {Array} features - The features for all samples of the data-set\n * @param {Array} labels - The classification class of all samples of the data-set\n * @param {object} classifierOptions - The classifier options with which the classifier should be instantiated.\n * @param {number} k - The number of partitions to create\n * @return {ConfusionMatrix} - The cross-validation confusion matrix\n */\nCV.kFold = function (Classifier, features, labels, classifierOptions, k) {\n    if (typeof classifierOptions === 'function') {\n        var callback = classifierOptions;\n        k = labels;\n        labels = features;\n        features = Classifier;\n    }\n    check(features, labels);\n    const distinct = getDistinct(labels);\n    const confusionMatrix = initMatrix(distinct.length, distinct.length);\n    var N = features.length;\n    var allIdx = new Array(N);\n    for (var i = 0; i < N; i++) {\n        allIdx[i] = i;\n    }\n\n    var l = Math.floor(N / k);\n    // create random k-folds\n    var current = [];\n    var folds = [];\n    while (allIdx.length) {\n        var randi = Math.floor(Math.random() * allIdx.length);\n        current.push(allIdx[randi]);\n        allIdx.splice(randi, 1);\n        if (current.length === l) {\n            folds.push(current);\n            current = [];\n        }\n    }\n    if (current.length) folds.push(current);\n    folds = folds.slice(0, k);\n\n\n    for (i = 0; i < folds.length; i++) {\n        var testIdx = folds[i];\n        var trainIdx = [];\n        for (var j = 0; j < folds.length; j++) {\n            if (j !== i) trainIdx = trainIdx.concat(folds[j]);\n        }\n\n        if (callback) {\n            validateWithCallback(features, labels, testIdx, trainIdx, confusionMatrix, distinct, callback);\n        } else {\n            validate(Classifier, features, labels, classifierOptions, testIdx, trainIdx, confusionMatrix, distinct);\n        }\n    }\n\n    return new ConfusionMatrix(confusionMatrix, distinct);\n};\n\nfunction check(features, labels) {\n    if (features.length !== labels.length) {\n        throw new Error('features and labels should have the same length');\n    }\n}\n\nfunction initMatrix(rows, columns) {\n    return new Array(rows).fill(0).map(() => new Array(columns).fill(0));\n}\n\nfunction getDistinct(arr) {\n    var s = new Set();\n    for (let i = 0; i < arr.length; i++) {\n        s.add(arr[i]);\n    }\n    return Array.from(s);\n}\n\nfunction validate(Classifier, features, labels, classifierOptions, testIdx, trainIdx, confusionMatrix, distinct) {\n    const {testFeatures, trainFeatures, testLabels, trainLabels} = getTrainTest(features, labels, testIdx, trainIdx);\n\n    var classifier;\n    if (Classifier.prototype.train) {\n        classifier = new Classifier(classifierOptions);\n        classifier.train(trainFeatures, trainLabels);\n    } else {\n        classifier = new Classifier(trainFeatures, trainLabels, classifierOptions);\n    }\n\n    var predictedLabels = classifier.predict(testFeatures);\n    updateConfusionMatrix(confusionMatrix, testLabels, predictedLabels, distinct);\n}\n\nfunction validateWithCallback(features, labels, testIdx, trainIdx, confusionMatrix, distinct, callback) {\n    const {testFeatures, trainFeatures, testLabels, trainLabels} = getTrainTest(features, labels, testIdx, trainIdx);\n    const predictedLabels = callback(trainFeatures, trainLabels, testFeatures);\n    updateConfusionMatrix(confusionMatrix, testLabels, predictedLabels, distinct);\n}\n\nfunction updateConfusionMatrix(confusionMatrix, testLabels, predictedLabels, distinct) {\n\n    for (var i = 0; i < predictedLabels.length; i++) {\n        const actualIdx = distinct.indexOf(testLabels[i]);\n        const predictedIdx = distinct.indexOf(predictedLabels[i]);\n        if (actualIdx < 0 || predictedIdx < 0) {\n            // eslint-disable-next-line no-console\n            console.warn(`ignore unknown predicted label ${predictedLabels[i]}`);\n        }\n        confusionMatrix[actualIdx][predictedIdx]++;\n    }\n}\n\n\nfunction getTrainTest(features, labels, testIdx, trainIdx) {\n    return {\n        testFeatures: testIdx.map(function (index) {\n            return features[index];\n        }),\n        trainFeatures: trainIdx.map(function (index) {\n            return features[index];\n        }),\n        testLabels: testIdx.map(function (index) {\n            return labels[index];\n        }),\n        trainLabels: trainIdx.map(function (index) {\n            return labels[index];\n        })\n    };\n}\n\nmodule.exports = CV;\n","'use strict';\n\nvar mlMatrix = require('ml-matrix');\n\nfunction logistic(val) {\n  return 1 / (1 + Math.exp(-val));\n}\n\nfunction expELU(val, param) {\n  return val < 0 ? param * (Math.exp(val) - 1) : val;\n}\n\nfunction softExponential(val, param) {\n  if (param < 0) {\n    return -Math.log(1 - param * (val + param)) / param;\n  }\n  if (param > 0) {\n    return ((Math.exp(param * val) - 1) / param) + param;\n  }\n  return val;\n}\n\nfunction softExponentialPrime(val, param) {\n  if (param < 0) {\n    return 1 / (1 - param * (param + val));\n  } else {\n    return Math.exp(param * val);\n  }\n}\n\nconst ACTIVATION_FUNCTIONS = {\n  tanh: {\n    activation: Math.tanh,\n    derivate: (val) => 1 - (val * val)\n  },\n  identity: {\n    activation: (val) => val,\n    derivate: () => 1\n  },\n  logistic: {\n    activation: logistic,\n    derivate: (val) => logistic(val) * (1 - logistic(val))\n  },\n  arctan: {\n    activation: Math.atan,\n    derivate: (val) => 1 / (val * val + 1)\n  },\n  softsign: {\n    activation: (val) => val / (1 + Math.abs(val)),\n    derivate: (val) => 1 / ((1 + Math.abs(val)) * (1 + Math.abs(val)))\n  },\n  relu: {\n    activation: (val) => (val < 0 ? 0 : val),\n    derivate: (val) => (val < 0 ? 0 : 1)\n  },\n  softplus: {\n    activation: (val) => Math.log(1 + Math.exp(val)),\n    derivate: (val) => 1 / (1 + Math.exp(-val))\n  },\n  bent: {\n    activation: (val) => ((Math.sqrt(val * val + 1) - 1) / 2) + val,\n    derivate: (val) => (val / (2 * Math.sqrt(val * val + 1))) + 1\n  },\n  sinusoid: {\n    activation: Math.sin,\n    derivate: Math.cos\n  },\n  sinc: {\n    activation: (val) => (val === 0 ? 1 : Math.sin(val) / val),\n    derivate: (val) => (val === 0 ? 0 : (Math.cos(val) / val) - (Math.sin(val) / (val * val)))\n  },\n  gaussian: {\n    activation: (val) => Math.exp(-(val * val)),\n    derivate: (val) => -2 * val * Math.exp(-(val * val))\n  },\n  'parametric-relu': {\n    activation: (val, param) => (val < 0 ? param * val : val),\n    derivate: (val, param) => (val < 0 ? param : 1)\n  },\n  'exponential-elu': {\n    activation: expELU,\n    derivate: (val, param) => (val < 0 ? expELU(val, param) + param : 1)\n  },\n  'soft-exponential': {\n    activation: softExponential,\n    derivate: softExponentialPrime\n  }\n};\n\nclass Layer {\n  /**\n     * @private\n     * Create a new layer with the given options\n     * @param {object} options\n     * @param {number} [options.inputSize] - Number of conections that enter the neurons.\n     * @param {number} [options.outputSize] - Number of conections that leave the neurons.\n     * @param {number} [options.regularization] - Regularization parameter.\n     * @param {number} [options.epsilon] - Learning rate parameter.\n     * @param {string} [options.activation] - Activation function parameter from the FeedForwardNeuralNetwork class.\n     * @param {number} [options.activationParam] - Activation parameter if needed.\n     */\n  constructor(options) {\n    this.inputSize = options.inputSize;\n    this.outputSize = options.outputSize;\n    this.regularization = options.regularization;\n    this.epsilon = options.epsilon;\n    this.activation = options.activation;\n    this.activationParam = options.activationParam;\n\n    var selectedFunction = ACTIVATION_FUNCTIONS[options.activation];\n    var params = selectedFunction.activation.length;\n\n    var actFunction = params > 1 ? (val) => selectedFunction.activation(val, options.activationParam) : selectedFunction.activation;\n    var derFunction = params > 1 ? (val) => selectedFunction.derivate(val, options.activationParam) : selectedFunction.derivate;\n\n    this.activationFunction = function (i, j) {\n      this.set(i, j, actFunction(this.get(i, j)));\n    };\n    this.derivate = function (i, j) {\n      this.set(i, j, derFunction(this.get(i, j)));\n    };\n\n    if (options.model) {\n      // load model\n      this.W = mlMatrix.Matrix.checkMatrix(options.W);\n      this.b = mlMatrix.Matrix.checkMatrix(options.b);\n    } else {\n      // default constructor\n      this.W = mlMatrix.Matrix.rand(this.inputSize, this.outputSize);\n      this.b = mlMatrix.Matrix.zeros(1, this.outputSize);\n\n      this.W.apply(function (i, j) {\n        this.set(i, j, this.get(i, j) / Math.sqrt(options.inputSize));\n      });\n    }\n  }\n\n  /**\n     * @private\n     * propagate the given input through the current layer.\n     * @param {Matrix} X - input.\n     * @return {Matrix} output at the current layer.\n     */\n  forward(X) {\n    var z = X.mmul(this.W).addRowVector(this.b);\n    z.apply(this.activationFunction);\n    this.a = z.clone();\n    return z;\n  }\n\n  /**\n     * @private\n     * apply backpropagation algorithm at the current layer\n     * @param {Matrix} delta - delta values estimated at the following layer.\n     * @param {Matrix} a - 'a' values from the following layer.\n     * @return {Matrix} the new delta values for the next layer.\n     */\n  backpropagation(delta, a) {\n    this.dW = a.transpose().mmul(delta);\n    this.db = mlMatrix.Matrix.rowVector(delta.sum('column'));\n\n    var aCopy = a.clone();\n    return delta.mmul(this.W.transpose()).mul(aCopy.apply(this.derivate));\n  }\n\n  /**\n     * @private\n     * Function that updates the weights at the current layer with the derivatives.\n     */\n  update() {\n    this.dW.add(this.W.clone().mul(this.regularization));\n    this.W.add(this.dW.mul(-this.epsilon));\n    this.b.add(this.db.mul(-this.epsilon));\n  }\n\n  /**\n     * @private\n     * Export the current layer to JSON.\n     * @return {object} model\n     */\n  toJSON() {\n    return {\n      model: 'Layer',\n      inputSize: this.inputSize,\n      outputSize: this.outputSize,\n      regularization: this.regularization,\n      epsilon: this.epsilon,\n      activation: this.activation,\n      W: this.W,\n      b: this.b\n    };\n  }\n\n  /**\n     * @private\n     * Creates a new Layer with the given model.\n     * @param {object} model\n     * @return {Layer}\n     */\n  static load(model) {\n    if (model.model !== 'Layer') {\n      throw new RangeError('the current model is not a Layer model');\n    }\n    return new Layer(model);\n  }\n}\n\nclass OutputLayer extends Layer {\n  constructor(options) {\n    super(options);\n\n    this.activationFunction = function (i, j) {\n      this.set(i, j, Math.exp(this.get(i, j)));\n    };\n  }\n\n  static load(model) {\n    if (model.model !== 'Layer') {\n      throw new RangeError('the current model is not a Layer model');\n    }\n\n    return new OutputLayer(model);\n  }\n}\n\nclass FeedForwardNeuralNetworks {\n  /**\n   * Create a new Feedforward neural network model.\n   * @class FeedForwardNeuralNetworks\n   * @param {object} [options]\n   * @param {Array} [options.hiddenLayers=[10]] - Array that contains the sizes of the hidden layers.\n   * @param {number} [options.iterations=50] - Number of iterations at the training step.\n   * @param {number} [options.learningRate=0.01] - Learning rate of the neural net (also known as epsilon).\n   * @param {number} [options.regularization=0.01] - Regularization parameter af the neural net.\n   * @param {string} [options.activation='tanh'] - activation function to be used. (options: 'tanh'(default),\n   * 'identity', 'logistic', 'arctan', 'softsign', 'relu', 'softplus', 'bent', 'sinusoid', 'sinc', 'gaussian').\n   * (single-parametric options: 'parametric-relu', 'exponential-relu', 'soft-exponential').\n   * @param {number} [options.activationParam=1] - if the selected activation function needs a parameter.\n   */\n  constructor(options) {\n    options = options || {};\n    if (options.model) {\n      // load network\n      this.hiddenLayers = options.hiddenLayers;\n      this.iterations = options.iterations;\n      this.learningRate = options.learningRate;\n      this.regularization = options.regularization;\n      this.dicts = options.dicts;\n      this.activation = options.activation;\n      this.activationParam = options.activationParam;\n      this.model = new Array(options.layers.length);\n\n      for (var i = 0; i < this.model.length - 1; ++i) {\n        this.model[i] = Layer.load(options.layers[i]);\n      }\n      this.model[this.model.length - 1] = OutputLayer.load(options.layers[this.model.length - 1]);\n    } else {\n      // default constructor\n      this.hiddenLayers = options.hiddenLayers || [10];\n      this.iterations = options.iterations || 50;\n\n      this.learningRate = options.learningRate || 0.01;\n      this.regularization = options.regularization || 0.01;\n\n      this.activation = options.activation || 'tanh';\n      this.activationParam = options.activationParam || 1;\n      if (!(this.activation in Object.keys(ACTIVATION_FUNCTIONS))) {\n        this.activation = 'tanh';\n      }\n    }\n  }\n\n  /**\n   * @private\n   * Function that build and initialize the neural net.\n   * @param {number} inputSize - total of features to fit.\n   * @param {number} outputSize - total of labels of the prediction set.\n   */\n  buildNetwork(inputSize, outputSize) {\n    var size = 2 + (this.hiddenLayers.length - 1);\n    this.model = new Array(size);\n\n    // input layer\n    this.model[0] = new Layer({\n      inputSize: inputSize,\n      outputSize: this.hiddenLayers[0],\n      activation: this.activation,\n      activationParam: this.activationParam,\n      regularization: this.regularization,\n      epsilon: this.learningRate\n    });\n\n    // hidden layers\n    for (var i = 1; i < this.hiddenLayers.length; ++i) {\n      this.model[i] = new Layer({\n        inputSize: this.hiddenLayers[i - 1],\n        outputSize: this.hiddenLayers[i],\n        activation: this.activation,\n        activationParam: this.activationParam,\n        regularization: this.regularization,\n        epsilon: this.learningRate\n      });\n    }\n\n    // output layer\n    this.model[size - 1] = new OutputLayer({\n      inputSize: this.hiddenLayers[this.hiddenLayers.length - 1],\n      outputSize: outputSize,\n      activation: this.activation,\n      activationParam: this.activationParam,\n      regularization: this.regularization,\n      epsilon: this.learningRate\n    });\n  }\n\n  /**\n   * Train the neural net with the given features and labels.\n   * @param {Matrix|Array} features\n   * @param {Matrix|Array} labels\n   */\n  train(features, labels) {\n    features = mlMatrix.Matrix.checkMatrix(features);\n    this.dicts = dictOutputs(labels);\n\n    var inputSize = features.columns;\n    var outputSize = Object.keys(this.dicts.inputs).length;\n\n    if (!this.model) {\n      this.buildNetwork(inputSize, outputSize);\n    }\n\n    for (var i = 0; i < this.iterations; ++i) {\n      var probabilities = this.propagate(features);\n      this.backpropagation(features, labels, probabilities);\n    }\n  }\n\n  /**\n   * @private\n   * Propagate the input(training set) and retrives the probabilities of each class.\n   * @param {Matrix} X\n   * @return {Matrix} probabilities of each class.\n   */\n  propagate(X) {\n    var input = X;\n    for (var i = 0; i < this.model.length; ++i) {\n      input = this.model[i].forward(input);\n    }\n\n    // get probabilities\n    return input.divColumnVector(input.sum('row'));\n  }\n\n  /**\n   * @private\n   * Function that applies the backpropagation algorithm on each layer of the network\n   * in order to fit the features and labels.\n   * @param {Matrix} features\n   * @param {Array} labels\n   * @param {Matrix} probabilities - probabilities of each class of the feature set.\n   */\n  backpropagation(features, labels, probabilities) {\n    for (var i = 0; i < probabilities.rows; ++i) {\n      probabilities.set(i, this.dicts.inputs[labels[i]], probabilities.get(i, this.dicts.inputs[labels[i]]) - 1);\n    }\n\n    // remember, the last delta doesn't matter\n    var delta = probabilities;\n    for (i = this.model.length - 1; i >= 0; --i) {\n      var a = i > 0 ? this.model[i - 1].a : features;\n      delta = this.model[i].backpropagation(delta, a);\n    }\n\n    for (i = 0; i < this.model.length; ++i) {\n      this.model[i].update();\n    }\n  }\n\n  /**\n   * Predict the output given the feature set.\n   * @param {Array|Matrix} features\n   * @return {Array}\n   */\n  predict(features) {\n    features = mlMatrix.Matrix.checkMatrix(features);\n    var outputs = new Array(features.rows);\n    var probabilities = this.propagate(features);\n    for (var i = 0; i < features.rows; ++i) {\n      outputs[i] = this.dicts.outputs[probabilities.maxRowIndex(i)[1]];\n    }\n\n    return outputs;\n  }\n\n  /**\n   * Export the current model to JSON.\n   * @return {object} model\n   */\n  toJSON() {\n    var model = {\n      model: 'FNN',\n      hiddenLayers: this.hiddenLayers,\n      iterations: this.iterations,\n      learningRate: this.learningRate,\n      regularization: this.regularization,\n      activation: this.activation,\n      activationParam: this.activationParam,\n      dicts: this.dicts,\n      layers: new Array(this.model.length)\n    };\n\n    for (var i = 0; i < this.model.length; ++i) {\n      model.layers[i] = this.model[i].toJSON();\n    }\n\n    return model;\n  }\n\n  /**\n   * Load a Feedforward Neural Network with the current model.\n   * @param {object} model\n   * @return {FeedForwardNeuralNetworks}\n   */\n  static load(model) {\n    if (model.model !== 'FNN') {\n      throw new RangeError('the current model is not a feed forward network');\n    }\n\n    return new FeedForwardNeuralNetworks(model);\n  }\n}\n\n/**\n * @private\n * Method that given an array of labels(predictions), returns two dictionaries, one to transform from labels to\n * numbers and other in the reverse way\n * @param {Array} array\n * @return {object}\n */\nfunction dictOutputs(array) {\n  var inputs = {};\n  var outputs = {};\n  var index = 0;\n  for (var i = 0; i < array.length; i += 1) {\n    if (inputs[array[i]] === undefined) {\n      inputs[array[i]] = index;\n      outputs[index] = array[i];\n      index++;\n    }\n  }\n\n  return {\n    inputs: inputs,\n    outputs: outputs\n  };\n}\n\nmodule.exports = FeedForwardNeuralNetworks;\n","function NodeSquare(x, y, weights, som) {\n    this.x = x;\n    this.y = y;\n    this.weights = weights;\n    this.som = som;\n    this.neighbors = {};\n}\n\nNodeSquare.prototype.adjustWeights = function adjustWeights(target, learningRate, influence) {\n    for (var i = 0, ii = this.weights.length; i < ii; i++) {\n        this.weights[i] += learningRate * influence * (target[i] - this.weights[i]);\n    }\n};\n\nNodeSquare.prototype.getDistance = function getDistance(otherNode) {\n    return Math.max(Math.abs(this.x - otherNode.x), Math.abs(this.y - otherNode.y));\n};\n\nNodeSquare.prototype.getDistanceTorus = function getDistanceTorus(otherNode) {\n    var distX = Math.abs(this.x - otherNode.x),\n        distY = Math.abs(this.y - otherNode.y);\n    return Math.max(Math.min(distX, this.som.gridDim.x - distX), Math.min(distY, this.som.gridDim.y - distY));\n};\n\nNodeSquare.prototype.getNeighbors = function getNeighbors(xy) {\n    if (!this.neighbors[xy]) {\n        this.neighbors[xy] = new Array(2);\n\n        // left or bottom neighbor\n        var v;\n        if (this[xy] > 0) {\n            v = this[xy] - 1;\n        } else if (this.som.torus) {\n            v = this.som.gridDim[xy] - 1\n        }\n        if (typeof v !== 'undefined') {\n            var x, y;\n            if (xy === 'x') {\n                x = v;\n                y = this.y;\n            } else {\n                x = this.x;\n                y = v;\n            }\n            this.neighbors[xy][0] = this.som.nodes[x][y];\n        }\n\n        // top or right neighbor\n        var w;\n        if (this[xy] < (this.som.gridDim[xy] - 1)) {\n            w = this[xy] + 1;\n        } else if (this.som.torus) {\n            w = 0;\n        }\n        if (typeof w !== 'undefined') {\n            if (xy === 'x') {\n                x = w;\n                y = this.y;\n            } else {\n                x = this.x;\n                y = w;\n            }\n            this.neighbors[xy][1] = this.som.nodes[x][y];\n        }\n    }\n    return this.neighbors[xy];\n};\n\nNodeSquare.prototype.getPos = function getPos(xy, element) {\n    var neighbors = this.getNeighbors(xy),\n        distance = this.som.distance,\n        bestNeighbor,\n        direction;\n    if(neighbors[0]) {\n        if (neighbors[1]) {\n            var dist1 = distance(element, neighbors[0].weights),\n                dist2 = distance(element, neighbors[1].weights);\n            if(dist1 < dist2) {\n                bestNeighbor = neighbors[0];\n                direction = -1;\n            } else {\n                bestNeighbor = neighbors[1];\n                direction = 1;\n            }\n        } else {\n            bestNeighbor = neighbors[0];\n            direction = -1;\n        }\n    } else {\n        bestNeighbor = neighbors[1];\n        direction = 1;\n    }\n    var simA = 1 - distance(element, this.weights),\n        simB = 1 - distance(element, bestNeighbor.weights);\n    var factor = ((simA - simB) / (2 - simA - simB));\n    return 0.5 + 0.5 * factor * direction;\n};\n\nNodeSquare.prototype.getPosition = function getPosition(element) {\n    return [\n        this.getPos('x', element),\n        this.getPos('y', element)\n    ];\n};\n\nmodule.exports = NodeSquare;","var NodeSquare = require('./node-square');\n\nfunction NodeHexagonal(x, y, weights, som) {\n\n    NodeSquare.call(this, x, y, weights, som);\n\n    this.hX = x - Math.floor(y / 2);\n    this.z = 0 - this.hX - y;\n\n}\n\nNodeHexagonal.prototype = new NodeSquare;\nNodeHexagonal.prototype.constructor = NodeHexagonal;\n\nNodeHexagonal.prototype.getDistance = function getDistanceHexagonal(otherNode) {\n    return Math.max(Math.abs(this.hX - otherNode.hX), Math.abs(this.y - otherNode.y), Math.abs(this.z - otherNode.z));\n};\n\nNodeHexagonal.prototype.getDistanceTorus = function getDistanceTorus(otherNode) {\n    var distX = Math.abs(this.hX - otherNode.hX),\n        distY = Math.abs(this.y - otherNode.y),\n        distZ = Math.abs(this.z - otherNode.z);\n    return Math.max(Math.min(distX, this.som.gridDim.x - distX), Math.min(distY, this.som.gridDim.y - distY), Math.min(distZ, this.som.gridDim.z - distZ));\n};\n\nNodeHexagonal.prototype.getPosition = function getPosition() {\n    throw new Error('Unimplemented : cannot get position of the points for hexagonal grid');\n};\n\nmodule.exports = NodeHexagonal;","'use strict';\n\nvar NodeSquare = require('./node-square'),\n    NodeHexagonal = require('./node-hexagonal');\n\nvar defaultOptions = {\n    fields: 3,\n    randomizer: Math.random,\n    distance: squareEuclidean,\n    iterations: 10,\n    learningRate: 0.1,\n    gridType: 'rect',\n    torus: true,\n    method: 'random'\n};\n\nfunction SOM(x, y, options, reload) {\n\n    this.x = x;\n    this.y = y;\n\n    options = options || {};\n    this.options = {};\n    for (var i in defaultOptions) {\n        if (options.hasOwnProperty(i)) {\n            this.options[i] = options[i];\n        } else {\n            this.options[i] = defaultOptions[i];\n        }\n    }\n\n    if (typeof this.options.fields === 'number') {\n        this.numWeights = this.options.fields;\n    } else if (Array.isArray(this.options.fields)) {\n        this.numWeights = this.options.fields.length;\n        var converters = getConverters(this.options.fields);\n        this.extractor = converters.extractor;\n        this.creator = converters.creator;\n    } else {\n        throw new Error('Invalid fields definition');\n    }\n\n    if (this.options.gridType === 'rect') {\n        this.nodeType = NodeSquare;\n        this.gridDim = {\n            x: x,\n            y: y\n        };\n    } else {\n        this.nodeType = NodeHexagonal;\n        var hx = this.x - Math.floor(this.y / 2);\n        this.gridDim = {\n            x: hx,\n            y: this.y,\n            z: -(0 - hx - this.y)\n        };\n    }\n\n    this.torus = this.options.torus;\n    this.distanceMethod = this.torus ? 'getDistanceTorus' : 'getDistance';\n\n    this.distance = this.options.distance;\n\n    this.maxDistance = getMaxDistance(this.distance, this.numWeights);\n\n    if (reload === true) { // For model loading\n        this.done = true;\n        return;\n    }\n    if (!(x > 0 && y > 0)) {\n        throw new Error('x and y must be positive');\n    }\n\n    this.times = {\n        findBMU: 0,\n        adjust: 0\n    };\n\n    this.randomizer = this.options.randomizer;\n\n    this.iterationCount = 0;\n    this.iterations = this.options.iterations;\n\n    this.startLearningRate = this.learningRate = this.options.learningRate;\n\n    this.mapRadius = Math.floor(Math.max(x, y) / 2);\n\n    this.algorithmMethod = this.options.method;\n\n    this._initNodes();\n\n    this.done = false;\n}\n\nSOM.load = function loadModel(model, distance) {\n    if (model.name === 'SOM') {\n        var x = model.data.length,\n            y = model.data[0].length;\n        if (distance) {\n            model.options.distance = distance;\n        } else if (model.options.distance) {\n            model.options.distance = eval('(' + model.options.distance + ')');\n        }\n        var som = new SOM(x, y, model.options, true);\n        som.nodes = new Array(x);\n        for (var i = 0; i < x; i++) {\n            som.nodes[i] = new Array(y);\n            for (var j = 0; j < y; j++) {\n                som.nodes[i][j] = new som.nodeType(i, j, model.data[i][j], som);\n            }\n        }\n        return som;\n    } else {\n        throw new Error('expecting a SOM model');\n    }\n};\n\nSOM.prototype.export = function exportModel(includeDistance) {\n    if (!this.done) {\n        throw new Error('model is not ready yet');\n    }\n    var model = {\n        name: 'SOM'\n    };\n    model.options = {\n        fields: this.options.fields,\n        gridType: this.options.gridType,\n        torus: this.options.torus\n    };\n    model.data = new Array(this.x);\n    for (var i = 0; i < this.x; i++) {\n        model.data[i] = new Array(this.y);\n        for (var j = 0; j < this.y; j++) {\n            model.data[i][j] = this.nodes[i][j].weights;\n        }\n    }\n    if (includeDistance) {\n        model.options.distance = this.distance.toString();\n    }\n    return model;\n};\n\nSOM.prototype._initNodes = function initNodes() {\n    var now = Date.now(),\n        i, j, k;\n    this.nodes = new Array(this.x);\n    for (i = 0; i < this.x; i++) {\n        this.nodes[i] = new Array(this.y);\n        for (j = 0; j < this.y; j++) {\n            var weights = new Array(this.numWeights);\n            for (k = 0; k < this.numWeights; k++) {\n                weights[k] = this.randomizer();\n            }\n            this.nodes[i][j] = new this.nodeType(i, j, weights, this);\n        }\n    }\n    this.times.initNodes = Date.now() - now;\n};\n\nSOM.prototype.setTraining = function setTraining(trainingSet) {\n    if (this.trainingSet) {\n        throw new Error('training set has already been set');\n    }\n    var now = Date.now();\n    var convertedSet = trainingSet;\n    var i, l = trainingSet.length;\n    if (this.extractor) {\n        convertedSet = new Array(l);\n        for (i = 0; i < l; i++) {\n            convertedSet[i] = this.extractor(trainingSet[i]);\n        }\n    }\n    this.numIterations = this.iterations * l;\n\n    if (this.algorithmMethod === 'random') {\n        this.timeConstant = this.numIterations / Math.log(this.mapRadius);\n    } else {\n        this.timeConstant = l / Math.log(this.mapRadius);\n    }\n    this.trainingSet = convertedSet;\n    this.times.setTraining = Date.now() - now;\n};\n\nSOM.prototype.trainOne = function trainOne() {\n    if (this.done) {\n\n        return false;\n\n    } else if (this.numIterations-- > 0) {\n\n        var neighbourhoodRadius,\n            trainingValue,\n            trainingSetFactor;\n\n        if (this.algorithmMethod === 'random') { // Pick a random value of the training set at each step\n            neighbourhoodRadius = this.mapRadius * Math.exp(-this.iterationCount / this.timeConstant);\n            trainingValue = getRandomValue(this.trainingSet, this.randomizer);\n            this._adjust(trainingValue, neighbourhoodRadius);\n            this.learningRate = this.startLearningRate * Math.exp(-this.iterationCount / this.numIterations);\n        } else { // Get next input vector\n            trainingSetFactor = -Math.floor(this.iterationCount / this.trainingSet.length);\n            neighbourhoodRadius = this.mapRadius * Math.exp(trainingSetFactor / this.timeConstant);\n            trainingValue = this.trainingSet[this.iterationCount % this.trainingSet.length];\n            this._adjust(trainingValue, neighbourhoodRadius);\n            if (((this.iterationCount + 1) % this.trainingSet.length) === 0) {\n                this.learningRate = this.startLearningRate * Math.exp(trainingSetFactor / Math.floor(this.numIterations / this.trainingSet.length));\n            }\n        }\n\n        this.iterationCount++;\n\n        return true;\n\n    } else {\n\n        this.done = true;\n        return false;\n\n    }\n};\n\nSOM.prototype._adjust = function adjust(trainingValue, neighbourhoodRadius) {\n    var now = Date.now(),\n        x, y, dist, influence;\n\n    var bmu = this._findBestMatchingUnit(trainingValue);\n\n    var now2 = Date.now();\n    this.times.findBMU += now2 - now;\n\n    var radiusLimit = Math.floor(neighbourhoodRadius);\n    var xMin = bmu.x - radiusLimit,\n        xMax = bmu.x + radiusLimit,\n        yMin = bmu.y - radiusLimit,\n        yMax = bmu.y + radiusLimit;\n\n    for (x = xMin; x <= xMax; x++) {\n        var theX = x;\n        if (x < 0) {\n            theX += this.x;\n        } else if (x >= this.x) {\n            theX -= this.x;\n        }\n        for (y = yMin; y <= yMax; y++) {\n            var theY = y;\n            if (y < 0) {\n                theY += this.y;\n            } else if (y >= this.y) {\n                theY -= this.y;\n            }\n\n            dist = bmu[this.distanceMethod](this.nodes[theX][theY]);\n\n            if (dist < neighbourhoodRadius) {\n                influence = Math.exp(-dist / (2 * neighbourhoodRadius));\n                this.nodes[theX][theY].adjustWeights(trainingValue, this.learningRate, influence);\n            }\n\n        }\n    }\n\n    this.times.adjust += (Date.now() - now2);\n\n};\n\nSOM.prototype.train = function train(trainingSet) {\n    if (!this.done) {\n        this.setTraining(trainingSet);\n        while (this.trainOne()) {\n        }\n    }\n};\n\nSOM.prototype.getConvertedNodes = function getConvertedNodes() {\n    var result = new Array(this.x);\n    for (var i = 0; i < this.x; i++) {\n        result[i] = new Array(this.y);\n        for (var j = 0; j < this.y; j++) {\n            var node = this.nodes[i][j];\n            result[i][j] = this.creator ? this.creator(node.weights) : node.weights;\n        }\n    }\n    return result;\n};\n\nSOM.prototype._findBestMatchingUnit = function findBestMatchingUnit(candidate) {\n\n    var bmu,\n        lowest = Infinity,\n        dist;\n\n    for (var i = 0; i < this.x; i++) {\n        for (var j = 0; j < this.y; j++) {\n            dist = this.distance(this.nodes[i][j].weights, candidate);\n            if (dist < lowest) {\n                lowest = dist;\n                bmu = this.nodes[i][j];\n            }\n        }\n    }\n\n    return bmu;\n\n};\n\nSOM.prototype.predict = function predict(data, computePosition) {\n    if (typeof data === 'boolean') {\n        computePosition = data;\n        data = null;\n    }\n    if (!data) {\n        data = this.trainingSet;\n    }\n    if (Array.isArray(data) && (Array.isArray(data[0]) || (typeof data[0] === 'object'))) { // predict a dataset\n        var self = this;\n        return data.map(function (element) {\n            return self._predict(element, computePosition);\n        });\n    } else { // predict a single element\n        return this._predict(data, computePosition);\n    }\n};\n\nSOM.prototype._predict = function _predict(element, computePosition) {\n    if (!Array.isArray(element)) {\n        element = this.extractor(element);\n    }\n    var bmu = this._findBestMatchingUnit(element);\n    var result = [bmu.x, bmu.y];\n    if (computePosition) {\n        result[2] = bmu.getPosition(element);\n    }\n    return result;\n};\n\n// As seen in http://www.scholarpedia.org/article/Kohonen_network\nSOM.prototype.getQuantizationError = function getQuantizationError() {\n    var fit = this.getFit(),\n        l = fit.length,\n        sum = 0;\n    for (var i = 0; i < l; i++) {\n        sum += fit[i];\n    }\n    return sum / l;\n};\n\nSOM.prototype.getFit = function getFit(dataset) {\n    if (!dataset) {\n        dataset = this.trainingSet;\n    }\n    var l = dataset.length,\n        bmu,\n        result = new Array(l);\n    for (var i = 0; i < l; i++) {\n        bmu = this._findBestMatchingUnit(dataset[i]);\n        result[i] = Math.sqrt(this.distance(dataset[i], bmu.weights));\n    }\n    return result;\n};\n\nfunction getConverters(fields) {\n    var l = fields.length,\n        normalizers = new Array(l),\n        denormalizers = new Array(l);\n    for (var i = 0; i < l; i++) {\n        normalizers[i] = getNormalizer(fields[i].range);\n        denormalizers[i] = getDenormalizer(fields[i].range);\n    }\n    return {\n        extractor: function extractor(value) {\n            var result = new Array(l);\n            for (var i = 0; i < l; i++) {\n                result[i] = normalizers[i](value[fields[i].name]);\n            }\n            return result;\n        },\n        creator: function creator(value) {\n            var result = {};\n            for (var i = 0; i < l; i++) {\n                result[fields[i].name] = denormalizers[i](value[i]);\n            }\n            return result;\n        }\n    };\n}\n\nfunction getNormalizer(minMax) {\n    return function normalizer(value) {\n        return (value - minMax[0]) / (minMax[1] - minMax[0]);\n    };\n}\n\nfunction getDenormalizer(minMax) {\n    return function denormalizer(value) {\n        return (minMax[0] + value * (minMax[1] - minMax[0]));\n    };\n}\n\nfunction squareEuclidean(a, b) {\n    var d = 0;\n    for (var i = 0, ii = a.length; i < ii; i++) {\n        d += (a[i] - b[i]) * (a[i] - b[i]);\n    }\n    return d;\n}\n\nfunction getRandomValue(arr, randomizer) {\n    return arr[Math.floor(randomizer() * arr.length)];\n}\n\nfunction getMaxDistance(distance, numWeights) {\n    var zero = new Array(numWeights),\n        one = new Array(numWeights);\n    for (var i = 0; i < numWeights; i++) {\n        zero[i] = 0;\n        one[i] = 1;\n    }\n    return distance(zero, one);\n}\n\nmodule.exports = SOM;","export default function maybeToPrecision(value, digits) {\n  if (value < 0) {\n    value = 0 - value;\n    if (typeof digits === 'number') {\n      return `- ${value.toPrecision(digits)}`;\n    } else {\n      return `- ${value.toString()}`;\n    }\n  } else {\n    if (typeof digits === 'number') {\n      return value.toPrecision(digits);\n    } else {\n      return value.toString();\n    }\n  }\n}\n","export default function checkArraySize(x, y) {\n  if (!Array.isArray(x) || !Array.isArray(y)) {\n    throw new TypeError('x and y must be arrays');\n  }\n  if (x.length !== y.length) {\n    throw new RangeError('x and y arrays must have the same length');\n  }\n}\n","export { default as maybeToPrecision } from './maybeToPrecision';\nexport { default as checkArrayLength } from './checkArrayLength';\n\nexport default class BaseRegression {\n  constructor() {\n    if (new.target === BaseRegression) {\n      throw new Error('BaseRegression must be subclassed');\n    }\n  }\n\n  predict(x) {\n    if (typeof x === 'number') {\n      return this._predict(x);\n    } else if (Array.isArray(x)) {\n      const y = [];\n      for (let i = 0; i < x.length; i++) {\n        y.push(this._predict(x[i]));\n      }\n      return y;\n    } else {\n      throw new TypeError('x must be a number or array');\n    }\n  }\n\n  _predict() {\n    throw new Error('_predict must be implemented');\n  }\n\n  train() {\n    // Do nothing for this package\n  }\n\n  toString() {\n    return '';\n  }\n\n  toLaTeX() {\n    return '';\n  }\n\n  /**\n   * Return the correlation coefficient of determination (r) and chi-square.\n   * @param {Array<number>} x\n   * @param {Array<number>} y\n   * @return {object}\n   */\n  score(x, y) {\n    if (!Array.isArray(x) || !Array.isArray(y) || x.length !== y.length) {\n      throw new Error('x and y must be arrays of the same length');\n    }\n\n    const n = x.length;\n    const y2 = new Array(n);\n    for (let i = 0; i < n; i++) {\n      y2[i] = this._predict(x[i]);\n    }\n\n    let xSum = 0;\n    let ySum = 0;\n    let chi2 = 0;\n    let rmsd = 0;\n    let xSquared = 0;\n    let ySquared = 0;\n    let xY = 0;\n    for (let i = 0; i < n; i++) {\n      xSum += y2[i];\n      ySum += y[i];\n      xSquared += y2[i] * y2[i];\n      ySquared += y[i] * y[i];\n      xY += y2[i] * y[i];\n      if (y[i] !== 0) {\n        chi2 += ((y[i] - y2[i]) * (y[i] - y2[i])) / y[i];\n      }\n      rmsd += (y[i] - y2[i]) * (y[i] - y2[i]);\n    }\n\n    const r =\n      (n * xY - xSum * ySum) /\n      Math.sqrt((n * xSquared - xSum * xSum) * (n * ySquared - ySum * ySum));\n\n    return {\n      r: r,\n      r2: r * r,\n      chi2: chi2,\n      rmsd: Math.sqrt(rmsd / n)\n    };\n  }\n}\n","import BaseRegression, {\n  checkArrayLength,\n  maybeToPrecision\n} from 'ml-regression-base';\nimport { Matrix, MatrixTransposeView, solve } from 'ml-matrix';\n\nexport default class PolynomialRegression extends BaseRegression {\n  constructor(x, y, degree) {\n    super();\n    if (x === true) {\n      this.degree = y.degree;\n      this.powers = y.powers;\n      this.coefficients = y.coefficients;\n    } else {\n      checkArrayLength(x, y);\n      regress(this, x, y, degree);\n    }\n  }\n\n  _predict(x) {\n    let y = 0;\n    for (let k = 0; k < this.powers.length; k++) {\n      y += this.coefficients[k] * Math.pow(x, this.powers[k]);\n    }\n    return y;\n  }\n\n  toJSON() {\n    return {\n      name: 'polynomialRegression',\n      degree: this.degree,\n      powers: this.powers,\n      coefficients: this.coefficients\n    };\n  }\n\n  toString(precision) {\n    return this._toFormula(precision, false);\n  }\n\n  toLaTeX(precision) {\n    return this._toFormula(precision, true);\n  }\n\n  _toFormula(precision, isLaTeX) {\n    let sup = '^';\n    let closeSup = '';\n    let times = ' * ';\n    if (isLaTeX) {\n      sup = '^{';\n      closeSup = '}';\n      times = '';\n    }\n\n    let fn = '';\n    let str = '';\n    for (let k = 0; k < this.coefficients.length; k++) {\n      str = '';\n      if (this.coefficients[k] !== 0) {\n        if (this.powers[k] === 0) {\n          str = maybeToPrecision(this.coefficients[k], precision);\n        } else {\n          if (this.powers[k] === 1) {\n            str =\n              `${maybeToPrecision(this.coefficients[k], precision) + times}x`;\n          } else {\n            str =\n              `${maybeToPrecision(this.coefficients[k], precision) +\n              times\n              }x${\n                sup\n              }${this.powers[k]\n              }${closeSup}`;\n          }\n        }\n\n        if (this.coefficients[k] > 0 && k !== this.coefficients.length - 1) {\n          str = ` + ${str}`;\n        } else if (k !== this.coefficients.length - 1) {\n          str = ` ${str}`;\n        }\n      }\n      fn = str + fn;\n    }\n    if (fn.charAt(0) === '+') {\n      fn = fn.slice(1);\n    }\n\n    return `f(x) = ${fn}`;\n  }\n\n  static load(json) {\n    if (json.name !== 'polynomialRegression') {\n      throw new TypeError('not a polynomial regression model');\n    }\n    return new PolynomialRegression(true, json);\n  }\n}\n\nfunction regress(pr, x, y, degree) {\n  const n = x.length;\n  let powers;\n  if (Array.isArray(degree)) {\n    powers = degree;\n    degree = powers.length;\n  } else {\n    degree++;\n    powers = new Array(degree);\n    for (let k = 0; k < degree; k++) {\n      powers[k] = k;\n    }\n  }\n  const F = new Matrix(n, degree);\n  const Y = new Matrix([y]);\n  for (let k = 0; k < degree; k++) {\n    for (let i = 0; i < n; i++) {\n      if (powers[k] === 0) {\n        F.set(i, k, 1);\n      } else {\n        F.set(i, k, Math.pow(x[i], powers[k]));\n      }\n    }\n  }\n\n  const FT = new MatrixTransposeView(F);\n  const A = FT.mmul(F);\n  const B = FT.mmul(new MatrixTransposeView(Y));\n\n  pr.degree = degree - 1;\n  pr.powers = powers;\n  pr.coefficients = solve(A, B).to1DArray();\n}\n","import BaseRegression, {\n  checkArrayLength,\n  maybeToPrecision\n} from 'ml-regression-base';\n\nexport default class SimpleLinearRegression extends BaseRegression {\n  constructor(x, y) {\n    super();\n    if (x === true) {\n      this.slope = y.slope;\n      this.intercept = y.intercept;\n      this.coefficients = [y.intercept, y.slope];\n    } else {\n      checkArrayLength(x, y);\n      regress(this, x, y);\n    }\n  }\n\n  toJSON() {\n    return {\n      name: 'simpleLinearRegression',\n      slope: this.slope,\n      intercept: this.intercept\n    };\n  }\n\n  _predict(x) {\n    return this.slope * x + this.intercept;\n  }\n\n  computeX(y) {\n    return (y - this.intercept) / this.slope;\n  }\n\n  toString(precision) {\n    let result = 'f(x) = ';\n    if (this.slope !== 0) {\n      const xFactor = maybeToPrecision(this.slope, precision);\n      result += `${xFactor === '1' ? '' : `${xFactor} * `}x`;\n      if (this.intercept !== 0) {\n        const absIntercept = Math.abs(this.intercept);\n        const operator = absIntercept === this.intercept ? '+' : '-';\n        result += ` ${operator} ${maybeToPrecision(absIntercept, precision)}`;\n      }\n    } else {\n      result += maybeToPrecision(this.intercept, precision);\n    }\n    return result;\n  }\n\n  toLaTeX(precision) {\n    return this.toString(precision);\n  }\n\n  static load(json) {\n    if (json.name !== 'simpleLinearRegression') {\n      throw new TypeError('not a SLR model');\n    }\n    return new SimpleLinearRegression(true, json);\n  }\n}\n\nfunction regress(slr, x, y) {\n  const n = x.length;\n  let xSum = 0;\n  let ySum = 0;\n\n  let xSquared = 0;\n  let xY = 0;\n\n  for (let i = 0; i < n; i++) {\n    xSum += x[i];\n    ySum += y[i];\n    xSquared += x[i] * x[i];\n    xY += x[i] * y[i];\n  }\n\n  const numerator = n * xY - xSum * ySum;\n  slr.slope = numerator / (n * xSquared - xSum * xSum);\n  slr.intercept = (1 / n) * ySum - slr.slope * (1 / n) * xSum;\n  slr.coefficients = [slr.intercept, slr.slope];\n}\n","import BaseRegression, {\n  checkArrayLength,\n  maybeToPrecision\n} from 'ml-regression-base';\nimport SimpleLinearRegression from 'ml-regression-simple-linear';\n\nexport default class ExponentialRegression extends BaseRegression {\n  constructor(x, y) {\n    super();\n    if (x === true) {\n      this.A = y.A;\n      this.B = y.B;\n    } else {\n      checkArrayLength(x, y);\n      regress(this, x, y);\n    }\n  }\n\n  _predict(input) {\n    return this.B * Math.exp(input * this.A);\n  }\n\n  toJSON() {\n    return {\n      name: 'exponentialRegression',\n      A: this.A,\n      B: this.B\n    };\n  }\n\n  toString(precision) {\n    return (\n      `f(x) = ${\n        maybeToPrecision(this.B, precision)\n      } * e^(${\n        maybeToPrecision(this.A, precision)\n      } * x)`\n    );\n  }\n\n  toLaTeX(precision) {\n    if (this.A >= 0) {\n      return (\n        `f(x) = ${\n          maybeToPrecision(this.B, precision)\n        }e^{${\n          maybeToPrecision(this.A, precision)\n        }x}`\n      );\n    } else {\n      return (\n        `f(x) = \\\\frac{${\n          maybeToPrecision(this.B, precision)\n        }}{e^{${\n          maybeToPrecision(-this.A, precision)\n        }x}}`\n      );\n    }\n  }\n\n  static load(json) {\n    if (json.name !== 'exponentialRegression') {\n      throw new TypeError('not a exponential regression model');\n    }\n    return new ExponentialRegression(true, json);\n  }\n}\n\nfunction regress(er, x, y) {\n  const n = x.length;\n  const yl = new Array(n);\n  for (let i = 0; i < n; i++) {\n    yl[i] = Math.log(y[i]);\n  }\n\n  const linear = new SimpleLinearRegression(x, yl);\n  er.A = linear.slope;\n  er.B = Math.exp(linear.intercept);\n}\n","import BaseRegression, {\n  checkArrayLength,\n  maybeToPrecision\n} from 'ml-regression-base';\nimport SimpleLinearRegression from 'ml-regression-simple-linear';\n\nexport default class PowerRegression extends BaseRegression {\n  constructor(x, y) {\n    super();\n    if (x === true) {\n      // reloading model\n      this.A = y.A;\n      this.B = y.B;\n    } else {\n      checkArrayLength(x, y);\n      regress(this, x, y);\n    }\n  }\n\n  _predict(newInputs) {\n    return this.A * Math.pow(newInputs, this.B);\n  }\n\n  toJSON() {\n    return {\n      name: 'powerRegression',\n      A: this.A,\n      B: this.B\n    };\n  }\n\n  toString(precision) {\n    return `f(x) = ${maybeToPrecision(\n      this.A,\n      precision\n    )} * x^${maybeToPrecision(this.B, precision)}`;\n  }\n\n  toLaTeX(precision) {\n    let latex = '';\n    if (this.B >= 0) {\n      latex = `f(x) = ${maybeToPrecision(\n        this.A,\n        precision\n      )}x^{${maybeToPrecision(this.B, precision)}}`;\n    } else {\n      latex = `f(x) = \\\\frac{${maybeToPrecision(\n        this.A,\n        precision\n      )}}{x^{${maybeToPrecision(-this.B, precision)}}}`;\n    }\n    latex = latex.replace(/e([+-]?[0-9]+)/g, 'e^{$1}');\n    return latex;\n  }\n\n  static load(json) {\n    if (json.name !== 'powerRegression') {\n      throw new TypeError('not a power regression model');\n    }\n    return new PowerRegression(true, json);\n  }\n}\n\nfunction regress(pr, x, y) {\n  const n = x.length;\n  const xl = new Array(n);\n  const yl = new Array(n);\n  for (let i = 0; i < n; i++) {\n    xl[i] = Math.log(x[i]);\n    yl[i] = Math.log(y[i]);\n  }\n\n  const linear = new SimpleLinearRegression(xl, yl);\n  pr.A = Math.exp(linear.intercept);\n  pr.B = linear.slope;\n}\n","import Matrix, { SVD, pseudoInverse } from 'ml-matrix';\n\nexport default class MultivariateLinearRegression {\n  constructor(x, y, options = {}) {\n    const { intercept = true, statistics = true } = options;\n    this.statistics = statistics;\n    if (x === true) {\n      this.weights = y.weights;\n      this.inputs = y.inputs;\n      this.outputs = y.outputs;\n      this.intercept = y.intercept;\n    } else {\n      x = new Matrix(x);\n      y = new Matrix(y);\n      if (intercept) {\n        x.addColumn(new Array(x.rows).fill(1));\n      }\n      let xt = x.transpose();\n      const xx = xt\n        .mmul(x);\n      const xy = xt\n        .mmul(y);\n      const invxx = new SVD(xx)\n        .inverse();\n      const beta = xy\n        .transpose()\n        .mmul(invxx)\n        .transpose();\n      this.weights = beta.to2DArray();\n      this.inputs = x.columns;\n      this.outputs = y.columns;\n      if (intercept) this.inputs--;\n      this.intercept = intercept;\n      if (statistics) {\n        /*\n         * Let's add some basic statistics about the beta's to be able to interpret them.\n         * source: http://dept.stat.lsa.umich.edu/~kshedden/Courses/Stat401/Notes/401-multreg.pdf\n         * validated against Excel Regression AddIn\n         * test: \"datamining statistics test\"\n         */\n        const fittedValues = x.mmul(beta);\n        const residuals = y.clone().addM(fittedValues.neg());\n        const variance =\n          residuals\n            .to2DArray()\n            .map((ri) => Math.pow(ri[0], 2))\n            .reduce((a, b) => a + b) /\n          (y.rows - x.columns);\n        this.stdError = Math.sqrt(variance);\n        this.stdErrorMatrix = pseudoInverse(xx).mul(variance);\n        this.stdErrors = this.stdErrorMatrix\n          .diagonal()\n          .map((d) => Math.sqrt(d));\n        this.tStats = this.weights.map((d, i) =>\n          (this.stdErrors[i] === 0 ? 0 : d[0] / this.stdErrors[i])\n        );\n      }\n    }\n  }\n\n  predict(x) {\n    if (Array.isArray(x)) {\n      if (typeof x[0] === 'number') {\n        return this._predict(x);\n      } else if (Array.isArray(x[0])) {\n        const y = new Array(x.length);\n        for (let i = 0; i < x.length; i++) {\n          y[i] = this._predict(x[i]);\n        }\n        return y;\n      }\n    } else if (Matrix.isMatrix(x)) {\n      const y = new Matrix(x.rows, this.outputs);\n      for (let i = 0; i < x.rows; i++) {\n        y.setRow(i, this._predict(x.getRow(i)));\n      }\n      return y;\n    }\n    throw new TypeError('x must be a matrix or array of numbers');\n  }\n\n  _predict(x) {\n    const result = new Array(this.outputs);\n    if (this.intercept) {\n      for (let i = 0; i < this.outputs; i++) {\n        result[i] = this.weights[this.inputs][i];\n      }\n    } else {\n      result.fill(0);\n    }\n    for (let i = 0; i < this.inputs; i++) {\n      for (let j = 0; j < this.outputs; j++) {\n        result[j] += this.weights[i][j] * x[i];\n      }\n    }\n    return result;\n  }\n\n  score() {\n    throw new Error('score method is not implemented yet');\n  }\n\n  toJSON() {\n    return {\n      name: 'multivariateLinearRegression',\n      weights: this.weights,\n      inputs: this.inputs,\n      outputs: this.outputs,\n      intercept: this.intercept,\n      summary: this.statistics\n        ? {\n          regressionStatistics: {\n            standardError: this.stdError,\n            observations: this.outputs\n          },\n          variables: this.weights.map((d, i) => {\n            return {\n              label:\n                  i === this.weights.length - 1\n                    ? 'Intercept'\n                    : `X Variable ${i + 1}`,\n              coefficients: d,\n              standardError: this.stdErrors[i],\n              tStat: this.tStats[i]\n            };\n          })\n        }\n        : undefined\n    };\n  }\n\n  static load(model) {\n    if (model.name !== 'multivariateLinearRegression') {\n      throw new Error('not a MLR model');\n    }\n    return new MultivariateLinearRegression(true, model);\n  }\n}\n","'use strict';\n\nconst { squaredEuclidean } = require('ml-distance-euclidean');\n\nconst defaultOptions = {\n  sigma: 1\n};\n\nclass GaussianKernel {\n  constructor(options) {\n    options = Object.assign({}, defaultOptions, options);\n    this.sigma = options.sigma;\n    this.divisor = 2 * options.sigma * options.sigma;\n  }\n  compute(x, y) {\n    const distance = squaredEuclidean(x, y);\n    return Math.exp(-distance / this.divisor);\n  }\n}\n\nmodule.exports = GaussianKernel;\n","'use strict';\n\nconst defaultOptions = {\n  degree: 1,\n  constant: 1,\n  scale: 1\n};\n\nclass PolynomialKernel {\n  constructor(options) {\n    options = Object.assign({}, defaultOptions, options);\n\n    this.degree = options.degree;\n    this.constant = options.constant;\n    this.scale = options.scale;\n  }\n\n  compute(x, y) {\n    var sum = 0;\n    for (var i = 0; i < x.length; i++) {\n      sum += x[i] * y[i];\n    }\n    return Math.pow(this.scale * sum + this.constant, this.degree);\n  }\n}\n\nmodule.exports = PolynomialKernel;\n","'use strict';\n\nconst defaultOptions = {\n  alpha: 0.01,\n  constant: -Math.E\n};\n\nclass SigmoidKernel {\n  constructor(options) {\n    options = Object.assign({}, defaultOptions, options);\n    this.alpha = options.alpha;\n    this.constant = options.constant;\n  }\n\n  compute(x, y) {\n    var sum = 0;\n    for (var i = 0; i < x.length; i++) {\n      sum += x[i] * y[i];\n    }\n    return Math.tanh(this.alpha * sum + this.constant);\n  }\n}\n\nmodule.exports = SigmoidKernel;\n","'use strict';\n\nconst defaultOptions = {\n  sigma: 1,\n  degree: 1\n};\n\nclass ANOVAKernel {\n  constructor(options) {\n    options = Object.assign({}, defaultOptions, options);\n    this.sigma = options.sigma;\n    this.degree = options.degree;\n  }\n\n  compute(x, y) {\n    var sum = 0;\n    var len = Math.min(x.length, y.length);\n    for (var i = 1; i <= len; ++i) {\n      sum += Math.pow(\n        Math.exp(\n          -this.sigma *\n            Math.pow(Math.pow(x[i - 1], i) - Math.pow(y[i - 1], i), 2)\n        ),\n        this.degree\n      );\n    }\n    return sum;\n  }\n}\n\nmodule.exports = ANOVAKernel;\n","'use strict';\n\nconst { squaredEuclidean } = require('ml-distance-euclidean');\n\nconst defaultOptions = {\n  sigma: 1\n};\n\nclass CauchyKernel {\n  constructor(options) {\n    options = Object.assign({}, defaultOptions, options);\n    this.sigma = options.sigma;\n  }\n\n  compute(x, y) {\n    return 1 / (1 + squaredEuclidean(x, y) / (this.sigma * this.sigma));\n  }\n}\n\nmodule.exports = CauchyKernel;\n","'use strict';\n\nconst { euclidean } = require('ml-distance-euclidean');\n\nconst defaultOptions = {\n  sigma: 1\n};\n\nclass ExponentialKernel {\n  constructor(options) {\n    options = Object.assign({}, defaultOptions, options);\n    this.sigma = options.sigma;\n    this.divisor = 2 * options.sigma * options.sigma;\n  }\n\n  compute(x, y) {\n    const distance = euclidean(x, y);\n    return Math.exp(-distance / this.divisor);\n  }\n}\n\nmodule.exports = ExponentialKernel;\n","'use strict';\n\nclass HistogramIntersectionKernel {\n  compute(x, y) {\n    var min = Math.min(x.length, y.length);\n    var sum = 0;\n    for (var i = 0; i < min; ++i) {\n      sum += Math.min(x[i], y[i]);\n    }\n\n    return sum;\n  }\n}\n\nmodule.exports = HistogramIntersectionKernel;\n","'use strict';\n\nconst { euclidean } = require('ml-distance-euclidean');\n\nconst defaultOptions = {\n  sigma: 1\n};\n\nclass LaplacianKernel {\n  constructor(options) {\n    options = Object.assign({}, defaultOptions, options);\n    this.sigma = options.sigma;\n  }\n\n  compute(x, y) {\n    const distance = euclidean(x, y);\n    return Math.exp(-distance / this.sigma);\n  }\n}\n\nmodule.exports = LaplacianKernel;\n","'use strict';\n\nconst { squaredEuclidean } = require('ml-distance-euclidean');\n\nconst defaultOptions = {\n  constant: 1\n};\n\nclass MultiquadraticKernel {\n  constructor(options) {\n    options = Object.assign({}, defaultOptions, options);\n    this.constant = options.constant;\n  }\n\n  compute(x, y) {\n    return Math.sqrt(squaredEuclidean(x, y) + this.constant * this.constant);\n  }\n}\n\nmodule.exports = MultiquadraticKernel;\n","'use strict';\n\nconst { squaredEuclidean } = require('ml-distance-euclidean');\n\nconst defaultOptions = {\n  constant: 1\n};\n\nclass RationalQuadraticKernel {\n  constructor(options) {\n    options = Object.assign({}, defaultOptions, options);\n    this.constant = options.constant;\n  }\n\n  compute(x, y) {\n    const distance = squaredEuclidean(x, y);\n    return 1 - distance / (distance + this.constant);\n  }\n}\n\nmodule.exports = RationalQuadraticKernel;\n","'use strict';\n\nconst { Matrix, MatrixTransposeView } = require('ml-matrix');\nconst GaussianKernel = require('ml-kernel-gaussian');\nconst PolynomialKernel = require('ml-kernel-polynomial');\nconst SigmoidKernel = require('ml-kernel-sigmoid');\n\nconst ANOVAKernel = require('./kernels/anova-kernel');\nconst CauchyKernel = require('./kernels/cauchy-kernel');\nconst ExponentialKernel = require('./kernels/exponential-kernel');\nconst HistogramKernel = require('./kernels/histogram-intersection-kernel');\nconst LaplacianKernel = require('./kernels/laplacian-kernel');\nconst MultiquadraticKernel = require('./kernels/multiquadratic-kernel');\nconst RationalKernel = require('./kernels/rational-quadratic-kernel');\n\nconst kernelType = {\n  gaussian: GaussianKernel,\n  rbf: GaussianKernel,\n  polynomial: PolynomialKernel,\n  poly: PolynomialKernel,\n  anova: ANOVAKernel,\n  cauchy: CauchyKernel,\n  exponential: ExponentialKernel,\n  histogram: HistogramKernel,\n  min: HistogramKernel,\n  laplacian: LaplacianKernel,\n  multiquadratic: MultiquadraticKernel,\n  rational: RationalKernel,\n  sigmoid: SigmoidKernel,\n  mlp: SigmoidKernel\n};\n\nclass Kernel {\n  constructor(type, options) {\n    this.kernelType = type;\n    if (type === 'linear') return;\n\n    if (typeof type === 'string') {\n      type = type.toLowerCase();\n\n      var KernelConstructor = kernelType[type];\n      if (KernelConstructor) {\n        this.kernelFunction = new KernelConstructor(options);\n      } else {\n        throw new Error(`unsupported kernel type: ${type}`);\n      }\n    } else if (typeof type === 'object' && typeof type.compute === 'function') {\n      this.kernelFunction = type;\n    } else {\n      throw new TypeError(\n        'first argument must be a valid kernel type or instance'\n      );\n    }\n  }\n\n  compute(inputs, landmarks) {\n    inputs = Matrix.checkMatrix(inputs);\n    if (landmarks === undefined) {\n      landmarks = inputs;\n    } else {\n      landmarks = Matrix.checkMatrix(landmarks);\n    }\n    if (this.kernelType === 'linear') {\n      return inputs.mmul(new MatrixTransposeView(landmarks));\n    }\n\n    const kernelMatrix = new Matrix(inputs.rows, landmarks.rows);\n    if (inputs === landmarks) {\n      // fast path, matrix is symmetric\n      for (let i = 0; i < inputs.rows; i++) {\n        for (let j = i; j < inputs.rows; j++) {\n          const value = this.kernelFunction.compute(\n            inputs.getRow(i),\n            inputs.getRow(j)\n          );\n          kernelMatrix.set(i, j, value);\n          kernelMatrix.set(j, i, value);\n        }\n      }\n    } else {\n      for (let i = 0; i < inputs.rows; i++) {\n        for (let j = 0; j < landmarks.rows; j++) {\n          kernelMatrix.set(\n            i,\n            j,\n            this.kernelFunction.compute(inputs.getRow(i), landmarks.getRow(j))\n          );\n        }\n      }\n    }\n    return kernelMatrix;\n  }\n}\n\nmodule.exports = Kernel;\n","import BaseRegression, {\n  checkArrayLength,\n  maybeToPrecision\n} from 'ml-regression-base';\nimport median from 'ml-array-median';\n\nexport default class TheilSenRegression extends BaseRegression {\n  /**\n   * Theil–Sen estimator\n   * https://en.wikipedia.org/wiki/Theil%E2%80%93Sen_estimator\n   * @param {Array<number>|boolean} x\n   * @param {Array<number>|object} y\n   * @constructor\n   */\n  constructor(x, y) {\n    super();\n    if (x === true) {\n      // loads the model\n      this.slope = y.slope;\n      this.intercept = y.intercept;\n      this.coefficients = y.coefficients;\n    } else {\n      // creates the model\n      checkArrayLength(x, y);\n      theilSen(this, x, y);\n    }\n  }\n\n  toJSON() {\n    return {\n      name: 'TheilSenRegression',\n      slope: this.slope,\n      intercept: this.intercept\n    };\n  }\n\n  _predict(input) {\n    return this.slope * input + this.intercept;\n  }\n\n  computeX(input) {\n    return (input - this.intercept) / this.slope;\n  }\n\n  toString(precision) {\n    var result = 'f(x) = ';\n    if (this.slope) {\n      var xFactor = maybeToPrecision(this.slope, precision);\n      result += `${Math.abs(xFactor - 1) < 1e-5 ? '' : `${xFactor} * `}x`;\n      if (this.intercept) {\n        var absIntercept = Math.abs(this.intercept);\n        var operator = absIntercept === this.intercept ? '+' : '-';\n        result +=\n          ` ${operator} ${maybeToPrecision(absIntercept, precision)}`;\n      }\n    } else {\n      result += maybeToPrecision(this.intercept, precision);\n    }\n    return result;\n  }\n\n  toLaTeX(precision) {\n    return this.toString(precision);\n  }\n\n  static load(json) {\n    if (json.name !== 'TheilSenRegression') {\n      throw new TypeError('not a Theil-Sen model');\n    }\n    return new TheilSenRegression(true, json);\n  }\n}\n\nfunction theilSen(regression, x, y) {\n  let len = x.length;\n  let slopes = new Array(len * len);\n  let count = 0;\n  for (let i = 0; i < len; ++i) {\n    for (let j = i + 1; j < len; ++j) {\n      if (x[i] !== x[j]) {\n        slopes[count++] = (y[j] - y[i]) / (x[j] - x[i]);\n      }\n    }\n  }\n  slopes.length = count;\n  let medianSlope = median(slopes);\n\n  let cuts = new Array(len);\n  for (let i = 0; i < len; ++i) {\n    cuts[i] = y[i] - medianSlope * x[i];\n  }\n\n  regression.slope = medianSlope;\n  regression.intercept = median(cuts);\n  regression.coefficients = [regression.intercept, regression.slope];\n}\n","import BaseRegression, {\n  checkArrayLength,\n  maybeToPrecision\n} from 'ml-regression-base';\nimport { solve } from 'ml-matrix';\n\n/**\n * @class RobustPolynomialRegression\n * @param {Array<number>} x\n * @param {Array<number>} y\n * @param {number} degree - polynomial degree\n */\nexport default class RobustPolynomialRegression extends BaseRegression {\n  constructor(x, y, degree) {\n    super();\n    if (x === true) {\n      this.degree = y.degree;\n      this.powers = y.powers;\n      this.coefficients = y.coefficients;\n    } else {\n      checkArrayLength(x, y);\n      robustPolynomial(this, x, y, degree);\n    }\n  }\n\n  toJSON() {\n    return {\n      name: 'robustPolynomialRegression',\n      degree: this.degree,\n      powers: this.powers,\n      coefficients: this.coefficients\n    };\n  }\n\n  _predict(x) {\n    return predict(x, this.powers, this.coefficients);\n  }\n\n  /**\n   * Display the formula\n   * @param {number} precision - precision for the numbers\n   * @return {string}\n   */\n  toString(precision) {\n    return this._toFormula(precision, false);\n  }\n\n  /**\n   * Display the formula in LaTeX format\n   * @param {number} precision - precision for the numbers\n   * @return {string}\n   */\n  toLaTeX(precision) {\n    return this._toFormula(precision, true);\n  }\n\n  _toFormula(precision, isLaTeX) {\n    let sup = '^';\n    let closeSup = '';\n    let times = ' * ';\n    if (isLaTeX) {\n      sup = '^{';\n      closeSup = '}';\n      times = '';\n    }\n\n    let fn = '';\n    let str = '';\n    for (let k = 0; k < this.coefficients.length; k++) {\n      str = '';\n      if (this.coefficients[k] !== 0) {\n        if (this.powers[k] === 0) {\n          str = maybeToPrecision(this.coefficients[k], precision);\n        } else {\n          if (this.powers[k] === 1) {\n            str = `${maybeToPrecision(this.coefficients[k], precision) +\n              times}x`;\n          } else {\n            str = `${maybeToPrecision(this.coefficients[k], precision) +\n              times}x${sup}${this.powers[k]}${closeSup}`;\n          }\n        }\n\n        if (this.coefficients[k] > 0 && k !== this.coefficients.length - 1) {\n          str = ` + ${str}`;\n        } else if (k !== this.coefficients.length - 1) {\n          str = ` ${str}`;\n        }\n      }\n      fn = str + fn;\n    }\n    if (fn.charAt(0) === '+') {\n      fn = fn.slice(1);\n    }\n\n    return `f(x) = ${fn}`;\n  }\n\n  static load(json) {\n    if (json.name !== 'robustPolynomialRegression') {\n      throw new TypeError('not a RobustPolynomialRegression model');\n    }\n    return new RobustPolynomialRegression(true, json);\n  }\n}\n\nfunction robustPolynomial(regression, x, y, degree) {\n  let powers = Array(degree)\n    .fill(0)\n    .map((_, index) => index);\n\n  const tuples = getRandomTuples(x, y, degree);\n\n  var min;\n  for (var i = 0; i < tuples.length; i++) {\n    var tuple = tuples[i];\n    var coefficients = calcCoefficients(tuple, powers);\n\n    var residuals = x.slice();\n    for (var j = 0; j < x.length; j++) {\n      residuals[j] = y[j] - predict(x[j], powers, coefficients);\n      residuals[j] = {\n        residual: residuals[j] * residuals[j],\n        coefficients\n      };\n    }\n\n    var median = residualsMedian(residuals);\n    if (!min || median.residual < min.residual) {\n      min = median;\n    }\n  }\n\n  regression.degree = degree;\n  regression.powers = powers;\n  regression.coefficients = min.coefficients;\n}\n\n/**\n * @ignore\n * @param {Array<number>} x\n * @param {Array<number>} y\n * @param {number} degree\n * @return {Array<{x:number,y:number}>}\n */\nfunction getRandomTuples(x, y, degree) {\n  var len = Math.floor(x.length / degree);\n  var tuples = new Array(len);\n\n  for (var i = 0; i < x.length; i++) {\n    var pos = Math.floor(Math.random() * len);\n\n    var counter = 0;\n    while (counter < x.length) {\n      if (!tuples[pos]) {\n        tuples[pos] = [\n          {\n            x: x[i],\n            y: y[i]\n          }\n        ];\n        break;\n      } else if (tuples[pos].length < degree) {\n        tuples[pos].push({\n          x: x[i],\n          y: y[i]\n        });\n        break;\n      } else {\n        counter++;\n        pos = (pos + 1) % len;\n      }\n    }\n\n    if (counter === x.length) {\n      return tuples;\n    }\n  }\n  return tuples;\n}\n\n/**\n * @ignore\n * @param {{x:number,y:number}} tuple\n * @param {Array<number>} powers\n * @return {Array<number>}\n */\nfunction calcCoefficients(tuple, powers) {\n  var X = tuple.slice();\n  var Y = tuple.slice();\n  for (var i = 0; i < X.length; i++) {\n    Y[i] = [tuple[i].y];\n    X[i] = new Array(powers.length);\n    for (var j = 0; j < powers.length; j++) {\n      X[i][j] = Math.pow(tuple[i].x, powers[j]);\n    }\n  }\n\n  return solve(X, Y).to1DArray();\n}\n\nfunction predict(x, powers, coefficients) {\n  let y = 0;\n  for (let k = 0; k < powers.length; k++) {\n    y += coefficients[k] * Math.pow(x, powers[k]);\n  }\n  return y;\n}\n\nfunction residualsMedian(residuals) {\n  residuals.sort((a, b) => a.residual - b.residual);\n\n  var l = residuals.length;\n  var half = Math.floor(l / 2);\n  return l % 2 === 0 ? residuals[half - 1] : residuals[half];\n}\n","/**\n * Calculate current error\n * @ignore\n * @param {{x:Array<number>, y:Array<number>}} data - Array of points to fit in the format [x1, x2, ... ], [y1, y2, ... ]\n * @param {Array<number>} parameters - Array of current parameter values\n * @param {function} parameterizedFunction - The parameters and returns a function with the independent variable as a parameter\n * @return {number}\n */\nexport default function errorCalculation(\n  data,\n  parameters,\n  parameterizedFunction\n) {\n  var error = 0;\n  const func = parameterizedFunction(parameters);\n\n  for (var i = 0; i < data.x.length; i++) {\n    error += Math.abs(data.y[i] - func(data.x[i]));\n  }\n\n  return error;\n}\n","import { inverse, Matrix } from 'ml-matrix';\n\n/**\n * Difference of the matrix function over the parameters\n * @ignore\n * @param {{x:Array<number>, y:Array<number>}} data - Array of points to fit in the format [x1, x2, ... ], [y1, y2, ... ]\n * @param {Array<number>} evaluatedData - Array of previous evaluated function values\n * @param {Array<number>} params - Array of previous parameter values\n * @param {number} gradientDifference - Adjustment for decrease the damping parameter\n * @param {function} paramFunction - The parameters and returns a function with the independent variable as a parameter\n * @return {Matrix}\n */\nfunction gradientFunction(\n  data,\n  evaluatedData,\n  params,\n  gradientDifference,\n  paramFunction\n) {\n  const n = params.length;\n  const m = data.x.length;\n\n  var ans = new Array(n);\n\n  for (var param = 0; param < n; param++) {\n    ans[param] = new Array(m);\n    var auxParams = params.concat();\n    auxParams[param] += gradientDifference;\n    var funcParam = paramFunction(auxParams);\n\n    for (var point = 0; point < m; point++) {\n      ans[param][point] = evaluatedData[point] - funcParam(data.x[point]);\n    }\n  }\n  return new Matrix(ans);\n}\n\n/**\n * Matrix function over the samples\n * @ignore\n * @param {{x:Array<number>, y:Array<number>}} data - Array of points to fit in the format [x1, x2, ... ], [y1, y2, ... ]\n * @param {Array<number>} evaluatedData - Array of previous evaluated function values\n * @return {Matrix}\n */\nfunction matrixFunction(data, evaluatedData) {\n  const m = data.x.length;\n\n  var ans = new Array(m);\n\n  for (var point = 0; point < m; point++) {\n    ans[point] = [data.y[point] - evaluatedData[point]];\n  }\n\n  return new Matrix(ans);\n}\n\n/**\n * Iteration for Levenberg-Marquardt\n * @ignore\n * @param {{x:Array<number>, y:Array<number>}} data - Array of points to fit in the format [x1, x2, ... ], [y1, y2, ... ]\n * @param {Array<number>} params - Array of previous parameter values\n * @param {number} damping - Levenberg-Marquardt parameter\n * @param {number} gradientDifference - Adjustment for decrease the damping parameter\n * @param {function} parameterizedFunction - The parameters and returns a function with the independent variable as a parameter\n * @return {Array<number>}\n */\nexport default function step(\n  data,\n  params,\n  damping,\n  gradientDifference,\n  parameterizedFunction\n) {\n  var value = damping * gradientDifference * gradientDifference;\n  var identity = Matrix.eye(params.length, params.length, value);\n\n  const func = parameterizedFunction(params);\n  var evaluatedData = data.x.map((e) => func(e));\n\n  var gradientFunc = gradientFunction(\n    data,\n    evaluatedData,\n    params,\n    gradientDifference,\n    parameterizedFunction\n  );\n  var matrixFunc = matrixFunction(data, evaluatedData);\n  var inverseMatrix = inverse(\n    identity.add(gradientFunc.mmul(gradientFunc.transpose()))\n  );\n\n  params = new Matrix([params]);\n  params = params.sub(\n    inverseMatrix\n      .mmul(gradientFunc)\n      .mmul(matrixFunc)\n      .mul(gradientDifference)\n      .transpose()\n  );\n\n  return params.to1DArray();\n}\n","import errorCalculation from './errorCalculation';\nimport step from './step';\n\n/**\n * Curve fitting algorithm\n * @param {{x:Array<number>, y:Array<number>}} data - Array of points to fit in the format [x1, x2, ... ], [y1, y2, ... ]\n * @param {function} parameterizedFunction - The parameters and returns a function with the independent variable as a parameter\n * @param {object} [options] - Options object\n * @param {number} [options.damping] - Levenberg-Marquardt parameter\n * @param {number} [options.gradientDifference = 10e-2] - Adjustment for decrease the damping parameter\n * @param {Array<number>} [options.minValues] - Minimum allowed values for parameters\n * @param {Array<number>} [options.maxValues] - Maximum allowed values for parameters\n * @param {Array<number>} [options.initialValues] - Array of initial parameter values\n * @param {number} [options.maxIterations = 100] - Maximum of allowed iterations\n * @param {number} [options.errorTolerance = 10e-3] - Minimum uncertainty allowed for each point\n * @return {{parameterValues: Array<number>, parameterError: number, iterations: number}}\n */\nexport default function levenbergMarquardt(\n  data,\n  parameterizedFunction,\n  options = {}\n) {\n  let {\n    maxIterations = 100,\n    gradientDifference = 10e-2,\n    damping = 0,\n    errorTolerance = 10e-3,\n    minValues,\n    maxValues,\n    initialValues\n  } = options;\n\n  if (damping <= 0) {\n    throw new Error('The damping option must be a positive number');\n  } else if (!data.x || !data.y) {\n    throw new Error('The data parameter must have x and y elements');\n  } else if (\n    !Array.isArray(data.x) ||\n    data.x.length < 2 ||\n    !Array.isArray(data.y) ||\n    data.y.length < 2\n  ) {\n    throw new Error(\n      'The data parameter elements must be an array with more than 2 points'\n    );\n  } else if (data.x.length !== data.y.length) {\n    throw new Error('The data parameter elements must have the same size');\n  }\n\n  var parameters =\n    initialValues || new Array(parameterizedFunction.length).fill(1);\n  let parLen = parameters.length;\n  maxValues = maxValues || new Array(parLen).fill(Number.MAX_SAFE_INTEGER);\n  minValues = minValues || new Array(parLen).fill(Number.MIN_SAFE_INTEGER);\n\n  if (maxValues.length !== minValues.length) {\n    throw new Error('minValues and maxValues must be the same size');\n  }\n\n  if (!Array.isArray(parameters)) {\n    throw new Error('initialValues must be an array');\n  }\n\n  var error = errorCalculation(data, parameters, parameterizedFunction);\n\n  var converged = error <= errorTolerance;\n\n  for (\n    var iteration = 0;\n    iteration < maxIterations && !converged;\n    iteration++\n  ) {\n    parameters = step(\n      data,\n      parameters,\n      damping,\n      gradientDifference,\n      parameterizedFunction\n    );\n\n    for (let k = 0; k < parLen; k++) {\n      parameters[k] = Math.min(\n        Math.max(minValues[k], parameters[k]),\n        maxValues[k]\n      );\n    }\n\n    error = errorCalculation(data, parameters, parameterizedFunction);\n    if (isNaN(error)) break;\n    converged = error <= errorTolerance;\n  }\n\n  return {\n    parameterValues: parameters,\n    parameterError: error,\n    iterations: iteration\n  };\n}\n","/**\n * Returns a new array based on extraction of specific indices of an array\n * @private\n * @param {Array} vector\n * @param {Array} indices\n */\nexport default function selection(vector, indices) {\n  let u = []; //new Float64Array(indices.length);\n  for (let i = 0; i < indices.length; i++) {\n    u[i] = vector[indices[i]];\n  }\n  return u;\n}\n","/**\n *\n * @private\n * @param {Array of arrays} collection\n */\nexport default function sortCollectionSet(collection) {\n  let objectCollection = collection\n    .map((value, index) => {\n      let key = BigInt(0);\n      value.forEach((item) => (key |= BigInt(1) << BigInt(item)));\n      return { value, index, key };\n    })\n    .sort((a, b) => {\n      if (a.key - b.key < 0) return -1;\n      return 1;\n    });\n\n  let sorted = [];\n  let indices = [];\n\n  let key;\n  for (let set of objectCollection) {\n    if (set.key !== key) {\n      key = set.key;\n      indices.push([]);\n      sorted.push(set.value);\n    }\n    indices[indices.length - 1].push(set.index);\n  }\n\n  let result = {\n    values: sorted,\n    indices: indices,\n  };\n  return result;\n}\n","import {\n  Matrix,\n  LuDecomposition,\n  solve,\n  CholeskyDecomposition,\n} from 'ml-matrix';\n\nimport sortCollectionSet from './util/sortCollectionSet';\n\n/**\n * (Combinatorial Subspace Least Squares) - subfunction for the FC-NNLS\n * @private\n * @param {Matrix} XtX\n * @param {Matrix} XtY\n * @param {Array} Pset\n * @param {Numbers} l\n * @param {Numbers} p\n */\nexport default function cssls(XtX, XtY, Pset, l, p) {\n  // Solves the set of equation XtX*K = XtY for the variables in Pset\n  // if XtX (or XtX(vars,vars)) is singular, performs the svd and find pseudoinverse, otherwise (even if ill-conditioned) finds inverse with LU decomposition and solves the set of equation\n  // it is consistent with matlab results for ill-conditioned matrices (at least consistent with test 'ill-conditionned square X rank 2, Y 3x1' in cssls.test)\n\n  let K = Matrix.zeros(l, p);\n  if (Pset === null) {\n    let choXtX = new CholeskyDecomposition(XtX);\n    if (choXtX.isPositiveDefinite() === true) {\n      K = choXtX.solve(XtY);\n    } else {\n      let luXtX = new LuDecomposition(XtX);\n      if (luXtX.isSingular() === false) {\n        K = luXtX.solve(Matrix.eye(l)).mmul(XtY);\n      } else {\n        K = solve(XtX, XtY, { useSVD: true });\n      }\n    }\n  } else {\n    let sortedPset = sortCollectionSet(Pset).values;\n    let sortedEset = sortCollectionSet(Pset).indices;\n    if (\n      sortedPset.length === 1 &&\n      sortedPset[0].length === 0 &&\n      sortedEset[0].length === p\n    ) {\n      return K;\n    } else if (\n      sortedPset.length === 1 &&\n      sortedPset[0].length === l &&\n      sortedEset[0].length === p\n    ) {\n      let choXtX = new CholeskyDecomposition(XtX);\n      if (choXtX.isPositiveDefinite() === true) {\n        K = choXtX.solve(XtY);\n      } else {\n        let luXtX = new LuDecomposition(XtX);\n        if (luXtX.isSingular() === false) {\n          K = luXtX.solve(Matrix.eye(l)).mmul(XtY);\n        } else {\n          K = solve(XtX, XtY, { useSVD: true });\n        }\n      }\n    } else {\n      for (let k = 0; k < sortedPset.length; k++) {\n        let cols2Solve = sortedEset[k];\n        let vars = sortedPset[k];\n        let L;\n        let choXtX = new CholeskyDecomposition(XtX.selection(vars, vars));\n        if (choXtX.isPositiveDefinite() === true) {\n          L = choXtX.solve(XtY.selection(vars, cols2Solve));\n        } else {\n          let luXtX = new LuDecomposition(XtX.selection(vars, vars));\n          if (luXtX.isSingular() === false) {\n            L = luXtX\n              .solve(Matrix.eye(vars.length))\n              .mmul(XtY.selection(vars, cols2Solve));\n          } else {\n            L = solve(\n              XtX.selection(vars, vars),\n              XtY.selection(vars, cols2Solve),\n              { useSVD: true },\n            );\n          }\n        }\n        for (let i = 0; i < L.rows; i++) {\n          for (let j = 0; j < L.columns; j++) {\n            K.set(vars[i], cols2Solve[j], L.get(i, j));\n          }\n        }\n      }\n    }\n  }\n  return K;\n}\n","import { Matrix } from 'ml-matrix';\n\nimport cssls from './cssls';\n\nexport default function initialisation(X, Y) {\n  let n = X.rows;\n  let l = X.columns;\n  let p = Y.columns;\n  let iter = 0;\n\n  if (Y.rows !== n) throw new Error('ERROR: matrix size not compatible');\n\n  let W = Matrix.zeros(l, p);\n\n  // precomputes part of pseudoinverse\n  let XtX = X.transpose().mmul(X);\n  let XtY = X.transpose().mmul(Y);\n\n  let K = cssls(XtX, XtY, null, l, p); // K is lxp\n  let Pset = [];\n  for (let j = 0; j < p; j++) {\n    Pset[j] = [];\n    for (let i = 0; i < l; i++) {\n      if (K.get(i, j) > 0) {\n        Pset[j].push(i);\n      } else {\n        K.set(i, j, 0);\n      } //This is our initial solution, it's the solution found by overwriting the unconstrained least square solution\n    }\n  }\n  let Fset = [];\n  for (let j = 0; j < p; j++) {\n    if (Pset[j].length !== l) {\n      Fset.push(j);\n    }\n  }\n\n  let D = K.clone();\n\n  return { n, l, p, iter, W, XtX, XtY, K, Pset, Fset, D };\n}\n","/**\n * Computes the set difference A\\B\n * @private\n * @param {A} set A as an array\n * @param {B} set B as an array\n */\nexport default function setDifference(A, B) {\n  let C = [];\n  for (let i of A) {\n    if (!B.includes(i)) C.push(i);\n  }\n  return C;\n}\n","import setDifference from './util/setDifference';\n\n// Makes sure the solution has converged\nexport default function optimality(\n  iter,\n  maxIter,\n  XtX,\n  XtY,\n  Fset,\n  Pset,\n  W,\n  K,\n  l,\n  p,\n  D,\n) {\n  if (iter === maxIter) {\n    throw new Error('Maximum number of iterations exceeded');\n  }\n\n  // Check solution for optimality\n  let V = XtY.subMatrixColumn(Fset).subtract(XtX.mmul(K.subMatrixColumn(Fset)));\n  for (let j = 0; j < Fset.length; j++) {\n    W.setColumn(Fset[j], V.subMatrixColumn([j]));\n  }\n  let Jset = [];\n  let fullSet = [];\n  for (let i = 0; i < l; i++) {\n    fullSet.push(i);\n  }\n  for (let j = 0; j < Fset.length; j++) {\n    let notPset = setDifference(fullSet, Pset[Fset[j]]);\n    if (notPset.length === 0) {\n      Jset.push(Fset[j]);\n    } else if (W.selection(notPset, [Fset[j]]).max() <= 0) {\n      Jset.push(Fset[j]);\n    }\n  }\n  Fset = setDifference(Fset, Jset);\n\n  // For non-optimal solutions, add the appropriate variables to Pset\n  if (Fset.length !== 0) {\n    for (let j = 0; j < Fset.length; j++) {\n      for (let i = 0; i < l; i++) {\n        if (Pset[Fset[j]].includes(i)) W.set(i, Fset[j], -Infinity);\n      }\n      Pset[Fset[j]].push(W.subMatrixColumn(Fset).maxColumnIndex(j)[0]);\n    }\n    for (let j = 0; j < Fset.length; j++) {\n      D.setColumn(Fset[j], K.getColumn(Fset[j]));\n    }\n  }\n  for (let j = 0; j < p; j++) {\n    Pset[j].sort((a, b) => a - b);\n  }\n  return { Pset, Fset, W };\n}\n","import { Matrix } from 'ml-matrix';\n\nimport selection from './util/selection';\nimport cssls from './cssls';\nimport initialisation from './initialisation';\nimport optimality from './optimality';\n\n/**\n * Fast Combinatorial Non-negative Least Squares with multiple Right Hand Side\n * @param {Matrix|number[][]} X\n * @param {Matrix|number[][]} Y\n * @param {object} [options={}]\n * @param {number} [options.maxIterations] if empty maxIterations is set at 3 times the number of columns of X\n * @returns {Matrix} K\n */\nexport default function fcnnls(X, Y, options = {}) {\n  X = Matrix.checkMatrix(X);\n  Y = Matrix.checkMatrix(Y);\n  let { l, p, iter, W, XtX, XtY, K, Pset, Fset, D } = initialisation(X, Y);\n  const { maxIterations = X.columns * 3 } = options;\n\n  // Active set algorithm for NNLS main loop\n  while (Fset.length > 0) {\n    // Solves for the passive variables (uses subroutine below)\n    let L = cssls(\n      XtX,\n      XtY.subMatrixColumn(Fset),\n      selection(Pset, Fset),\n      l,\n      Fset.length,\n    );\n    for (let i = 0; i < l; i++) {\n      for (let j = 0; j < Fset.length; j++) {\n        K.set(i, Fset[j], L.get(i, j));\n      }\n    }\n\n    // Finds any infeasible solutions\n    let infeasIndex = [];\n    for (let j = 0; j < Fset.length; j++) {\n      for (let i = 0; i < l; i++) {\n        if (L.get(i, j) < 0) {\n          infeasIndex.push(j);\n          break;\n        }\n      }\n    }\n    let Hset = selection(Fset, infeasIndex);\n\n    // Makes infeasible solutions feasible (standard NNLS inner loop)\n    if (Hset.length > 0) {\n      let m = Hset.length;\n      let alpha = Matrix.ones(l, m);\n\n      while (m > 0 && iter < maxIterations) {\n        iter++;\n\n        alpha.mul(Infinity);\n\n        // Finds indices of negative variables in passive set\n        let hRowColIdx = [[], []]; // Indexes work in pairs, each pair reprensents a single element, first array is row index, second array is column index\n        let negRowColIdx = [[], []]; // Same as before\n        for (let j = 0; j < m; j++) {\n          for (let i = 0; i < Pset[Hset[j]].length; i++) {\n            if (K.get(Pset[Hset[j]][i], Hset[j]) < 0) {\n              hRowColIdx[0].push(Pset[Hset[j]][i]); // i\n              hRowColIdx[1].push(j);\n              negRowColIdx[0].push(Pset[Hset[j]][i]); // i\n              negRowColIdx[1].push(Hset[j]);\n            } // Compared to matlab, here we keep the row/column indexing (we are not taking the linear indexing)\n          }\n        }\n\n        for (let k = 0; k < hRowColIdx[0].length; k++) {\n          // could be hRowColIdx[1].length as well\n          alpha.set(\n            hRowColIdx[0][k],\n            hRowColIdx[1][k],\n            D.get(negRowColIdx[0][k], negRowColIdx[1][k]) /\n              (D.get(negRowColIdx[0][k], negRowColIdx[1][k]) -\n                K.get(negRowColIdx[0][k], negRowColIdx[1][k])),\n          );\n        }\n\n        let alphaMin = [];\n        let minIdx = [];\n        for (let j = 0; j < m; j++) {\n          alphaMin[j] = alpha.minColumn(j);\n          minIdx[j] = alpha.minColumnIndex(j)[0];\n        }\n\n        alphaMin = Matrix.rowVector(alphaMin);\n        for (let i = 0; i < l; i++) {\n          alpha.setSubMatrix(alphaMin, i, 0);\n        }\n\n        let E = new Matrix(l, m);\n        E = D.subMatrixColumn(Hset).subtract(\n          alpha\n            .subMatrix(0, l - 1, 0, m - 1)\n            .mul(D.subMatrixColumn(Hset).subtract(K.subMatrixColumn(Hset))),\n        );\n        for (let j = 0; j < m; j++) {\n          D.setColumn(Hset[j], E.subMatrixColumn([j]));\n        }\n\n        let idx2zero = [minIdx, Hset];\n        for (let k = 0; k < m; k++) {\n          D.set(idx2zero[0][k], idx2zero[1][k], 0);\n        }\n\n        for (let j = 0; j < m; j++) {\n          Pset[Hset[j]].splice(\n            Pset[Hset[j]].findIndex((item) => item === minIdx[j]),\n            1,\n          );\n        }\n\n        L = cssls(XtX, XtY.subMatrixColumn(Hset), selection(Pset, Hset), l, m);\n        for (let j = 0; j < m; j++) {\n          K.setColumn(Hset[j], L.subMatrixColumn([j]));\n        }\n\n        Hset = [];\n        for (let j = 0; j < K.columns; j++) {\n          for (let i = 0; i < l; i++) {\n            if (K.get(i, j) < 0) {\n              Hset.push(j);\n\n              break;\n            }\n          }\n        }\n        m = Hset.length;\n      }\n    }\n\n    let newParam = optimality(\n      iter,\n      maxIterations,\n      XtX,\n      XtY,\n      Fset,\n      Pset,\n      W,\n      K,\n      l,\n      p,\n      D,\n    );\n    Pset = newParam.Pset;\n    Fset = newParam.Fset;\n    W = newParam.W;\n  }\n\n  return K;\n}\n","import { Matrix } from 'ml-matrix';\n\nimport fcnnls from './fcnnls';\n\n/**\n * Fast Combinatorial Non-negative Least Squares with single Right Hand Side\n * @param {Matrix|number[][]} X\n * @param {number[]} y\n * @param {object} [options={}]\n * @param {boolean} [maxIterations] if true or empty maxIterations is set at 3 times the number of columns of X\n * @returns {Array} k\n */\nexport default function fcnnlsVector(X, y, options = {}) {\n  if (Array.isArray(y) === false) {\n    throw new TypeError('y must be a 1D Array');\n  }\n  let Y = Matrix.columnVector(y);\n  let K = fcnnls(X, Y, options);\n  let k = K.to1DArray();\n  return k;\n}\n","module.exports = function(haystack, needle, comparator, low, high) {\n  var mid, cmp;\n\n  if(low === undefined)\n    low = 0;\n\n  else {\n    low = low|0;\n    if(low < 0 || low >= haystack.length)\n      throw new RangeError(\"invalid lower bound\");\n  }\n\n  if(high === undefined)\n    high = haystack.length - 1;\n\n  else {\n    high = high|0;\n    if(high < low || high >= haystack.length)\n      throw new RangeError(\"invalid upper bound\");\n  }\n\n  while(low <= high) {\n    // The naive `low + high >>> 1` could fail for array lengths > 2**31\n    // because `>>>` converts its operands to int32. `low + (high - low >>> 1)`\n    // works for array lengths <= 2**32-1 which is also Javascript's max array\n    // length.\n    mid = low + ((high - low) >>> 1);\n    cmp = +comparator(haystack[mid], needle, mid, haystack);\n\n    // Too low.\n    if(cmp < 0.0)\n      low  = mid + 1;\n\n    // Too high.\n    else if(cmp > 0.0)\n      high = mid - 1;\n\n    // Key found.\n    else\n      return mid;\n  }\n\n  // Key not found.\n  return ~low;\n}\n","'use strict';\n\nfunction assertNumber(number) {\n\tif (typeof number !== 'number' || Number.isNaN(number)) {\n\t\tthrow new TypeError('Expected a number');\n\t}\n}\n\nexports.ascending = (left, right) => {\n\tassertNumber(left);\n\tassertNumber(right);\n\treturn left - right;\n};\n\nexports.descending = (left, right) => {\n\tassertNumber(left);\n\tassertNumber(right);\n\treturn right - left;\n};\n","import binarySearch from 'binary-search';\nimport { ascending } from 'num-sort';\n\nexport const largestPrime = 0x7fffffff;\n\nconst primeNumbers = [\n  // chunk #0\n  largestPrime, // 2^31-1\n\n  // chunk #1\n  5,\n  11,\n  23,\n  47,\n  97,\n  197,\n  397,\n  797,\n  1597,\n  3203,\n  6421,\n  12853,\n  25717,\n  51437,\n  102877,\n  205759,\n  411527,\n  823117,\n  1646237,\n  3292489,\n  6584983,\n  13169977,\n  26339969,\n  52679969,\n  105359939,\n  210719881,\n  421439783,\n  842879579,\n  1685759167,\n\n  // chunk #2\n  433,\n  877,\n  1759,\n  3527,\n  7057,\n  14143,\n  28289,\n  56591,\n  113189,\n  226379,\n  452759,\n  905551,\n  1811107,\n  3622219,\n  7244441,\n  14488931,\n  28977863,\n  57955739,\n  115911563,\n  231823147,\n  463646329,\n  927292699,\n  1854585413,\n\n  // chunk #3\n  953,\n  1907,\n  3821,\n  7643,\n  15287,\n  30577,\n  61169,\n  122347,\n  244703,\n  489407,\n  978821,\n  1957651,\n  3915341,\n  7830701,\n  15661423,\n  31322867,\n  62645741,\n  125291483,\n  250582987,\n  501165979,\n  1002331963,\n  2004663929,\n\n  // chunk #4\n  1039,\n  2081,\n  4177,\n  8363,\n  16729,\n  33461,\n  66923,\n  133853,\n  267713,\n  535481,\n  1070981,\n  2141977,\n  4283963,\n  8567929,\n  17135863,\n  34271747,\n  68543509,\n  137087021,\n  274174111,\n  548348231,\n  1096696463,\n\n  // chunk #5\n  31,\n  67,\n  137,\n  277,\n  557,\n  1117,\n  2237,\n  4481,\n  8963,\n  17929,\n  35863,\n  71741,\n  143483,\n  286973,\n  573953,\n  1147921,\n  2295859,\n  4591721,\n  9183457,\n  18366923,\n  36733847,\n  73467739,\n  146935499,\n  293871013,\n  587742049,\n  1175484103,\n\n  // chunk #6\n  599,\n  1201,\n  2411,\n  4831,\n  9677,\n  19373,\n  38747,\n  77509,\n  155027,\n  310081,\n  620171,\n  1240361,\n  2480729,\n  4961459,\n  9922933,\n  19845871,\n  39691759,\n  79383533,\n  158767069,\n  317534141,\n  635068283,\n  1270136683,\n\n  // chunk #7\n  311,\n  631,\n  1277,\n  2557,\n  5119,\n  10243,\n  20507,\n  41017,\n  82037,\n  164089,\n  328213,\n  656429,\n  1312867,\n  2625761,\n  5251529,\n  10503061,\n  21006137,\n  42012281,\n  84024581,\n  168049163,\n  336098327,\n  672196673,\n  1344393353,\n\n  // chunk #8\n  3,\n  7,\n  17,\n  37,\n  79,\n  163,\n  331,\n  673,\n  1361,\n  2729,\n  5471,\n  10949,\n  21911,\n  43853,\n  87719,\n  175447,\n  350899,\n  701819,\n  1403641,\n  2807303,\n  5614657,\n  11229331,\n  22458671,\n  44917381,\n  89834777,\n  179669557,\n  359339171,\n  718678369,\n  1437356741,\n\n  // chunk #9\n  43,\n  89,\n  179,\n  359,\n  719,\n  1439,\n  2879,\n  5779,\n  11579,\n  23159,\n  46327,\n  92657,\n  185323,\n  370661,\n  741337,\n  1482707,\n  2965421,\n  5930887,\n  11861791,\n  23723597,\n  47447201,\n  94894427,\n  189788857,\n  379577741,\n  759155483,\n  1518310967,\n\n  // chunk #10\n  379,\n  761,\n  1523,\n  3049,\n  6101,\n  12203,\n  24407,\n  48817,\n  97649,\n  195311,\n  390647,\n  781301,\n  1562611,\n  3125257,\n  6250537,\n  12501169,\n  25002389,\n  50004791,\n  100009607,\n  200019221,\n  400038451,\n  800076929,\n  1600153859,\n\n  // chunk #11\n  13,\n  29,\n  59,\n  127,\n  257,\n  521,\n  1049,\n  2099,\n  4201,\n  8419,\n  16843,\n  33703,\n  67409,\n  134837,\n  269683,\n  539389,\n  1078787,\n  2157587,\n  4315183,\n  8630387,\n  17260781,\n  34521589,\n  69043189,\n  138086407,\n  276172823,\n  552345671,\n  1104691373,\n\n  // chunk #12\n  19,\n  41,\n  83,\n  167,\n  337,\n  677,\n  1361,\n  2729,\n  5471,\n  10949,\n  21911,\n  43853,\n  87719,\n  175447,\n  350899,\n  701819,\n  1403641,\n  2807303,\n  5614657,\n  11229331,\n  22458671,\n  44917381,\n  89834777,\n  179669557,\n  359339171,\n  718678369,\n  1437356741,\n\n  // chunk #13\n  53,\n  107,\n  223,\n  449,\n  907,\n  1823,\n  3659,\n  7321,\n  14653,\n  29311,\n  58631,\n  117269,\n  234539,\n  469099,\n  938207,\n  1876417,\n  3752839,\n  7505681,\n  15011389,\n  30022781,\n  60045577,\n  120091177,\n  240182359,\n  480364727,\n  960729461,\n  1921458943\n];\n\nprimeNumbers.sort(ascending);\n\nexport function nextPrime(value) {\n  let index = binarySearch(primeNumbers, value, ascending);\n  if (index < 0) {\n    index = ~index;\n  }\n  return primeNumbers[index];\n}\n","import { largestPrime, nextPrime } from './primeFinder';\n\nconst FREE = 0;\nconst FULL = 1;\nconst REMOVED = 2;\n\nconst defaultInitialCapacity = 150;\nconst defaultMinLoadFactor = 1 / 6;\nconst defaultMaxLoadFactor = 2 / 3;\n\nexport default class HashTable {\n  constructor(options = {}) {\n    if (options instanceof HashTable) {\n      this.table = options.table.slice();\n      this.values = options.values.slice();\n      this.state = options.state.slice();\n      this.minLoadFactor = options.minLoadFactor;\n      this.maxLoadFactor = options.maxLoadFactor;\n      this.distinct = options.distinct;\n      this.freeEntries = options.freeEntries;\n      this.lowWaterMark = options.lowWaterMark;\n      this.highWaterMark = options.maxLoadFactor;\n      return;\n    }\n\n    const initialCapacity =\n      options.initialCapacity === undefined\n        ? defaultInitialCapacity\n        : options.initialCapacity;\n    if (initialCapacity < 0) {\n      throw new RangeError(\n        `initial capacity must not be less than zero: ${initialCapacity}`\n      );\n    }\n\n    const minLoadFactor =\n      options.minLoadFactor === undefined\n        ? defaultMinLoadFactor\n        : options.minLoadFactor;\n    const maxLoadFactor =\n      options.maxLoadFactor === undefined\n        ? defaultMaxLoadFactor\n        : options.maxLoadFactor;\n    if (minLoadFactor < 0 || minLoadFactor >= 1) {\n      throw new RangeError(`invalid minLoadFactor: ${minLoadFactor}`);\n    }\n    if (maxLoadFactor <= 0 || maxLoadFactor >= 1) {\n      throw new RangeError(`invalid maxLoadFactor: ${maxLoadFactor}`);\n    }\n    if (minLoadFactor >= maxLoadFactor) {\n      throw new RangeError(\n        `minLoadFactor (${minLoadFactor}) must be smaller than maxLoadFactor (${maxLoadFactor})`\n      );\n    }\n\n    let capacity = initialCapacity;\n    // User wants to put at least capacity elements. We need to choose the size based on the maxLoadFactor to\n    // avoid the need to rehash before this capacity is reached.\n    // actualCapacity * maxLoadFactor >= capacity\n    capacity = (capacity / maxLoadFactor) | 0;\n    capacity = nextPrime(capacity);\n    if (capacity === 0) capacity = 1;\n\n    this.table = newArray(capacity);\n    this.values = newArray(capacity);\n    this.state = newArray(capacity);\n\n    this.minLoadFactor = minLoadFactor;\n    if (capacity === largestPrime) {\n      this.maxLoadFactor = 1;\n    } else {\n      this.maxLoadFactor = maxLoadFactor;\n    }\n\n    this.distinct = 0;\n    this.freeEntries = capacity;\n\n    this.lowWaterMark = 0;\n    this.highWaterMark = chooseHighWaterMark(capacity, this.maxLoadFactor);\n  }\n\n  clone() {\n    return new HashTable(this);\n  }\n\n  get size() {\n    return this.distinct;\n  }\n\n  get(key) {\n    const i = this.indexOfKey(key);\n    if (i < 0) return 0;\n    return this.values[i];\n  }\n\n  set(key, value) {\n    let i = this.indexOfInsertion(key);\n    if (i < 0) {\n      i = -i - 1;\n      this.values[i] = value;\n      return false;\n    }\n\n    if (this.distinct > this.highWaterMark) {\n      const newCapacity = chooseGrowCapacity(\n        this.distinct + 1,\n        this.minLoadFactor,\n        this.maxLoadFactor\n      );\n      this.rehash(newCapacity);\n      return this.set(key, value);\n    }\n\n    this.table[i] = key;\n    this.values[i] = value;\n    if (this.state[i] === FREE) this.freeEntries--;\n    this.state[i] = FULL;\n    this.distinct++;\n\n    if (this.freeEntries < 1) {\n      const newCapacity = chooseGrowCapacity(\n        this.distinct + 1,\n        this.minLoadFactor,\n        this.maxLoadFactor\n      );\n      this.rehash(newCapacity);\n    }\n\n    return true;\n  }\n\n  remove(key, noRehash) {\n    const i = this.indexOfKey(key);\n    if (i < 0) return false;\n\n    this.state[i] = REMOVED;\n    this.distinct--;\n\n    if (!noRehash) this.maybeShrinkCapacity();\n\n    return true;\n  }\n\n  delete(key, noRehash) {\n    const i = this.indexOfKey(key);\n    if (i < 0) return false;\n\n    this.state[i] = FREE;\n    this.distinct--;\n\n    if (!noRehash) this.maybeShrinkCapacity();\n\n    return true;\n  }\n\n  maybeShrinkCapacity() {\n    if (this.distinct < this.lowWaterMark) {\n      const newCapacity = chooseShrinkCapacity(\n        this.distinct,\n        this.minLoadFactor,\n        this.maxLoadFactor\n      );\n      this.rehash(newCapacity);\n    }\n  }\n\n  containsKey(key) {\n    return this.indexOfKey(key) >= 0;\n  }\n\n  indexOfKey(key) {\n    const table = this.table;\n    const state = this.state;\n    const length = this.table.length;\n\n    const hash = key & 0x7fffffff;\n    let i = hash % length;\n    let decrement = hash % (length - 2);\n    if (decrement === 0) decrement = 1;\n\n    while (state[i] !== FREE && (state[i] === REMOVED || table[i] !== key)) {\n      i -= decrement;\n      if (i < 0) i += length;\n    }\n\n    if (state[i] === FREE) return -1;\n    return i;\n  }\n\n  containsValue(value) {\n    return this.indexOfValue(value) >= 0;\n  }\n\n  indexOfValue(value) {\n    const values = this.values;\n    const state = this.state;\n\n    for (var i = 0; i < state.length; i++) {\n      if (state[i] === FULL && values[i] === value) {\n        return i;\n      }\n    }\n\n    return -1;\n  }\n\n  indexOfInsertion(key) {\n    const table = this.table;\n    const state = this.state;\n    const length = table.length;\n\n    const hash = key & 0x7fffffff;\n    let i = hash % length;\n    let decrement = hash % (length - 2);\n    if (decrement === 0) decrement = 1;\n\n    while (state[i] === FULL && table[i] !== key) {\n      i -= decrement;\n      if (i < 0) i += length;\n    }\n\n    if (state[i] === REMOVED) {\n      const j = i;\n      while (state[i] !== FREE && (state[i] === REMOVED || table[i] !== key)) {\n        i -= decrement;\n        if (i < 0) i += length;\n      }\n      if (state[i] === FREE) i = j;\n    }\n\n    if (state[i] === FULL) {\n      return -i - 1;\n    }\n\n    return i;\n  }\n\n  ensureCapacity(minCapacity) {\n    if (this.table.length < minCapacity) {\n      const newCapacity = nextPrime(minCapacity);\n      this.rehash(newCapacity);\n    }\n  }\n\n  rehash(newCapacity) {\n    const oldCapacity = this.table.length;\n\n    if (newCapacity <= this.distinct) throw new Error('Unexpected');\n\n    const oldTable = this.table;\n    const oldValues = this.values;\n    const oldState = this.state;\n\n    const newTable = newArray(newCapacity);\n    const newValues = newArray(newCapacity);\n    const newState = newArray(newCapacity);\n\n    this.lowWaterMark = chooseLowWaterMark(newCapacity, this.minLoadFactor);\n    this.highWaterMark = chooseHighWaterMark(newCapacity, this.maxLoadFactor);\n\n    this.table = newTable;\n    this.values = newValues;\n    this.state = newState;\n    this.freeEntries = newCapacity - this.distinct;\n\n    for (var i = 0; i < oldCapacity; i++) {\n      if (oldState[i] === FULL) {\n        var element = oldTable[i];\n        var index = this.indexOfInsertion(element);\n        newTable[index] = element;\n        newValues[index] = oldValues[i];\n        newState[index] = FULL;\n      }\n    }\n  }\n\n  forEachKey(callback) {\n    for (var i = 0; i < this.state.length; i++) {\n      if (this.state[i] === FULL) {\n        if (!callback(this.table[i])) return false;\n      }\n    }\n    return true;\n  }\n\n  forEachValue(callback) {\n    for (var i = 0; i < this.state.length; i++) {\n      if (this.state[i] === FULL) {\n        if (!callback(this.values[i])) return false;\n      }\n    }\n    return true;\n  }\n\n  forEachPair(callback) {\n    for (var i = 0; i < this.state.length; i++) {\n      if (this.state[i] === FULL) {\n        if (!callback(this.table[i], this.values[i])) return false;\n      }\n    }\n    return true;\n  }\n}\n\nfunction chooseLowWaterMark(capacity, minLoad) {\n  return (capacity * minLoad) | 0;\n}\n\nfunction chooseHighWaterMark(capacity, maxLoad) {\n  return Math.min(capacity - 2, (capacity * maxLoad) | 0);\n}\n\nfunction chooseGrowCapacity(size, minLoad, maxLoad) {\n  return nextPrime(\n    Math.max(size + 1, ((4 * size) / (3 * minLoad + maxLoad)) | 0)\n  );\n}\n\nfunction chooseShrinkCapacity(size, minLoad, maxLoad) {\n  return nextPrime(\n    Math.max(size + 1, ((4 * size) / (minLoad + 3 * maxLoad)) | 0)\n  );\n}\n\nfunction newArray(size) {\n  return Array(size).fill(0);\n}\n","import HashTable from 'ml-hash-table';\n\nexport class SparseMatrix {\n  constructor(rows, columns, options = {}) {\n    if (rows instanceof SparseMatrix) {\n      // clone\n      const other = rows;\n      this._init(\n        other.rows,\n        other.columns,\n        other.elements.clone(),\n        other.threshold\n      );\n      return;\n    }\n\n    if (Array.isArray(rows)) {\n      const matrix = rows;\n      rows = matrix.length;\n      options = columns || {};\n      columns = matrix[0].length;\n      this._init(rows, columns, new HashTable(options), options.threshold);\n      for (var i = 0; i < rows; i++) {\n        for (var j = 0; j < columns; j++) {\n          var value = matrix[i][j];\n          if (this.threshold && Math.abs(value) < this.threshold) value = 0;\n          if (value !== 0) {\n            this.elements.set(i * columns + j, matrix[i][j]);\n          }\n        }\n      }\n    } else {\n      this._init(rows, columns, new HashTable(options), options.threshold);\n    }\n  }\n\n  _init(rows, columns, elements, threshold) {\n    this.rows = rows;\n    this.columns = columns;\n    this.elements = elements;\n    this.threshold = threshold || 0;\n  }\n\n  static eye(rows = 1, columns = rows) {\n    const min = Math.min(rows, columns);\n    const matrix = new SparseMatrix(rows, columns, { initialCapacity: min });\n    for (var i = 0; i < min; i++) {\n      matrix.set(i, i, 1);\n    }\n    return matrix;\n  }\n\n  clone() {\n    return new SparseMatrix(this);\n  }\n\n  to2DArray() {\n    const copy = new Array(this.rows);\n    for (var i = 0; i < this.rows; i++) {\n      copy[i] = new Array(this.columns);\n      for (var j = 0; j < this.columns; j++) {\n        copy[i][j] = this.get(i, j);\n      }\n    }\n    return copy;\n  }\n\n  isSquare() {\n    return this.rows === this.columns;\n  }\n\n  isSymmetric() {\n    if (!this.isSquare()) return false;\n\n    var symmetric = true;\n    this.forEachNonZero((i, j, v) => {\n      if (this.get(j, i) !== v) {\n        symmetric = false;\n        return false;\n      }\n      return v;\n    });\n    return symmetric;\n  }\n\n  /**\n   * Search for the wither band in the main diagonals\n   * @return {number}\n   */\n  bandWidth() {\n    let min = this.columns;\n    let max = -1;\n    this.forEachNonZero((i, j, v) => {\n      let diff = i - j;\n      min = Math.min(min, diff);\n      max = Math.max(max, diff);\n      return v;\n    });\n    return max - min;\n  }\n\n  /**\n   * Test if a matrix is consider banded using a threshold\n   * @param {number} width\n   * @return {boolean}\n   */\n  isBanded(width) {\n    let bandWidth = this.bandWidth();\n    return bandWidth <= width;\n  }\n\n  get cardinality() {\n    return this.elements.size;\n  }\n\n  get size() {\n    return this.rows * this.columns;\n  }\n\n  get(row, column) {\n    return this.elements.get(row * this.columns + column);\n  }\n\n  set(row, column, value) {\n    if (this.threshold && Math.abs(value) < this.threshold) value = 0;\n    if (value === 0) {\n      this.elements.remove(row * this.columns + column);\n    } else {\n      this.elements.set(row * this.columns + column, value);\n    }\n    return this;\n  }\n\n  mmul(other) {\n    if (this.columns !== other.rows) {\n      // eslint-disable-next-line no-console\n      console.warn(\n        'Number of columns of left matrix are not equal to number of rows of right matrix.'\n      );\n    }\n\n    const m = this.rows;\n    const p = other.columns;\n\n    const result = new SparseMatrix(m, p);\n    this.forEachNonZero((i, j, v1) => {\n      other.forEachNonZero((k, l, v2) => {\n        if (j === k) {\n          result.set(i, l, result.get(i, l) + v1 * v2);\n        }\n        return v2;\n      });\n      return v1;\n    });\n    return result;\n  }\n\n  kroneckerProduct(other) {\n    const m = this.rows;\n    const n = this.columns;\n    const p = other.rows;\n    const q = other.columns;\n\n    const result = new SparseMatrix(m * p, n * q, {\n      initialCapacity: this.cardinality * other.cardinality\n    });\n    this.forEachNonZero((i, j, v1) => {\n      other.forEachNonZero((k, l, v2) => {\n        result.set(p * i + k, q * j + l, v1 * v2);\n        return v2;\n      });\n      return v1;\n    });\n    return result;\n  }\n\n  forEachNonZero(callback) {\n    this.elements.forEachPair((key, value) => {\n      const i = (key / this.columns) | 0;\n      const j = key % this.columns;\n      let r = callback(i, j, value);\n      if (r === false) return false; // stop iteration\n      if (this.threshold && Math.abs(r) < this.threshold) r = 0;\n      if (r !== value) {\n        if (r === 0) {\n          this.elements.remove(key, true);\n        } else {\n          this.elements.set(key, r);\n        }\n      }\n      return true;\n    });\n    this.elements.maybeShrinkCapacity();\n    return this;\n  }\n\n  getNonZeros() {\n    const cardinality = this.cardinality;\n    const rows = new Array(cardinality);\n    const columns = new Array(cardinality);\n    const values = new Array(cardinality);\n    var idx = 0;\n    this.forEachNonZero((i, j, value) => {\n      rows[idx] = i;\n      columns[idx] = j;\n      values[idx] = value;\n      idx++;\n      return value;\n    });\n    return { rows, columns, values };\n  }\n\n  setThreshold(newThreshold) {\n    if (newThreshold !== 0 && newThreshold !== this.threshold) {\n      this.threshold = newThreshold;\n      this.forEachNonZero((i, j, v) => v);\n    }\n    return this;\n  }\n\n  /**\n   * @return {SparseMatrix} - New transposed sparse matrix\n   */\n  transpose() {\n    let trans = new SparseMatrix(this.columns, this.rows, {\n      initialCapacity: this.cardinality\n    });\n    this.forEachNonZero((i, j, value) => {\n      trans.set(j, i, value);\n      return value;\n    });\n    return trans;\n  }\n}\n\nSparseMatrix.prototype.klass = 'Matrix';\n\nSparseMatrix.identity = SparseMatrix.eye;\nSparseMatrix.prototype.tensorProduct = SparseMatrix.prototype.kroneckerProduct;\n\n/*\n Add dynamically instance and static methods for mathematical operations\n */\n\nvar inplaceOperator = `\n(function %name%(value) {\n    if (typeof value === 'number') return this.%name%S(value);\n    return this.%name%M(value);\n})\n`;\n\nvar inplaceOperatorScalar = `\n(function %name%S(value) {\n    this.forEachNonZero((i, j, v) => v %op% value);\n    return this;\n})\n`;\n\nvar inplaceOperatorMatrix = `\n(function %name%M(matrix) {\n    matrix.forEachNonZero((i, j, v) => {\n        this.set(i, j, this.get(i, j) %op% v);\n        return v;\n    });\n    return this;\n})\n`;\n\nvar staticOperator = `\n(function %name%(matrix, value) {\n    var newMatrix = new SparseMatrix(matrix);\n    return newMatrix.%name%(value);\n})\n`;\n\nvar inplaceMethod = `\n(function %name%() {\n    this.forEachNonZero((i, j, v) => %method%(v));\n    return this;\n})\n`;\n\nvar staticMethod = `\n(function %name%(matrix) {\n    var newMatrix = new SparseMatrix(matrix);\n    return newMatrix.%name%();\n})\n`;\n\nconst operators = [\n  // Arithmetic operators\n  ['+', 'add'],\n  ['-', 'sub', 'subtract'],\n  ['*', 'mul', 'multiply'],\n  ['/', 'div', 'divide'],\n  ['%', 'mod', 'modulus'],\n  // Bitwise operators\n  ['&', 'and'],\n  ['|', 'or'],\n  ['^', 'xor'],\n  ['<<', 'leftShift'],\n  ['>>', 'signPropagatingRightShift'],\n  ['>>>', 'rightShift', 'zeroFillRightShift']\n];\n\nfor (const operator of operators) {\n  for (let i = 1; i < operator.length; i++) {\n    SparseMatrix.prototype[operator[i]] = eval(\n      fillTemplateFunction(inplaceOperator, {\n        name: operator[i],\n        op: operator[0]\n      })\n    );\n    SparseMatrix.prototype[`${operator[i]}S`] = eval(\n      fillTemplateFunction(inplaceOperatorScalar, {\n        name: `${operator[i]}S`,\n        op: operator[0]\n      })\n    );\n    SparseMatrix.prototype[`${operator[i]}M`] = eval(\n      fillTemplateFunction(inplaceOperatorMatrix, {\n        name: `${operator[i]}M`,\n        op: operator[0]\n      })\n    );\n\n    SparseMatrix[operator[i]] = eval(\n      fillTemplateFunction(staticOperator, { name: operator[i] })\n    );\n  }\n}\n\nvar methods = [['~', 'not']];\n\n[\n  'abs',\n  'acos',\n  'acosh',\n  'asin',\n  'asinh',\n  'atan',\n  'atanh',\n  'cbrt',\n  'ceil',\n  'clz32',\n  'cos',\n  'cosh',\n  'exp',\n  'expm1',\n  'floor',\n  'fround',\n  'log',\n  'log1p',\n  'log10',\n  'log2',\n  'round',\n  'sign',\n  'sin',\n  'sinh',\n  'sqrt',\n  'tan',\n  'tanh',\n  'trunc'\n].forEach(function (mathMethod) {\n  methods.push([`Math.${mathMethod}`, mathMethod]);\n});\n\nfor (const method of methods) {\n  for (let i = 1; i < method.length; i++) {\n    SparseMatrix.prototype[method[i]] = eval(\n      fillTemplateFunction(inplaceMethod, {\n        name: method[i],\n        method: method[0]\n      })\n    );\n    SparseMatrix[method[i]] = eval(\n      fillTemplateFunction(staticMethod, { name: method[i] })\n    );\n  }\n}\n\nfunction fillTemplateFunction(template, values) {\n  for (const i in values) {\n    template = template.replace(new RegExp(`%${i}%`, 'g'), values[i]);\n  }\n  return template;\n}\n","export default function additiveSymmetric(a, b) {\n  var i = 0;\n  var ii = a.length;\n  var d = 0;\n  for (; i < ii; i++) {\n    d += ((a[i] - b[i]) * (a[i] - b[i]) * (a[i] + b[i])) / (a[i] * b[i]);\n  }\n  return 2 * d;\n}\n","export default function avg(a, b) {\n  var ii = a.length;\n  var max = 0;\n  var ans = 0;\n  var aux = 0;\n  for (var i = 0; i < ii; i++) {\n    aux = Math.abs(a[i] - b[i]);\n    ans += aux;\n    if (max < aux) {\n      max = aux;\n    }\n  }\n  return (max + ans) / 2;\n}\n","export default function bhattacharyya(a, b) {\n  var ii = a.length;\n  var ans = 0;\n  for (var i = 0; i < ii; i++) {\n    ans += Math.sqrt(a[i] * b[i]);\n  }\n  return -Math.log(ans);\n}\n","export default function canberra(a, b) {\n  var ii = a.length;\n  var ans = 0;\n  for (var i = 0; i < ii; i++) {\n    ans += Math.abs(a[i] - b[i]) / (a[i] + b[i]);\n  }\n  return ans;\n}\n","export default function chebyshev(a, b) {\n  var ii = a.length;\n  var max = 0;\n  var aux = 0;\n  for (var i = 0; i < ii; i++) {\n    aux = Math.abs(a[i] - b[i]);\n    if (max < aux) {\n      max = aux;\n    }\n  }\n  return max;\n}\n","export default function clark(a, b) {\n  var i = 0;\n  var ii = a.length;\n  var d = 0;\n  for (; i < ii; i++) {\n    d += Math.sqrt(\n      ((a[i] - b[i]) * (a[i] - b[i])) / ((a[i] + b[i]) * (a[i] + b[i]))\n    );\n  }\n  return 2 * d;\n}\n","export default function czekanowskiSimilarity(a, b) {\n  var up = 0;\n  var down = 0;\n  for (var i = 0; i < a.length; i++) {\n    up += Math.min(a[i], b[i]);\n    down += a[i] + b[i];\n  }\n  return (2 * up) / down;\n}\n","import czekanowskiSimilarity from '../similarities/czekanowski';\n\nexport default function czekanowskiDistance(a, b) {\n  return 1 - czekanowskiSimilarity(a, b);\n}\n","export default function dice(a, b) {\n  var ii = a.length;\n  var p = 0;\n  var q1 = 0;\n  var q2 = 0;\n  for (var i = 0; i < ii; i++) {\n    p += a[i] * a[i];\n    q1 += b[i] * b[i];\n    q2 += (a[i] - b[i]) * (a[i] - b[i]);\n  }\n  return q2 / (p + q1);\n}\n","export default function divergence(a, b) {\n  var i = 0;\n  var ii = a.length;\n  var d = 0;\n  for (; i < ii; i++) {\n    d += ((a[i] - b[i]) * (a[i] - b[i])) / ((a[i] + b[i]) * (a[i] + b[i]));\n  }\n  return 2 * d;\n}\n","export default function fidelity(a, b) {\n  var ii = a.length;\n  var ans = 0;\n  for (var i = 0; i < ii; i++) {\n    ans += Math.sqrt(a[i] * b[i]);\n  }\n  return ans;\n}\n","export default function gower(a, b) {\n  var ii = a.length;\n  var ans = 0;\n  for (var i = 0; i < ii; i++) {\n    ans += Math.abs(a[i] - b[i]);\n  }\n  return ans / ii;\n}\n","export default function harmonicMean(a, b) {\n  var ii = a.length;\n  var ans = 0;\n  for (var i = 0; i < ii; i++) {\n    ans += (a[i] * b[i]) / (a[i] + b[i]);\n  }\n  return 2 * ans;\n}\n","export default function hellinger(a, b) {\n  var ii = a.length;\n  var ans = 0;\n  for (var i = 0; i < ii; i++) {\n    ans += Math.sqrt(a[i] * b[i]);\n  }\n  return 2 * Math.sqrt(1 - ans);\n}\n","export default function innerProduct(a, b) {\n  var ii = a.length;\n  var ans = 0;\n  for (var i = 0; i < ii; i++) {\n    ans += a[i] * b[i];\n  }\n  return ans;\n}\n","export default function intersection(a, b) {\n  var ii = a.length;\n  var ans = 0;\n  for (var i = 0; i < ii; i++) {\n    ans += Math.min(a[i], b[i]);\n  }\n  return 1 - ans;\n}\n","export default function jaccard(a, b) {\n  var ii = a.length;\n  var p1 = 0;\n  var p2 = 0;\n  var q1 = 0;\n  var q2 = 0;\n  for (var i = 0; i < ii; i++) {\n    p1 += a[i] * b[i];\n    p2 += a[i] * a[i];\n    q1 += b[i] * b[i];\n    q2 += (a[i] - b[i]) * (a[i] - b[i]);\n  }\n  return q2 / (p2 + q1 - p1);\n}\n","export default function jeffreys(a, b) {\n  var ii = a.length;\n  var ans = 0;\n  for (var i = 0; i < ii; i++) {\n    ans += (a[i] - b[i]) * Math.log(a[i] / b[i]);\n  }\n  return ans;\n}\n","export default function jensenDifference(a, b) {\n  var ii = a.length;\n  var ans = 0;\n  for (var i = 0; i < ii; i++) {\n    ans +=\n      (a[i] * Math.log(a[i]) + b[i] * Math.log(b[i])) / 2 -\n      ((a[i] + b[i]) / 2) * Math.log((a[i] + b[i]) / 2);\n  }\n  return ans;\n}\n","export default function jensenShannon(a, b) {\n  var ii = a.length;\n  var p = 0;\n  var q = 0;\n  for (var i = 0; i < ii; i++) {\n    p += a[i] * Math.log((2 * a[i]) / (a[i] + b[i]));\n    q += b[i] * Math.log((2 * b[i]) / (a[i] + b[i]));\n  }\n  return (p + q) / 2;\n}\n","export default function kdivergence(a, b) {\n  var ii = a.length;\n  var ans = 0;\n  for (var i = 0; i < ii; i++) {\n    ans += a[i] * Math.log((2 * a[i]) / (a[i] + b[i]));\n  }\n  return ans;\n}\n","export default function kulczynski(a, b) {\n  var ii = a.length;\n  var up = 0;\n  var down = 0;\n  for (var i = 0; i < ii; i++) {\n    up += Math.abs(a[i] - b[i]);\n    down += Math.min(a[i], b[i]);\n  }\n  return up / down;\n}\n","export default function kullbackLeibler(a, b) {\n  var ii = a.length;\n  var ans = 0;\n  for (var i = 0; i < ii; i++) {\n    ans += a[i] * Math.log(a[i] / b[i]);\n  }\n  return ans;\n}\n","export default function kumarHassebrook(a, b) {\n  var ii = a.length;\n  var p = 0;\n  var p2 = 0;\n  var q2 = 0;\n  for (var i = 0; i < ii; i++) {\n    p += a[i] * b[i];\n    p2 += a[i] * a[i];\n    q2 += b[i] * b[i];\n  }\n  return p / (p2 + q2 - p);\n}\n","export default function kumarJohnson(a, b) {\n  var ii = a.length;\n  var ans = 0;\n  for (var i = 0; i < ii; i++) {\n    ans +=\n      Math.pow(a[i] * a[i] - b[i] * b[i], 2) / (2 * Math.pow(a[i] * b[i], 1.5));\n  }\n  return ans;\n}\n","export default function lorentzian(a, b) {\n  var ii = a.length;\n  var ans = 0;\n  for (var i = 0; i < ii; i++) {\n    ans += Math.log(Math.abs(a[i] - b[i]) + 1);\n  }\n  return ans;\n}\n","export default function manhattan(a, b) {\n  var i = 0;\n  var ii = a.length;\n  var d = 0;\n  for (; i < ii; i++) {\n    d += Math.abs(a[i] - b[i]);\n  }\n  return d;\n}\n","export default function matusita(a, b) {\n  var ii = a.length;\n  var ans = 0;\n  for (var i = 0; i < ii; i++) {\n    ans += Math.sqrt(a[i] * b[i]);\n  }\n  return Math.sqrt(2 - 2 * ans);\n}\n","export default function minkowski(a, b, p) {\n  var i = 0;\n  var ii = a.length;\n  var d = 0;\n  for (; i < ii; i++) {\n    d += Math.pow(Math.abs(a[i] - b[i]), p);\n  }\n  return Math.pow(d, 1 / p);\n}\n","export default function motyka(a, b) {\n  var ii = a.length;\n  var up = 0;\n  var down = 0;\n  for (var i = 0; i < ii; i++) {\n    up += Math.min(a[i], b[i]);\n    down += a[i] + b[i];\n  }\n  return 1 - up / down;\n}\n","export default function neyman(a, b) {\n  var i = 0;\n  var ii = a.length;\n  var d = 0;\n  for (; i < ii; i++) {\n    d += ((a[i] - b[i]) * (a[i] - b[i])) / a[i];\n  }\n  return d;\n}\n","export default function pearson(a, b) {\n  var i = 0;\n  var ii = a.length;\n  var d = 0;\n  for (; i < ii; i++) {\n    d += ((a[i] - b[i]) * (a[i] - b[i])) / b[i];\n  }\n  return d;\n}\n","export default function probabilisticSymmetric(a, b) {\n  var i = 0;\n  var ii = a.length;\n  var d = 0;\n  for (; i < ii; i++) {\n    d += ((a[i] - b[i]) * (a[i] - b[i])) / (a[i] + b[i]);\n  }\n  return 2 * d;\n}\n","export default function ruzicka(a, b) {\n  var ii = a.length;\n  var up = 0;\n  var down = 0;\n  for (var i = 0; i < ii; i++) {\n    up += Math.min(a[i], b[i]);\n    down += Math.max(a[i], b[i]);\n  }\n  return up / down;\n}\n","export default function soergel(a, b) {\n  var ii = a.length;\n  var up = 0;\n  var down = 0;\n  for (var i = 0; i < ii; i++) {\n    up += Math.abs(a[i] - b[i]);\n    down += Math.max(a[i], b[i]);\n  }\n  return up / down;\n}\n","export default function sorensen(a, b) {\n  var ii = a.length;\n  var up = 0;\n  var down = 0;\n  for (var i = 0; i < ii; i++) {\n    up += Math.abs(a[i] - b[i]);\n    down += a[i] + b[i];\n  }\n  return up / down;\n}\n","export default function squared(a, b) {\n  var i = 0;\n  var ii = a.length;\n  var d = 0;\n  for (; i < ii; i++) {\n    d += ((a[i] - b[i]) * (a[i] - b[i])) / (a[i] + b[i]);\n  }\n  return d;\n}\n","export default function squaredChord(a, b) {\n  var ii = a.length;\n  var ans = 0;\n  for (var i = 0; i < ii; i++) {\n    ans +=\n      (Math.sqrt(a[i]) - Math.sqrt(b[i])) * (Math.sqrt(a[i]) - Math.sqrt(b[i]));\n  }\n  return ans;\n}\n","export default function taneja(a, b) {\n  var ii = a.length;\n  var ans = 0;\n  for (var i = 0; i < ii; i++) {\n    ans +=\n      ((a[i] + b[i]) / 2) *\n      Math.log((a[i] + b[i]) / (2 * Math.sqrt(a[i] * b[i])));\n  }\n  return ans;\n}\n","export default function tanimoto(a, b, bitvector) {\n  if (bitvector) {\n    var inter = 0;\n    var union = 0;\n    for (var j = 0; j < a.length; j++) {\n      inter += a[j] && b[j];\n      union += a[j] || b[j];\n    }\n    if (union === 0) {\n      return 1;\n    }\n    return inter / union;\n  } else {\n    var ii = a.length;\n    var p = 0;\n    var q = 0;\n    var m = 0;\n    for (var i = 0; i < ii; i++) {\n      p += a[i];\n      q += b[i];\n      m += Math.min(a[i], b[i]);\n    }\n    return 1 - (p + q - 2 * m) / (p + q - m);\n  }\n}\n","import tanimotoS from '../similarities/tanimoto';\n\nexport default function tanimoto(a, b, bitvector) {\n  if (bitvector) {\n    return 1 - tanimotoS(a, b, bitvector);\n  } else {\n    var ii = a.length;\n    var p = 0;\n    var q = 0;\n    var m = 0;\n    for (var i = 0; i < ii; i++) {\n      p += a[i];\n      q += b[i];\n      m += Math.min(a[i], b[i]);\n    }\n    return (p + q - 2 * m) / (p + q - m);\n  }\n}\n","export default function topsoe(a, b) {\n  var ii = a.length;\n  var ans = 0;\n  for (var i = 0; i < ii; i++) {\n    ans +=\n      a[i] * Math.log((2 * a[i]) / (a[i] + b[i])) +\n      b[i] * Math.log((2 * b[i]) / (a[i] + b[i]));\n  }\n  return ans;\n}\n","export default function waveHedges(a, b) {\n  var ii = a.length;\n  var ans = 0;\n  for (var i = 0; i < ii; i++) {\n    ans += 1 - Math.min(a[i], b[i]) / Math.max(a[i], b[i]);\n  }\n  return ans;\n}\n","import binarySearch from 'binary-search';\nimport { ascending } from 'num-sort';\n\n/**\n * Function that creates the tree\n * @param {Array<Array<number>>} spectrum\n * @param {object} [options]\n * @return {Tree|null}\n * left and right have the same structure than the parent,\n * or are null if they are leaves\n */\nexport function createTree(spectrum, options = {}) {\n  var X = spectrum[0];\n  const {\n    minWindow = 0.16,\n    threshold = 0.01,\n    from = X[0],\n    to = X[X.length - 1]\n  } = options;\n\n  return mainCreateTree(\n    spectrum[0],\n    spectrum[1],\n    from,\n    to,\n    minWindow,\n    threshold\n  );\n}\n\nfunction mainCreateTree(X, Y, from, to, minWindow, threshold) {\n  if (to - from < minWindow) {\n    return null;\n  }\n\n  // search first point\n  var start = binarySearch(X, from, ascending);\n  if (start < 0) {\n    start = ~start;\n  }\n\n  // stop at last point\n  var sum = 0;\n  var center = 0;\n  for (var i = start; i < X.length; i++) {\n    if (X[i] >= to) {\n      break;\n    }\n    sum += Y[i];\n    center += X[i] * Y[i];\n  }\n\n  if (sum < threshold) {\n    return null;\n  }\n\n  center /= sum;\n  if (center - from < 1e-6 || to - center < 1e-6) {\n    return null;\n  }\n  if (center - from < minWindow / 4) {\n    return mainCreateTree(X, Y, center, to, minWindow, threshold);\n  } else {\n    if (to - center < minWindow / 4) {\n      return mainCreateTree(X, Y, from, center, minWindow, threshold);\n    } else {\n      return new Tree(\n        sum,\n        center,\n        mainCreateTree(X, Y, from, center, minWindow, threshold),\n        mainCreateTree(X, Y, center, to, minWindow, threshold)\n      );\n    }\n  }\n}\n\nclass Tree {\n  constructor(sum, center, left, right) {\n    this.sum = sum;\n    this.center = center;\n    this.left = left;\n    this.right = right;\n  }\n}\n","import { createTree } from './createTree';\n\n/**\n * Similarity between two nodes\n * @param {Tree|Array<Array<number>>} a - tree A node\n * @param {Tree|Array<Array<number>>} b - tree B node\n * @param {object} [options]\n * @return {number} similarity measure between tree nodes\n */\nexport function getSimilarity(a, b, options = {}) {\n  const { alpha = 0.1, beta = 0.33, gamma = 0.001 } = options;\n\n  if (a === null || b === null) {\n    return 0;\n  }\n  if (Array.isArray(a)) {\n    a = createTree(a);\n  }\n  if (Array.isArray(b)) {\n    b = createTree(b);\n  }\n\n  var C =\n    (alpha * Math.min(a.sum, b.sum)) / Math.max(a.sum, b.sum) +\n    (1 - alpha) * Math.exp(-gamma * Math.abs(a.center - b.center));\n\n  return (\n    beta * C +\n    ((1 - beta) *\n      (getSimilarity(a.left, b.left, options) +\n        getSimilarity(a.right, b.right, options))) /\n      2\n  );\n}\n","import { getSimilarity } from './getSimilarity';\n\nexport { createTree } from './createTree';\n\nexport function treeSimilarity(A, B, options = {}) {\n  return getSimilarity(A, B, options);\n}\n\nexport function getFunction(options = {}) {\n  return (A, B) => getSimilarity(A, B, options);\n}\n","export default function cosine(a, b) {\n  var ii = a.length;\n  var p = 0;\n  var p2 = 0;\n  var q2 = 0;\n  for (var i = 0; i < ii; i++) {\n    p += a[i] * b[i];\n    p2 += a[i] * a[i];\n    q2 += b[i] * b[i];\n  }\n  return p / (Math.sqrt(p2) * Math.sqrt(q2));\n}\n","import diceD from '../distances/dice';\n\nexport default function dice(a, b) {\n  return 1 - diceD(a, b);\n}\n","import intersectionD from '../distances/intersection';\n\nexport default function intersection(a, b) {\n  return 1 - intersectionD(a, b);\n}\n","import jaccardD from '../distances/jaccard';\n\nexport default function jaccard(a, b) {\n  return 1 - jaccardD(a, b);\n}\n","import kulczynskiD from '../distances/kulczynski';\n\nexport default function kulczynski(a, b) {\n  return 1 / kulczynskiD(a, b);\n}\n","import motykaD from '../distances/motyka';\n\nexport default function motyka(a, b) {\n  return 1 - motykaD(a, b);\n}\n","import mean from 'ml-array-mean';\n\nimport cosine from './cosine';\n\nexport default function pearson(a, b) {\n  var avgA = mean(a);\n  var avgB = mean(b);\n\n  var newA = new Array(a.length);\n  var newB = new Array(b.length);\n  for (var i = 0; i < newA.length; i++) {\n    newA[i] = a[i] - avgA;\n    newB[i] = b[i] - avgB;\n  }\n\n  return cosine(newA, newB);\n}\n","import squaredChordD from '../distances/squaredChord';\n\nexport default function squaredChord(a, b) {\n  return 1 - squaredChordD(a, b);\n}\n","'use strict';\n\n// Accuracy\nexports.acc = pred => {\n    const l = pred.cutoffs.length;\n    const result = new Array(l);\n    for (var i = 0; i < l; i++) {\n        result[i] = (pred.tn[i] + pred.tp[i]) / (l - 1);\n    }\n    return result;\n};\n\n// Error rate\nexports.err = pred => {\n    const l = pred.cutoffs.length;\n    const result = new Array(l);\n    for (var i = 0; i < l; i++) {\n        result[i] = (pred.fn[i] + pred.fp[i] / (l - 1));\n    }\n    return result;\n};\n\n// False positive rate\nexports.fpr = pred => {\n    const l = pred.cutoffs.length;\n    const result = new Array(l);\n    for (var i = 0; i < l; i++) {\n        result[i] = pred.fp[i] / pred.nNeg;\n    }\n    return result;\n};\n\n// True positive rate\nexports.tpr = pred => {\n    const l = pred.cutoffs.length;\n    const result = new Array(l);\n    for (var i = 0; i < l; i++) {\n        result[i] = pred.tp[i] / pred.nPos;\n    }\n    return result;\n};\n\n// False negative rate\nexports.fnr = pred => {\n    const l = pred.cutoffs.length;\n    const result = new Array(l);\n    for (var i = 0; i < l; i++) {\n        result[i] = pred.fn[i] / pred.nPos;\n    }\n    return result;\n};\n\n// True negative rate\nexports.tnr = pred => {\n    const l = pred.cutoffs.length;\n    const result = new Array(l);\n    for (var i = 0; i < l; i++) {\n        result[i] = pred.tn[i] / pred.nNeg;\n    }\n    return result;\n};\n\n// Positive predictive value\nexports.ppv = pred => {\n    const l = pred.cutoffs.length;\n    const result = new Array(l);\n    for (var i = 0; i < l; i++) {\n        result[i] = (pred.fp[i] + pred.tp[i] !== 0) ? (pred.tp[i] / (pred.fp[i] + pred.tp[i])) : 0;\n    }\n    return result;\n};\n\n// Negative predictive value\nexports.npv = pred => {\n    const l = pred.cutoffs.length;\n    const result = new Array(l);\n    for (var i = 0; i < l; i++) {\n        result[i] = (pred.fn[i] + pred.tn[i] !== 0) ? (pred.tn[i] / (pred.fn[i] + pred.tn[i])) : 0;\n    }\n    return result;\n};\n\n// Prediction conditioned fallout\nexports.pcfall = pred => {\n    const l = pred.cutoffs.length;\n    const result = new Array(l);\n    for (var i = 0; i < l; i++) {\n        result[i] = (pred.fp[i] + pred.tp[i] !== 0) ? 1 - (pred.tp[i] / (pred.fp[i] + pred.tp[i])) : 1;\n    }\n    return result;\n};\n\n// Prediction conditioned miss\nexports.pcmiss = pred => {\n    const l = pred.cutoffs.length;\n    const result = new Array(l);\n    for (var i = 0; i < l; i++) {\n        result[i] = (pred.fn[i] + pred.tn[i] !== 0) ? 1 - (pred.tn[i] / (pred.fn[i] + pred.tn[i])) : 1;\n    }\n    return result;\n};\n\n// Lift value\nexports.lift = pred => {\n    const l = pred.cutoffs.length;\n    const result = new Array(l);\n    for (var i = 0; i < l; i++) {\n        result[i] = (pred.nPosPred[i] !== 0) ? ((pred.tp[i] / pred.nPos) / (pred.nPosPred[i] / pred.nSamples)) : 0;\n    }\n    return result;\n};\n\n// Rate of positive predictions\nexports.rpp = pred => {\n    const l = pred.cutoffs.length;\n    const result = new Array(l);\n    for (var i = 0; i < l; i++) {\n        result[i] = pred.nPosPred[i] / pred.nSamples;\n    }\n    return result;\n};\n\n// Rate of negative predictions\nexports.rnp = pred => {\n    const l = pred.cutoffs.length;\n    const result = new Array(l);\n    for (var i = 0; i < l; i++) {\n        result[i] = pred.nNegPred[i] / pred.nSamples;\n    }\n    return result;\n};\n\n// Threshold\nexports.threshold = pred => {\n    const clone = pred.cutoffs.slice();\n    clone[0] = clone[1]; // Remove the infinite value\n    return clone;\n};\n","'use strict';\n\nconst measures = require('./measures');\n\nclass Performance {\n    /**\n     *\n     * @param prediction - The prediction matrix\n     * @param target - The target matrix (values: truthy for same class, falsy for different class)\n     * @param options\n     *\n     * @option    all    True if the entire matrix must be used. False to ignore the diagonal and lower part (default is false, for similarity/distance matrices)\n     * @option    max    True if the max value corresponds to a perfect match (like in similarity matrices), false if it is the min value (default is false, like in distance matrices. All values will be multiplied by -1)\n     */\n    constructor(prediction, target, options) {\n        options = options || {};\n        if (prediction.length !== target.length || prediction[0].length !== target[0].length) {\n            throw new Error('dimensions of prediction and target do not match');\n        }\n        const rows = prediction.length;\n        const columns = prediction[0].length;\n        const isDistance = !options.max;\n\n        const predP = [];\n\n        if (options.all) {\n            for (var i = 0; i < rows; i++) {\n                for (var j = 0; j < columns; j++) {\n                    predP.push({\n                        pred: prediction[i][j],\n                        targ: target[i][j]\n                    });\n                }\n            }\n        } else {\n            if (rows < 3 || rows !== columns) {\n                throw new Error('When \"all\" option is false, the prediction matrix must be square and have at least 3 columns');\n            }\n            for (var i = 0; i < rows - 1; i++) {\n                for (var j = i + 1; j < columns; j++) {\n                    predP.push({\n                        pred: prediction[i][j],\n                        targ: target[i][j]\n                    });\n                }\n            }\n        }\n\n        if (isDistance) {\n            predP.sort((a, b) => a.pred - b.pred);\n        } else {\n            predP.sort((a, b) => b.pred - a.pred);\n        }\n        \n        const cutoffs = this.cutoffs = [isDistance ? Number.MIN_VALUE : Number.MAX_VALUE];\n        const fp = this.fp = [0];\n        const tp = this.tp = [0];\n\n        var nPos = 0;\n        var nNeg = 0;\n\n        var currentPred = predP[0].pred;\n        var nTp = 0;\n        var nFp = 0;\n        for (var i = 0; i < predP.length; i++) {\n            if (predP[i].pred !== currentPred) {\n                cutoffs.push(currentPred);\n                fp.push(nFp);\n                tp.push(nTp);\n                currentPred = predP[i].pred;\n            }\n            if (predP[i].targ) {\n                nPos++;\n                nTp++;\n            } else {\n                nNeg++;\n                nFp++;\n            }\n        }\n        cutoffs.push(currentPred);\n        fp.push(nFp);\n        tp.push(nTp);\n\n        const l = cutoffs.length;\n        const fn = this.fn = new Array(l);\n        const tn = this.tn = new Array(l);\n        const nPosPred = this.nPosPred = new Array(l);\n        const nNegPred = this.nNegPred = new Array(l);\n\n        for (var i = 0; i < l; i++) {\n            fn[i] = nPos - tp[i];\n            tn[i] = nNeg - fp[i];\n\n            nPosPred[i] = tp[i] + fp[i];\n            nNegPred[i] = tn[i] + fn[i];\n        }\n\n        this.nPos = nPos;\n        this.nNeg = nNeg;\n        this.nSamples = nPos + nNeg;\n    }\n\n    /**\n     * Computes a measure from the prediction object.\n     *\n     * Many measures are available and can be combined :\n     * To create a ROC curve, you need fpr and tpr\n     * To create a DET curve, you need fnr and fpr\n     * To create a Lift chart, you need rpp and lift\n     *\n     * Possible measures are : threshold (Threshold), acc (Accuracy), err (Error rate),\n     * fpr (False positive rate), tpr (True positive rate), fnr (False negative rate), tnr (True negative rate), ppv (Positive predictive value),\n     * npv (Negative predictive value), pcfall (Prediction-conditioned fallout), pcmiss (Prediction-conditioned miss), lift (Lift value), rpp (Rate of positive predictions), rnp (Rate of negative predictions)\n     *\n     * @param measure - The short name of the measure\n     *\n     * @return [number]\n     */\n    getMeasure(measure) {\n        if (typeof measure !== 'string') {\n            throw new Error('No measure specified');\n        }\n        if (!measures[measure]) {\n            throw new Error(`The specified measure (${measure}) does not exist`);\n        }\n        return measures[measure](this);\n    }\n\n    /**\n     * Returns the area under the ROC curve\n     */\n    getAURC() {\n        const l = this.cutoffs.length;\n        const x = new Array(l);\n        const y = new Array(l);\n        for (var i = 0; i < l; i++) {\n            x[i] = this.fp[i] / this.nNeg;\n            y[i] = this.tp[i] / this.nPos;\n        }\n        var auc = 0;\n        for (i = 1; i < l; i++) {\n            auc += 0.5 * (x[i] - x[i - 1]) * (y[i] + y[i - 1]);\n        }\n        return auc;\n    }\n\n    /**\n     * Returns the area under the DET curve\n     */\n    getAUDC() {\n        const l = this.cutoffs.length;\n        const x = new Array(l);\n        const y = new Array(l);\n        for (var i = 0; i < l; i++) {\n            x[i] = this.fn[i] / this.nPos;\n            y[i] = this.fp[i] / this.nNeg;\n        }\n        var auc = 0;\n        for (i = 1; i < l; i++) {\n            auc += 0.5 * (x[i] + x[i - 1]) * (y[i] - y[i - 1]);\n        }\n        return auc;\n    }\n\n    getDistribution(options) {\n        options = options || {};\n        var cutLength = this.cutoffs.length;\n        var cutLow = options.xMin || Math.floor(this.cutoffs[cutLength - 1] * 100) / 100;\n        var cutHigh = options.xMax || Math.ceil(this.cutoffs[1] * 100) / 100;\n        var interval = options.interval || Math.floor(((cutHigh - cutLow) / 20 * 10000000) - 1) / 10000000; // Trick to avoid the precision problem of float numbers\n\n        var xLabels = [];\n        var interValues = [];\n        var intraValues = [];\n        var interCumPercent = [];\n        var intraCumPercent = [];\n\n        var nTP = this.tp[cutLength - 1], currentTP = 0;\n        var nFP = this.fp[cutLength - 1], currentFP = 0;\n\n        for (var i = cutLow, j = (cutLength - 1); i <= cutHigh; i += interval) {\n            while (this.cutoffs[j] < i)\n                j--;\n\n            xLabels.push(i);\n\n            var thisTP = nTP - currentTP - this.tp[j];\n            var thisFP = nFP - currentFP - this.fp[j];\n\n            currentTP += thisTP;\n            currentFP += thisFP;\n\n            interValues.push(thisFP);\n            intraValues.push(thisTP);\n\n            interCumPercent.push(100 - (nFP - this.fp[j]) / nFP * 100);\n            intraCumPercent.push(100 - (nTP - this.tp[j]) / nTP * 100);\n        }\n\n        return {\n            xLabels: xLabels,\n            interValues: interValues,\n            intraValues: intraValues,\n            interCumPercent: interCumPercent,\n            intraCumPercent: intraCumPercent\n        };\n    }\n}\n\nPerformance.names = {\n    acc: 'Accuracy',\n    err: 'Error rate',\n    fpr: 'False positive rate',\n    tpr: 'True positive rate',\n    fnr: 'False negative rate',\n    tnr: 'True negative rate',\n    ppv: 'Positive predictive value',\n    npv: 'Negative predictive value',\n    pcfall: 'Prediction-conditioned fallout',\n    pcmiss: 'Prediction-conditioned miss',\n    lift: 'Lift value',\n    rpp: 'Rate of positive predictions',\n    rnp: 'Rate of negative predictions',\n    threshold: 'Threshold'\n};\n\nmodule.exports = Performance;\n","'use strict';\n\nvar defaultOptions = {\n  size: 1,\n  value: 0\n};\n\n/**\n * Case when the entry is an array\n * @param data\n * @param options\n * @returns {Array}\n */\nfunction arrayCase(data, options) {\n  var len = data.length;\n  if (typeof options.size === 'number') {\n    options.size = [options.size, options.size];\n  }\n\n  var cond = len + options.size[0] + options.size[1];\n\n  var output;\n  if (options.output) {\n    if (options.output.length !== cond) {\n      throw new RangeError('Wrong output size');\n    }\n    output = options.output;\n  } else {\n    output = new Array(cond);\n  }\n\n  var i;\n  if (options.value === 'circular') {\n    for (i = 0; i < cond; i++) {\n      if (i < options.size[0]) {\n        output[i] = data[(len - (options.size[0] % len) + i) % len];\n      } else if (i < options.size[0] + len) {\n        output[i] = data[i - options.size[0]];\n      } else {\n        output[i] = data[(i - options.size[0]) % len];\n      }\n    }\n  } else if (options.value === 'replicate') {\n    for (i = 0; i < cond; i++) {\n      if (i < options.size[0]) output[i] = data[0];\n      else if (i < options.size[0] + len) output[i] = data[i - options.size[0]];\n      else output[i] = data[len - 1];\n    }\n  } else if (options.value === 'symmetric') {\n    if (options.size[0] > len || options.size[1] > len) {\n      throw new RangeError(\n        'expanded value should not be bigger than the data length'\n      );\n    }\n    for (i = 0; i < cond; i++) {\n      if (i < options.size[0]) output[i] = data[options.size[0] - 1 - i];\n      else if (i < options.size[0] + len) output[i] = data[i - options.size[0]];\n      else output[i] = data[2 * len + options.size[0] - i - 1];\n    }\n  } else {\n    for (i = 0; i < cond; i++) {\n      if (i < options.size[0]) output[i] = options.value;\n      else if (i < options.size[0] + len) output[i] = data[i - options.size[0]];\n      else output[i] = options.value;\n    }\n  }\n\n  return output;\n}\n\n/**\n * Case when the entry is a matrix\n * @param data\n * @param options\n * @returns {Array}\n */\nfunction matrixCase(data, options) {\n  // var row = data.length;\n  // var col = data[0].length;\n  if (options.size[0] === undefined) {\n    options.size = [options.size, options.size, options.size, options.size];\n  }\n  throw new Error('matrix not supported yet, sorry');\n}\n\n/**\n * Pads and array\n * @param {Array <number>} data\n * @param {object} options\n */\nfunction padArray(data, options) {\n  options = Object.assign({}, defaultOptions, options);\n  if (Array.isArray(data)) {\n    if (Array.isArray(data[0])) return matrixCase(data, options);\n    else return arrayCase(data, options);\n  } else {\n    throw new TypeError('data should be an array');\n  }\n}\n\nmodule.exports = padArray;\n","'use strict';\n\nconst { Matrix, MatrixTransposeView, inverse } = require('ml-matrix');\nconst padArray = require('ml-pad-array');\n\nconst defaultOptions = {\n  windowSize: 5,\n  derivative: 1,\n  polynomial: 2,\n  pad: 'none',\n  padValue: 'replicate'\n};\n\n/**\n * Savitzky-Golay filter\n * @param {Array <number>} data\n * @param {number} h\n * @param {Object} options\n * @returns {Array}\n */\nfunction SavitzkyGolay(data, h, options) {\n  options = Object.assign({}, defaultOptions, options);\n  if (\n    options.windowSize % 2 === 0 ||\n    options.windowSize < 5 ||\n    !Number.isInteger(options.windowSize)\n  ) {\n    throw new RangeError(\n      'Invalid window size (should be odd and at least 5 integer number)'\n    );\n  }\n  if (options.derivative < 0 || !Number.isInteger(options.derivative)) {\n    throw new RangeError('Derivative should be a positive integer');\n  }\n  if (options.polynomial < 1 || !Number.isInteger(options.polynomial)) {\n    throw new RangeError('Polynomial should be a positive integer');\n  }\n\n  var C, norm;\n  var step = Math.floor(options.windowSize / 2);\n\n  if (options.pad === 'pre') {\n    data = padArray(data, { size: step, value: options.padValue });\n  }\n\n  var ans = new Array(data.length - 2 * step);\n\n  if (\n    options.windowSize === 5 &&\n    options.polynomial === 2 &&\n    (options.derivative === 1 || options.derivative === 2)\n  ) {\n    if (options.derivative === 1) {\n      C = [-2, -1, 0, 1, 2];\n      norm = 10;\n    } else {\n      C = [2, -1, -2, -1, 2];\n      norm = 7;\n    }\n  } else {\n    var J = Matrix.ones(options.windowSize, options.polynomial + 1);\n    var inic = -(options.windowSize - 1) / 2;\n    for (var i = 0; i < J.rows; i++) {\n      for (var j = 0; j < J.columns; j++) {\n        if (inic + 1 !== 0 || j !== 0) J.set(i, j, Math.pow(inic + i, j));\n      }\n    }\n    var Jtranspose = new MatrixTransposeView(J);\n    var Jinv = inverse(Jtranspose.mmul(J));\n    C = Jinv.mmul(Jtranspose);\n    C = C.getRow(options.derivative);\n    norm = 1;\n  }\n  var det = norm * Math.pow(h, options.derivative);\n  for (var k = step; k < data.length - step; k++) {\n    var d = 0;\n    for (var l = 0; l < C.length; l++) d += (C[l] * data[l + k - step]) / det;\n    ans[k - step] = d;\n  }\n\n  if (options.pad === 'post') {\n    ans = padArray(ans, { size: step, value: options.padValue });\n  }\n\n  return ans;\n}\n\nmodule.exports = SavitzkyGolay;\n","// auxiliary file to create the 256 look at table elements\n\nvar ans = new Array(256);\nfor (var i = 0; i < 256; i++) {\n    var num = i;\n    var c = 0;\n    while (num) {\n        num = num & (num - 1);\n        c++;\n    }\n    ans[i] = c;\n}\n\nmodule.exports = ans;","'use strict';\n\nvar eightBits = require('./creator');\n\n/**\n * Count the number of true values in an array\n * @param {Array} arr\n * @return {number}\n */\nfunction count(arr) {\n    var c = 0;\n    for (var i = 0; i < arr.length; i++) {\n        c += eightBits[arr[i] & 0xff] + eightBits[(arr[i] >> 8) & 0xff] + eightBits[(arr[i] >> 16) & 0xff] + eightBits[(arr[i] >> 24) & 0xff];\n    }\n    return c;\n}\n\n/**\n * Logical AND operation\n * @param {Array} arr1\n * @param {Array} arr2\n * @return {Array}\n */\nfunction and(arr1, arr2) {\n    var ans = new Array(arr1.length);\n    for (var i = 0; i < arr1.length; i++)\n        ans[i] = arr1[i] & arr2[i];\n    return ans;\n}\n\n/**\n * Logical OR operation\n * @param {Array} arr1\n * @param {Array} arr2\n * @return {Array}\n */\nfunction or(arr1, arr2) {\n    var ans = new Array(arr1.length);\n    for (var i = 0; i < arr1.length; i++)\n        ans[i] = arr1[i] | arr2[i];\n    return ans;\n}\n\n/**\n * Logical XOR operation\n * @param {Array} arr1\n * @param {Array} arr2\n * @return {Array}\n */\nfunction xor(arr1, arr2) {\n    var ans = new Array(arr1.length);\n    for (var i = 0; i < arr1.length; i++)\n        ans[i] = arr1[i] ^ arr2[i];\n    return ans;\n}\n\n/**\n * Logical NOT operation\n * @param {Array} arr\n * @return {Array}\n */\nfunction not(arr) {\n    var ans = new Array(arr.length);\n    for (var i = 0; i < ans.length; i++)\n        ans[i] = ~arr[i];\n    return ans;\n}\n\n/**\n * Gets the n value of array arr\n * @param {Array} arr\n * @param {number} n\n * @return {boolean}\n */\nfunction getBit(arr, n) {\n    var index = n >> 5; // Same as Math.floor(n/32)\n    var mask = 1 << (31 - n % 32);\n    return Boolean(arr[index] & mask);\n}\n\n/**\n * Sets the n value of array arr to the value val\n * @param {Array} arr\n * @param {number} n\n * @param {boolean} val\n * @return {Array}\n */\nfunction setBit(arr, n, val) {\n    var index = n >> 5; // Same as Math.floor(n/32)\n    var mask = 1 << (31 - n % 32);\n    if (val)\n        arr[index] = mask | arr[index];\n    else\n        arr[index] = ~mask & arr[index];\n    return arr;\n}\n\n/**\n * Translates an array of numbers to a string of bits\n * @param {Array} arr\n * @returns {string}\n */\nfunction toBinaryString(arr) {\n    var str = '';\n    for (var i = 0; i < arr.length; i++) {\n        var obj = (arr[i] >>> 0).toString(2);\n        str += '00000000000000000000000000000000'.substr(obj.length) + obj;\n    }\n    return str;\n}\n\n/**\n * Creates an array of numbers based on a string of bits\n * @param {string} str\n * @returns {Array}\n */\nfunction parseBinaryString(str) {\n    var len = str.length / 32;\n    var ans = new Array(len);\n    for (var i = 0; i < len; i++) {\n        ans[i] = parseInt(str.substr(i*32, 32), 2) | 0;\n    }\n    return ans;\n}\n\n/**\n * Translates an array of numbers to a hex string\n * @param {Array} arr\n * @returns {string}\n */\nfunction toHexString(arr) {\n    var str = '';\n    for (var i = 0; i < arr.length; i++) {\n        var obj = (arr[i] >>> 0).toString(16);\n        str += '00000000'.substr(obj.length) + obj;\n    }\n    return str;\n}\n\n/**\n * Creates an array of numbers based on a hex string\n * @param {string} str\n * @returns {Array}\n */\nfunction parseHexString(str) {\n    var len = str.length / 8;\n    var ans = new Array(len);\n    for (var i = 0; i < len; i++) {\n        ans[i] = parseInt(str.substr(i*8, 8), 16) | 0;\n    }\n    return ans;\n}\n\n/**\n * Creates a human readable string of the array\n * @param {Array} arr\n * @returns {string}\n */\nfunction toDebug(arr) {\n    var binary = toBinaryString(arr);\n    var str = '';\n    for (var i = 0; i < arr.length; i++) {\n        str += '0000'.substr((i * 32).toString(16).length) + (i * 32).toString(16) + ':';\n        for (var j = 0; j < 32; j += 4) {\n            str += ' ' + binary.substr(i * 32 + j, 4);\n        }\n        if (i < arr.length - 1) str += '\\n';\n    }\n    return str\n}\n\nmodule.exports = {\n    count: count,\n    and: and,\n    or: or,\n    xor: xor,\n    not: not,\n    getBit: getBit,\n    setBit: setBit,\n    toBinaryString: toBinaryString,\n    parseBinaryString: parseBinaryString,\n    toHexString: toHexString,\n    parseHexString: parseHexString,\n    toDebug: toDebug\n};\n","import isArray from 'is-any-array';\n\n/**\n * Computes the mode of the given values\n * @param {Array<number>} input\n * @return {number}\n */\n\nfunction mode(input) {\n  if (!isArray(input)) {\n    throw new TypeError('input must be an array');\n  }\n\n  if (input.length === 0) {\n    throw new TypeError('input must not be empty');\n  }\n\n  var maxValue = 0;\n  var maxCount = 0;\n  var count = 0;\n  var counts = {};\n\n  for (var i = 0; i < input.length; ++i) {\n    var element = input[i];\n    count = counts[element];\n\n    if (count) {\n      counts[element]++;\n      count++;\n    } else {\n      counts[element] = count = 1;\n    }\n\n    if (count > maxCount) {\n      maxCount = count;\n      maxValue = input[i];\n    }\n  }\n\n  return maxValue;\n}\n\nexport default mode;\n","/**\n * Computes the norm of the given values\n * @param {Array<number>} input\n * @param {object} [options={}]\n * @param {string} [algorithm='absolute']\n * @return {number}\n */\nfunction norm(input) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var _options$algorithm = options.algorithm,\n      algorithm = _options$algorithm === void 0 ? 'absolute' : _options$algorithm;\n\n  if (!Array.isArray(input)) {\n    throw new Error('input must be an array');\n  }\n\n  if (input.length === 0) {\n    throw new Error('input must not be empty');\n  }\n\n  switch (algorithm.toLowerCase()) {\n    case 'absolute':\n      var sum = absoluteSum(input);\n      if (sum === 0) return input.slice(0);\n      return input.map(function (element) {\n        return element / sum;\n      });\n\n    default:\n      throw new Error(\"norm: unknown algorithm: \".concat(algorithm));\n  }\n}\n\nfunction absoluteSum(input) {\n  var sum = 0;\n\n  for (var i = 0; i < input.length; i++) {\n    sum += Math.abs(input[i]);\n  }\n\n  return sum;\n}\n\nexport default norm;\n","import isArray from 'is-any-array';\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\n/**\n * Fill an array with sequential numbers\n * @param {Array<number>} [input] - optional destination array (if not provided a new array will be created)\n * @param {object} [options={}]\n * @param {number} [options.from=0] - first value in the array\n * @param {number} [options.to=10] - last value in the array\n * @param {number} [options.size=input.length] - size of the array (if not provided calculated from step)\n * @param {number} [options.step] - if not provided calculated from size\n * @return {Array<number>}\n */\n\nfunction sequentialFill() {\n  var input = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (_typeof(input) === 'object' && !isArray(input)) {\n    options = input;\n    input = [];\n  }\n\n  if (!isArray(input)) {\n    throw new TypeError('input must be an array');\n  }\n\n  var _options = options,\n      _options$from = _options.from,\n      from = _options$from === void 0 ? 0 : _options$from,\n      _options$to = _options.to,\n      to = _options$to === void 0 ? 10 : _options$to,\n      _options$size = _options.size,\n      size = _options$size === void 0 ? input.length : _options$size,\n      step = _options.step;\n\n  if (size && step) {\n    throw new Error('step is defined by the array size');\n  }\n\n  if (!size) {\n    if (step) {\n      size = Math.floor((to - from) / step) + 1;\n    } else {\n      size = to - from + 1;\n    }\n  }\n\n  if (!step && size) {\n    step = (to - from) / (size - 1);\n  }\n\n  if (Array.isArray(input)) {\n    input.length = 0; // only works with normal array\n\n    for (var i = 0; i < size; i++) {\n      input.push(from);\n      from += step;\n    }\n  } else {\n    if (input.length !== size) {\n      throw new Error('sequentialFill typed array must have the correct length');\n    }\n\n    for (var _i = 0; _i < size; _i++) {\n      input[_i] = from;\n      from += step;\n    }\n  }\n\n  return input;\n}\n\nexport default sequentialFill;\n","import arrayMean from 'ml-array-mean';\nimport isArray from 'is-any-array';\n\n/**\n * Computes the variance of the given values\n * @param {Array} values\n * @param {object} [options]\n * @param {boolean} [options.unbiased = true] - if true, divide by (n-1); if false, divide by n.\n * @param {number} [options.mean = arrayMean] - precalculated mean, if any.\n * @return {number}\n */\n\nfunction variance(values) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!isArray(values)) {\n    throw new TypeError('input must be an array');\n  }\n\n  var _options$unbiased = options.unbiased,\n      unbiased = _options$unbiased === void 0 ? true : _options$unbiased,\n      _options$mean = options.mean,\n      mean = _options$mean === void 0 ? arrayMean(values) : _options$mean;\n  var sqrError = 0;\n\n  for (var i = 0; i < values.length; i++) {\n    var x = values[i] - mean;\n    sqrError += x * x;\n  }\n\n  if (unbiased) {\n    return sqrError / (values.length - 1);\n  } else {\n    return sqrError / values.length;\n  }\n}\n\nexport default variance;\n","import variance from 'ml-array-variance';\n\n/**\n * Computes the standard deviation of the given values\n * @param {Array} values\n * @param {object} [options]\n * @param {boolean} [options.unbiased = true] - if true, divide by (n-1); if false, divide by n.\n * @param {number} [options.mean = arrayMean] - precalculated mean, if any.\n * @return {number}\n */\n\nfunction standardDeviation(values) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return Math.sqrt(variance(values, options));\n}\n\nexport default standardDeviation;\n","/**\n * Merge abscissa values if the ordinate value is in a list of centroids\n * @param {object} originalPoints\n * @param {Array<number>} originalPoints.x\n * @param {Array<number>} originalPoints.y\n * @param {Array<number>} centroids\n * @param {object} [options]\n * @param {number} [options.window = 0.01] - has to be a positive number\n * @return {{x: Array<number>, y: Array<number>}}\n */\nexport default function mergeByCentroids(\n  originalPoints,\n  centroids,\n  options = {}\n) {\n  const { window = 0.01 } = options;\n\n  var mergedPoints = {\n    x: centroids.slice(),\n    y: new Array(centroids.length).fill(0)\n  };\n\n  var originalIndex = 0;\n  var mergedIndex = 0;\n  while (\n    originalIndex < originalPoints.x.length &&\n    mergedIndex < centroids.length\n  ) {\n    var diff = originalPoints.x[originalIndex] - centroids[mergedIndex];\n    if (Math.abs(diff) < window) {\n      mergedPoints.y[mergedIndex] += originalPoints.y[originalIndex++];\n    } else if (diff < 0) {\n      originalIndex++;\n    } else {\n      mergedIndex++;\n    }\n  }\n\n  return mergedPoints;\n}\n","import binarySearch from 'binary-search';\nimport { ascending, descending } from 'num-sort';\n\n/**\n *\n * @param {object} points\n * @param {Array<number>} originalPoints.x\n * @param {Array<number>} originalPoints.y\n * @param {*} options\n * @return {{x: Array<number>, y: Array<number>}}\n */\nexport default function closestX(points, options) {\n  const { x, y } = points;\n  const { target = x[0], reverse = false } = options;\n\n  let index;\n  if (reverse) {\n    index = binarySearch(x, target, descending);\n  } else {\n    index = binarySearch(x, target, ascending);\n  }\n\n  if (index >= 0) {\n    return {\n      x: x[index],\n      y: y[index]\n    };\n  } else {\n    index = ~index;\n    if (\n      (index !== 0 && Math.abs(x[index] - target) > 0.5) ||\n      index === x.length\n    ) {\n      return {\n        x: x[index - 1],\n        y: y[index - 1]\n      };\n    } else {\n      return {\n        x: x[index],\n        y: y[index]\n      };\n    }\n  }\n}\n","/**\n * Merge abscissas values on similar ordinates and weight the group of abscissas\n * @param {object} points\n * @param {Array<number>} points.x - sorted abscissas values\n * @param {Array<number>} points.y - ordinates values\n * @param {object} [options]\n * @param {number} [options.groupWidth = 0.001] - window for abscissas to merge\n * @return {{x: Array<number>, y: Array<number>}}\n */\nexport default function maxMerge(points, options = {}) {\n  const { x, y } = points;\n  const { groupWidth = 0.001 } = options;\n\n  var merged = { x: [], y: [] };\n  var maxAbscissa = { x: [], y: [] };\n  var size = 0;\n  var index = 0;\n\n  while (index < x.length) {\n    if (size === 0 || x[index] - merged.x[size - 1] > groupWidth) {\n      maxAbscissa.x.push(x[index]);\n      maxAbscissa.y.push(y[index]);\n      merged.x.push(x[index]);\n      merged.y.push(y[index]);\n      index++;\n      size++;\n    } else {\n      if (y[index] > maxAbscissa.y[size - 1]) {\n        maxAbscissa.x[size - 1] = x[index];\n        maxAbscissa.y[size - 1] = y[index];\n      }\n      merged.x[size - 1] = x[index];\n      merged.y[size - 1] += y[index];\n      index++;\n    }\n  }\n\n  merged.x = maxAbscissa.x.slice();\n\n  return merged;\n}\n","import binarySearch from 'binary-search';\nimport { ascending, descending } from 'num-sort';\n\n/**\n * @param {object} points\n * @param {Array<number>} points.x - sorted abscissas values\n * @param {Array<number>} points.y - ordinates values\n * @param {object} [options]\n * @param {object} [options.from = {index: 0}]\n * @param {object} [options.to = {index: x.length-1}]\n * @param {boolean} [options.reverse = false]\n * @return {{index: number, value: number}}\n */\nexport default function maxY(points, options = {}) {\n  const { x, y } = points;\n  let {\n    from = { index: 0 },\n    to = { index: x.length },\n    reverse = false\n  } = options;\n\n  if (from.value !== undefined && from.index === undefined) {\n    from.index = calculateIndex(from.value, x, reverse);\n  }\n\n  if (to.value !== undefined && to.index === undefined) {\n    to.index = calculateIndex(to.value, x, reverse);\n  }\n\n  var currentMax = Number.MIN_VALUE;\n  var currentIndex;\n  for (var i = from.index; i < to.index; i++) {\n    if (currentMax < y[i]) {\n      currentMax = y[i];\n      currentIndex = i;\n    }\n  }\n\n  return {\n    index: currentIndex,\n    value: currentMax\n  };\n}\n\n/**\n * @param {number} value\n * @param {Array<number>} x\n * @param {boolean} reverse\n * @return {number} index of the value in the array\n */\nfunction calculateIndex(value, x, reverse) {\n  let index;\n  if (reverse) {\n    index = binarySearch(x, value, descending);\n  } else {\n    index = binarySearch(x, value, ascending);\n  }\n\n  if (index < 0) {\n    throw new Error(`the value ${value} doesn't belongs to the abscissa value`);\n  }\n\n  return index;\n}\n","export default function sortX(points, options = {}) {\n  const { x, y } = points;\n  const { reverse = false } = options;\n\n  var sortFunc;\n  if (!reverse) {\n    sortFunc = (a, b) => a.x - b.x;\n  } else {\n    sortFunc = (a, b) => b.x - a.x;\n  }\n\n  var grouped = x\n    .map((val, index) => ({\n      x: val,\n      y: y[index]\n    }))\n    .sort(sortFunc);\n\n  var response = { x: x.slice(), y: y.slice() };\n  for (var i = 0; i < x.length; i++) {\n    response.x[i] = grouped[i].x;\n    response.y[i] = grouped[i].y;\n  }\n\n  return response;\n}\n","\n/**\n * In place modification of the 2 arrays to make X unique and sum the Y if X has the same value\n * @param {object} [points={}] : Object of points contains property x (an array) and y (an array)\n * @return points\n */\n\nexport default function uniqueX(points = {}) {\n  const { x, y } = points;\n  if (x.length < 2) return;\n  if (x.length !== y.length) {\n    throw new Error('The X and Y arrays mush have the same length');\n  }\n\n  let current = x[0];\n  let counter = 0;\n\n  for (let i = 1; i < x.length; i++) {\n    if (current !== x[i]) {\n      counter++;\n      current = x[i];\n      x[counter] = x[i];\n      if (i !== counter) {\n        y[counter] = 0;\n      }\n    }\n    if (i !== counter) {\n      y[counter] += y[i];\n    }\n  }\n\n  x.length = counter + 1;\n  y.length = counter + 1;\n}\n","/**\n * Merge abscissas values on similar ordinates and weight the group of abscissas\n * @param {object} points\n * @param {Array<number>} points.x - sorted abscissas values\n * @param {Array<number>} points.y - ordinates values\n * @param {object} [options]\n * @param {number} [options.groupWidth = 0.001] - window for abscissas to merge\n * @return {{x: Array<number>, y: Array<number>}}\n */\nexport default function weightedMerge(points, options = {}) {\n  const { x, y } = points;\n  const { groupWidth = 0.001 } = options;\n\n  var merged = { x: [], y: [] };\n  var weightedAbscissa = { x: [], y: [] };\n  var size = 0;\n  var index = 0;\n\n  while (index < x.length) {\n    if (size === 0 || x[index] - merged.x[size - 1] > groupWidth) {\n      weightedAbscissa.x.push(x[index] * y[index]);\n      weightedAbscissa.y.push(y[index]);\n      merged.x.push(x[index]);\n      merged.y.push(y[index]);\n      index++;\n      size++;\n    } else {\n      weightedAbscissa.x[size - 1] += x[index] * y[index];\n      weightedAbscissa.y[size - 1] += y[index];\n      merged.x[size - 1] = x[index];\n      merged.y[size - 1] += y[index];\n      index++;\n    }\n  }\n\n  for (var i = 0; i < merged.x.length; i++) {\n    merged.x[i] = weightedAbscissa.x[i] / weightedAbscissa.y[i];\n  }\n\n  return merged;\n}\n","/**\n * Function that calculates the integral of the line between two\n * x-coordinates, given the slope and intercept of the line.\n * @param {number} x0\n * @param {number} x1\n * @param {number} slope\n * @param {number} intercept\n * @return {number} integral value.\n */\nexport default function integral(x0, x1, slope, intercept) {\n  return (\n    0.5 * slope * x1 * x1 +\n    intercept * x1 -\n    (0.5 * slope * x0 * x0 + intercept * x0)\n  );\n}\n","import integral from './integral';\n\n/**\n * function that retrieves the getEquallySpacedData with the variant \"smooth\"\n *\n * @param {Array<number>} x\n * @param {Array<number>} y\n * @param {number} from - Initial point\n * @param {number} to - Final point\n * @param {number} numberOfPoints\n * @return {Array} - Array of y's equally spaced with the variant \"smooth\"\n */\nexport default function equallySpacedSmooth(x, y, from, to, numberOfPoints) {\n  var xLength = x.length;\n\n  var step = (to - from) / (numberOfPoints - 1);\n  var halfStep = step / 2;\n\n  var output = new Array(numberOfPoints);\n\n  var initialOriginalStep = x[1] - x[0];\n  var lastOriginalStep = x[xLength - 1] - x[xLength - 2];\n\n  // Init main variables\n  var min = from - halfStep;\n  var max = from + halfStep;\n\n  var previousX = Number.MIN_VALUE;\n  var previousY = 0;\n  var nextX = x[0] - initialOriginalStep;\n  var nextY = 0;\n\n  var currentValue = 0;\n  var slope = 0;\n  var intercept = 0;\n  var sumAtMin = 0;\n  var sumAtMax = 0;\n\n  var i = 0; // index of input\n  var j = 0; // index of output\n\n  function getSlope(x0, y0, x1, y1) {\n    return (y1 - y0) / (x1 - x0);\n  }\n\n  main: while (true) {\n    if (previousX <= min && min <= nextX) {\n      add = integral(0, min - previousX, slope, previousY);\n      sumAtMin = currentValue + add;\n    }\n\n    while (nextX - max >= 0) {\n      // no overlap with original point, just consume current value\n      var add = integral(0, max - previousX, slope, previousY);\n      sumAtMax = currentValue + add;\n\n      output[j++] = (sumAtMax - sumAtMin) / step;\n\n      if (j === numberOfPoints) {\n        break main;\n      }\n\n      min = max;\n      max += step;\n      sumAtMin = sumAtMax;\n    }\n\n    currentValue += integral(previousX, nextX, slope, intercept);\n\n    previousX = nextX;\n    previousY = nextY;\n\n    if (i < xLength) {\n      nextX = x[i];\n      nextY = y[i];\n      i++;\n    } else if (i === xLength) {\n      nextX += lastOriginalStep;\n      nextY = 0;\n    }\n\n    slope = getSlope(previousX, previousY, nextX, nextY);\n    intercept = -slope * previousX + previousY;\n  }\n\n  return output;\n}\n","/**\n * function that retrieves the getEquallySpacedData with the variant \"slot\"\n *\n * @param {Array<number>} x\n * @param {Array<number>} y\n * @param {number} from - Initial point\n * @param {number} to - Final point\n * @param {number} numberOfPoints\n * @return {Array} - Array of y's equally spaced with the variant \"slot\"\n */\nexport default function equallySpacedSlot(x, y, from, to, numberOfPoints) {\n  var xLength = x.length;\n\n  var step = (to - from) / (numberOfPoints - 1);\n  var halfStep = step / 2;\n  var lastStep = x[x.length - 1] - x[x.length - 2];\n\n  var start = from - halfStep;\n  var output = new Array(numberOfPoints);\n\n  // Init main variables\n  var min = start;\n  var max = start + step;\n\n  var previousX = -Number.MAX_VALUE;\n  var previousY = 0;\n  var nextX = x[0];\n  var nextY = y[0];\n  var frontOutsideSpectra = 0;\n  var backOutsideSpectra = true;\n\n  var currentValue = 0;\n\n  // for slot algorithm\n  var currentPoints = 0;\n\n  var i = 1; // index of input\n  var j = 0; // index of output\n\n  main: while (true) {\n    if (previousX >= nextX) throw new Error('x must be an increasing serie');\n    while (previousX - max > 0) {\n      // no overlap with original point, just consume current value\n      if (backOutsideSpectra) {\n        currentPoints++;\n        backOutsideSpectra = false;\n      }\n\n      output[j] = currentPoints <= 0 ? 0 : currentValue / currentPoints;\n      j++;\n\n      if (j === numberOfPoints) {\n        break main;\n      }\n\n      min = max;\n      max += step;\n      currentValue = 0;\n      currentPoints = 0;\n    }\n\n    if (previousX > min) {\n      currentValue += previousY;\n      currentPoints++;\n    }\n\n    if (previousX === -Number.MAX_VALUE || frontOutsideSpectra > 1) {\n      currentPoints--;\n    }\n\n    previousX = nextX;\n    previousY = nextY;\n\n    if (i < xLength) {\n      nextX = x[i];\n      nextY = y[i];\n      i++;\n    } else {\n      nextX += lastStep;\n      nextY = 0;\n      frontOutsideSpectra++;\n    }\n  }\n\n  return output;\n}\n","export default function getZones(from, to, numberOfPoints, exclusions = []) {\n  if (from > to) {\n    [from, to] = [to, from];\n  }\n\n  // in exclusions from and to have to be defined\n  exclusions = exclusions.filter(\n    (exclusion) => exclusion.from !== undefined && exclusion.to !== undefined\n  );\n\n  exclusions = JSON.parse(JSON.stringify(exclusions));\n  // we ensure that from before to\n  exclusions.forEach((exclusion) => {\n    if (exclusion.from > exclusion.to) {\n      [exclusion.to, exclusion.from] = [exclusion.from, exclusion.to];\n    }\n  });\n\n  exclusions.sort((a, b) => a.from - b.from);\n\n  // we will rework the exclusions in order to remove overlap and outside range (from / to)\n  exclusions.forEach((exclusion) => {\n    if (exclusion.from < from) exclusion.from = from;\n    if (exclusion.to > to) exclusion.to = to;\n  });\n  for (let i = 0; i < exclusions.length - 1; i++) {\n    if (exclusions[i].to > exclusions[i + 1].from) {\n      exclusions[i].to = exclusions[i + 1].from;\n    }\n  }\n  exclusions = exclusions.filter((exclusion) => exclusion.from < exclusion.to);\n\n  if (!exclusions || exclusions.length === 0) {\n    return [{ from, to, numberOfPoints }];\n  }\n\n  // need to deal with overlapping exclusions and out of bound exclusions\n\n  let toRemove = exclusions.reduce(\n    (previous, exclusion) => (previous += exclusion.to - exclusion.from),\n    0\n  );\n  let total = to - from;\n  let unitsPerPoint = (total - toRemove) / numberOfPoints;\n  let zones = [];\n  let currentFrom = from;\n  let totalPoints = 0;\n  for (let exclusion of exclusions) {\n    let currentNbPoints = Math.round(\n      (exclusion.from - currentFrom) / unitsPerPoint\n    );\n    totalPoints += currentNbPoints;\n    if (currentNbPoints > 0) {\n      zones.push({\n        from: currentFrom,\n        to: exclusion.from,\n        numberOfPoints: currentNbPoints\n      });\n    }\n\n    currentFrom = exclusion.to;\n  }\n  if (numberOfPoints - totalPoints > 0) {\n    zones.push({\n      from: currentFrom,\n      to: to,\n      numberOfPoints: numberOfPoints - totalPoints\n    });\n  }\n\n  return zones;\n}\n","import sequentialFill from 'ml-array-sequential-fill';\n\nimport equallySpacedSmooth from './equallySpacedSmooth';\nimport equallySpacedSlot from './equallySpacedSlot';\nimport getZones from './getZones';\n\n/**\n * Function that returns a Number array of equally spaced numberOfPoints\n * containing a representation of intensities of the spectra arguments x\n * and y.\n *\n * The options parameter contains an object in the following form:\n * from: starting point\n * to: last point\n * numberOfPoints: number of points between from and to\n * variant: \"slot\" or \"smooth\" - smooth is the default option\n *\n * The slot variant consist that each point in the new array is calculated\n * averaging the existing points between the slot that belongs to the current\n * value. The smooth variant is the same but takes the integral of the range\n * of the slot and divide by the step size between two points in the new array.\n *\n * @param {object} [arrayXY={}] - object containing 2 properties x and y (both an array)\n * @param {object} [options={}]\n * @param {number} [options.from=x[0]]\n * @param {number} [options.to=x[x.length-1]]\n * @param {string} [options.variant='smooth']\n * @param {number} [options.numberOfPoints=100]\n * @param {Array} [options.exclusions=[]] array of from / to that should be skipped for the generation of the points\n * @return {object<x: Array, y:Array>} new object with x / y array with the equally spaced data.\n */\n\nexport default function equallySpaced(arrayXY = {}, options = {}) {\n  let { x, y } = arrayXY;\n  let xLength = x.length;\n  let reverse = false;\n  if (x.length > 1 && x[0] > x[1]) {\n    x = x.slice().reverse();\n    y = y.slice().reverse();\n    reverse = true;\n  }\n\n  let {\n    from = x[0],\n    to = x[xLength - 1],\n    variant = 'smooth',\n    numberOfPoints = 100,\n    exclusions = []\n  } = options;\n\n  if (xLength !== y.length) {\n    throw new RangeError(\"the x and y vector doesn't have the same size.\");\n  }\n\n  if (typeof from !== 'number' || isNaN(from)) {\n    throw new RangeError(\"'from' option must be a number\");\n  }\n\n  if (typeof to !== 'number' || isNaN(to)) {\n    throw new RangeError(\"'to' option must be a number\");\n  }\n\n  if (typeof numberOfPoints !== 'number' || isNaN(numberOfPoints)) {\n    throw new RangeError(\"'numberOfPoints' option must be a number\");\n  }\n\n  let zones = getZones(from, to, numberOfPoints, exclusions);\n\n  let xResult = [];\n  let yResult = [];\n  for (let zone of zones) {\n    let zoneResult = processZone(\n      x,\n      y,\n      zone.from,\n      zone.to,\n      zone.numberOfPoints,\n      variant,\n      reverse\n    );\n    xResult.push(...zoneResult.x);\n    yResult.push(...zoneResult.y);\n  }\n\n  if (reverse) {\n    if (from < to) {\n      return { x: xResult.reverse(), y: yResult.reverse() };\n    } else {\n      return { x: xResult, y: yResult };\n    }\n  } else {\n    if (from < to) {\n      return { x: xResult, y: yResult };\n    } else {\n      return { x: xResult.reverse(), y: yResult.reverse() };\n    }\n  }\n}\n\nfunction processZone(x, y, from, to, numberOfPoints, variant) {\n  if (numberOfPoints < 1) {\n    throw new RangeError('the number of points must be at least 1');\n  }\n\n  var output =\n    variant === 'slot'\n      ? equallySpacedSlot(x, y, from, to, numberOfPoints)\n      : equallySpacedSmooth(x, y, from, to, numberOfPoints);\n\n  return {\n    x: sequentialFill({\n      from,\n      to,\n      size: numberOfPoints\n    }),\n    y: output\n  };\n}\n","export default function getZones(from, to, exclusions = []) {\n  if (from > to) {\n    [from, to] = [to, from];\n  }\n\n  // in exclusions from and to have to be defined\n  exclusions = exclusions.filter(\n    (exclusion) => exclusion.from !== undefined && exclusion.to !== undefined\n  );\n\n  exclusions = JSON.parse(JSON.stringify(exclusions));\n  // we ensure that from before to\n  exclusions.forEach((exclusion) => {\n    if (exclusion.from > exclusion.to) {\n      [exclusion.to, exclusion.from] = [exclusion.from, exclusion.to];\n    }\n  });\n\n  exclusions.sort((a, b) => a.from - b.from);\n\n  // we will rework the exclusions in order to remove overlap and outside range (from / to)\n  exclusions.forEach((exclusion) => {\n    if (exclusion.from < from) exclusion.from = from;\n    if (exclusion.to > to) exclusion.to = to;\n  });\n  for (let i = 0; i < exclusions.length - 1; i++) {\n    if (exclusions[i].to > exclusions[i + 1].from) {\n      exclusions[i].to = exclusions[i + 1].from;\n    }\n  }\n  exclusions = exclusions.filter((exclusion) => exclusion.from < exclusion.to);\n\n  if (!exclusions || exclusions.length === 0) {\n    return [{ from, to }];\n  }\n\n  let zones = [];\n  let currentFrom = from;\n  for (let exclusion of exclusions) {\n    if (currentFrom < exclusion.from) {\n      zones.push({\n        from: currentFrom,\n        to: exclusion.from\n      });\n    }\n\n    currentFrom = exclusion.to;\n  }\n  if (currentFrom < to) {\n    zones.push({\n      from: currentFrom,\n      to: to\n    });\n  }\n\n  return zones;\n}\n","import getZones from './getZones';\n\n/**\n * Filter an array x/y based on various criteria\n * x points are expected to be sorted\n *\n * @param {object} points\n * @param {object} [options={}]\n * @param {array} [options.from]\n * @param {array} [options.to]\n * @param {array} [options.exclusions=[]]\n * @return {{x: Array<number>, y: Array<number>}}\n */\n\nexport default function filterX(points, options = {}) {\n  const { x, y } = points;\n  const { from = x[0], to = x[x.length - 1], exclusions = [] } = options;\n\n  let zones = getZones(from, to, exclusions);\n\n\n  let currentZoneIndex = 0;\n  let newX = [];\n  let newY = [];\n  let position = 0;\n  while (position < x.length) {\n    if (\n      x[position] <= zones[currentZoneIndex].to &&\n      x[position] >= zones[currentZoneIndex].from\n    ) {\n      newX.push(x[position]);\n      newY.push(y[position]);\n    } else {\n      if (x[position] > zones[currentZoneIndex].to) {\n        currentZoneIndex++;\n        if (!zones[currentZoneIndex]) break;\n      }\n    }\n    position++;\n  }\n\n  return {\n    x: newX,\n    y: newY\n  };\n}\n","import { DecisionTreeClassifier, DecisionTreeRegression } from 'ml-cart';\nimport {\n  RandomForestClassifier,\n  RandomForestRegression\n} from 'ml-random-forest';\n\n// Try to keep this list in the same structure as the README.\n\n// Unsupervised learning\nexport { PCA } from 'ml-pca';\nimport * as HClust from 'ml-hclust';\nexport { HClust };\nexport { default as KMeans } from 'ml-kmeans';\n\n// Supervised learning\nimport * as NaiveBayes from 'ml-naivebayes';\nexport { NaiveBayes };\nexport { default as KNN } from 'ml-knn';\nexport { PLS, KOPLS } from 'ml-pls';\nexport { default as CrossValidation } from 'ml-cross-validation';\nexport { default as ConfusionMatrix } from 'ml-confusion-matrix';\nexport { DecisionTreeClassifier };\nexport { RandomForestClassifier };\n\n// Artificial neural networks\nexport { default as FNN } from 'ml-fnn';\nexport { default as SOM } from 'ml-som';\n\n// Regression\nexport {\n  SimpleLinearRegression,\n  PolynomialRegression,\n  MultivariateLinearRegression,\n  PowerRegression,\n  ExponentialRegression,\n  TheilSenRegression,\n  RobustPolynomialRegression\n} from 'ml-regression';\nexport { DecisionTreeRegression };\nexport { RandomForestRegression };\n\n// Optimization\nexport { default as levenbergMarquardt } from 'ml-levenberg-marquardt';\nimport * as FCNNLS from 'ml-fcnnls';\nexport { FCNNLS };\n\n// Math\nimport * as MatrixLib from 'ml-matrix';\nconst {\n  Matrix,\n  SVD,\n  EVD,\n  CholeskyDecomposition,\n  LuDecomposition,\n  QrDecomposition\n} = MatrixLib;\nexport {\n  MatrixLib,\n  Matrix,\n  SVD,\n  EVD,\n  CholeskyDecomposition,\n  LuDecomposition,\n  QrDecomposition\n};\n\nexport { SparseMatrix } from 'ml-sparse-matrix';\nexport { default as Kernel } from 'ml-kernel';\nimport { distance, similarity } from 'ml-distance';\nexport { distance as Distance, similarity as Similarity };\nexport { default as distanceMatrix } from 'ml-distance-matrix';\nexport { default as XSadd } from 'ml-xsadd';\n\n// Statistics\nexport { default as Performance } from 'ml-performance';\n\n// Data preprocessing\nexport { default as savitzkyGolay } from 'ml-savitzky-golay';\n\n// Utility\nexport { default as BitArray } from 'ml-bit-array';\nexport { default as HashTable } from 'ml-hash-table';\nexport { default as padArray } from 'ml-pad-array';\nexport { default as binarySearch } from 'binary-search';\nimport * as numSort from 'num-sort';\nexport { numSort };\nexport { default as Random } from 'ml-random';\n\nimport min from 'ml-array-min';\nimport max from 'ml-array-max';\nimport median from 'ml-array-median';\nimport mean from 'ml-array-mean';\nimport mode from 'ml-array-mode';\nimport normed from 'ml-array-normed';\nimport rescale from 'ml-array-rescale';\nimport sequentialFill from 'ml-array-sequential-fill';\nimport standardDeviation from 'ml-array-standard-deviation';\nimport variance from 'ml-array-variance';\nexport const Array = {\n  min,\n  max,\n  median,\n  mean,\n  mode,\n  normed,\n  rescale,\n  sequentialFill,\n  standardDeviation,\n  variance\n};\n\nimport centroidsMerge from 'ml-array-xy-centroids-merge';\nimport closestX from 'ml-arrayxy-closestx';\nimport maxMerge from 'ml-array-xy-max-merge';\nimport maxY from 'ml-array-xy-max-y';\nimport sortX from 'ml-array-xy-sort-x';\nimport uniqueX from 'ml-arrayxy-uniquex';\nimport weightedMerge from 'ml-array-xy-weighted-merge';\nimport equallySpaced from 'ml-array-xy-equally-spaced';\nimport filterX from 'ml-array-xy-filter-x';\nexport const ArrayXY = {\n  centroidsMerge,\n  closestX,\n  maxMerge,\n  maxY,\n  sortX,\n  uniqueX,\n  weightedMerge,\n  equallySpaced,\n  filterX\n};\n"],"names":["toString","Object","prototype","isAnyArray","object","call","endsWith","max","input","isArray","TypeError","length","i","min","rescale","options","arguments","undefined","output","Array","currentMin","currentMax","RangeError","_options$min","minValue","autoMinMax","_options$max","maxValue","factor","checkRowIndex","matrix","index","outer","rows","checkColumnIndex","columns","checkRowVector","vector","to1DArray","checkColumnVector","checkIndices","rowIndices","columnIndices","row","checkRowIndices","column","checkColumnIndices","rowOut","some","r","from","columnOut","c","checkRange","startRow","endRow","startColumn","endColumn","checkNumber","newArray","value","array","push","name","sumByRow","sum","j","get","sumByColumn","sumAll","v","productByRow","productByColumn","productAll","varianceByRow","unbiased","mean","cols","variance","sum1","sum2","x","varianceByColumn","varianceAll","size","centerByRow","set","centerByColumn","centerAll","getScaleByRow","scale","Math","pow","sqrt","scaleByRow","getScaleByColumn","scaleByColumn","getScaleAll","divider","scaleAll","inspectMatrix","indent","repeat","indentData","constructor","inspectData","maxRows","maxColumns","maxNumSize","maxI","maxJ","result","line","formatNumber","join","num","numStr","String","padEnd","precise","toPrecision","exponential","toExponential","eIndex","indexOf","e","substring","installMathOperations","AbstractMatrix","Matrix","add","addS","addM","checkMatrix","newMatrix","sub","subS","subM","subtract","subtractS","subtractM","mul","mulS","mulM","multiply","multiplyS","multiplyM","div","divS","divM","divide","divideS","divideM","mod","modS","modM","modulus","modulusS","modulusM","and","andS","andM","or","orS","orM","xor","xorS","xorM","leftShift","leftShiftS","leftShiftM","signPropagatingRightShift","signPropagatingRightShiftS","signPropagatingRightShiftM","rightShift","rightShiftS","rightShiftM","zeroFillRightShift","zeroFillRightShiftS","zeroFillRightShiftM","not","abs","acos","acosh","asin","asinh","atan","atanh","cbrt","ceil","clz32","cos","cosh","exp","expm1","floor","fround","log","log1p","log10","log2","round","sign","sin","sinh","tan","tanh","trunc","arg0","powS","powM","from1DArray","newRows","newColumns","newData","rowVector","columnVector","zeros","ones","fill","rand","random","randInt","Number","isInteger","interval","eye","diag","data","l","matrix1","matrix2","isMatrix","klass","apply","callback","to2DArray","copy","toJSON","isRowVector","isColumnVector","isVector","isSquare","isSymmetric","isEchelonForm","previousColumn","checked","isReducedEchelonForm","k","echelonForm","clone","h","iMax","swapRows","tmp","reducedEchelonForm","m","n","maxRow","p","pivot","Error","setSubMatrix","neg","getRow","getRowVector","setRow","row1","row2","temp","getColumn","getColumnVector","setColumn","swapColumns","column1","column2","addRowVector","subRowVector","mulRowVector","divRowVector","addColumnVector","subColumnVector","mulColumnVector","divColumnVector","mulRow","mulColumn","maxIndex","idx","minIndex","maxRowIndex","minRow","minRowIndex","maxColumn","maxColumnIndex","minColumn","minColumnIndex","norm","type","cumulativeSum","dot","vector2","vector1","mmul","other","Bcolj","Float64Array","s","strassen2x2","a11","b11","a12","b12","a21","b21","a22","b22","m1","m2","m3","m4","m5","m6","m7","c00","c01","c10","c11","strassen3x3","a00","a01","a02","a10","a20","b00","b01","b02","b10","b20","m8","m9","m10","m11","m12","m13","m14","m15","m16","m17","m18","m19","m20","m21","m22","m23","c02","c12","c20","c21","c22","mmulStrassen","y","r1","c1","r2","c2","console","warn","embed","mat","resultat","blockMult","a","b","halfRows","parseInt","halfCols","subMatrix","scaleRows","isFinite","scaleColumns","flipRows","middle","first","last","flipColumns","kroneckerProduct","q","transpose","sortRows","compareFunction","compareNumbers","sort","sortColumns","subMatrixRow","indices","subMatrixColumn","selection","rowIndex","columnIndex","trace","by","product","standardDeviation","center","Symbol","for","randomInt","diagonal","identity","negate","tensorProduct","nRows","nColumns","arrayData","removeRow","splice","addRow","removeColumn","newRow","addColumn","BaseView","MatrixColumnView","MatrixColumnSelectionView","MatrixFlipColumnView","MatrixFlipRowView","MatrixRowView","MatrixRowSelectionView","MatrixSelectionView","MatrixSubView","MatrixTransposeView","WrapperMatrix1D","_calculateIndex","WrapperMatrix2D","wrap","LuDecomposition","lu","pivotVector","pivotSign","t","LUcolj","kmax","LU","isSingular","col","solve","count","X","determinant","lowerTriangularMatrix","upperTriangularMatrix","pivotPermutationVector","hypotenuse","QrDecomposition","qr","rdiag","nrm","QR","Rdiag","isFullRank","orthogonalMatrix","SingularValueDecomposition","computeLeftSingularVectors","computeRightSingularVectors","autoTranspose","wantu","Boolean","wantv","swapped","aux","nu","ni","U","V","work","si","nct","nrt","mrc","pp","eps","EPSILON","kase","alpha","MIN_VALUE","isNaN","ks","f","cs","sn","sp","spm1","epm1","sk","ek","shift","g","iter","Y","threshold","scols","Ls","rightSingularVectors","VL","vrows","urows","VLU","solveForDiagonal","inverse","vcols","ucols","condition","norm2","rank","tol","ii","leftSingularVectors","diagonalMatrix","useSVD","leftHandSide","rightHandSide","d","subMatrix0","subMatrix1","subMatrix2","xrange","exception","range","dependenciesOneRow","error","thresholdValue","thresholdError","returnArray","linearDependencies","results","Abis","svd","pseudoInverse","svdSolution","SVD","covariance","xMatrix","yMatrix","yIsSame","cov","correlation","sdx","sdy","corr","EigenvalueDecomposition","assumeSymmetric","tred2","tql2","H","ort","orthes","hqr2","realEigenvalues","imaginaryEigenvalues","eigenvectorMatrix","hh","dl1","c3","el1","s2","tst1","low","high","nn","exshift","z","w","ra","sa","vr","vi","notlast","cdivres","cdiv","xr","xi","yr","yi","CholeskyDecomposition","dimension","positiveDefinite","L","isPositiveDefinite","B","nipals","scaleScores","maxIterations","terminationCriteria","u","diff","tOld","counter","xResidual","residual","yResidual","betas","toDiscreteDistribution","numberOfClasses","counts","giniImpurity","probabilities","getNumberOfClasses","filter","val","arr","giniGain","splitted","splitsImpurity","splits","currentSplit","squaredError","meanArray","currentElement","regressionError","matrixSplitter","lesserX","greaterX","lesserY","greaterY","zip","ret","gainFunctions","gini","Utils","regression","splitFunctions","TreeNode","kind","gainFunction","splitFunction","minNumSamples","maxDepth","bestSplit","XTranspose","bestGain","Infinity","check","currentFeature","splitValues","featureSplit","currentSplitVal","split","gain","maxGain","splitValue","lesser","greater","calculatePrediction","distribution","train","currentDepth","parentGain","splitColumn","splittedMatrix","left","right","classify","setNodeParameters","node","defaultOptions","DecisionTreeClassifier","model","root","Tree","assign","trainingSet","trainingLabels","predict","toPredict","predictions","load","DecisionTreeRegression","trainingValues","checkFloat","examplesBaggingWithReplacement","trainingValue","seed","engine","Random","autoSeed","Xr","featureBagging","replacement","toRet","usedIndex","Set","has","RandomForestBase","maxFeatures","nEstimators","treeOptions","isClassifier","indexes","useSampleBagging","Estimator","DTClassifier","DTRegression","estimators","map","est","res","values","predictionValues","RandomForestClassifier","baseModel","mode","pop","_ref","module","exports","window","median","quickSelectMedian","slice","selectionMethods","arrayMean","arrayMedian","selectionMethod","RandomForestRegression","PCA","dataset","means","stdevs","S","R","excludedFeatures","isCovarianceMatrix","method","nCompNIPALS","ignoreZeroVariance","_computeFromCovarianceMatrix","_adjust","covarianceMatrix","_computeWithNIPALS","singularValues","eigenvalues","singularValue","nComponents","invert","getExplainedVariance","getCumulativeVariance","explained","getEigenvectors","getEigenvalues","getStandardDeviations","getLoadings","evd","EVD","reverse","dc","NIPALS","squaredEuclidean","euclidean","distanceMatrix","distanceFn","getMatrix","Heap","defaultCmp","heapify","heappop","heappush","heappushpop","heapreplace","insort","nlargest","nsmallest","updateItem","_siftdown","_siftup","lo","hi","cmp","mid","concat","item","lastelt","returnitem","_i","_j","_len","_ref1","_results","_results1","pos","elem","los","startpos","newitem","parent","parentpos","childpos","endpos","rightpos","replace","pushpop","nodes","peek","contains","clear","empty","heap","toArray","insert","top","front","factory","this","require$$0","Cluster","children","height","isLeaf","cut","list","ans","group","groups","forEach","child","traverse","cb","visit","cluster","singleLink","dKI","dKJ","completeLink","averageLink","dIJ","nj","ai","aj","weightedAverageLink","centroidLink","medianLink","wardLink","nk","wardLink2","agnes","distanceFunction","isDistanceMatrix","updateFunc","getDistanceMatrix","numLeaves","toLowerCase","clusters","distance","getSmallestDistance","cluster1","cluster2","newCluster","newClusters","newDistanceMatrix","previous","newIndex","getPreviousIndex","prevI","prevICluster","smallest","smallestI","smallestJ","prev1","prev2","nearestVector","listVectors","similarityFunction","vectorIndex","maxSim","sim","minDist","MAX_VALUE","dist","calculateDistanceMatrix","updateClusterID","centers","clusterID","updateCenters","prevCenters","K","nDim","centersLen","dim","id","hasConverged","oldCenters","tolerance","LOOP","FLOAT_MUL","sh1","sh2","sh3","multiply_uint32","nlo","nhi","XSadd","Date","now","state","Uint32Array","init","getFloat","bind","getUint32","nextState","periodCertification","PROB_TOLERANCE","randomChoice","valuesArr","cumSum","getArray","randomIndex","seedOrRandom","xsadd","XSAdd","randomGenerator","choice","randomSample","mostDistant","maxDist","minDistCent","kmeanspp","nSamples","localTrials","firstCenterIdx","closestDistSquared","cumSumClosestDistSquared","candidateIdx","candidates","distanceToCandidates","euclideanDistances","bestCandidate","bestPot","bestDistSquared","newDistSquared","newPot","A","distanceSymbol","KMeansResult","centroids","converged","iterations","nearest","centroid","computeInformation","enrichedCentroids","withIterations","initialization","step","newCenters","kmeansGenerator","stepNumber","stepResult","kmeans","separateClasses","features","classes","totalPerClasses","separatedClasses","currentIndex","GaussianNB","reload","calculateProbabilities","C1","PI","std","logPriorProbability","currentStd","getCurrentClass","modelName","currentCase","maxProbability","predictedClass","currentProbability","calculateLogProbability","C2","MultinomialNB","conditionalProbability","priorProbability","separateClass","classValues","total","divisor","matrixLog","Node","obj","KDTree","points","metric","dimensions","restoreParent","buildTree","toJSONImpl","point","maxNodes","maxDistance","bestNodes","BinaryHeap","nearestSearch","ownDistance","linearPoint","bestChild","linearDistance","otherChild","saveNode","content","src","dest","depth","scoreFunction","element","bubbleUp","end","sinkDown","parentN","elemScore","child2N","child1N","swap","child1","child1Score","child2","child2Score","KNN","labels","kdTree","isEuclidean","euclideanDistance","getSinglePrediction","knn","nearestPoints","pointsPerClass","maxPoints","lastElement","currentClass","currentPoints","pow2array","initializeMatrices","PLS","meanX","stdDevX","meanY","stdDevY","PBQ","R2X","scaleMethod","latentVectors","rx","cx","ry","cy","ssqXcal","sumOfSquaresY","T","P","Q","W","transposeX","transposeY","tIndex","maxSumColIndex","uIndex","t1","den","pnorm","ssqYcal","E","F","KOPLS","YLoadingMat","SigmaPow","YScoreMat","predScoreMat","YOrthLoadingVec","YOrthEigen","YOrthScoreMat","toNorm","TURegressionCoeff","kernelX","kernel","orthogonalComp","predictiveComp","predictiveComponents","orthogonalComponents","compute","Identity","Sigma","YOrthScoreNorm","TpiPrime","CoTemp","SoTemp","toiPrime","ITo","lastScoreMat","lastTpPrime","KTestTrain","YOrthScoreVector","scoreMatPrime","p1","p2","p3","prediction","predYOrthVectors","ConfusionMatrix","fromLabels","actual","predicted","distinctLabels","actualIdx","predictedIdx","getLabels","getTotalCount","getTrueCount","getFalseCount","getTruePositiveCount","label","getIndex","getTrueNegativeCount","getFalsePositiveCount","getFalseNegativeCount","getPositiveCount","getNegativeCount","getTruePositiveRate","getTrueNegativeRate","getPositivePredictiveValue","TP","getNegativePredictiveValue","TN","getFalseNegativeRate","getFalsePositiveRate","getFalseDiscoveryRate","FP","getFalseOmissionRate","FN","getF1Score","getMatthewsCorrelationCoefficient","getInformedness","getMarkedness","getConfusionTable","getAccuracy","correct","incorrect","getCount","actualIndex","predictedIndex","accuracy","M","N","twiddle","CV","leaveOneOut","Classifier","classifierOptions","leavePOut","distinct","getDistinct","confusionMatrix","initMatrix","gen","combinations","allIdx","testIdx","trainIdx","validateWithCallback","validate","kFold","current","folds","randi","testFeatures","trainFeatures","testLabels","trainLabels","getTrainTest","classifier","predictedLabels","updateConfusionMatrix","logistic","expELU","param","softExponential","softExponentialPrime","ACTIVATION_FUNCTIONS","activation","derivate","arctan","softsign","relu","softplus","bent","sinusoid","sinc","gaussian","Layer","inputSize","outputSize","regularization","epsilon","activationParam","selectedFunction","params","actFunction","derFunction","activationFunction","mlMatrix","forward","backpropagation","delta","dW","db","aCopy","update","OutputLayer","FeedForwardNeuralNetworks","hiddenLayers","learningRate","dicts","layers","keys","buildNetwork","dictOutputs","inputs","propagate","outputs","NodeSquare","weights","som","neighbors","adjustWeights","target","influence","getDistance","otherNode","getDistanceTorus","distX","distY","gridDim","getNeighbors","xy","torus","getPos","bestNeighbor","direction","dist1","dist2","simA","simB","getPosition","NodeHexagonal","hX","getDistanceHexagonal","distZ","fields","randomizer","squareEuclidean","gridType","SOM","hasOwnProperty","numWeights","converters","getConverters","extractor","creator","nodeType","hx","distanceMethod","getMaxDistance","done","times","findBMU","adjust","iterationCount","startLearningRate","mapRadius","algorithmMethod","_initNodes","loadModel","eval","export","exportModel","includeDistance","initNodes","setTraining","convertedSet","numIterations","timeConstant","trainOne","neighbourhoodRadius","trainingSetFactor","getRandomValue","bmu","_findBestMatchingUnit","now2","radiusLimit","xMin","xMax","yMin","yMax","theX","theY","getConvertedNodes","findBestMatchingUnit","candidate","lowest","computePosition","self","_predict","getQuantizationError","fit","getFit","normalizers","denormalizers","getNormalizer","getDenormalizer","minMax","normalizer","denormalizer","zero","one","maybeToPrecision","digits","checkArraySize","BaseRegression","new","toLaTeX","score","y2","xSum","ySum","chi2","rmsd","xSquared","ySquared","xY","PolynomialRegression","degree","powers","coefficients","checkArrayLength","regress","precision","_toFormula","isLaTeX","sup","closeSup","fn","str","charAt","json","pr","FT","SimpleLinearRegression","slope","intercept","computeX","xFactor","absIntercept","operator","slr","numerator","ExponentialRegression","er","yl","linear","PowerRegression","newInputs","latex","xl","MultivariateLinearRegression","statistics","xt","xx","invxx","beta","fittedValues","residuals","ri","reduce","stdError","stdErrorMatrix","stdErrors","tStats","summary","regressionStatistics","standardError","observations","variables","tStat","sigma","GaussianKernel","constant","PolynomialKernel","SigmoidKernel","ANOVAKernel","len","CauchyKernel","ExponentialKernel","HistogramIntersectionKernel","LaplacianKernel","MultiquadraticKernel","RationalQuadraticKernel","kernelType","rbf","polynomial","poly","anova","cauchy","histogram","HistogramKernel","laplacian","multiquadratic","rational","RationalKernel","sigmoid","mlp","Kernel","KernelConstructor","kernelFunction","landmarks","kernelMatrix","TheilSenRegression","theilSen","slopes","medianSlope","cuts","RobustPolynomialRegression","robustPolynomial","_","tuples","getRandomTuples","tuple","calcCoefficients","residualsMedian","half","errorCalculation","parameters","parameterizedFunction","func","gradientFunction","evaluatedData","gradientDifference","paramFunction","auxParams","funcParam","matrixFunction","damping","gradientFunc","matrixFunc","inverseMatrix","levenbergMarquardt","errorTolerance","minValues","maxValues","initialValues","parLen","MAX_SAFE_INTEGER","MIN_SAFE_INTEGER","iteration","parameterValues","parameterError","sortCollectionSet","collection","objectCollection","key","BigInt","sorted","cssls","XtX","XtY","Pset","choXtX","luXtX","sortedPset","sortedEset","cols2Solve","vars","initialisation","Fset","D","setDifference","C","includes","optimality","maxIter","Jset","fullSet","notPset","fcnnls","infeasIndex","Hset","hRowColIdx","negRowColIdx","alphaMin","minIdx","idx2zero","findIndex","newParam","fcnnlsVector","haystack","needle","comparator","assertNumber","number","largestPrime","primeNumbers","ascending","nextPrime","binarySearch","FREE","FULL","REMOVED","defaultInitialCapacity","defaultMinLoadFactor","defaultMaxLoadFactor","HashTable","table","minLoadFactor","maxLoadFactor","freeEntries","lowWaterMark","highWaterMark","initialCapacity","capacity","chooseHighWaterMark","indexOfKey","indexOfInsertion","newCapacity","chooseGrowCapacity","rehash","remove","noRehash","maybeShrinkCapacity","delete","chooseShrinkCapacity","containsKey","hash","decrement","containsValue","indexOfValue","ensureCapacity","minCapacity","oldCapacity","oldTable","oldValues","oldState","newTable","newValues","newState","chooseLowWaterMark","forEachKey","forEachValue","forEachPair","minLoad","maxLoad","SparseMatrix","_init","elements","symmetric","forEachNonZero","bandWidth","isBanded","width","cardinality","v1","v2","getNonZeros","setThreshold","newThreshold","trans","inplaceOperator","inplaceOperatorScalar","inplaceOperatorMatrix","staticOperator","inplaceMethod","staticMethod","operators","fillTemplateFunction","op","methods","mathMethod","template","RegExp","additiveSymmetric","avg","bhattacharyya","canberra","chebyshev","clark","czekanowskiSimilarity","up","down","czekanowskiDistance","dice","q1","q2","divergence","fidelity","gower","harmonicMean","hellinger","innerProduct","intersection","jaccard","jeffreys","jensenDifference","jensenShannon","kdivergence","kulczynski","kullbackLeibler","kumarHassebrook","kumarJohnson","lorentzian","manhattan","matusita","minkowski","motyka","neyman","pearson","probabilisticSymmetric","ruzicka","soergel","sorensen","squared","squaredChord","taneja","tanimoto","bitvector","inter","union","tanimotoS","topsoe","waveHedges","createTree","spectrum","minWindow","to","mainCreateTree","start","getSimilarity","gamma","treeSimilarity","getFunction","cosine","diceD","intersectionD","jaccardD","kulczynskiD","motykaD","avgA","avgB","newA","newB","squaredChordD","pred","cutoffs","tn","tp","fp","nNeg","nPos","nPosPred","nNegPred","Performance","isDistance","predP","all","targ","currentPred","nTp","nFp","getMeasure","measure","measures","getAURC","auc","getAUDC","getDistribution","cutLength","cutLow","cutHigh","xLabels","interValues","intraValues","interCumPercent","intraCumPercent","nTP","currentTP","nFP","currentFP","thisTP","thisFP","names","acc","err","fpr","tpr","fnr","tnr","ppv","npv","pcfall","pcmiss","lift","rpp","rnp","arrayCase","cond","matrixCase","padArray","windowSize","derivative","pad","padValue","SavitzkyGolay","J","inic","Jtranspose","Jinv","det","eightBits","arr1","arr2","getBit","mask","setBit","toBinaryString","substr","parseBinaryString","toHexString","parseHexString","toDebug","binary","maxCount","_options$algorithm","algorithm","absoluteSum","_typeof","iterator","sequentialFill","_options","_options$from","_options$to","_options$size","_options$unbiased","_options$mean","sqrError","mergeByCentroids","originalPoints","mergedPoints","originalIndex","mergedIndex","closestX","descending","maxMerge","groupWidth","merged","maxAbscissa","maxY","calculateIndex","sortX","sortFunc","grouped","response","uniqueX","weightedMerge","weightedAbscissa","integral","x0","x1","equallySpacedSmooth","numberOfPoints","xLength","halfStep","initialOriginalStep","lastOriginalStep","previousX","previousY","nextX","nextY","currentValue","sumAtMin","sumAtMax","getSlope","y0","y1","main","equallySpacedSlot","lastStep","frontOutsideSpectra","backOutsideSpectra","getZones","exclusions","exclusion","JSON","parse","stringify","toRemove","unitsPerPoint","zones","currentFrom","totalPoints","currentNbPoints","equallySpaced","arrayXY","variant","xResult","yResult","zone","zoneResult","processZone","filterX","currentZoneIndex","newX","newY","position","MatrixLib","normed","ArrayXY","centroidsMerge"],"mappings":"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"}
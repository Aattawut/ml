{"version":3,"sources":["webpack://ML/webpack/universalModuleDefinition","webpack://ML/webpack/bootstrap","webpack://ML/./node_modules/ml-matrix/src/dc/lu.js","webpack://ML/./node_modules/ml-matrix/src/dc/util.js","webpack://ML/./node_modules/ml-matrix/src/dc/svd.js","webpack://ML/./node_modules/ml-matrix/src/util.js","webpack://ML/./node_modules/ml-matrix/src/views/base.js","webpack://ML/./node_modules/ml-matrix/src/views/transpose.js","webpack://ML/./node_modules/ml-matrix/src/views/row.js","webpack://ML/./node_modules/ml-matrix/src/views/sub.js","webpack://ML/./node_modules/ml-matrix/src/views/selection.js","webpack://ML/./node_modules/ml-matrix/src/views/rowSelection.js","webpack://ML/./node_modules/ml-matrix/src/views/columnSelection.js","webpack://ML/./node_modules/ml-matrix/src/views/column.js","webpack://ML/./node_modules/ml-matrix/src/views/flipRow.js","webpack://ML/./node_modules/ml-matrix/src/views/flipColumn.js","webpack://ML/./node_modules/ml-matrix/src/abstractMatrix.js","webpack://ML/./node_modules/ml-matrix/src/matrix.js","webpack://ML/./node_modules/ml-matrix/src/wrap/WrapperMatrix1D.js","webpack://ML/./node_modules/ml-matrix/src/wrap/WrapperMatrix2D.js","webpack://ML/./node_modules/ml-matrix/src/wrap/wrap.js","webpack://ML/./node_modules/ml-matrix/src/dc/qr.js","webpack://ML/./node_modules/ml-matrix/src/decompositions.js","webpack://ML/./node_modules/ml-matrix/src/linearDependencies.js","webpack://ML/./node_modules/ml-matrix/src/dc/evd.js","webpack://ML/./node_modules/ml-matrix/src/dc/cholesky.js","webpack://ML/./node_modules/ml-matrix/src/index.js","webpack://ML/./node_modules/is-any-array/src/index.js","webpack://ML/./node_modules/ml-distance-euclidean/euclidean.js","webpack://ML/./node_modules/ml-stat/index.js","webpack://ML/./node_modules/ml-stat/matrix.js","webpack://ML/./node_modules/ml-array-mean/lib-es6/index.js","webpack://ML/./node_modules/binary-search/index.js","webpack://ML/./node_modules/num-sort/index.js","webpack://ML/./node_modules/ml-cart/src/utils.js","webpack://ML/./node_modules/ml-cart/src/TreeNode.js","webpack://ML/./node_modules/ml-cart/src/DecisionTreeClassifier.js","webpack://ML/./node_modules/ml-cart/src/DecisionTreeRegression.js","webpack://ML/./node_modules/ml-cart/src/index.js","webpack://ML/./node_modules/ml-array-max/lib-es6/index.js","webpack://ML/./node_modules/ml-kernel/src/kernel.js","webpack://ML/./node_modules/ml-random/lib-es6/choice.js","webpack://ML/./node_modules/ml-random/lib-es6/index.js","webpack://ML/./node_modules/random-js/lib/random.js","webpack://ML/./node_modules/ml-array-rescale/lib-es6/index.js","webpack://ML/./node_modules/ml-hash-table/src/HashTable.js","webpack://ML/./node_modules/ml-hclust/src/Cluster.js","webpack://ML/./node_modules/extend/index.js","webpack://ML/./node_modules/ml-array-min/lib-es6/index.js","webpack://ML/./node_modules/ml-array-median/lib-es6/index.js","webpack://ML/./node_modules/ml-xsadd/lib-es6/xsadd.js","webpack://ML/./node_modules/ml-array-sequential-fill/lib-es6/index.js","webpack://ML/./node_modules/ml-array-variance/lib-es6/index.js","webpack://ML/./node_modules/ml-stat/array.js","webpack://ML/./node_modules/ml-hclust/src/ClusterLeaf.js","webpack://ML/./node_modules/ml-distance-matrix/src/index.js","webpack://ML/./node_modules/ml-confusion-matrix/src/index.js","webpack://ML/./node_modules/ml-fnn/src/Layer.js","webpack://ML/./node_modules/ml-fnn/src/utils.js","webpack://ML/./node_modules/ml-fnn/src/activationFunctions.js","webpack://ML/./node_modules/ml-som/src/node-square.js","webpack://ML/./node_modules/ml-distance/src/index.js","webpack://ML/./node_modules/ml-distance/src/similarities/czekanowski.js","webpack://ML/./node_modules/ml-distance/src/distances/dice.js","webpack://ML/./node_modules/ml-distance/src/distances/intersection.js","webpack://ML/./node_modules/ml-distance/src/distances/jaccard.js","webpack://ML/./node_modules/ml-distance/src/distances/kulczynski.js","webpack://ML/./node_modules/ml-distance/src/distances/motyka.js","webpack://ML/./node_modules/ml-distance/src/distances/squaredChord.js","webpack://ML/./node_modules/ml-distance/src/similarities/tanimoto.js","webpack://ML/./node_modules/ml-distance/src/similarities/cosine.js","webpack://ML/./node_modules/ml-pad-array/src/index.js","webpack://ML/./node_modules/ml-regression-base/src/maybeToPrecision.js","webpack://ML/./node_modules/ml-regression-base/src/checkArrayLength.js","webpack://ML/./node_modules/ml-regression-base/src/index.js","webpack://ML/./node_modules/ml-regression-simple-linear/src/index.js","webpack://ML/./node_modules/ml-regression-polynomial/src/index.js","webpack://ML/./node_modules/ml-regression-exponential/src/index.js","webpack://ML/./node_modules/ml-regression-power/src/index.js","webpack://ML/./node_modules/ml-regression-multivariate-linear/src/index.js","webpack://ML/./node_modules/ml-regression/src/regression/potential-regression.js","webpack://ML/./node_modules/ml-regression/src/regression/kernel-ridge-regression.js","webpack://ML/./node_modules/ml-regression/src/regression/poly-fit-regression2d.js","webpack://ML/./node_modules/ml-regression-theil-sen/src/index.js","webpack://ML/./node_modules/ml-regression-robust-polynomial/src/index.js","webpack://ML/./node_modules/ml-regression/src/index.js","webpack://ML/./node_modules/median-quickselect/lib/median-quickselect.min.js","webpack://ML/./src/index.js","webpack://ML/./node_modules/ml-pca/src/pca.js","webpack://ML/./node_modules/ml-hclust/src/index.js","webpack://ML/./node_modules/ml-hclust/src/agnes.js","webpack://ML/./node_modules/heap/index.js","webpack://ML/./node_modules/heap/lib/heap.js","webpack://ML/./node_modules/util/util.js","webpack://ML/./node_modules/process/browser.js","webpack://ML/./node_modules/util/support/isBufferBrowser.js","webpack://ML/./node_modules/util/node_modules/inherits/inherits_browser.js","webpack://ML/./node_modules/ml-hclust/src/diana.js","webpack://ML/./node_modules/ml-svm/src/svm.js","webpack://ML/./node_modules/ml-kernel-gaussian/gaussian-kernel.js","webpack://ML/./node_modules/ml-kernel-polynomial/polynomial-kernel.js","webpack://ML/./node_modules/ml-kernel/src/kernels/anova-kernel.js","webpack://ML/./node_modules/ml-kernel/src/kernels/cauchy-kernel.js","webpack://ML/./node_modules/ml-kernel/src/kernels/exponential-kernel.js","webpack://ML/./node_modules/ml-kernel/src/kernels/histogram-intersection-kernel.js","webpack://ML/./node_modules/ml-kernel/src/kernels/laplacian-kernel.js","webpack://ML/./node_modules/ml-kernel/src/kernels/multiquadratic-kernel.js","webpack://ML/./node_modules/ml-kernel/src/kernels/rational-quadratic-kernel.js","webpack://ML/./node_modules/ml-kernel-sigmoid/sigmoid-kernel.js","webpack://ML/./node_modules/ml-cross-validation/src/index.js","webpack://ML/./node_modules/ml-combinations/lib/index.js","webpack://ML/./node_modules/ml-fnn/src/FeedForwardNeuralNetwork.js","webpack://ML/./node_modules/ml-fnn/src/OutputLayer.js","webpack://ML/./node_modules/ml-som/src/index.js","webpack://ML/./node_modules/ml-som/src/node-hexagonal.js","webpack://ML/./node_modules/ml-sparse-matrix/src/index.js","webpack://ML/./node_modules/new-array/index.js","webpack://ML/./node_modules/ml-hash-table/src/primeFinder.js","webpack://ML/./node_modules/number-is-nan/index.js","webpack://ML/./node_modules/ml-distance/src/distances.js","webpack://ML/./node_modules/ml-distance/src/distances/additiveSymmetric.js","webpack://ML/./node_modules/ml-distance/src/distances/avg.js","webpack://ML/./node_modules/ml-distance/src/distances/bhattacharyya.js","webpack://ML/./node_modules/ml-distance/src/distances/canberra.js","webpack://ML/./node_modules/ml-distance/src/distances/chebyshev.js","webpack://ML/./node_modules/ml-distance/src/distances/clark.js","webpack://ML/./node_modules/ml-distance/src/distances/czekanowski.js","webpack://ML/./node_modules/ml-distance/src/distances/divergence.js","webpack://ML/./node_modules/ml-distance/src/distances/fidelity.js","webpack://ML/./node_modules/ml-distance/src/distances/gower.js","webpack://ML/./node_modules/ml-distance/src/distances/harmonicMean.js","webpack://ML/./node_modules/ml-distance/src/distances/hellinger.js","webpack://ML/./node_modules/ml-distance/src/distances/innerProduct.js","webpack://ML/./node_modules/ml-distance/src/distances/jeffreys.js","webpack://ML/./node_modules/ml-distance/src/distances/jensenDifference.js","webpack://ML/./node_modules/ml-distance/src/distances/jensenShannon.js","webpack://ML/./node_modules/ml-distance/src/distances/kdivergence.js","webpack://ML/./node_modules/ml-distance/src/distances/kullbackLeibler.js","webpack://ML/./node_modules/ml-distance/src/distances/kumarHassebrook.js","webpack://ML/./node_modules/ml-distance/src/distances/kumarJohnson.js","webpack://ML/./node_modules/ml-distance/src/distances/lorentzian.js","webpack://ML/./node_modules/ml-distance/src/distances/manhattan.js","webpack://ML/./node_modules/ml-distance/src/distances/matusita.js","webpack://ML/./node_modules/ml-distance/src/distances/minkowski.js","webpack://ML/./node_modules/ml-distance/src/distances/neyman.js","webpack://ML/./node_modules/ml-distance/src/distances/pearson.js","webpack://ML/./node_modules/ml-distance/src/distances/probabilisticSymmetric.js","webpack://ML/./node_modules/ml-distance/src/distances/ruzicka.js","webpack://ML/./node_modules/ml-distance/src/distances/soergel.js","webpack://ML/./node_modules/ml-distance/src/distances/sorensen.js","webpack://ML/./node_modules/ml-distance/src/distances/squared.js","webpack://ML/./node_modules/ml-distance/src/distances/taneja.js","webpack://ML/./node_modules/ml-distance/src/distances/tanimoto.js","webpack://ML/./node_modules/ml-distance/src/distances/topsoe.js","webpack://ML/./node_modules/ml-tree-similarity/src/index.js","webpack://ML/./node_modules/ml-distance/src/distances/waveHedges.js","webpack://ML/./node_modules/ml-distance/src/similarities.js","webpack://ML/./node_modules/ml-distance/src/similarities/dice.js","webpack://ML/./node_modules/ml-distance/src/similarities/intersection.js","webpack://ML/./node_modules/ml-distance/src/similarities/jaccard.js","webpack://ML/./node_modules/ml-distance/src/similarities/kulczynski.js","webpack://ML/./node_modules/ml-distance/src/similarities/motyka.js","webpack://ML/./node_modules/ml-distance/src/similarities/pearson.js","webpack://ML/./node_modules/ml-distance/src/similarities/squaredChord.js","webpack://ML/./node_modules/ml-performance/src/index.js","webpack://ML/./node_modules/ml-performance/src/measures.js","webpack://ML/./node_modules/ml-savitzky-golay/src/index.js","webpack://ML/./node_modules/ml-savitzky-golay-generalized/src/index.js","webpack://ML/./node_modules/ml-bit-array/src/index.js","webpack://ML/./node_modules/ml-bit-array/src/creator.js","webpack://ML/./node_modules/ml-array-utils/src/index.js","webpack://ML/./node_modules/ml-array-utils/src/ArrayUtils.js","webpack://ML/./node_modules/ml-array-utils/src/getEquallySpaced.js","webpack://ML/./node_modules/ml-array-utils/src/snv.js","webpack://ML/./node_modules/ml-array-mode/lib-es6/index.js","webpack://ML/./node_modules/ml-array-normed/lib-es6/index.js","webpack://ML/./node_modules/ml-array-standard-deviation/lib-es6/index.js","webpack://ML/./node_modules/ml-array-xy-centroids-merge/src/index.js","webpack://ML/./node_modules/ml-arrayxy-closestx/src/index.js","webpack://ML/./node_modules/ml-array-xy-max-merge/src/index.js","webpack://ML/./node_modules/ml-array-xy-max-y/src/index.js","webpack://ML/./node_modules/ml-array-xy-sort-x/src/index.js","webpack://ML/./node_modules/ml-arrayxy-uniquex/src/index.js","webpack://ML/./node_modules/ml-array-xy-weighted-merge/src/index.js","webpack://ML/./node_modules/ml-kmeans/node_modules/ml-distance-euclidean/lib-es6/euclidean.js","webpack://ML/./node_modules/ml-nearest-vector/node_modules/ml-distance-euclidean/lib-es6/euclidean.js","webpack://ML/./node_modules/ml-nearest-vector/lib-es6/index.js","webpack://ML/./node_modules/ml-kmeans/src/utils.js","webpack://ML/./node_modules/ml-kmeans/src/initialization.js","webpack://ML/./node_modules/ml-kmeans/src/KMeansResult.js","webpack://ML/./node_modules/ml-kmeans/src/kmeans.js","webpack://ML/./node_modules/ml-random-forest/src/utils.js","webpack://ML/./node_modules/ml-random-forest/src/RandomForestBase.js","webpack://ML/./node_modules/ml-random-forest/src/RandomForestClassifier.js","webpack://ML/./node_modules/ml-random-forest/src/RandomForestRegression.js","webpack://ML/./node_modules/ml-random-forest/src/index.js","webpack://ML/./node_modules/ml-array-xy-equally-spaced/src/integral.js","webpack://ML/./node_modules/ml-array-xy-equally-spaced/src/equallySpacedSmooth.js","webpack://ML/./node_modules/ml-array-xy-equally-spaced/src/equallySpacedSlot.js","webpack://ML/./node_modules/ml-array-xy-equally-spaced/src/getZones.js","webpack://ML/./node_modules/ml-array-xy-equally-spaced/src/index.js","webpack://ML/./node_modules/ml-naivebayes/src/utils.js","webpack://ML/./node_modules/ml-naivebayes/src/GaussianNB.js","webpack://ML/./node_modules/ml-naivebayes/src/MultinomialNB.js","webpack://ML/./node_modules/ml-naivebayes/src/index.js","webpack://ML/./node_modules/ml-pls/src/utils.js","webpack://ML/./node_modules/ml-pls/src/pls.js","webpack://ML/./node_modules/ml-pls/src/kopls.js","webpack://ML/./node_modules/ml-pls/src/index.js","webpack://ML/./node_modules/ml-levenberg-marquardt/src/errorCalculation.js","webpack://ML/./node_modules/ml-levenberg-marquardt/src/step.js","webpack://ML/./node_modules/ml-levenberg-marquardt/src/index.js","webpack://ML/./node_modules/ml-array-xy-filter-x/src/getZones.js","webpack://ML/./node_modules/ml-array-xy-filter-x/src/index.js","webpack://ML/./node_modules/ml-knn/src/KDTree.js","webpack://ML/./node_modules/ml-knn/src/index.js"],"names":["LuDecomposition","constructor","matrix","WrapperMatrix2D","checkMatrix","lu","clone","rows","columns","pivotVector","Array","pivotSign","i","j","k","p","s","t","v","LUcolj","kmax","get","Math","min","set","abs","LU","isSingular","data","col","solve","value","Matrix","Error","count","X","subMatrixRow","determinant","isSquare","lowerTriangularMatrix","upperTriangularMatrix","pivotPermutationVector","slice","hypotenuse","a","b","r","sqrt","getFilled2DArray","array","SingularValueDecomposition","options","m","n","computeLeftSingularVectors","computeRightSingularVectors","autoTranspose","wantu","Boolean","wantv","swapped","console","warn","transpose","aux","nu","ni","U","V","e","work","si","nct","nrt","max","mrc","pp","iter","eps","Number","EPSILON","kase","alpha","MIN_VALUE","isNaN","ks","f","cs","sn","scale","sp","spm1","epm1","sk","ek","c","shift","g","tmp","Y","threshold","scols","length","Ls","zeros","rightSingularVectors","VL","mmul","vrows","urows","VLU","sum","solveForDiagonal","diag","inverse","vcols","ucols","condition","norm2","rank","tol","ii","diagonal","leftSingularVectors","isMatrix","diagonalMatrix","checkRowIndex","index","outer","RangeError","checkColumnIndex","checkRowVector","vector","to1DArray","checkColumnVector","checkIndices","rowIndices","columnIndices","row","checkRowIndices","column","checkColumnIndices","TypeError","rowOut","some","isArray","from","columnOut","checkRange","startRow","endRow","startColumn","endColumn","arguments","checkNumber","getRange","to","arr","sumByRow","sumByColumn","sumAll","name","BaseView","AbstractMatrix","Symbol","species","MatrixTransposeView","rowIndex","columnIndex","MatrixRowView","MatrixSubView","MatrixSelectionView","indices","MatrixRowSelectionView","MatrixColumnSelectionView","MatrixColumnView","MatrixFlipRowView","MatrixFlipColumnView","superCtor","undefined","Object","from1DArray","newRows","newColumns","newData","newMatrix","rowVector","columnVector","empty","fill","ones","rand","rng","random","randInt","maxValue","floor","eye","l","matrix1","matrix2","result","klass","size","apply","callback","jj","call","to2DArray","copy","isRowVector","isColumnVector","isVector","isSymmetric","isEchelonForm","previousColumn","checked","isReducedEchelonForm","repeat","rowRep","colRep","setSubMatrix","neg","mulS","getRow","getRowVector","setRow","swapRows","row1","row2","temp","getColumn","getColumnVector","setColumn","swapColumns","column1","column2","addRowVector","subRowVector","mulRowVector","divRowVector","addColumnVector","subColumnVector","mulColumnVector","divColumnVector","mulRow","mulColumn","maxIndex","idx","minIndex","maxRow","maxRowIndex","minRow","minRowIndex","maxColumn","maxColumnIndex","minColumn","minColumnIndex","by","mean","prod","norm","type","cumulativeSum","dot","vector2","vector1","other","Bcolj","strassen2x2","a11","b11","a12","b12","a21","b21","a22","b22","m1","m2","m3","m4","m5","m6","m7","c00","c01","c10","c11","strassen3x3","a00","a01","a02","a10","a20","b00","b01","b02","b10","b20","m8","m9","m10","m11","m12","m13","m14","m15","m16","m17","m18","m19","m20","m21","m22","m23","c02","c12","c20","c21","c22","mmulStrassen","y","x","r1","c1","r2","c2","embed","mat","cols","resultat","blockMult","halfRows","parseInt","halfCols","subMatrix","add","sub","scaleRows","scaled","rescale","scaleColumns","kroneckerProduct","q","sortRows","compareFunction","compareNumbers","sort","sortColumns","subMatrixColumn","selection","trace","transposeView","rowView","columnView","flipRowView","flipColumnView","subMatrixView","selectionView","rowSelectionView","columnSelectionView","det","d","subMatrix0","subMatrix1","subMatrix2","pseudoInverse","svdSolution","SvDecomposition","prototype","identity","negate","tensorProduct","inplaceOperator","inplaceOperatorScalar","inplaceOperatorMatrix","staticOperator","inplaceMethod","staticMethod","inplaceMethodWithArgs","staticMethodWithArgs","inplaceMethodWithOneArgScalar","inplaceMethodWithOneArgMatrix","inplaceMethodWithOneArg","staticMethodWithOneArg","operators","eval2","eval","operator","inplaceOp","fillTemplateFunction","op","inplaceOpS","inplaceOpM","staticOp","methods","forEach","mathMethod","push","method","inplaceMeth","staticMeth","methodsWithArgs","methodWithArg","args","inplaceMethWithArgs","staticMethWithArgs","tmplVar","inplaceMethod2","inplaceMethodS","inplaceMethodM","staticMethod2","template","values","replace","RegExp","nRows","nColumns","isInteger","concat","removeRow","splice","addRow","removeColumn","addColumn","WrapperMatrix1D","_calculateIndex","wrap","QrDecomposition","qr","rdiag","nrm","QR","Rdiag","isFullRank","orthogonalMatrix","useSVD","leftHandSide","rightHandSide","xrange","exception","range","dependenciesOneRow","error","thresholdValue","thresholdError","returnArray","linearDependencies","results","Abis","svd","EigenvalueDecomposition","assumeSymmetric","tred2","tql2","H","ort","orthes","hqr2","realEigenvalues","imaginaryEigenvalues","eigenvectorMatrix","h","hh","dl1","c3","el1","s2","tst1","low","high","nn","exshift","z","w","ra","sa","vr","vi","notlast","cdivres","cdiv","xr","xi","yr","yi","CholeskyDecomposition","dimension","positiveDefinite","Lrowj","Lrowk","L","B","toString","isAnyArray","object","endsWith","module","exports","squaredEuclidean","euclidean","squared","require","arrayStat","Infinity","minMax","entropy","l1","l2","log","theMean","N","theSum","product","theProduct","standardDeviation","means","unbiased","vari","variance","sum1","sum2","median","medians","mode","modes","itemCount","itemArray","indexOf","skewness","skew","s3","dev","pow","kurtosis","kurt","s4","standardError","samples","standardDeviations","standardErrors","sqrtN","covariance","scatter","divisor","cov","correlation","scores","zScores","cor","standardize","center","inPlace","resultRow","sourceRow","weightedVariance","weights","weightedMean","weightSum","weightedCovariance","s1","factor","weightedScatter","input","haystack","needle","comparator","mid","cmp","numberIsNan","assertNum","asc","desc","toDiscreteDistribution","numberOfClasses","counts","giniImpurity","probabilities","getNumberOfClasses","filter","val","giniGain","splitted","splitsImpurity","splits","currentSplit","squaredError","meanArray","currentElement","regressionError","matrixSplitter","lesserX","greaterX","lesserY","greaterY","zip","ret","gainFunctions","gini","Utils","regression","splitFunctions","TreeNode","kind","gainFunction","splitFunction","minNumSamples","maxDepth","bestSplit","XTranspose","bestGain","check","currentFeature","splitValues","featureSplit","currentSplitVal","split","gain","maxGain","splitValue","lesser","greater","calculatePrediction","distribution","train","currentDepth","parentGain","splitColumn","splittedMatrix","left","right","classify","setNodeParameters","node","defaultOptions","DecisionTreeClassifier","model","root","Tree","assign","trainingSet","trainingLabels","predict","toPredict","predictions","toJSON","load","DecisionTreeRegression","trainingValues","GaussianKernel","PolynomialKernel","ANOVAKernel","CauchyKernel","ExponentialKernel","HistogramKernel","LaplacianKernel","MultiquadraticKernel","RationalKernel","SigmoidKernel","kernelType","gaussian","rbf","polynomial","poly","anova","cauchy","exponential","histogram","laplacian","multiquadratic","rational","sigmoid","mlp","Kernel","toLowerCase","KernelConstructor","kernelFunction","compute","inputs","landmarks","kernelMatrix","PROB_TOLERANCE","randomChoice","valuesArr","cumSum","getArray","randomIndex","Random","seedOrRandom","xsadd","XSAdd","randomGenerator","choice","randomSample","GLOBAL_KEY","imul","ah","al","bh","bl","stringRepeat","String","pattern","engine","engines","nativeMath","proto","mt19937","Int32Array","refreshData","temper","seedWithArray","source","sourceLength","previous","uses","next","getUseCount","discard","seed","initial","autoSeed","generateEntropyArray","browserCrypto","crypto","getRandomValues","Date","getTime","returnValue","int32","uint32","uint53","uint53Full","int53","int53Full","generate","addend","integer","isPowerOfTwoMinusOne","bitmask","masking","downscaleToLoopCheckedRange","extendedRange","maximum","downscaleToRange","isEvenlyDivisibleByMaxInt32","upscaleWithHighMasking","upscaleToLoopCheckedRange","upscaleWithinU53","highRange","upscaleWithinI53AndLoopCheck","isFinite","realZeroToOneInclusive","realZeroToOneExclusive","real","multiply","multiplier","inclusive","bool","isLeastBitTrue","lessThan","probability","percentage","round","numerator","denominator","toInteger","number","ceil","convertSliceArgument","pick","begin","end","start","finish","returnUndefined","picker","shuffle","downTo","sample","population","sampleSize","tailLength","die","sideCount","dice","dieCount","uuid4","zeroPad","string","zeroCount","DEFAULT_STRING_POOL","pool","charAt","hex","LOWER_HEX_POOL","lowerHex","upperHex","toUpperCase","upper","date","define","output","currentMin","currentMax","_options$min","minValue","autoMinMax","_options$max","newArray","primeFinder","nextPrime","largestPrime","FREE","FULL","REMOVED","defaultInitialCapacity","defaultMinLoadFactor","defaultMaxLoadFactor","HashTable","table","state","minLoadFactor","maxLoadFactor","distinct","freeEntries","lowWaterMark","highWaterMark","initialCapacity","capacity","chooseHighWaterMark","key","indexOfKey","indexOfInsertion","newCapacity","chooseGrowCapacity","rehash","remove","noRehash","maybeShrinkCapacity","delete","chooseShrinkCapacity","containsKey","hash","decrement","containsValue","indexOfValue","ensureCapacity","minCapacity","oldCapacity","oldTable","oldValues","oldState","newTable","newValues","newState","chooseLowWaterMark","element","forEachKey","forEachValue","forEachPair","minLoad","maxLoad","Heap","Cluster","children","distance","cut","list","ans","group","minGroups","heap","first","pop","child","toArray","traverse","cb","visit","hasOwn","hasOwnProperty","toStr","defineProperty","gOPD","getOwnPropertyDescriptor","isPlainObject","obj","hasOwnConstructor","hasIsPrototypeOf","setProperty","target","enumerable","configurable","newValue","writable","getProperty","extend","src","copyIsArray","deep","quickSelectMedian","LOOP","FLOAT_MUL","sh1","sh2","sh3","multiply_uint32","nlo","nhi","XSadd","now","Uint32Array","init","getFloat","bind","getUint32","nextState","periodCertification","_typeof","iterator","sequentialFill","_options","_options$from","_options$to","_options$size","step","_i","_options$unbiased","_options$mean","arrayMean","sqrError","arithmeticMean","geometricMean","mul","logMean","lnsum","grandMean","truncatedMean","percent","alreadySorted","harmonicMean","contraHarmonicMean","half","theVariance","robustMeanAndStdev","stdev","averageDeviations","quartiles","quart","q1","q2","q3","pooledStandardDeviation","pooledVariance","mean1","mean2","weightedStandardDeviation","standardDev","util","ClusterLeaf","inherits","distanceMatrix","distanceFn","map","ConfusionMatrix","labels","fromLabels","actual","predicted","distinctLabels","Set","actualIdx","predictedIdx","getMatrix","getLabels","getTotalCount","getTrueCount","getFalseCount","getTruePositiveCount","label","getIndex","getTrueNegativeCount","getFalsePositiveCount","getFalseNegativeCount","getPositiveCount","getNegativeCount","getTruePositiveRate","getTrueNegativeRate","getPositivePredictiveValue","TP","getNegativePredictiveValue","TN","getFalseNegativeRate","getFalsePositiveRate","getFalseDiscoveryRate","FP","getFalseOmissionRate","FN","getF1Score","getMatthewsCorrelationCoefficient","getInformedness","getMarkedness","getConfusionTable","getAccuracy","correct","incorrect","getCount","actualIndex","predictedIndex","accuracy","total","ACTIVATION_FUNCTIONS","Layer","inputSize","outputSize","regularization","epsilon","activation","activationParam","selectedFunction","params","actFunction","derFunction","derivate","activationFunction","W","forward","backpropagation","delta","dW","db","sumCol","aCopy","update","sumRow","dictOutputs","outputs","logistic","exp","expELU","param","softExponential","softExponentialPrime","tanh","arctan","atan","softsign","relu","softplus","bent","sinusoid","sin","cos","sinc","NodeSquare","som","neighbors","adjustWeights","learningRate","influence","getDistance","otherNode","getDistanceTorus","distX","distY","gridDim","getNeighbors","xy","torus","nodes","getPos","bestNeighbor","direction","dist1","dist2","simA","simB","getPosition","similarity","czekanowskiSimilarity","up","down","intersection","jaccard","p1","p2","kulczynski","motyka","squaredChord","tanimoto","bitvector","inter","union","cosine","arrayCase","len","cond","matrixCase","padArray","maybeToPrecision","digits","toPrecision","checkArraySize","BaseRegression","new","_predict","toLaTeX","score","y2","xSum","ySum","chi2","rmsd","xSquared","ySquared","xY","SimpleLinearRegression","slope","intercept","coefficients","checkArrayLength","regress","computeX","precision","xFactor","absIntercept","json","slr","PolynomialRegression","degree","powers","_toFormula","isLaTeX","sup","closeSup","times","fn","str","pr","F","FT","A","ExponentialRegression","er","yl","linear","PowerRegression","newInputs","xl","MultivariateLinearRegression","statistics","beta","SVD","fittedValues","residuals","addM","ri","reduce","stdError","stdErrorMatrix","stdErrors","tStats","summary","regressionStatistics","observations","variables","tStat","PotentialRegression","M","lambda","kernelOptions","computeCoefficient","KernelRidgeRegression","kernel","K","order","PolynomialFitRegression2D","examples","x1","x2","scaleX1","scaleX2","scaleY","limit","powColVector","qqs","qqs1","power","TheilSenRegression","theilSen","slopes","medianSlope","cuts","RobustPolynomialRegression","robustPolynomial","tuples","getRandomTuples","tuple","calcCoefficients","residual","residualsMedian","pos","counter","NLR","_ref","window","mlCart","mlRandomForest","ML","PCA","HClust","KMeans","SVM","NaiveBayes","KNN","PLS","CrossValidation","RandomForestClassifier","FNN","SOM","Regression","RandomForestRegression","levenbergMarquardt","EVD","SparseMatrix","Distance","Similarity","default","Performance","savitzkyGolay","savitzkyGolayGeneralized","BitArray","binarySearch","numSort","ArrayUtils","MatrixUtil","ArrayStat","MatrixStat","normed","ArrayXY","centroidsMerge","closestX","maxMerge","maxY","sortX","uniqueX","weightedMerge","equallySpaced","filterX","matrixLib","Stat","isCovarianceMatrix","dataset","stdevs","S","_computeFromCovarianceMatrix","useCovarianceMatrix","_adjust","covarianceMatrix","div","singularValues","eigenvalues","nComponents","getExplainedVariance","getCumulativeVariance","explained","getEigenvectors","getEigenvalues","getStandardDeviations","getLoadings","evd","reverse","agnes","diana","simpleLink","cluster1","cluster2","disFun","completeLink","averageLink","centroidLink","dist","wardLink","disFunc","isDistanceMatrix","dis","fdistance","sdistance","toFixed","dmin","clustered","int","diff","indCount","defaultCmp","heapify","heappop","heappush","heappushpop","heapreplace","insort","nlargest","nsmallest","updateItem","_siftdown","_siftup","lo","hi","item","lastelt","returnitem","_j","_len","_ref1","_results","_results1","elem","los","startpos","newitem","parent","parentpos","childpos","endpos","rightpos","pushpop","peek","contains","clear","insert","top","front","has","factory","getOwnPropertyDescriptors","keys","descriptors","formatRegExp","format","isString","objects","inspect","join","JSON","stringify","_","isNull","isObject","deprecate","msg","process","noDeprecation","warned","deprecated","throwDeprecation","traceDeprecation","debugs","debugEnviron","debuglog","isUndefined","env","NODE_DEBUG","test","pid","opts","ctx","seen","stylize","stylizeNoColor","depth","colors","isBoolean","showHidden","_extend","customInspect","stylizeWithColor","formatValue","styles","styleType","style","arrayToHash","recurseTimes","isFunction","primitive","formatPrimitive","visibleKeys","getOwnPropertyNames","isError","formatError","isRegExp","isDate","base","braces","toUTCString","formatArray","formatProperty","reduceToSingleString","simple","isNumber","match","line","substr","numLinesEst","prev","cur","ar","arg","isNullOrUndefined","isSymbol","re","objectToString","isPrimitive","isBuffer","o","pad","months","timestamp","time","getHours","getMinutes","getSeconds","getDate","getMonth","origin","prop","kCustomPromisifiedSymbol","promisify","original","promiseResolve","promiseReject","promise","Promise","resolve","reject","err","setPrototypeOf","getPrototypeOf","defineProperties","custom","callbackifyOnRejected","reason","newReason","callbackify","callbackified","maybeCb","self","then","nextTick","rej","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","setTimeout","clearTimeout","runTimeout","fun","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","drainQueue","timeout","run","Item","title","browser","argv","version","versions","noop","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","readUInt8","create","ctor","super_","TempCtor","y1","splitting","Ci","Cj","ndist","intrDist","tree","ind","clId","rebel","C","sG","spl","fData","sData","stat","maxPasses","maxIterations","alphaTol","whitening","features","_trained","_loaded","D","alphas","b1","b2","passes","Ei","Ej","ai","aj","eta","numChange","_marginOnePrecomputed","newaj","iterations","nX","nY","nAlphas","_supportVectorIdx","predictOne","margin","marginOne","noWhitening","_applyWhitening","supportVectors","svm","whitened","sigma","constant","HistogramIntersectionKernel","RationalQuadraticKernel","E","CV","combinations","leaveOneOut","Classifier","classifierOptions","leavePOut","getDistinct","confusionMatrix","initMatrix","gen","allIdx","testIdx","trainIdx","validateWithCallback","validate","kFold","current","folds","randi","testFeatures","trainFeatures","testLabels","trainLabels","getTrainTest","classifier","predictedLabels","updateConfusionMatrix","global","createCommonjsModule","runtime","Op","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","regeneratorRuntime","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","context","Context","_invoke","makeInvokeMethod","tryCatch","GenStateSuspendedStart","GenStateSuspendedYield","GenStateExecuting","GenStateCompleted","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","Gp","displayName","defineIteratorMethods","isGeneratorFunction","genFun","mark","__proto__","awrap","__await","AsyncIterator","invoke","record","unwrapped","previousPromise","enqueue","callInvokeWithMethodAndArg","async","done","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","return","info","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","skipTempReset","stop","rootEntry","rootRecord","rval","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","thrown","delegateYield","Function","hadRuntime","oldRuntime","runtimeModule","regenerator","_callee","twiddle","_callee$","_context","OutputLayer","FeedForwardNeuralNetworks","hiddenLayers","dicts","layers","buildNetwork","propagate","NodeHexagonal","fields","randomizer","squareEuclidean","gridType","reload","numWeights","converters","getConverters","extractor","creator","nodeType","hx","distanceMethod","maxDistance","getMaxDistance","findBMU","adjust","iterationCount","startLearningRate","mapRadius","algorithmMethod","_initNodes","loadModel","export","exportModel","includeDistance","initNodes","setTraining","convertedSet","numIterations","timeConstant","trainOne","neighbourhoodRadius","trainingValue","trainingSetFactor","getRandomValue","bmu","_findBestMatchingUnit","now2","radiusLimit","xMin","xMax","yMin","yMax","theX","theY","getConvertedNodes","findBestMatchingUnit","candidate","lowest","computePosition","getQuantizationError","fit","getFit","normalizers","denormalizers","getNormalizer","getDenormalizer","normalizer","denormalizer","zero","one","hX","getDistanceHexagonal","distZ","_init","elements","symmetric","forEachNonZero","bandWidth","isBanded","width","cardinality","v1","v2","getNonZeros","setThreshold","newThreshold","trans","sortAsc","primeNumbers","additiveSymmetric","avg","bhattacharyya","canberra","chebyshev","clark","czekanowski","divergence","fidelity","gower","hellinger","innerProduct","jeffreys","jensenDifference","jensenShannon","kdivergence","kullbackLeibler","kumarHassebrook","kumarJohnson","lorentzian","manhattan","matusita","minkowski","neyman","pearson","probabilisticSymmetric","ruzicka","soergel","sorensen","taneja","topsoe","waveHedges","czekanowskiDistance","tanimotoS","createTree","minWindow","gamma","Atree","Btree","calc","diceD","intersectionD","jaccardD","kulczynskiD","motykaD","avgA","avgB","newA","newB","squaredChordD","measures","prediction","isDistance","predP","all","pred","targ","cutoffs","MAX_VALUE","fp","tp","nPos","nNeg","currentPred","nTp","nFp","tn","nPosPred","nNegPred","nSamples","getMeasure","measure","getAURC","auc","getAUDC","getDistribution","cutLength","cutLow","cutHigh","interval","xLabels","interValues","intraValues","interCumPercent","intraCumPercent","nTP","currentTP","nFP","currentFP","thisTP","thisFP","names","acc","fpr","tpr","fnr","tnr","ppv","npv","pcfall","pcmiss","lift","rpp","rnp","windowSize","derivative","padValue","SavitzkyGolay","J","inic","Jtranspose","Jinv","np","fullWeights","hs","constantH","wg1","wg2","d1","d2","getHs","wg","GramPoly","Grampoly","GenFact","gf","Weight","eightBits","and","arr1","arr2","or","xor","not","getBit","mask","setBit","toBinaryString","parseBinaryString","toHexString","parseHexString","toDebug","binary","num","getEquallySpacedData","SNV","coordArrayToPoints","dimensions","pointsArr","point","coordArrayToCoordMatrix","coordinatesArray","points","currentPoint","coordMatrixToCoordArray","coordMatrix","coodinatesArray","resultMatrix","pointsToCoordArray","applyDotProduct","firstVector","secondVector","largestVector","smallestVector","difference","dotProductApplied","coordMatrixToPoints","pointsToCoordMatrix","xLength","variant","numberOfPoints","getEquallySpacedSlot","getEquallySpacedSmooth","halfStep","initialOriginalStep","lastOriginalStep","previousX","previousY","nextX","nextY","currentValue","sumAtMin","sumAtMax","getSlope","x0","y0","main","integral","lastStep","frontOutsideSpectra","backOutsideSpectra","currentPoints","std","maxCount","_options$algorithm","algorithm","absoluteSum","mergeByCentroids","originalPoints","centroids","mergedPoints","originalIndex","mergedIndex","groupWidth","merged","maxAbscissa","calculateIndex","currentIndex","sortFunc","grouped","response","weightedAbscissa","distanceFunction","nearestVector","listVectors","similarityFunction","vectorIndex","maxSim","sim","minDist","findNearestVector","vectorList","calculateDistanceMatrix","updateClusterID","centers","clusterID","updateCenters","prevCenters","nDim","centersLen","dim","id","hasConverged","oldCenters","tolerance","mostDistant","maxDist","minDistCent","kmeanspp","localTrials","firstCenterIdx","closestDistSquared","cumSumClosestDistSquared","candidateIdx","candidates","distanceToCandidates","euclidianDistances","bestCandidate","bestPot","bestDistSquared","newDistSquared","newPot","distanceSymbol","KMeansResult","clusters","converged","nearest","centroid","computeInformation","enrichedCentroids","withIterations","initialization","newCenters","kmeansGenerator","stepNumber","stepResult","kmeans","checkFloat","examplesBaggingWithReplacement","Xr","featureBagging","replacement","toRet","usedIndex","RandomForestBase","maxFeatures","nEstimators","treeOptions","isClassifier","indexes","useSampleBagging","Estimator","DTClassifier","DTRegression","estimators","est","res","predictionValues","baseModel","selectionMethods","arrayMedian","selectionMethod","equallySpacedSmooth","equallySpacedSlot","getZones","exclusions","exclusion","parse","toRemove","unitsPerPoint","zones","currentFrom","totalPoints","currentNbPoints","arrayXY","xResult","yResult","zone","zoneResult","processZone","separateClasses","classes","totalPerClasses","separatedClasses","GaussianNB","calculateProbabilities","C1","PI","logPriorProbability","currentStd","getCurrentClass","modelName","currentCase","maxProbability","predictedClass","currentProbability","calculateLogProbability","C2","MultinomialNB","conditionalProbability","priorProbability","separateClass","classValues","matrixLog","pow2array","featureNormalize","initializeMatrices","meanX","stdDevX","meanY","stdDevY","PBQ","R2X","scaleMethod","latentVectors","rx","cx","ry","cy","ssqXcal","sumOfSquaresY","T","P","Q","transposeX","transposeY","tIndex","maxSumColIndex","mulM","uIndex","t1","u","den","pnorm","ssqYcal","KOPLS","YLoadingMat","SigmaPow","YScoreMat","predScoreMat","YOrthLoadingVec","YOrthEigen","YOrthScoreMat","toNorm","TURegressionCoeff","kernelX","orthogonalComp","predictiveComp","predictiveComponents","orthogonalComponents","Identity","Sigma","YOrthScoreNorm","TpiPrime","CoTemp","SoTemp","toiPrime","ITo","lastScoreMat","lastTpPrime","KTestTrain","YOrthScoreVector","scoreMatPrime","p3","predYOrthVectors","errorCalculation","parameters","parameterizedFunction","func","gradientFunction","evaluatedData","gradientDifference","paramFunction","auxParams","funcParam","matrixFunction","damping","gradientFunc","matrixFunc","inverseMatrix","errorTolerance","minValues","maxValues","initialValues","parLen","MAX_SAFE_INTEGER","MIN_SAFE_INTEGER","iteration","parameterValues","parameterError","currentZoneIndex","newX","newY","position","Node","KDTree","metric","restoreParent","buildTree","toJSONImpl","maxNodes","bestNodes","BinaryHeap","nearestSearch","ownDistance","linearPoint","bestChild","linearDistance","otherChild","saveNode","content","dest","scoreFunction","bubbleUp","sinkDown","parentN","elemScore","child2N","child1N","swap","child1","child1Score","child2","child2Score","kdTree","isEuclidean","euclideanDistance","getSinglePrediction","knn","nearestPoints","pointsPerClass","maxPoints","lastElement","currentClass"],"mappings":"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","file":"ml.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ML\"] = factory();\n\telse\n\t\troot[\"ML\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 43);\n","import { Matrix, WrapperMatrix2D } from '../index';\r\n\r\n/**\r\n * @class LuDecomposition\r\n * @link https://github.com/lutzroeder/Mapack/blob/master/Source/LuDecomposition.cs\r\n * @param {Matrix} matrix\r\n */\r\nexport default class LuDecomposition {\r\n  constructor(matrix) {\r\n    matrix = WrapperMatrix2D.checkMatrix(matrix);\r\n\r\n    var lu = matrix.clone();\r\n    var rows = lu.rows;\r\n    var columns = lu.columns;\r\n    var pivotVector = new Array(rows);\r\n    var pivotSign = 1;\r\n    var i, j, k, p, s, t, v;\r\n    var LUcolj, kmax;\r\n\r\n    for (i = 0; i < rows; i++) {\r\n      pivotVector[i] = i;\r\n    }\r\n\r\n    LUcolj = new Array(rows);\r\n\r\n    for (j = 0; j < columns; j++) {\r\n      for (i = 0; i < rows; i++) {\r\n        LUcolj[i] = lu.get(i, j);\r\n      }\r\n\r\n      for (i = 0; i < rows; i++) {\r\n        kmax = Math.min(i, j);\r\n        s = 0;\r\n        for (k = 0; k < kmax; k++) {\r\n          s += lu.get(i, k) * LUcolj[k];\r\n        }\r\n        LUcolj[i] -= s;\r\n        lu.set(i, j, LUcolj[i]);\r\n      }\r\n\r\n      p = j;\r\n      for (i = j + 1; i < rows; i++) {\r\n        if (Math.abs(LUcolj[i]) > Math.abs(LUcolj[p])) {\r\n          p = i;\r\n        }\r\n      }\r\n\r\n      if (p !== j) {\r\n        for (k = 0; k < columns; k++) {\r\n          t = lu.get(p, k);\r\n          lu.set(p, k, lu.get(j, k));\r\n          lu.set(j, k, t);\r\n        }\r\n\r\n        v = pivotVector[p];\r\n        pivotVector[p] = pivotVector[j];\r\n        pivotVector[j] = v;\r\n\r\n        pivotSign = -pivotSign;\r\n      }\r\n\r\n      if (j < rows && lu.get(j, j) !== 0) {\r\n        for (i = j + 1; i < rows; i++) {\r\n          lu.set(i, j, lu.get(i, j) / lu.get(j, j));\r\n        }\r\n      }\r\n    }\r\n\r\n    this.LU = lu;\r\n    this.pivotVector = pivotVector;\r\n    this.pivotSign = pivotSign;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {boolean}\r\n   */\r\n  isSingular() {\r\n    var data = this.LU;\r\n    var col = data.columns;\r\n    for (var j = 0; j < col; j++) {\r\n      if (data[j][j] === 0) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {Matrix} value\r\n   * @return {Matrix}\r\n   */\r\n  solve(value) {\r\n    value = Matrix.checkMatrix(value);\r\n\r\n    var lu = this.LU;\r\n    var rows = lu.rows;\r\n\r\n    if (rows !== value.rows) {\r\n      throw new Error('Invalid matrix dimensions');\r\n    }\r\n    if (this.isSingular()) {\r\n      throw new Error('LU matrix is singular');\r\n    }\r\n\r\n    var count = value.columns;\r\n    var X = value.subMatrixRow(this.pivotVector, 0, count - 1);\r\n    var columns = lu.columns;\r\n    var i, j, k;\r\n\r\n    for (k = 0; k < columns; k++) {\r\n      for (i = k + 1; i < columns; i++) {\r\n        for (j = 0; j < count; j++) {\r\n          X[i][j] -= X[k][j] * lu[i][k];\r\n        }\r\n      }\r\n    }\r\n    for (k = columns - 1; k >= 0; k--) {\r\n      for (j = 0; j < count; j++) {\r\n        X[k][j] /= lu[k][k];\r\n      }\r\n      for (i = 0; i < k; i++) {\r\n        for (j = 0; j < count; j++) {\r\n          X[i][j] -= X[k][j] * lu[i][k];\r\n        }\r\n      }\r\n    }\r\n    return X;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {number}\r\n   */\r\n  get determinant() {\r\n    var data = this.LU;\r\n    if (!data.isSquare()) {\r\n      throw new Error('Matrix must be square');\r\n    }\r\n    var determinant = this.pivotSign;\r\n    var col = data.columns;\r\n    for (var j = 0; j < col; j++) {\r\n      determinant *= data[j][j];\r\n    }\r\n    return determinant;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {Matrix}\r\n   */\r\n  get lowerTriangularMatrix() {\r\n    var data = this.LU;\r\n    var rows = data.rows;\r\n    var columns = data.columns;\r\n    var X = new Matrix(rows, columns);\r\n    for (var i = 0; i < rows; i++) {\r\n      for (var j = 0; j < columns; j++) {\r\n        if (i > j) {\r\n          X[i][j] = data[i][j];\r\n        } else if (i === j) {\r\n          X[i][j] = 1;\r\n        } else {\r\n          X[i][j] = 0;\r\n        }\r\n      }\r\n    }\r\n    return X;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {Matrix}\r\n   */\r\n  get upperTriangularMatrix() {\r\n    var data = this.LU;\r\n    var rows = data.rows;\r\n    var columns = data.columns;\r\n    var X = new Matrix(rows, columns);\r\n    for (var i = 0; i < rows; i++) {\r\n      for (var j = 0; j < columns; j++) {\r\n        if (i <= j) {\r\n          X[i][j] = data[i][j];\r\n        } else {\r\n          X[i][j] = 0;\r\n        }\r\n      }\r\n    }\r\n    return X;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {Array<number>}\r\n   */\r\n  get pivotPermutationVector() {\r\n    return this.pivotVector.slice();\r\n  }\r\n}\r\n","export function hypotenuse(a, b) {\r\n  var r = 0;\r\n  if (Math.abs(a) > Math.abs(b)) {\r\n    r = b / a;\r\n    return Math.abs(a) * Math.sqrt(1 + r * r);\r\n  }\r\n  if (b !== 0) {\r\n    r = a / b;\r\n    return Math.abs(b) * Math.sqrt(1 + r * r);\r\n  }\r\n  return 0;\r\n}\r\n\r\nexport function getFilled2DArray(rows, columns, value) {\r\n  var array = new Array(rows);\r\n  for (var i = 0; i < rows; i++) {\r\n    array[i] = new Array(columns);\r\n    for (var j = 0; j < columns; j++) {\r\n      array[i][j] = value;\r\n    }\r\n  }\r\n  return array;\r\n}\r\n","import { Matrix, WrapperMatrix2D } from '../index';\r\n\r\nimport { hypotenuse, getFilled2DArray } from './util';\r\n\r\n/**\r\n * @class SingularValueDecomposition\r\n * @see https://github.com/accord-net/framework/blob/development/Sources/Accord.Math/Decompositions/SingularValueDecomposition.cs\r\n * @param {Matrix} value\r\n * @param {object} [options]\r\n * @param {boolean} [options.computeLeftSingularVectors=true]\r\n * @param {boolean} [options.computeRightSingularVectors=true]\r\n * @param {boolean} [options.autoTranspose=false]\r\n */\r\nexport default class SingularValueDecomposition {\r\n  constructor(value, options = {}) {\r\n    value = WrapperMatrix2D.checkMatrix(value);\r\n\r\n    var m = value.rows;\r\n    var n = value.columns;\r\n\r\n    const {\r\n      computeLeftSingularVectors = true,\r\n      computeRightSingularVectors = true,\r\n      autoTranspose = false\r\n    } = options;\r\n\r\n    var wantu = Boolean(computeLeftSingularVectors);\r\n    var wantv = Boolean(computeRightSingularVectors);\r\n\r\n    var swapped = false;\r\n    var a;\r\n    if (m < n) {\r\n      if (!autoTranspose) {\r\n        a = value.clone();\r\n        // eslint-disable-next-line no-console\r\n        console.warn(\r\n          'Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose'\r\n        );\r\n      } else {\r\n        a = value.transpose();\r\n        m = a.rows;\r\n        n = a.columns;\r\n        swapped = true;\r\n        var aux = wantu;\r\n        wantu = wantv;\r\n        wantv = aux;\r\n      }\r\n    } else {\r\n      a = value.clone();\r\n    }\r\n\r\n    var nu = Math.min(m, n);\r\n    var ni = Math.min(m + 1, n);\r\n    var s = new Array(ni);\r\n    var U = getFilled2DArray(m, nu, 0);\r\n    var V = getFilled2DArray(n, n, 0);\r\n\r\n    var e = new Array(n);\r\n    var work = new Array(m);\r\n\r\n    var si = new Array(ni);\r\n    for (let i = 0; i < ni; i++) si[i] = i;\r\n\r\n    var nct = Math.min(m - 1, n);\r\n    var nrt = Math.max(0, Math.min(n - 2, m));\r\n    var mrc = Math.max(nct, nrt);\r\n\r\n    for (let k = 0; k < mrc; k++) {\r\n      if (k < nct) {\r\n        s[k] = 0;\r\n        for (let i = k; i < m; i++) {\r\n          s[k] = hypotenuse(s[k], a[i][k]);\r\n        }\r\n        if (s[k] !== 0) {\r\n          if (a[k][k] < 0) {\r\n            s[k] = -s[k];\r\n          }\r\n          for (let i = k; i < m; i++) {\r\n            a[i][k] /= s[k];\r\n          }\r\n          a[k][k] += 1;\r\n        }\r\n        s[k] = -s[k];\r\n      }\r\n\r\n      for (let j = k + 1; j < n; j++) {\r\n        if (k < nct && s[k] !== 0) {\r\n          let t = 0;\r\n          for (let i = k; i < m; i++) {\r\n            t += a[i][k] * a[i][j];\r\n          }\r\n          t = -t / a[k][k];\r\n          for (let i = k; i < m; i++) {\r\n            a[i][j] += t * a[i][k];\r\n          }\r\n        }\r\n        e[j] = a[k][j];\r\n      }\r\n\r\n      if (wantu && k < nct) {\r\n        for (let i = k; i < m; i++) {\r\n          U[i][k] = a[i][k];\r\n        }\r\n      }\r\n\r\n      if (k < nrt) {\r\n        e[k] = 0;\r\n        for (let i = k + 1; i < n; i++) {\r\n          e[k] = hypotenuse(e[k], e[i]);\r\n        }\r\n        if (e[k] !== 0) {\r\n          if (e[k + 1] < 0) {\r\n            e[k] = 0 - e[k];\r\n          }\r\n          for (let i = k + 1; i < n; i++) {\r\n            e[i] /= e[k];\r\n          }\r\n          e[k + 1] += 1;\r\n        }\r\n        e[k] = -e[k];\r\n        if (k + 1 < m && e[k] !== 0) {\r\n          for (let i = k + 1; i < m; i++) {\r\n            work[i] = 0;\r\n          }\r\n          for (let i = k + 1; i < m; i++) {\r\n            for (let j = k + 1; j < n; j++) {\r\n              work[i] += e[j] * a[i][j];\r\n            }\r\n          }\r\n          for (let j = k + 1; j < n; j++) {\r\n            let t = -e[j] / e[k + 1];\r\n            for (let i = k + 1; i < m; i++) {\r\n              a[i][j] += t * work[i];\r\n            }\r\n          }\r\n        }\r\n        if (wantv) {\r\n          for (let i = k + 1; i < n; i++) {\r\n            V[i][k] = e[i];\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    let p = Math.min(n, m + 1);\r\n    if (nct < n) {\r\n      s[nct] = a[nct][nct];\r\n    }\r\n    if (m < p) {\r\n      s[p - 1] = 0;\r\n    }\r\n    if (nrt + 1 < p) {\r\n      e[nrt] = a[nrt][p - 1];\r\n    }\r\n    e[p - 1] = 0;\r\n\r\n    if (wantu) {\r\n      for (let j = nct; j < nu; j++) {\r\n        for (let i = 0; i < m; i++) {\r\n          U[i][j] = 0;\r\n        }\r\n        U[j][j] = 1;\r\n      }\r\n      for (let k = nct - 1; k >= 0; k--) {\r\n        if (s[k] !== 0) {\r\n          for (let j = k + 1; j < nu; j++) {\r\n            let t = 0;\r\n            for (let i = k; i < m; i++) {\r\n              t += U[i][k] * U[i][j];\r\n            }\r\n            t = -t / U[k][k];\r\n            for (let i = k; i < m; i++) {\r\n              U[i][j] += t * U[i][k];\r\n            }\r\n          }\r\n          for (let i = k; i < m; i++) {\r\n            U[i][k] = -U[i][k];\r\n          }\r\n          U[k][k] = 1 + U[k][k];\r\n          for (let i = 0; i < k - 1; i++) {\r\n            U[i][k] = 0;\r\n          }\r\n        } else {\r\n          for (let i = 0; i < m; i++) {\r\n            U[i][k] = 0;\r\n          }\r\n          U[k][k] = 1;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (wantv) {\r\n      for (let k = n - 1; k >= 0; k--) {\r\n        if (k < nrt && e[k] !== 0) {\r\n          for (let j = k + 1; j < n; j++) {\r\n            let t = 0;\r\n            for (let i = k + 1; i < n; i++) {\r\n              t += V[i][k] * V[i][j];\r\n            }\r\n            t = -t / V[k + 1][k];\r\n            for (let i = k + 1; i < n; i++) {\r\n              V[i][j] += t * V[i][k];\r\n            }\r\n          }\r\n        }\r\n        for (let i = 0; i < n; i++) {\r\n          V[i][k] = 0;\r\n        }\r\n        V[k][k] = 1;\r\n      }\r\n    }\r\n\r\n    var pp = p - 1;\r\n    var iter = 0;\r\n    var eps = Number.EPSILON;\r\n    while (p > 0) {\r\n      let k, kase;\r\n      for (k = p - 2; k >= -1; k--) {\r\n        if (k === -1) {\r\n          break;\r\n        }\r\n        const alpha =\r\n          Number.MIN_VALUE + eps * Math.abs(s[k] + Math.abs(s[k + 1]));\r\n        if (Math.abs(e[k]) <= alpha || Number.isNaN(e[k])) {\r\n          e[k] = 0;\r\n          break;\r\n        }\r\n      }\r\n      if (k === p - 2) {\r\n        kase = 4;\r\n      } else {\r\n        let ks;\r\n        for (ks = p - 1; ks >= k; ks--) {\r\n          if (ks === k) {\r\n            break;\r\n          }\r\n          let t =\r\n            (ks !== p ? Math.abs(e[ks]) : 0) +\r\n            (ks !== k + 1 ? Math.abs(e[ks - 1]) : 0);\r\n          if (Math.abs(s[ks]) <= eps * t) {\r\n            s[ks] = 0;\r\n            break;\r\n          }\r\n        }\r\n        if (ks === k) {\r\n          kase = 3;\r\n        } else if (ks === p - 1) {\r\n          kase = 1;\r\n        } else {\r\n          kase = 2;\r\n          k = ks;\r\n        }\r\n      }\r\n\r\n      k++;\r\n\r\n      switch (kase) {\r\n        case 1: {\r\n          let f = e[p - 2];\r\n          e[p - 2] = 0;\r\n          for (let j = p - 2; j >= k; j--) {\r\n            let t = hypotenuse(s[j], f);\r\n            let cs = s[j] / t;\r\n            let sn = f / t;\r\n            s[j] = t;\r\n            if (j !== k) {\r\n              f = -sn * e[j - 1];\r\n              e[j - 1] = cs * e[j - 1];\r\n            }\r\n            if (wantv) {\r\n              for (let i = 0; i < n; i++) {\r\n                t = cs * V[i][j] + sn * V[i][p - 1];\r\n                V[i][p - 1] = -sn * V[i][j] + cs * V[i][p - 1];\r\n                V[i][j] = t;\r\n              }\r\n            }\r\n          }\r\n          break;\r\n        }\r\n        case 2: {\r\n          let f = e[k - 1];\r\n          e[k - 1] = 0;\r\n          for (let j = k; j < p; j++) {\r\n            let t = hypotenuse(s[j], f);\r\n            let cs = s[j] / t;\r\n            let sn = f / t;\r\n            s[j] = t;\r\n            f = -sn * e[j];\r\n            e[j] = cs * e[j];\r\n            if (wantu) {\r\n              for (let i = 0; i < m; i++) {\r\n                t = cs * U[i][j] + sn * U[i][k - 1];\r\n                U[i][k - 1] = -sn * U[i][j] + cs * U[i][k - 1];\r\n                U[i][j] = t;\r\n              }\r\n            }\r\n          }\r\n          break;\r\n        }\r\n        case 3: {\r\n          const scale = Math.max(\r\n            Math.abs(s[p - 1]),\r\n            Math.abs(s[p - 2]),\r\n            Math.abs(e[p - 2]),\r\n            Math.abs(s[k]),\r\n            Math.abs(e[k])\r\n          );\r\n          const sp = s[p - 1] / scale;\r\n          const spm1 = s[p - 2] / scale;\r\n          const epm1 = e[p - 2] / scale;\r\n          const sk = s[k] / scale;\r\n          const ek = e[k] / scale;\r\n          const b = ((spm1 + sp) * (spm1 - sp) + epm1 * epm1) / 2;\r\n          const c = sp * epm1 * (sp * epm1);\r\n          let shift = 0;\r\n          if (b !== 0 || c !== 0) {\r\n            if (b < 0) {\r\n              shift = 0 - Math.sqrt(b * b + c);\r\n            } else {\r\n              shift = Math.sqrt(b * b + c);\r\n            }\r\n            shift = c / (b + shift);\r\n          }\r\n          let f = (sk + sp) * (sk - sp) + shift;\r\n          let g = sk * ek;\r\n          for (let j = k; j < p - 1; j++) {\r\n            let t = hypotenuse(f, g);\r\n            if (t === 0) t = Number.MIN_VALUE;\r\n            let cs = f / t;\r\n            let sn = g / t;\r\n            if (j !== k) {\r\n              e[j - 1] = t;\r\n            }\r\n            f = cs * s[j] + sn * e[j];\r\n            e[j] = cs * e[j] - sn * s[j];\r\n            g = sn * s[j + 1];\r\n            s[j + 1] = cs * s[j + 1];\r\n            if (wantv) {\r\n              for (let i = 0; i < n; i++) {\r\n                t = cs * V[i][j] + sn * V[i][j + 1];\r\n                V[i][j + 1] = -sn * V[i][j] + cs * V[i][j + 1];\r\n                V[i][j] = t;\r\n              }\r\n            }\r\n            t = hypotenuse(f, g);\r\n            if (t === 0) t = Number.MIN_VALUE;\r\n            cs = f / t;\r\n            sn = g / t;\r\n            s[j] = t;\r\n            f = cs * e[j] + sn * s[j + 1];\r\n            s[j + 1] = -sn * e[j] + cs * s[j + 1];\r\n            g = sn * e[j + 1];\r\n            e[j + 1] = cs * e[j + 1];\r\n            if (wantu && j < m - 1) {\r\n              for (let i = 0; i < m; i++) {\r\n                t = cs * U[i][j] + sn * U[i][j + 1];\r\n                U[i][j + 1] = -sn * U[i][j] + cs * U[i][j + 1];\r\n                U[i][j] = t;\r\n              }\r\n            }\r\n          }\r\n          e[p - 2] = f;\r\n          iter = iter + 1;\r\n          break;\r\n        }\r\n        case 4: {\r\n          if (s[k] <= 0) {\r\n            s[k] = s[k] < 0 ? -s[k] : 0;\r\n            if (wantv) {\r\n              for (let i = 0; i <= pp; i++) {\r\n                V[i][k] = -V[i][k];\r\n              }\r\n            }\r\n          }\r\n          while (k < pp) {\r\n            if (s[k] >= s[k + 1]) {\r\n              break;\r\n            }\r\n            let t = s[k];\r\n            s[k] = s[k + 1];\r\n            s[k + 1] = t;\r\n            if (wantv && k < n - 1) {\r\n              for (let i = 0; i < n; i++) {\r\n                t = V[i][k + 1];\r\n                V[i][k + 1] = V[i][k];\r\n                V[i][k] = t;\r\n              }\r\n            }\r\n            if (wantu && k < m - 1) {\r\n              for (let i = 0; i < m; i++) {\r\n                t = U[i][k + 1];\r\n                U[i][k + 1] = U[i][k];\r\n                U[i][k] = t;\r\n              }\r\n            }\r\n            k++;\r\n          }\r\n          iter = 0;\r\n          p--;\r\n          break;\r\n        }\r\n        // no default\r\n      }\r\n    }\r\n\r\n    if (swapped) {\r\n      var tmp = V;\r\n      V = U;\r\n      U = tmp;\r\n    }\r\n\r\n    this.m = m;\r\n    this.n = n;\r\n    this.s = s;\r\n    this.U = U;\r\n    this.V = V;\r\n  }\r\n\r\n  /**\r\n   * Solve a problem of least square (Ax=b) by using the SVD. Useful when A is singular. When A is not singular, it would be better to use qr.solve(value).\r\n   * Example : We search to approximate x, with A matrix shape m*n, x vector size n, b vector size m (m > n). We will use :\r\n   * var svd = SingularValueDecomposition(A);\r\n   * var x = svd.solve(b);\r\n   * @param {Matrix} value - Matrix 1D which is the vector b (in the equation Ax = b)\r\n   * @return {Matrix} - The vector x\r\n   */\r\n  solve(value) {\r\n    var Y = value;\r\n    var e = this.threshold;\r\n    var scols = this.s.length;\r\n    var Ls = Matrix.zeros(scols, scols);\r\n\r\n    for (let i = 0; i < scols; i++) {\r\n      if (Math.abs(this.s[i]) <= e) {\r\n        Ls[i][i] = 0;\r\n      } else {\r\n        Ls[i][i] = 1 / this.s[i];\r\n      }\r\n    }\r\n\r\n    var U = this.U;\r\n    var V = this.rightSingularVectors;\r\n\r\n    var VL = V.mmul(Ls);\r\n    var vrows = V.rows;\r\n    var urows = U.length;\r\n    var VLU = Matrix.zeros(vrows, urows);\r\n\r\n    for (let i = 0; i < vrows; i++) {\r\n      for (let j = 0; j < urows; j++) {\r\n        let sum = 0;\r\n        for (let k = 0; k < scols; k++) {\r\n          sum += VL[i][k] * U[j][k];\r\n        }\r\n        VLU[i][j] = sum;\r\n      }\r\n    }\r\n\r\n    return VLU.mmul(Y);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {Array<number>} value\r\n   * @return {Matrix}\r\n   */\r\n  solveForDiagonal(value) {\r\n    return this.solve(Matrix.diag(value));\r\n  }\r\n\r\n  /**\r\n   * Get the inverse of the matrix. We compute the inverse of a matrix using SVD when this matrix is singular or ill-conditioned. Example :\r\n   * var svd = SingularValueDecomposition(A);\r\n   * var inverseA = svd.inverse();\r\n   * @return {Matrix} - The approximation of the inverse of the matrix\r\n   */\r\n  inverse() {\r\n    var V = this.V;\r\n    var e = this.threshold;\r\n    var vrows = V.length;\r\n    var vcols = V[0].length;\r\n    var X = new Matrix(vrows, this.s.length);\r\n\r\n    for (let i = 0; i < vrows; i++) {\r\n      for (let j = 0; j < vcols; j++) {\r\n        if (Math.abs(this.s[j]) > e) {\r\n          X[i][j] = V[i][j] / this.s[j];\r\n        } else {\r\n          X[i][j] = 0;\r\n        }\r\n      }\r\n    }\r\n\r\n    var U = this.U;\r\n\r\n    var urows = U.length;\r\n    var ucols = U[0].length;\r\n    var Y = new Matrix(vrows, urows);\r\n\r\n    for (let i = 0; i < vrows; i++) {\r\n      for (let j = 0; j < urows; j++) {\r\n        let sum = 0;\r\n        for (let k = 0; k < ucols; k++) {\r\n          sum += X[i][k] * U[j][k];\r\n        }\r\n        Y[i][j] = sum;\r\n      }\r\n    }\r\n\r\n    return Y;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {number}\r\n   */\r\n  get condition() {\r\n    return this.s[0] / this.s[Math.min(this.m, this.n) - 1];\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {number}\r\n   */\r\n  get norm2() {\r\n    return this.s[0];\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {number}\r\n   */\r\n  get rank() {\r\n    var tol = Math.max(this.m, this.n) * this.s[0] * Number.EPSILON;\r\n    var r = 0;\r\n    var s = this.s;\r\n    for (var i = 0, ii = s.length; i < ii; i++) {\r\n      if (s[i] > tol) {\r\n        r++;\r\n      }\r\n    }\r\n    return r;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {Array<number>}\r\n   */\r\n  get diagonal() {\r\n    return this.s;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {number}\r\n   */\r\n  get threshold() {\r\n    return Number.EPSILON / 2 * Math.max(this.m, this.n) * this.s[0];\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {Matrix}\r\n   */\r\n  get leftSingularVectors() {\r\n    if (!Matrix.isMatrix(this.U)) {\r\n      this.U = new Matrix(this.U);\r\n    }\r\n    return this.U;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {Matrix}\r\n   */\r\n  get rightSingularVectors() {\r\n    if (!Matrix.isMatrix(this.V)) {\r\n      this.V = new Matrix(this.V);\r\n    }\r\n    return this.V;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {Matrix}\r\n   */\r\n  get diagonalMatrix() {\r\n    return Matrix.diag(this.s);\r\n  }\r\n}\r\n","import Matrix from './matrix';\r\n\r\n/**\r\n * @private\r\n * Check that a row index is not out of bounds\r\n * @param {Matrix} matrix\r\n * @param {number} index\r\n * @param {boolean} [outer]\r\n */\r\nexport function checkRowIndex(matrix, index, outer) {\r\n  var max = outer ? matrix.rows : matrix.rows - 1;\r\n  if (index < 0 || index > max) {\r\n    throw new RangeError('Row index out of range');\r\n  }\r\n}\r\n\r\n/**\r\n * @private\r\n * Check that a column index is not out of bounds\r\n * @param {Matrix} matrix\r\n * @param {number} index\r\n * @param {boolean} [outer]\r\n */\r\nexport function checkColumnIndex(matrix, index, outer) {\r\n  var max = outer ? matrix.columns : matrix.columns - 1;\r\n  if (index < 0 || index > max) {\r\n    throw new RangeError('Column index out of range');\r\n  }\r\n}\r\n\r\n/**\r\n * @private\r\n * Check that the provided vector is an array with the right length\r\n * @param {Matrix} matrix\r\n * @param {Array|Matrix} vector\r\n * @return {Array}\r\n * @throws {RangeError}\r\n */\r\nexport function checkRowVector(matrix, vector) {\r\n  if (vector.to1DArray) {\r\n    vector = vector.to1DArray();\r\n  }\r\n  if (vector.length !== matrix.columns) {\r\n    throw new RangeError(\r\n      'vector size must be the same as the number of columns'\r\n    );\r\n  }\r\n  return vector;\r\n}\r\n\r\n/**\r\n * @private\r\n * Check that the provided vector is an array with the right length\r\n * @param {Matrix} matrix\r\n * @param {Array|Matrix} vector\r\n * @return {Array}\r\n * @throws {RangeError}\r\n */\r\nexport function checkColumnVector(matrix, vector) {\r\n  if (vector.to1DArray) {\r\n    vector = vector.to1DArray();\r\n  }\r\n  if (vector.length !== matrix.rows) {\r\n    throw new RangeError('vector size must be the same as the number of rows');\r\n  }\r\n  return vector;\r\n}\r\n\r\nexport function checkIndices(matrix, rowIndices, columnIndices) {\r\n  return {\r\n    row: checkRowIndices(matrix, rowIndices),\r\n    column: checkColumnIndices(matrix, columnIndices)\r\n  };\r\n}\r\n\r\nexport function checkRowIndices(matrix, rowIndices) {\r\n  if (typeof rowIndices !== 'object') {\r\n    throw new TypeError('unexpected type for row indices');\r\n  }\r\n\r\n  var rowOut = rowIndices.some((r) => {\r\n    return r < 0 || r >= matrix.rows;\r\n  });\r\n\r\n  if (rowOut) {\r\n    throw new RangeError('row indices are out of range');\r\n  }\r\n\r\n  if (!Array.isArray(rowIndices)) rowIndices = Array.from(rowIndices);\r\n\r\n  return rowIndices;\r\n}\r\n\r\nexport function checkColumnIndices(matrix, columnIndices) {\r\n  if (typeof columnIndices !== 'object') {\r\n    throw new TypeError('unexpected type for column indices');\r\n  }\r\n\r\n  var columnOut = columnIndices.some((c) => {\r\n    return c < 0 || c >= matrix.columns;\r\n  });\r\n\r\n  if (columnOut) {\r\n    throw new RangeError('column indices are out of range');\r\n  }\r\n  if (!Array.isArray(columnIndices)) columnIndices = Array.from(columnIndices);\r\n\r\n  return columnIndices;\r\n}\r\n\r\nexport function checkRange(matrix, startRow, endRow, startColumn, endColumn) {\r\n  if (arguments.length !== 5) {\r\n    throw new RangeError('expected 4 arguments');\r\n  }\r\n  checkNumber('startRow', startRow);\r\n  checkNumber('endRow', endRow);\r\n  checkNumber('startColumn', startColumn);\r\n  checkNumber('endColumn', endColumn);\r\n  if (\r\n    startRow > endRow ||\r\n    startColumn > endColumn ||\r\n    startRow < 0 ||\r\n    startRow >= matrix.rows ||\r\n    endRow < 0 ||\r\n    endRow >= matrix.rows ||\r\n    startColumn < 0 ||\r\n    startColumn >= matrix.columns ||\r\n    endColumn < 0 ||\r\n    endColumn >= matrix.columns\r\n  ) {\r\n    throw new RangeError('Submatrix indices are out of range');\r\n  }\r\n}\r\n\r\nexport function getRange(from, to) {\r\n  var arr = new Array(to - from + 1);\r\n  for (var i = 0; i < arr.length; i++) {\r\n    arr[i] = from + i;\r\n  }\r\n  return arr;\r\n}\r\n\r\nexport function sumByRow(matrix) {\r\n  var sum = Matrix.zeros(matrix.rows, 1);\r\n  for (var i = 0; i < matrix.rows; ++i) {\r\n    for (var j = 0; j < matrix.columns; ++j) {\r\n      sum.set(i, 0, sum.get(i, 0) + matrix.get(i, j));\r\n    }\r\n  }\r\n  return sum;\r\n}\r\n\r\nexport function sumByColumn(matrix) {\r\n  var sum = Matrix.zeros(1, matrix.columns);\r\n  for (var i = 0; i < matrix.rows; ++i) {\r\n    for (var j = 0; j < matrix.columns; ++j) {\r\n      sum.set(0, j, sum.get(0, j) + matrix.get(i, j));\r\n    }\r\n  }\r\n  return sum;\r\n}\r\n\r\nexport function sumAll(matrix) {\r\n  var v = 0;\r\n  for (var i = 0; i < matrix.rows; i++) {\r\n    for (var j = 0; j < matrix.columns; j++) {\r\n      v += matrix.get(i, j);\r\n    }\r\n  }\r\n  return v;\r\n}\r\n\r\nfunction checkNumber(name, value) {\r\n  if (typeof value !== 'number') {\r\n    throw new TypeError(`${name} must be a number`);\r\n  }\r\n}\r\n","import AbstractMatrix from '../abstractMatrix';\r\nimport Matrix from '../matrix';\r\n\r\nexport default class BaseView extends AbstractMatrix() {\r\n  constructor(matrix, rows, columns) {\r\n    super();\r\n    this.matrix = matrix;\r\n    this.rows = rows;\r\n    this.columns = columns;\r\n  }\r\n\r\n  static get [Symbol.species]() {\r\n    return Matrix;\r\n  }\r\n}\r\n","import BaseView from './base';\r\n\r\nexport default class MatrixTransposeView extends BaseView {\r\n  constructor(matrix) {\r\n    super(matrix, matrix.columns, matrix.rows);\r\n  }\r\n\r\n  set(rowIndex, columnIndex, value) {\r\n    this.matrix.set(columnIndex, rowIndex, value);\r\n    return this;\r\n  }\r\n\r\n  get(rowIndex, columnIndex) {\r\n    return this.matrix.get(columnIndex, rowIndex);\r\n  }\r\n}\r\n","import BaseView from './base';\r\n\r\nexport default class MatrixRowView extends BaseView {\r\n  constructor(matrix, row) {\r\n    super(matrix, 1, matrix.columns);\r\n    this.row = row;\r\n  }\r\n\r\n  set(rowIndex, columnIndex, value) {\r\n    this.matrix.set(this.row, columnIndex, value);\r\n    return this;\r\n  }\r\n\r\n  get(rowIndex, columnIndex) {\r\n    return this.matrix.get(this.row, columnIndex);\r\n  }\r\n}\r\n","import { checkRange } from '../util';\r\n\r\nimport BaseView from './base';\r\n\r\nexport default class MatrixSubView extends BaseView {\r\n  constructor(matrix, startRow, endRow, startColumn, endColumn) {\r\n    checkRange(matrix, startRow, endRow, startColumn, endColumn);\r\n    super(matrix, endRow - startRow + 1, endColumn - startColumn + 1);\r\n    this.startRow = startRow;\r\n    this.startColumn = startColumn;\r\n  }\r\n\r\n  set(rowIndex, columnIndex, value) {\r\n    this.matrix.set(\r\n      this.startRow + rowIndex,\r\n      this.startColumn + columnIndex,\r\n      value\r\n    );\r\n    return this;\r\n  }\r\n\r\n  get(rowIndex, columnIndex) {\r\n    return this.matrix.get(\r\n      this.startRow + rowIndex,\r\n      this.startColumn + columnIndex\r\n    );\r\n  }\r\n}\r\n","import { checkIndices } from '../util';\r\n\r\nimport BaseView from './base';\r\n\r\nexport default class MatrixSelectionView extends BaseView {\r\n  constructor(matrix, rowIndices, columnIndices) {\r\n    var indices = checkIndices(matrix, rowIndices, columnIndices);\r\n    super(matrix, indices.row.length, indices.column.length);\r\n    this.rowIndices = indices.row;\r\n    this.columnIndices = indices.column;\r\n  }\r\n\r\n  set(rowIndex, columnIndex, value) {\r\n    this.matrix.set(\r\n      this.rowIndices[rowIndex],\r\n      this.columnIndices[columnIndex],\r\n      value\r\n    );\r\n    return this;\r\n  }\r\n\r\n  get(rowIndex, columnIndex) {\r\n    return this.matrix.get(\r\n      this.rowIndices[rowIndex],\r\n      this.columnIndices[columnIndex]\r\n    );\r\n  }\r\n}\r\n","import { checkRowIndices } from '../util';\r\n\r\nimport BaseView from './base';\r\n\r\nexport default class MatrixRowSelectionView extends BaseView {\r\n  constructor(matrix, rowIndices) {\r\n    rowIndices = checkRowIndices(matrix, rowIndices);\r\n    super(matrix, rowIndices.length, matrix.columns);\r\n    this.rowIndices = rowIndices;\r\n  }\r\n\r\n  set(rowIndex, columnIndex, value) {\r\n    this.matrix.set(this.rowIndices[rowIndex], columnIndex, value);\r\n    return this;\r\n  }\r\n\r\n  get(rowIndex, columnIndex) {\r\n    return this.matrix.get(this.rowIndices[rowIndex], columnIndex);\r\n  }\r\n}\r\n","import { checkColumnIndices } from '../util';\r\n\r\nimport BaseView from './base';\r\n\r\nexport default class MatrixColumnSelectionView extends BaseView {\r\n  constructor(matrix, columnIndices) {\r\n    columnIndices = checkColumnIndices(matrix, columnIndices);\r\n    super(matrix, matrix.rows, columnIndices.length);\r\n    this.columnIndices = columnIndices;\r\n  }\r\n\r\n  set(rowIndex, columnIndex, value) {\r\n    this.matrix.set(rowIndex, this.columnIndices[columnIndex], value);\r\n    return this;\r\n  }\r\n\r\n  get(rowIndex, columnIndex) {\r\n    return this.matrix.get(rowIndex, this.columnIndices[columnIndex]);\r\n  }\r\n}\r\n","import BaseView from './base';\r\n\r\nexport default class MatrixColumnView extends BaseView {\r\n  constructor(matrix, column) {\r\n    super(matrix, matrix.rows, 1);\r\n    this.column = column;\r\n  }\r\n\r\n  set(rowIndex, columnIndex, value) {\r\n    this.matrix.set(rowIndex, this.column, value);\r\n    return this;\r\n  }\r\n\r\n  get(rowIndex) {\r\n    return this.matrix.get(rowIndex, this.column);\r\n  }\r\n}\r\n","import BaseView from './base';\r\n\r\nexport default class MatrixFlipRowView extends BaseView {\r\n  constructor(matrix) {\r\n    super(matrix, matrix.rows, matrix.columns);\r\n  }\r\n\r\n  set(rowIndex, columnIndex, value) {\r\n    this.matrix.set(this.rows - rowIndex - 1, columnIndex, value);\r\n    return this;\r\n  }\r\n\r\n  get(rowIndex, columnIndex) {\r\n    return this.matrix.get(this.rows - rowIndex - 1, columnIndex);\r\n  }\r\n}\r\n","import BaseView from './base';\r\n\r\nexport default class MatrixFlipColumnView extends BaseView {\r\n  constructor(matrix) {\r\n    super(matrix, matrix.rows, matrix.columns);\r\n  }\r\n\r\n  set(rowIndex, columnIndex, value) {\r\n    this.matrix.set(rowIndex, this.columns - columnIndex - 1, value);\r\n    return this;\r\n  }\r\n\r\n  get(rowIndex, columnIndex) {\r\n    return this.matrix.get(rowIndex, this.columns - columnIndex - 1);\r\n  }\r\n}\r\n","import rescale from 'ml-array-rescale';\r\n\r\nimport LuDecomposition from './dc/lu';\r\nimport SvDecomposition from './dc/svd';\r\nimport {\r\n  checkRowVector, checkRowIndex, checkColumnIndex, checkColumnVector,\r\n  checkRange, checkIndices,\r\n  sumByRow, sumByColumn, sumAll\r\n} from './util';\r\nimport MatrixTransposeView from './views/transpose';\r\nimport MatrixRowView from './views/row';\r\nimport MatrixSubView from './views/sub';\r\nimport MatrixSelectionView from './views/selection';\r\nimport MatrixRowSelectionView from './views/rowSelection';\r\nimport MatrixColumnSelectionView from './views/columnSelection';\r\nimport MatrixColumnView from './views/column';\r\nimport MatrixFlipRowView from './views/flipRow';\r\nimport MatrixFlipColumnView from './views/flipColumn';\r\n\r\nexport default function AbstractMatrix(superCtor) {\r\n  if (superCtor === undefined) superCtor = Object;\r\n\r\n  /**\r\n   * Real matrix\r\n   * @class Matrix\r\n   * @param {number|Array|Matrix} nRows - Number of rows of the new matrix,\r\n   * 2D array containing the data or Matrix instance to clone\r\n   * @param {number} [nColumns] - Number of columns of the new matrix\r\n   */\r\n  class Matrix extends superCtor {\r\n    static get [Symbol.species]() {\r\n      return this;\r\n    }\r\n\r\n    /**\r\n     * Constructs a Matrix with the chosen dimensions from a 1D array\r\n     * @param {number} newRows - Number of rows\r\n     * @param {number} newColumns - Number of columns\r\n     * @param {Array} newData - A 1D array containing data for the matrix\r\n     * @return {Matrix} - The new matrix\r\n     */\r\n    static from1DArray(newRows, newColumns, newData) {\r\n      var length = newRows * newColumns;\r\n      if (length !== newData.length) {\r\n        throw new RangeError('Data length does not match given dimensions');\r\n      }\r\n      var newMatrix = new this(newRows, newColumns);\r\n      for (var row = 0; row < newRows; row++) {\r\n        for (var column = 0; column < newColumns; column++) {\r\n          newMatrix.set(row, column, newData[row * newColumns + column]);\r\n        }\r\n      }\r\n      return newMatrix;\r\n    }\r\n\r\n    /**\r\n         * Creates a row vector, a matrix with only one row.\r\n         * @param {Array} newData - A 1D array containing data for the vector\r\n         * @return {Matrix} - The new matrix\r\n         */\r\n    static rowVector(newData) {\r\n      var vector = new this(1, newData.length);\r\n      for (var i = 0; i < newData.length; i++) {\r\n        vector.set(0, i, newData[i]);\r\n      }\r\n      return vector;\r\n    }\r\n\r\n    /**\r\n         * Creates a column vector, a matrix with only one column.\r\n         * @param {Array} newData - A 1D array containing data for the vector\r\n         * @return {Matrix} - The new matrix\r\n         */\r\n    static columnVector(newData) {\r\n      var vector = new this(newData.length, 1);\r\n      for (var i = 0; i < newData.length; i++) {\r\n        vector.set(i, 0, newData[i]);\r\n      }\r\n      return vector;\r\n    }\r\n\r\n    /**\r\n         * Creates an empty matrix with the given dimensions. Values will be undefined. Same as using new Matrix(rows, columns).\r\n         * @param {number} rows - Number of rows\r\n         * @param {number} columns - Number of columns\r\n         * @return {Matrix} - The new matrix\r\n         */\r\n    static empty(rows, columns) {\r\n      return new this(rows, columns);\r\n    }\r\n\r\n    /**\r\n         * Creates a matrix with the given dimensions. Values will be set to zero.\r\n         * @param {number} rows - Number of rows\r\n         * @param {number} columns - Number of columns\r\n         * @return {Matrix} - The new matrix\r\n         */\r\n    static zeros(rows, columns) {\r\n      return this.empty(rows, columns).fill(0);\r\n    }\r\n\r\n    /**\r\n         * Creates a matrix with the given dimensions. Values will be set to one.\r\n         * @param {number} rows - Number of rows\r\n         * @param {number} columns - Number of columns\r\n         * @return {Matrix} - The new matrix\r\n         */\r\n    static ones(rows, columns) {\r\n      return this.empty(rows, columns).fill(1);\r\n    }\r\n\r\n    /**\r\n         * Creates a matrix with the given dimensions. Values will be randomly set.\r\n         * @param {number} rows - Number of rows\r\n         * @param {number} columns - Number of columns\r\n         * @param {function} [rng=Math.random] - Random number generator\r\n         * @return {Matrix} The new matrix\r\n         */\r\n    static rand(rows, columns, rng) {\r\n      if (rng === undefined) rng = Math.random;\r\n      var matrix = this.empty(rows, columns);\r\n      for (var i = 0; i < rows; i++) {\r\n        for (var j = 0; j < columns; j++) {\r\n          matrix.set(i, j, rng());\r\n        }\r\n      }\r\n      return matrix;\r\n    }\r\n\r\n    /**\r\n         * Creates a matrix with the given dimensions. Values will be random integers.\r\n         * @param {number} rows - Number of rows\r\n         * @param {number} columns - Number of columns\r\n         * @param {number} [maxValue=1000] - Maximum value\r\n         * @param {function} [rng=Math.random] - Random number generator\r\n         * @return {Matrix} The new matrix\r\n         */\r\n    static randInt(rows, columns, maxValue, rng) {\r\n      if (maxValue === undefined) maxValue = 1000;\r\n      if (rng === undefined) rng = Math.random;\r\n      var matrix = this.empty(rows, columns);\r\n      for (var i = 0; i < rows; i++) {\r\n        for (var j = 0; j < columns; j++) {\r\n          var value = Math.floor(rng() * maxValue);\r\n          matrix.set(i, j, value);\r\n        }\r\n      }\r\n      return matrix;\r\n    }\r\n\r\n    /**\r\n         * Creates an identity matrix with the given dimension. Values of the diagonal will be 1 and others will be 0.\r\n         * @param {number} rows - Number of rows\r\n         * @param {number} [columns=rows] - Number of columns\r\n         * @param {number} [value=1] - Value to fill the diagonal with\r\n         * @return {Matrix} - The new identity matrix\r\n         */\r\n    static eye(rows, columns, value) {\r\n      if (columns === undefined) columns = rows;\r\n      if (value === undefined) value = 1;\r\n      var min = Math.min(rows, columns);\r\n      var matrix = this.zeros(rows, columns);\r\n      for (var i = 0; i < min; i++) {\r\n        matrix.set(i, i, value);\r\n      }\r\n      return matrix;\r\n    }\r\n\r\n    /**\r\n         * Creates a diagonal matrix based on the given array.\r\n         * @param {Array} data - Array containing the data for the diagonal\r\n         * @param {number} [rows] - Number of rows (Default: data.length)\r\n         * @param {number} [columns] - Number of columns (Default: rows)\r\n         * @return {Matrix} - The new diagonal matrix\r\n         */\r\n    static diag(data, rows, columns) {\r\n      var l = data.length;\r\n      if (rows === undefined) rows = l;\r\n      if (columns === undefined) columns = rows;\r\n      var min = Math.min(l, rows, columns);\r\n      var matrix = this.zeros(rows, columns);\r\n      for (var i = 0; i < min; i++) {\r\n        matrix.set(i, i, data[i]);\r\n      }\r\n      return matrix;\r\n    }\r\n\r\n    /**\r\n         * Returns a matrix whose elements are the minimum between matrix1 and matrix2\r\n         * @param {Matrix} matrix1\r\n         * @param {Matrix} matrix2\r\n         * @return {Matrix}\r\n         */\r\n    static min(matrix1, matrix2) {\r\n      matrix1 = this.checkMatrix(matrix1);\r\n      matrix2 = this.checkMatrix(matrix2);\r\n      var rows = matrix1.rows;\r\n      var columns = matrix1.columns;\r\n      var result = new this(rows, columns);\r\n      for (var i = 0; i < rows; i++) {\r\n        for (var j = 0; j < columns; j++) {\r\n          result.set(i, j, Math.min(matrix1.get(i, j), matrix2.get(i, j)));\r\n        }\r\n      }\r\n      return result;\r\n    }\r\n\r\n    /**\r\n         * Returns a matrix whose elements are the maximum between matrix1 and matrix2\r\n         * @param {Matrix} matrix1\r\n         * @param {Matrix} matrix2\r\n         * @return {Matrix}\r\n         */\r\n    static max(matrix1, matrix2) {\r\n      matrix1 = this.checkMatrix(matrix1);\r\n      matrix2 = this.checkMatrix(matrix2);\r\n      var rows = matrix1.rows;\r\n      var columns = matrix1.columns;\r\n      var result = new this(rows, columns);\r\n      for (var i = 0; i < rows; i++) {\r\n        for (var j = 0; j < columns; j++) {\r\n          result.set(i, j, Math.max(matrix1.get(i, j), matrix2.get(i, j)));\r\n        }\r\n      }\r\n      return result;\r\n    }\r\n\r\n    /**\r\n         * Check that the provided value is a Matrix and tries to instantiate one if not\r\n         * @param {*} value - The value to check\r\n         * @return {Matrix}\r\n         */\r\n    static checkMatrix(value) {\r\n      return Matrix.isMatrix(value) ? value : new this(value);\r\n    }\r\n\r\n    /**\r\n         * Returns true if the argument is a Matrix, false otherwise\r\n         * @param {*} value - The value to check\r\n         * @return {boolean}\r\n         */\r\n    static isMatrix(value) {\r\n      return (value != null) && (value.klass === 'Matrix');\r\n    }\r\n\r\n    /**\r\n         * @prop {number} size - The number of elements in the matrix.\r\n         */\r\n    get size() {\r\n      return this.rows * this.columns;\r\n    }\r\n\r\n    /**\r\n         * Applies a callback for each element of the matrix. The function is called in the matrix (this) context.\r\n         * @param {function} callback - Function that will be called with two parameters : i (row) and j (column)\r\n         * @return {Matrix} this\r\n         */\r\n    apply(callback) {\r\n      if (typeof callback !== 'function') {\r\n        throw new TypeError('callback must be a function');\r\n      }\r\n      var ii = this.rows;\r\n      var jj = this.columns;\r\n      for (var i = 0; i < ii; i++) {\r\n        for (var j = 0; j < jj; j++) {\r\n          callback.call(this, i, j);\r\n        }\r\n      }\r\n      return this;\r\n    }\r\n\r\n    /**\r\n         * Returns a new 1D array filled row by row with the matrix values\r\n         * @return {Array}\r\n         */\r\n    to1DArray() {\r\n      var array = new Array(this.size);\r\n      for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n          array[i * this.columns + j] = this.get(i, j);\r\n        }\r\n      }\r\n      return array;\r\n    }\r\n\r\n    /**\r\n         * Returns a 2D array containing a copy of the data\r\n         * @return {Array}\r\n         */\r\n    to2DArray() {\r\n      var copy = new Array(this.rows);\r\n      for (var i = 0; i < this.rows; i++) {\r\n        copy[i] = new Array(this.columns);\r\n        for (var j = 0; j < this.columns; j++) {\r\n          copy[i][j] = this.get(i, j);\r\n        }\r\n      }\r\n      return copy;\r\n    }\r\n\r\n    /**\r\n         * @return {boolean} true if the matrix has one row\r\n         */\r\n    isRowVector() {\r\n      return this.rows === 1;\r\n    }\r\n\r\n    /**\r\n         * @return {boolean} true if the matrix has one column\r\n         */\r\n    isColumnVector() {\r\n      return this.columns === 1;\r\n    }\r\n\r\n    /**\r\n         * @return {boolean} true if the matrix has one row or one column\r\n         */\r\n    isVector() {\r\n      return (this.rows === 1) || (this.columns === 1);\r\n    }\r\n\r\n    /**\r\n         * @return {boolean} true if the matrix has the same number of rows and columns\r\n         */\r\n    isSquare() {\r\n      return this.rows === this.columns;\r\n    }\r\n\r\n    /**\r\n         * @return {boolean} true if the matrix is square and has the same values on both sides of the diagonal\r\n         */\r\n    isSymmetric() {\r\n      if (this.isSquare()) {\r\n        for (var i = 0; i < this.rows; i++) {\r\n          for (var j = 0; j <= i; j++) {\r\n            if (this.get(i, j) !== this.get(j, i)) {\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n        return true;\r\n      }\r\n      return false;\r\n    }\r\n\r\n    /**\r\n          * @return true if the matrix is in echelon form\r\n          */\r\n    isEchelonForm() {\r\n      let i = 0;\r\n      let j = 0;\r\n      let previousColumn = -1;\r\n      let isEchelonForm = true;\r\n      let checked = false;\r\n      while ((i < this.rows) && (isEchelonForm)) {\r\n        j = 0;\r\n        checked = false;\r\n        while ((j < this.columns) && (checked === false)) {\r\n          if (this.get(i, j) === 0) {\r\n            j++;\r\n          } else if ((this.get(i, j) === 1) && (j > previousColumn)) {\r\n            checked = true;\r\n            previousColumn = j;\r\n          } else {\r\n            isEchelonForm = false;\r\n            checked = true;\r\n          }\r\n        }\r\n        i++;\r\n      }\r\n      return isEchelonForm;\r\n    }\r\n\r\n    /**\r\n             * @return true if the matrix is in reduced echelon form\r\n             */\r\n    isReducedEchelonForm() {\r\n      let i = 0;\r\n      let j = 0;\r\n      let previousColumn = -1;\r\n      let isReducedEchelonForm = true;\r\n      let checked = false;\r\n      while ((i < this.rows) && (isReducedEchelonForm)) {\r\n        j = 0;\r\n        checked = false;\r\n        while ((j < this.columns) && (checked === false)) {\r\n          if (this.get(i, j) === 0) {\r\n            j++;\r\n          } else if ((this.get(i, j) === 1) && (j > previousColumn)) {\r\n            checked = true;\r\n            previousColumn = j;\r\n          } else {\r\n            isReducedEchelonForm = false;\r\n            checked = true;\r\n          }\r\n        }\r\n        for (let k = j + 1; k < this.rows; k++) {\r\n          if (this.get(i, k) !== 0) {\r\n            isReducedEchelonForm = false;\r\n          }\r\n        }\r\n        i++;\r\n      }\r\n      return isReducedEchelonForm;\r\n    }\r\n\r\n    /**\r\n         * Sets a given element of the matrix. mat.set(3,4,1) is equivalent to mat[3][4]=1\r\n         * @abstract\r\n         * @param {number} rowIndex - Index of the row\r\n         * @param {number} columnIndex - Index of the column\r\n         * @param {number} value - The new value for the element\r\n         * @return {Matrix} this\r\n         */\r\n    set(rowIndex, columnIndex, value) { // eslint-disable-line no-unused-vars\r\n      throw new Error('set method is unimplemented');\r\n    }\r\n\r\n    /**\r\n         * Returns the given element of the matrix. mat.get(3,4) is equivalent to matrix[3][4]\r\n         * @abstract\r\n         * @param {number} rowIndex - Index of the row\r\n         * @param {number} columnIndex - Index of the column\r\n         * @return {number}\r\n         */\r\n    get(rowIndex, columnIndex) { // eslint-disable-line no-unused-vars\r\n      throw new Error('get method is unimplemented');\r\n    }\r\n\r\n    /**\r\n         * Creates a new matrix that is a repetition of the current matrix. New matrix has rowRep times the number of\r\n         * rows of the matrix, and colRep times the number of columns of the matrix\r\n         * @param {number} rowRep - Number of times the rows should be repeated\r\n         * @param {number} colRep - Number of times the columns should be re\r\n         * @return {Matrix}\r\n         * @example\r\n         * var matrix = new Matrix([[1,2]]);\r\n         * matrix.repeat(2); // [[1,2],[1,2]]\r\n         */\r\n    repeat(rowRep, colRep) {\r\n      rowRep = rowRep || 1;\r\n      colRep = colRep || 1;\r\n      var matrix = new this.constructor[Symbol.species](this.rows * rowRep, this.columns * colRep);\r\n      for (var i = 0; i < rowRep; i++) {\r\n        for (var j = 0; j < colRep; j++) {\r\n          matrix.setSubMatrix(this, this.rows * i, this.columns * j);\r\n        }\r\n      }\r\n      return matrix;\r\n    }\r\n\r\n    /**\r\n         * Fills the matrix with a given value. All elements will be set to this value.\r\n         * @param {number} value - New value\r\n         * @return {Matrix} this\r\n         */\r\n    fill(value) {\r\n      for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n          this.set(i, j, value);\r\n        }\r\n      }\r\n      return this;\r\n    }\r\n\r\n    /**\r\n         * Negates the matrix. All elements will be multiplied by (-1)\r\n         * @return {Matrix} this\r\n         */\r\n    neg() {\r\n      return this.mulS(-1);\r\n    }\r\n\r\n    /**\r\n         * Returns a new array from the given row index\r\n         * @param {number} index - Row index\r\n         * @return {Array}\r\n         */\r\n    getRow(index) {\r\n      checkRowIndex(this, index);\r\n      var row = new Array(this.columns);\r\n      for (var i = 0; i < this.columns; i++) {\r\n        row[i] = this.get(index, i);\r\n      }\r\n      return row;\r\n    }\r\n\r\n    /**\r\n         * Returns a new row vector from the given row index\r\n         * @param {number} index - Row index\r\n         * @return {Matrix}\r\n         */\r\n    getRowVector(index) {\r\n      return this.constructor.rowVector(this.getRow(index));\r\n    }\r\n\r\n    /**\r\n         * Sets a row at the given index\r\n         * @param {number} index - Row index\r\n         * @param {Array|Matrix} array - Array or vector\r\n         * @return {Matrix} this\r\n         */\r\n    setRow(index, array) {\r\n      checkRowIndex(this, index);\r\n      array = checkRowVector(this, array);\r\n      for (var i = 0; i < this.columns; i++) {\r\n        this.set(index, i, array[i]);\r\n      }\r\n      return this;\r\n    }\r\n\r\n    /**\r\n         * Swaps two rows\r\n         * @param {number} row1 - First row index\r\n         * @param {number} row2 - Second row index\r\n         * @return {Matrix} this\r\n         */\r\n    swapRows(row1, row2) {\r\n      checkRowIndex(this, row1);\r\n      checkRowIndex(this, row2);\r\n      for (var i = 0; i < this.columns; i++) {\r\n        var temp = this.get(row1, i);\r\n        this.set(row1, i, this.get(row2, i));\r\n        this.set(row2, i, temp);\r\n      }\r\n      return this;\r\n    }\r\n\r\n    /**\r\n         * Returns a new array from the given column index\r\n         * @param {number} index - Column index\r\n         * @return {Array}\r\n         */\r\n    getColumn(index) {\r\n      checkColumnIndex(this, index);\r\n      var column = new Array(this.rows);\r\n      for (var i = 0; i < this.rows; i++) {\r\n        column[i] = this.get(i, index);\r\n      }\r\n      return column;\r\n    }\r\n\r\n    /**\r\n         * Returns a new column vector from the given column index\r\n         * @param {number} index - Column index\r\n         * @return {Matrix}\r\n         */\r\n    getColumnVector(index) {\r\n      return this.constructor.columnVector(this.getColumn(index));\r\n    }\r\n\r\n    /**\r\n         * Sets a column at the given index\r\n         * @param {number} index - Column index\r\n         * @param {Array|Matrix} array - Array or vector\r\n         * @return {Matrix} this\r\n         */\r\n    setColumn(index, array) {\r\n      checkColumnIndex(this, index);\r\n      array = checkColumnVector(this, array);\r\n      for (var i = 0; i < this.rows; i++) {\r\n        this.set(i, index, array[i]);\r\n      }\r\n      return this;\r\n    }\r\n\r\n    /**\r\n         * Swaps two columns\r\n         * @param {number} column1 - First column index\r\n         * @param {number} column2 - Second column index\r\n         * @return {Matrix} this\r\n         */\r\n    swapColumns(column1, column2) {\r\n      checkColumnIndex(this, column1);\r\n      checkColumnIndex(this, column2);\r\n      for (var i = 0; i < this.rows; i++) {\r\n        var temp = this.get(i, column1);\r\n        this.set(i, column1, this.get(i, column2));\r\n        this.set(i, column2, temp);\r\n      }\r\n      return this;\r\n    }\r\n\r\n    /**\r\n         * Adds the values of a vector to each row\r\n         * @param {Array|Matrix} vector - Array or vector\r\n         * @return {Matrix} this\r\n         */\r\n    addRowVector(vector) {\r\n      vector = checkRowVector(this, vector);\r\n      for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n          this.set(i, j, this.get(i, j) + vector[j]);\r\n        }\r\n      }\r\n      return this;\r\n    }\r\n\r\n    /**\r\n         * Subtracts the values of a vector from each row\r\n         * @param {Array|Matrix} vector - Array or vector\r\n         * @return {Matrix} this\r\n         */\r\n    subRowVector(vector) {\r\n      vector = checkRowVector(this, vector);\r\n      for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n          this.set(i, j, this.get(i, j) - vector[j]);\r\n        }\r\n      }\r\n      return this;\r\n    }\r\n\r\n    /**\r\n         * Multiplies the values of a vector with each row\r\n         * @param {Array|Matrix} vector - Array or vector\r\n         * @return {Matrix} this\r\n         */\r\n    mulRowVector(vector) {\r\n      vector = checkRowVector(this, vector);\r\n      for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n          this.set(i, j, this.get(i, j) * vector[j]);\r\n        }\r\n      }\r\n      return this;\r\n    }\r\n\r\n    /**\r\n         * Divides the values of each row by those of a vector\r\n         * @param {Array|Matrix} vector - Array or vector\r\n         * @return {Matrix} this\r\n         */\r\n    divRowVector(vector) {\r\n      vector = checkRowVector(this, vector);\r\n      for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n          this.set(i, j, this.get(i, j) / vector[j]);\r\n        }\r\n      }\r\n      return this;\r\n    }\r\n\r\n    /**\r\n         * Adds the values of a vector to each column\r\n         * @param {Array|Matrix} vector - Array or vector\r\n         * @return {Matrix} this\r\n         */\r\n    addColumnVector(vector) {\r\n      vector = checkColumnVector(this, vector);\r\n      for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n          this.set(i, j, this.get(i, j) + vector[i]);\r\n        }\r\n      }\r\n      return this;\r\n    }\r\n\r\n    /**\r\n         * Subtracts the values of a vector from each column\r\n         * @param {Array|Matrix} vector - Array or vector\r\n         * @return {Matrix} this\r\n         */\r\n    subColumnVector(vector) {\r\n      vector = checkColumnVector(this, vector);\r\n      for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n          this.set(i, j, this.get(i, j) - vector[i]);\r\n        }\r\n      }\r\n      return this;\r\n    }\r\n\r\n    /**\r\n         * Multiplies the values of a vector with each column\r\n         * @param {Array|Matrix} vector - Array or vector\r\n         * @return {Matrix} this\r\n         */\r\n    mulColumnVector(vector) {\r\n      vector = checkColumnVector(this, vector);\r\n      for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n          this.set(i, j, this.get(i, j) * vector[i]);\r\n        }\r\n      }\r\n      return this;\r\n    }\r\n\r\n    /**\r\n         * Divides the values of each column by those of a vector\r\n         * @param {Array|Matrix} vector - Array or vector\r\n         * @return {Matrix} this\r\n         */\r\n    divColumnVector(vector) {\r\n      vector = checkColumnVector(this, vector);\r\n      for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n          this.set(i, j, this.get(i, j) / vector[i]);\r\n        }\r\n      }\r\n      return this;\r\n    }\r\n\r\n    /**\r\n         * Multiplies the values of a row with a scalar\r\n         * @param {number} index - Row index\r\n         * @param {number} value\r\n         * @return {Matrix} this\r\n         */\r\n    mulRow(index, value) {\r\n      checkRowIndex(this, index);\r\n      for (var i = 0; i < this.columns; i++) {\r\n        this.set(index, i, this.get(index, i) * value);\r\n      }\r\n      return this;\r\n    }\r\n\r\n    /**\r\n         * Multiplies the values of a column with a scalar\r\n         * @param {number} index - Column index\r\n         * @param {number} value\r\n         * @return {Matrix} this\r\n         */\r\n    mulColumn(index, value) {\r\n      checkColumnIndex(this, index);\r\n      for (var i = 0; i < this.rows; i++) {\r\n        this.set(i, index, this.get(i, index) * value);\r\n      }\r\n      return this;\r\n    }\r\n\r\n    /**\r\n         * Returns the maximum value of the matrix\r\n         * @return {number}\r\n         */\r\n    max() {\r\n      var v = this.get(0, 0);\r\n      for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n          if (this.get(i, j) > v) {\r\n            v = this.get(i, j);\r\n          }\r\n        }\r\n      }\r\n      return v;\r\n    }\r\n\r\n    /**\r\n         * Returns the index of the maximum value\r\n         * @return {Array}\r\n         */\r\n    maxIndex() {\r\n      var v = this.get(0, 0);\r\n      var idx = [0, 0];\r\n      for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n          if (this.get(i, j) > v) {\r\n            v = this.get(i, j);\r\n            idx[0] = i;\r\n            idx[1] = j;\r\n          }\r\n        }\r\n      }\r\n      return idx;\r\n    }\r\n\r\n    /**\r\n         * Returns the minimum value of the matrix\r\n         * @return {number}\r\n         */\r\n    min() {\r\n      var v = this.get(0, 0);\r\n      for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n          if (this.get(i, j) < v) {\r\n            v = this.get(i, j);\r\n          }\r\n        }\r\n      }\r\n      return v;\r\n    }\r\n\r\n    /**\r\n         * Returns the index of the minimum value\r\n         * @return {Array}\r\n         */\r\n    minIndex() {\r\n      var v = this.get(0, 0);\r\n      var idx = [0, 0];\r\n      for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n          if (this.get(i, j) < v) {\r\n            v = this.get(i, j);\r\n            idx[0] = i;\r\n            idx[1] = j;\r\n          }\r\n        }\r\n      }\r\n      return idx;\r\n    }\r\n\r\n    /**\r\n         * Returns the maximum value of one row\r\n         * @param {number} row - Row index\r\n         * @return {number}\r\n         */\r\n    maxRow(row) {\r\n      checkRowIndex(this, row);\r\n      var v = this.get(row, 0);\r\n      for (var i = 1; i < this.columns; i++) {\r\n        if (this.get(row, i) > v) {\r\n          v = this.get(row, i);\r\n        }\r\n      }\r\n      return v;\r\n    }\r\n\r\n    /**\r\n         * Returns the index of the maximum value of one row\r\n         * @param {number} row - Row index\r\n         * @return {Array}\r\n         */\r\n    maxRowIndex(row) {\r\n      checkRowIndex(this, row);\r\n      var v = this.get(row, 0);\r\n      var idx = [row, 0];\r\n      for (var i = 1; i < this.columns; i++) {\r\n        if (this.get(row, i) > v) {\r\n          v = this.get(row, i);\r\n          idx[1] = i;\r\n        }\r\n      }\r\n      return idx;\r\n    }\r\n\r\n    /**\r\n         * Returns the minimum value of one row\r\n         * @param {number} row - Row index\r\n         * @return {number}\r\n         */\r\n    minRow(row) {\r\n      checkRowIndex(this, row);\r\n      var v = this.get(row, 0);\r\n      for (var i = 1; i < this.columns; i++) {\r\n        if (this.get(row, i) < v) {\r\n          v = this.get(row, i);\r\n        }\r\n      }\r\n      return v;\r\n    }\r\n\r\n    /**\r\n         * Returns the index of the maximum value of one row\r\n         * @param {number} row - Row index\r\n         * @return {Array}\r\n         */\r\n    minRowIndex(row) {\r\n      checkRowIndex(this, row);\r\n      var v = this.get(row, 0);\r\n      var idx = [row, 0];\r\n      for (var i = 1; i < this.columns; i++) {\r\n        if (this.get(row, i) < v) {\r\n          v = this.get(row, i);\r\n          idx[1] = i;\r\n        }\r\n      }\r\n      return idx;\r\n    }\r\n\r\n    /**\r\n         * Returns the maximum value of one column\r\n         * @param {number} column - Column index\r\n         * @return {number}\r\n         */\r\n    maxColumn(column) {\r\n      checkColumnIndex(this, column);\r\n      var v = this.get(0, column);\r\n      for (var i = 1; i < this.rows; i++) {\r\n        if (this.get(i, column) > v) {\r\n          v = this.get(i, column);\r\n        }\r\n      }\r\n      return v;\r\n    }\r\n\r\n    /**\r\n         * Returns the index of the maximum value of one column\r\n         * @param {number} column - Column index\r\n         * @return {Array}\r\n         */\r\n    maxColumnIndex(column) {\r\n      checkColumnIndex(this, column);\r\n      var v = this.get(0, column);\r\n      var idx = [0, column];\r\n      for (var i = 1; i < this.rows; i++) {\r\n        if (this.get(i, column) > v) {\r\n          v = this.get(i, column);\r\n          idx[0] = i;\r\n        }\r\n      }\r\n      return idx;\r\n    }\r\n\r\n    /**\r\n         * Returns the minimum value of one column\r\n         * @param {number} column - Column index\r\n         * @return {number}\r\n         */\r\n    minColumn(column) {\r\n      checkColumnIndex(this, column);\r\n      var v = this.get(0, column);\r\n      for (var i = 1; i < this.rows; i++) {\r\n        if (this.get(i, column) < v) {\r\n          v = this.get(i, column);\r\n        }\r\n      }\r\n      return v;\r\n    }\r\n\r\n    /**\r\n         * Returns the index of the minimum value of one column\r\n         * @param {number} column - Column index\r\n         * @return {Array}\r\n         */\r\n    minColumnIndex(column) {\r\n      checkColumnIndex(this, column);\r\n      var v = this.get(0, column);\r\n      var idx = [0, column];\r\n      for (var i = 1; i < this.rows; i++) {\r\n        if (this.get(i, column) < v) {\r\n          v = this.get(i, column);\r\n          idx[0] = i;\r\n        }\r\n      }\r\n      return idx;\r\n    }\r\n\r\n    /**\r\n         * Returns an array containing the diagonal values of the matrix\r\n         * @return {Array}\r\n         */\r\n    diag() {\r\n      var min = Math.min(this.rows, this.columns);\r\n      var diag = new Array(min);\r\n      for (var i = 0; i < min; i++) {\r\n        diag[i] = this.get(i, i);\r\n      }\r\n      return diag;\r\n    }\r\n\r\n    /**\r\n         * Returns the sum by the argument given, if no argument given,\r\n         * it returns the sum of all elements of the matrix.\r\n         * @param {string} by - sum by 'row' or 'column'.\r\n         * @return {Matrix|number}\r\n         */\r\n    sum(by) {\r\n      switch (by) {\r\n        case 'row':\r\n          return sumByRow(this);\r\n        case 'column':\r\n          return sumByColumn(this);\r\n        default:\r\n          return sumAll(this);\r\n      }\r\n    }\r\n\r\n    /**\r\n         * Returns the mean of all elements of the matrix\r\n         * @return {number}\r\n         */\r\n    mean() {\r\n      return this.sum() / this.size;\r\n    }\r\n\r\n    /**\r\n         * Returns the product of all elements of the matrix\r\n         * @return {number}\r\n         */\r\n    prod() {\r\n      var prod = 1;\r\n      for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n          prod *= this.get(i, j);\r\n        }\r\n      }\r\n      return prod;\r\n    }\r\n\r\n    /**\r\n         * Returns the norm of a matrix.\r\n         * @param {string} type - \"frobenius\" (default) or \"max\" return resp. the Frobenius norm and the max norm.\r\n         * @return {number}\r\n         */\r\n    norm(type = 'frobenius') {\r\n      var result = 0;\r\n      if (type === 'max') {\r\n        return this.max();\r\n      } else if (type === 'frobenius') {\r\n        for (var i = 0; i < this.rows; i++) {\r\n          for (var j = 0; j < this.columns; j++) {\r\n            result = result + this.get(i, j) * this.get(i, j);\r\n          }\r\n        }\r\n        return Math.sqrt(result);\r\n      } else {\r\n        throw new RangeError(`unknown norm type: ${type}`);\r\n      }\r\n    }\r\n\r\n    /**\r\n         * Computes the cumulative sum of the matrix elements (in place, row by row)\r\n         * @return {Matrix} this\r\n         */\r\n    cumulativeSum() {\r\n      var sum = 0;\r\n      for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n          sum += this.get(i, j);\r\n          this.set(i, j, sum);\r\n        }\r\n      }\r\n      return this;\r\n    }\r\n\r\n    /**\r\n         * Computes the dot (scalar) product between the matrix and another\r\n         * @param {Matrix} vector2 vector\r\n         * @return {number}\r\n         */\r\n    dot(vector2) {\r\n      if (Matrix.isMatrix(vector2)) vector2 = vector2.to1DArray();\r\n      var vector1 = this.to1DArray();\r\n      if (vector1.length !== vector2.length) {\r\n        throw new RangeError('vectors do not have the same size');\r\n      }\r\n      var dot = 0;\r\n      for (var i = 0; i < vector1.length; i++) {\r\n        dot += vector1[i] * vector2[i];\r\n      }\r\n      return dot;\r\n    }\r\n\r\n    /**\r\n         * Returns the matrix product between this and other\r\n         * @param {Matrix} other\r\n         * @return {Matrix}\r\n         */\r\n    mmul(other) {\r\n      other = this.constructor.checkMatrix(other);\r\n      if (this.columns !== other.rows) {\r\n        // eslint-disable-next-line no-console\r\n        console.warn('Number of columns of left matrix are not equal to number of rows of right matrix.');\r\n      }\r\n\r\n      var m = this.rows;\r\n      var n = this.columns;\r\n      var p = other.columns;\r\n\r\n      var result = new this.constructor[Symbol.species](m, p);\r\n\r\n      var Bcolj = new Array(n);\r\n      for (var j = 0; j < p; j++) {\r\n        for (var k = 0; k < n; k++) {\r\n          Bcolj[k] = other.get(k, j);\r\n        }\r\n\r\n        for (var i = 0; i < m; i++) {\r\n          var s = 0;\r\n          for (k = 0; k < n; k++) {\r\n            s += this.get(i, k) * Bcolj[k];\r\n          }\r\n\r\n          result.set(i, j, s);\r\n        }\r\n      }\r\n      return result;\r\n    }\r\n\r\n    strassen2x2(other) {\r\n      var result = new this.constructor[Symbol.species](2, 2);\r\n      const a11 = this.get(0, 0);\r\n      const b11 = other.get(0, 0);\r\n      const a12 = this.get(0, 1);\r\n      const b12 = other.get(0, 1);\r\n      const a21 = this.get(1, 0);\r\n      const b21 = other.get(1, 0);\r\n      const a22 = this.get(1, 1);\r\n      const b22 = other.get(1, 1);\r\n\r\n      // Compute intermediate values.\r\n      const m1 = (a11 + a22) * (b11 + b22);\r\n      const m2 = (a21 + a22) * b11;\r\n      const m3 = a11 * (b12 - b22);\r\n      const m4 = a22 * (b21 - b11);\r\n      const m5 = (a11 + a12) * b22;\r\n      const m6 = (a21 - a11) * (b11 + b12);\r\n      const m7 = (a12 - a22) * (b21 + b22);\r\n\r\n      // Combine intermediate values into the output.\r\n      const c00 = m1 + m4 - m5 + m7;\r\n      const c01 = m3 + m5;\r\n      const c10 = m2 + m4;\r\n      const c11 = m1 - m2 + m3 + m6;\r\n\r\n      result.set(0, 0, c00);\r\n      result.set(0, 1, c01);\r\n      result.set(1, 0, c10);\r\n      result.set(1, 1, c11);\r\n      return result;\r\n    }\r\n\r\n    strassen3x3(other) {\r\n      var result = new this.constructor[Symbol.species](3, 3);\r\n\r\n      const a00 = this.get(0, 0);\r\n      const a01 = this.get(0, 1);\r\n      const a02 = this.get(0, 2);\r\n      const a10 = this.get(1, 0);\r\n      const a11 = this.get(1, 1);\r\n      const a12 = this.get(1, 2);\r\n      const a20 = this.get(2, 0);\r\n      const a21 = this.get(2, 1);\r\n      const a22 = this.get(2, 2);\r\n\r\n      const b00 = other.get(0, 0);\r\n      const b01 = other.get(0, 1);\r\n      const b02 = other.get(0, 2);\r\n      const b10 = other.get(1, 0);\r\n      const b11 = other.get(1, 1);\r\n      const b12 = other.get(1, 2);\r\n      const b20 = other.get(2, 0);\r\n      const b21 = other.get(2, 1);\r\n      const b22 = other.get(2, 2);\r\n\r\n      const m1 = (a00 + a01 + a02 - a10 - a11 - a21 - a22) * b11;\r\n      const m2 = (a00 - a10) * (-b01 + b11);\r\n      const m3 = a11 * (-b00 + b01 + b10 - b11 - b12 - b20 + b22);\r\n      const m4 = (-a00 + a10 + a11) * (b00 - b01 + b11);\r\n      const m5 = (a10 + a11) * (-b00 + b01);\r\n      const m6 = a00 * b00;\r\n      const m7 = (-a00 + a20 + a21) * (b00 - b02 + b12);\r\n      const m8 = (-a00 + a20) * (b02 - b12);\r\n      const m9 = (a20 + a21) * (-b00 + b02);\r\n      const m10 = (a00 + a01 + a02 - a11 - a12 - a20 - a21) * b12;\r\n      const m11 = a21 * (-b00 + b02 + b10 - b11 - b12 - b20 + b21);\r\n      const m12 = (-a02 + a21 + a22) * (b11 + b20 - b21);\r\n      const m13 = (a02 - a22) * (b11 - b21);\r\n      const m14 = a02 * b20;\r\n      const m15 = (a21 + a22) * (-b20 + b21);\r\n      const m16 = (-a02 + a11 + a12) * (b12 + b20 - b22);\r\n      const m17 = (a02 - a12) * (b12 - b22);\r\n      const m18 = (a11 + a12) * (-b20 + b22);\r\n      const m19 = a01 * b10;\r\n      const m20 = a12 * b21;\r\n      const m21 = a10 * b02;\r\n      const m22 = a20 * b01;\r\n      const m23 = a22 * b22;\r\n\r\n      const c00 = m6 + m14 + m19;\r\n      const c01 = m1 + m4 + m5 + m6 + m12 + m14 + m15;\r\n      const c02 = m6 + m7 + m9 + m10 + m14 + m16 + m18;\r\n      const c10 = m2 + m3 + m4 + m6 + m14 + m16 + m17;\r\n      const c11 = m2 + m4 + m5 + m6 + m20;\r\n      const c12 = m14 + m16 + m17 + m18 + m21;\r\n      const c20 = m6 + m7 + m8 + m11 + m12 + m13 + m14;\r\n      const c21 = m12 + m13 + m14 + m15 + m22;\r\n      const c22 = m6 + m7 + m8 + m9 + m23;\r\n\r\n      result.set(0, 0, c00);\r\n      result.set(0, 1, c01);\r\n      result.set(0, 2, c02);\r\n      result.set(1, 0, c10);\r\n      result.set(1, 1, c11);\r\n      result.set(1, 2, c12);\r\n      result.set(2, 0, c20);\r\n      result.set(2, 1, c21);\r\n      result.set(2, 2, c22);\r\n      return result;\r\n    }\r\n\r\n    /**\r\n         * Returns the matrix product between x and y. More efficient than mmul(other) only when we multiply squared matrix and when the size of the matrix is > 1000.\r\n         * @param {Matrix} y\r\n         * @return {Matrix}\r\n         */\r\n    mmulStrassen(y) {\r\n      var x = this.clone();\r\n      var r1 = x.rows;\r\n      var c1 = x.columns;\r\n      var r2 = y.rows;\r\n      var c2 = y.columns;\r\n      if (c1 !== r2) {\r\n        // eslint-disable-next-line no-console\r\n        console.warn(`Multiplying ${r1} x ${c1} and ${r2} x ${c2} matrix: dimensions do not match.`);\r\n      }\r\n\r\n      // Put a matrix into the top left of a matrix of zeros.\r\n      // `rows` and `cols` are the dimensions of the output matrix.\r\n      function embed(mat, rows, cols) {\r\n        var r = mat.rows;\r\n        var c = mat.columns;\r\n        if ((r === rows) && (c === cols)) {\r\n          return mat;\r\n        } else {\r\n          var resultat = Matrix.zeros(rows, cols);\r\n          resultat = resultat.setSubMatrix(mat, 0, 0);\r\n          return resultat;\r\n        }\r\n      }\r\n\r\n\r\n      // Make sure both matrices are the same size.\r\n      // This is exclusively for simplicity:\r\n      // this algorithm can be implemented with matrices of different sizes.\r\n\r\n      var r = Math.max(r1, r2);\r\n      var c = Math.max(c1, c2);\r\n      x = embed(x, r, c);\r\n      y = embed(y, r, c);\r\n\r\n      // Our recursive multiplication function.\r\n      function blockMult(a, b, rows, cols) {\r\n        // For small matrices, resort to naive multiplication.\r\n        if (rows <= 512 || cols <= 512) {\r\n          return a.mmul(b); // a is equivalent to this\r\n        }\r\n\r\n        // Apply dynamic padding.\r\n        if ((rows % 2 === 1) && (cols % 2 === 1)) {\r\n          a = embed(a, rows + 1, cols + 1);\r\n          b = embed(b, rows + 1, cols + 1);\r\n        } else if (rows % 2 === 1) {\r\n          a = embed(a, rows + 1, cols);\r\n          b = embed(b, rows + 1, cols);\r\n        } else if (cols % 2 === 1) {\r\n          a = embed(a, rows, cols + 1);\r\n          b = embed(b, rows, cols + 1);\r\n        }\r\n\r\n        var halfRows = parseInt(a.rows / 2, 10);\r\n        var halfCols = parseInt(a.columns / 2, 10);\r\n        // Subdivide input matrices.\r\n        var a11 = a.subMatrix(0, halfRows - 1, 0, halfCols - 1);\r\n        var b11 = b.subMatrix(0, halfRows - 1, 0, halfCols - 1);\r\n\r\n        var a12 = a.subMatrix(0, halfRows - 1, halfCols, a.columns - 1);\r\n        var b12 = b.subMatrix(0, halfRows - 1, halfCols, b.columns - 1);\r\n\r\n        var a21 = a.subMatrix(halfRows, a.rows - 1, 0, halfCols - 1);\r\n        var b21 = b.subMatrix(halfRows, b.rows - 1, 0, halfCols - 1);\r\n\r\n        var a22 = a.subMatrix(halfRows, a.rows - 1, halfCols, a.columns - 1);\r\n        var b22 = b.subMatrix(halfRows, b.rows - 1, halfCols, b.columns - 1);\r\n\r\n        // Compute intermediate values.\r\n        var m1 = blockMult(Matrix.add(a11, a22), Matrix.add(b11, b22), halfRows, halfCols);\r\n        var m2 = blockMult(Matrix.add(a21, a22), b11, halfRows, halfCols);\r\n        var m3 = blockMult(a11, Matrix.sub(b12, b22), halfRows, halfCols);\r\n        var m4 = blockMult(a22, Matrix.sub(b21, b11), halfRows, halfCols);\r\n        var m5 = blockMult(Matrix.add(a11, a12), b22, halfRows, halfCols);\r\n        var m6 = blockMult(Matrix.sub(a21, a11), Matrix.add(b11, b12), halfRows, halfCols);\r\n        var m7 = blockMult(Matrix.sub(a12, a22), Matrix.add(b21, b22), halfRows, halfCols);\r\n\r\n        // Combine intermediate values into the output.\r\n        var c11 = Matrix.add(m1, m4);\r\n        c11.sub(m5);\r\n        c11.add(m7);\r\n        var c12 = Matrix.add(m3, m5);\r\n        var c21 = Matrix.add(m2, m4);\r\n        var c22 = Matrix.sub(m1, m2);\r\n        c22.add(m3);\r\n        c22.add(m6);\r\n\r\n        // Crop output to the desired size (undo dynamic padding).\r\n        var resultat = Matrix.zeros(2 * c11.rows, 2 * c11.columns);\r\n        resultat = resultat.setSubMatrix(c11, 0, 0);\r\n        resultat = resultat.setSubMatrix(c12, c11.rows, 0);\r\n        resultat = resultat.setSubMatrix(c21, 0, c11.columns);\r\n        resultat = resultat.setSubMatrix(c22, c11.rows, c11.columns);\r\n        return resultat.subMatrix(0, rows - 1, 0, cols - 1);\r\n      }\r\n      return blockMult(x, y, r, c);\r\n    }\r\n\r\n    /**\r\n         * Returns a row-by-row scaled matrix\r\n         * @param {number} [min=0] - Minimum scaled value\r\n         * @param {number} [max=1] - Maximum scaled value\r\n         * @return {Matrix} - The scaled matrix\r\n         */\r\n    scaleRows(min, max) {\r\n      min = min === undefined ? 0 : min;\r\n      max = max === undefined ? 1 : max;\r\n      if (min >= max) {\r\n        throw new RangeError('min should be strictly smaller than max');\r\n      }\r\n      var newMatrix = this.constructor.empty(this.rows, this.columns);\r\n      for (var i = 0; i < this.rows; i++) {\r\n        var scaled = rescale(this.getRow(i), { min, max });\r\n        newMatrix.setRow(i, scaled);\r\n      }\r\n      return newMatrix;\r\n    }\r\n\r\n    /**\r\n         * Returns a new column-by-column scaled matrix\r\n         * @param {number} [min=0] - Minimum scaled value\r\n         * @param {number} [max=1] - Maximum scaled value\r\n         * @return {Matrix} - The new scaled matrix\r\n         * @example\r\n         * var matrix = new Matrix([[1,2],[-1,0]]);\r\n         * var scaledMatrix = matrix.scaleColumns(); // [[1,1],[0,0]]\r\n         */\r\n    scaleColumns(min, max) {\r\n      min = min === undefined ? 0 : min;\r\n      max = max === undefined ? 1 : max;\r\n      if (min >= max) {\r\n        throw new RangeError('min should be strictly smaller than max');\r\n      }\r\n      var newMatrix = this.constructor.empty(this.rows, this.columns);\r\n      for (var i = 0; i < this.columns; i++) {\r\n        var scaled = rescale(this.getColumn(i), {\r\n          min: min,\r\n          max: max\r\n        });\r\n        newMatrix.setColumn(i, scaled);\r\n      }\r\n      return newMatrix;\r\n    }\r\n\r\n\r\n    /**\r\n         * Returns the Kronecker product (also known as tensor product) between this and other\r\n         * See https://en.wikipedia.org/wiki/Kronecker_product\r\n         * @param {Matrix} other\r\n         * @return {Matrix}\r\n         */\r\n    kroneckerProduct(other) {\r\n      other = this.constructor.checkMatrix(other);\r\n\r\n      var m = this.rows;\r\n      var n = this.columns;\r\n      var p = other.rows;\r\n      var q = other.columns;\r\n\r\n      var result = new this.constructor[Symbol.species](m * p, n * q);\r\n      for (var i = 0; i < m; i++) {\r\n        for (var j = 0; j < n; j++) {\r\n          for (var k = 0; k < p; k++) {\r\n            for (var l = 0; l < q; l++) {\r\n              result[p * i + k][q * j + l] = this.get(i, j) * other.get(k, l);\r\n            }\r\n          }\r\n        }\r\n      }\r\n      return result;\r\n    }\r\n\r\n    /**\r\n         * Transposes the matrix and returns a new one containing the result\r\n         * @return {Matrix}\r\n         */\r\n    transpose() {\r\n      var result = new this.constructor[Symbol.species](this.columns, this.rows);\r\n      for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n          result.set(j, i, this.get(i, j));\r\n        }\r\n      }\r\n      return result;\r\n    }\r\n\r\n    /**\r\n         * Sorts the rows (in place)\r\n         * @param {function} compareFunction - usual Array.prototype.sort comparison function\r\n         * @return {Matrix} this\r\n         */\r\n    sortRows(compareFunction) {\r\n      if (compareFunction === undefined) compareFunction = compareNumbers;\r\n      for (var i = 0; i < this.rows; i++) {\r\n        this.setRow(i, this.getRow(i).sort(compareFunction));\r\n      }\r\n      return this;\r\n    }\r\n\r\n    /**\r\n         * Sorts the columns (in place)\r\n         * @param {function} compareFunction - usual Array.prototype.sort comparison function\r\n         * @return {Matrix} this\r\n         */\r\n    sortColumns(compareFunction) {\r\n      if (compareFunction === undefined) compareFunction = compareNumbers;\r\n      for (var i = 0; i < this.columns; i++) {\r\n        this.setColumn(i, this.getColumn(i).sort(compareFunction));\r\n      }\r\n      return this;\r\n    }\r\n\r\n    /**\r\n         * Returns a subset of the matrix\r\n         * @param {number} startRow - First row index\r\n         * @param {number} endRow - Last row index\r\n         * @param {number} startColumn - First column index\r\n         * @param {number} endColumn - Last column index\r\n         * @return {Matrix}\r\n         */\r\n    subMatrix(startRow, endRow, startColumn, endColumn) {\r\n      checkRange(this, startRow, endRow, startColumn, endColumn);\r\n      var newMatrix = new this.constructor[Symbol.species](endRow - startRow + 1, endColumn - startColumn + 1);\r\n      for (var i = startRow; i <= endRow; i++) {\r\n        for (var j = startColumn; j <= endColumn; j++) {\r\n          newMatrix[i - startRow][j - startColumn] = this.get(i, j);\r\n        }\r\n      }\r\n      return newMatrix;\r\n    }\r\n\r\n    /**\r\n         * Returns a subset of the matrix based on an array of row indices\r\n         * @param {Array} indices - Array containing the row indices\r\n         * @param {number} [startColumn = 0] - First column index\r\n         * @param {number} [endColumn = this.columns-1] - Last column index\r\n         * @return {Matrix}\r\n         */\r\n    subMatrixRow(indices, startColumn, endColumn) {\r\n      if (startColumn === undefined) startColumn = 0;\r\n      if (endColumn === undefined) endColumn = this.columns - 1;\r\n      if ((startColumn > endColumn) || (startColumn < 0) || (startColumn >= this.columns) || (endColumn < 0) || (endColumn >= this.columns)) {\r\n        throw new RangeError('Argument out of range');\r\n      }\r\n\r\n      var newMatrix = new this.constructor[Symbol.species](indices.length, endColumn - startColumn + 1);\r\n      for (var i = 0; i < indices.length; i++) {\r\n        for (var j = startColumn; j <= endColumn; j++) {\r\n          if (indices[i] < 0 || indices[i] >= this.rows) {\r\n            throw new RangeError(`Row index out of range: ${indices[i]}`);\r\n          }\r\n          newMatrix.set(i, j - startColumn, this.get(indices[i], j));\r\n        }\r\n      }\r\n      return newMatrix;\r\n    }\r\n\r\n    /**\r\n         * Returns a subset of the matrix based on an array of column indices\r\n         * @param {Array} indices - Array containing the column indices\r\n         * @param {number} [startRow = 0] - First row index\r\n         * @param {number} [endRow = this.rows-1] - Last row index\r\n         * @return {Matrix}\r\n         */\r\n    subMatrixColumn(indices, startRow, endRow) {\r\n      if (startRow === undefined) startRow = 0;\r\n      if (endRow === undefined) endRow = this.rows - 1;\r\n      if ((startRow > endRow) || (startRow < 0) || (startRow >= this.rows) || (endRow < 0) || (endRow >= this.rows)) {\r\n        throw new RangeError('Argument out of range');\r\n      }\r\n\r\n      var newMatrix = new this.constructor[Symbol.species](endRow - startRow + 1, indices.length);\r\n      for (var i = 0; i < indices.length; i++) {\r\n        for (var j = startRow; j <= endRow; j++) {\r\n          if (indices[i] < 0 || indices[i] >= this.columns) {\r\n            throw new RangeError(`Column index out of range: ${indices[i]}`);\r\n          }\r\n          newMatrix.set(j - startRow, i, this.get(j, indices[i]));\r\n        }\r\n      }\r\n      return newMatrix;\r\n    }\r\n\r\n    /**\r\n         * Set a part of the matrix to the given sub-matrix\r\n         * @param {Matrix|Array< Array >} matrix - The source matrix from which to extract values.\r\n         * @param {number} startRow - The index of the first row to set\r\n         * @param {number} startColumn - The index of the first column to set\r\n         * @return {Matrix}\r\n         */\r\n    setSubMatrix(matrix, startRow, startColumn) {\r\n      matrix = this.constructor.checkMatrix(matrix);\r\n      var endRow = startRow + matrix.rows - 1;\r\n      var endColumn = startColumn + matrix.columns - 1;\r\n      checkRange(this, startRow, endRow, startColumn, endColumn);\r\n      for (var i = 0; i < matrix.rows; i++) {\r\n        for (var j = 0; j < matrix.columns; j++) {\r\n          this[startRow + i][startColumn + j] = matrix.get(i, j);\r\n        }\r\n      }\r\n      return this;\r\n    }\r\n\r\n    /**\r\n         * Return a new matrix based on a selection of rows and columns\r\n         * @param {Array<number>} rowIndices - The row indices to select. Order matters and an index can be more than once.\r\n         * @param {Array<number>} columnIndices - The column indices to select. Order matters and an index can be use more than once.\r\n         * @return {Matrix} The new matrix\r\n         */\r\n    selection(rowIndices, columnIndices) {\r\n      var indices = checkIndices(this, rowIndices, columnIndices);\r\n      var newMatrix = new this.constructor[Symbol.species](rowIndices.length, columnIndices.length);\r\n      for (var i = 0; i < indices.row.length; i++) {\r\n        var rowIndex = indices.row[i];\r\n        for (var j = 0; j < indices.column.length; j++) {\r\n          var columnIndex = indices.column[j];\r\n          newMatrix[i][j] = this.get(rowIndex, columnIndex);\r\n        }\r\n      }\r\n      return newMatrix;\r\n    }\r\n\r\n    /**\r\n         * Returns the trace of the matrix (sum of the diagonal elements)\r\n         * @return {number}\r\n         */\r\n    trace() {\r\n      var min = Math.min(this.rows, this.columns);\r\n      var trace = 0;\r\n      for (var i = 0; i < min; i++) {\r\n        trace += this.get(i, i);\r\n      }\r\n      return trace;\r\n    }\r\n\r\n    /*\r\n         Matrix views\r\n         */\r\n\r\n    /**\r\n         * Returns a view of the transposition of the matrix\r\n         * @return {MatrixTransposeView}\r\n         */\r\n    transposeView() {\r\n      return new MatrixTransposeView(this);\r\n    }\r\n\r\n    /**\r\n         * Returns a view of the row vector with the given index\r\n         * @param {number} row - row index of the vector\r\n         * @return {MatrixRowView}\r\n         */\r\n    rowView(row) {\r\n      checkRowIndex(this, row);\r\n      return new MatrixRowView(this, row);\r\n    }\r\n\r\n    /**\r\n         * Returns a view of the column vector with the given index\r\n         * @param {number} column - column index of the vector\r\n         * @return {MatrixColumnView}\r\n         */\r\n    columnView(column) {\r\n      checkColumnIndex(this, column);\r\n      return new MatrixColumnView(this, column);\r\n    }\r\n\r\n    /**\r\n         * Returns a view of the matrix flipped in the row axis\r\n         * @return {MatrixFlipRowView}\r\n         */\r\n    flipRowView() {\r\n      return new MatrixFlipRowView(this);\r\n    }\r\n\r\n    /**\r\n         * Returns a view of the matrix flipped in the column axis\r\n         * @return {MatrixFlipColumnView}\r\n         */\r\n    flipColumnView() {\r\n      return new MatrixFlipColumnView(this);\r\n    }\r\n\r\n    /**\r\n         * Returns a view of a submatrix giving the index boundaries\r\n         * @param {number} startRow - first row index of the submatrix\r\n         * @param {number} endRow - last row index of the submatrix\r\n         * @param {number} startColumn - first column index of the submatrix\r\n         * @param {number} endColumn - last column index of the submatrix\r\n         * @return {MatrixSubView}\r\n         */\r\n    subMatrixView(startRow, endRow, startColumn, endColumn) {\r\n      return new MatrixSubView(this, startRow, endRow, startColumn, endColumn);\r\n    }\r\n\r\n    /**\r\n         * Returns a view of the cross of the row indices and the column indices\r\n         * @example\r\n         * // resulting vector is [[2], [2]]\r\n         * var matrix = new Matrix([[1,2,3], [4,5,6]]).selectionView([0, 0], [1])\r\n         * @param {Array<number>} rowIndices\r\n         * @param {Array<number>} columnIndices\r\n         * @return {MatrixSelectionView}\r\n         */\r\n    selectionView(rowIndices, columnIndices) {\r\n      return new MatrixSelectionView(this, rowIndices, columnIndices);\r\n    }\r\n\r\n    /**\r\n         * Returns a view of the row indices\r\n         * @example\r\n         * // resulting vector is [[1,2,3], [1,2,3]]\r\n         * var matrix = new Matrix([[1,2,3], [4,5,6]]).rowSelectionView([0, 0])\r\n         * @param {Array<number>} rowIndices\r\n         * @return {MatrixRowSelectionView}\r\n         */\r\n    rowSelectionView(rowIndices) {\r\n      return new MatrixRowSelectionView(this, rowIndices);\r\n    }\r\n\r\n    /**\r\n         * Returns a view of the column indices\r\n         * @example\r\n         * // resulting vector is [[2, 2], [5, 5]]\r\n         * var matrix = new Matrix([[1,2,3], [4,5,6]]).columnSelectionView([1, 1])\r\n         * @param {Array<number>} columnIndices\r\n         * @return {MatrixColumnSelectionView}\r\n         */\r\n    columnSelectionView(columnIndices) {\r\n      return new MatrixColumnSelectionView(this, columnIndices);\r\n    }\r\n\r\n\r\n    /**\r\n        * Calculates and returns the determinant of a matrix as a Number\r\n        * @example\r\n        *   new Matrix([[1,2,3], [4,5,6]]).det()\r\n        * @return {number}\r\n        */\r\n    det() {\r\n      if (this.isSquare()) {\r\n        var a, b, c, d;\r\n        if (this.columns === 2) {\r\n          // 2 x 2 matrix\r\n          a = this.get(0, 0);\r\n          b = this.get(0, 1);\r\n          c = this.get(1, 0);\r\n          d = this.get(1, 1);\r\n\r\n          return a * d - (b * c);\r\n        } else if (this.columns === 3) {\r\n          // 3 x 3 matrix\r\n          var subMatrix0, subMatrix1, subMatrix2;\r\n          subMatrix0 = this.selectionView([1, 2], [1, 2]);\r\n          subMatrix1 = this.selectionView([1, 2], [0, 2]);\r\n          subMatrix2 = this.selectionView([1, 2], [0, 1]);\r\n          a = this.get(0, 0);\r\n          b = this.get(0, 1);\r\n          c = this.get(0, 2);\r\n\r\n          return a * subMatrix0.det() - b * subMatrix1.det() + c * subMatrix2.det();\r\n        } else {\r\n          // general purpose determinant using the LU decomposition\r\n          return new LuDecomposition(this).determinant;\r\n        }\r\n      } else {\r\n        throw Error('Determinant can only be calculated for a square matrix.');\r\n      }\r\n    }\r\n\r\n    /**\r\n         * Returns inverse of a matrix if it exists or the pseudoinverse\r\n         * @param {number} threshold - threshold for taking inverse of singular values (default = 1e-15)\r\n         * @return {Matrix} the (pseudo)inverted matrix.\r\n         */\r\n    pseudoInverse(threshold) {\r\n      if (threshold === undefined) threshold = Number.EPSILON;\r\n      var svdSolution = new SvDecomposition(this, { autoTranspose: true });\r\n\r\n      var U = svdSolution.leftSingularVectors;\r\n      var V = svdSolution.rightSingularVectors;\r\n      var s = svdSolution.diagonal;\r\n\r\n      for (var i = 0; i < s.length; i++) {\r\n        if (Math.abs(s[i]) > threshold) {\r\n          s[i] = 1.0 / s[i];\r\n        } else {\r\n          s[i] = 0.0;\r\n        }\r\n      }\r\n\r\n      // convert list to diagonal\r\n      s = this.constructor[Symbol.species].diag(s);\r\n      return V.mmul(s.mmul(U.transposeView()));\r\n    }\r\n\r\n    /**\r\n         * Creates an exact and independent copy of the matrix\r\n         * @return {Matrix}\r\n         */\r\n    clone() {\r\n      var newMatrix = new this.constructor[Symbol.species](this.rows, this.columns);\r\n      for (var row = 0; row < this.rows; row++) {\r\n        for (var column = 0; column < this.columns; column++) {\r\n          newMatrix.set(row, column, this.get(row, column));\r\n        }\r\n      }\r\n      return newMatrix;\r\n    }\r\n  }\r\n\r\n  Matrix.prototype.klass = 'Matrix';\r\n\r\n  function compareNumbers(a, b) {\r\n    return a - b;\r\n  }\r\n\r\n  /*\r\n     Synonyms\r\n     */\r\n\r\n  Matrix.random = Matrix.rand;\r\n  Matrix.diagonal = Matrix.diag;\r\n  Matrix.prototype.diagonal = Matrix.prototype.diag;\r\n  Matrix.identity = Matrix.eye;\r\n  Matrix.prototype.negate = Matrix.prototype.neg;\r\n  Matrix.prototype.tensorProduct = Matrix.prototype.kroneckerProduct;\r\n  Matrix.prototype.determinant = Matrix.prototype.det;\r\n\r\n  /*\r\n     Add dynamically instance and static methods for mathematical operations\r\n     */\r\n\r\n  var inplaceOperator = `\r\n(function %name%(value) {\r\n    if (typeof value === 'number') return this.%name%S(value);\r\n    return this.%name%M(value);\r\n})\r\n`;\r\n\r\n  var inplaceOperatorScalar = `\r\n(function %name%S(value) {\r\n    for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n            this.set(i, j, this.get(i, j) %op% value);\r\n        }\r\n    }\r\n    return this;\r\n})\r\n`;\r\n\r\n  var inplaceOperatorMatrix = `\r\n(function %name%M(matrix) {\r\n    matrix = this.constructor.checkMatrix(matrix);\r\n    if (this.rows !== matrix.rows ||\r\n        this.columns !== matrix.columns) {\r\n        throw new RangeError('Matrices dimensions must be equal');\r\n    }\r\n    for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n            this.set(i, j, this.get(i, j) %op% matrix.get(i, j));\r\n        }\r\n    }\r\n    return this;\r\n})\r\n`;\r\n\r\n  var staticOperator = `\r\n(function %name%(matrix, value) {\r\n    var newMatrix = new this[Symbol.species](matrix);\r\n    return newMatrix.%name%(value);\r\n})\r\n`;\r\n\r\n  var inplaceMethod = `\r\n(function %name%() {\r\n    for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n            this.set(i, j, %method%(this.get(i, j)));\r\n        }\r\n    }\r\n    return this;\r\n})\r\n`;\r\n\r\n  var staticMethod = `\r\n(function %name%(matrix) {\r\n    var newMatrix = new this[Symbol.species](matrix);\r\n    return newMatrix.%name%();\r\n})\r\n`;\r\n\r\n  var inplaceMethodWithArgs = `\r\n(function %name%(%args%) {\r\n    for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n            this.set(i, j, %method%(this.get(i, j), %args%));\r\n        }\r\n    }\r\n    return this;\r\n})\r\n`;\r\n\r\n  var staticMethodWithArgs = `\r\n(function %name%(matrix, %args%) {\r\n    var newMatrix = new this[Symbol.species](matrix);\r\n    return newMatrix.%name%(%args%);\r\n})\r\n`;\r\n\r\n\r\n  var inplaceMethodWithOneArgScalar = `\r\n(function %name%S(value) {\r\n    for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n            this.set(i, j, %method%(this.get(i, j), value));\r\n        }\r\n    }\r\n    return this;\r\n})\r\n`;\r\n  var inplaceMethodWithOneArgMatrix = `\r\n(function %name%M(matrix) {\r\n    matrix = this.constructor.checkMatrix(matrix);\r\n    if (this.rows !== matrix.rows ||\r\n        this.columns !== matrix.columns) {\r\n        throw new RangeError('Matrices dimensions must be equal');\r\n    }\r\n    for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n            this.set(i, j, %method%(this.get(i, j), matrix.get(i, j)));\r\n        }\r\n    }\r\n    return this;\r\n})\r\n`;\r\n\r\n  var inplaceMethodWithOneArg = `\r\n(function %name%(value) {\r\n    if (typeof value === 'number') return this.%name%S(value);\r\n    return this.%name%M(value);\r\n})\r\n`;\r\n\r\n  var staticMethodWithOneArg = staticMethodWithArgs;\r\n\r\n  var operators = [\r\n    // Arithmetic operators\r\n    ['+', 'add'],\r\n    ['-', 'sub', 'subtract'],\r\n    ['*', 'mul', 'multiply'],\r\n    ['/', 'div', 'divide'],\r\n    ['%', 'mod', 'modulus'],\r\n    // Bitwise operators\r\n    ['&', 'and'],\r\n    ['|', 'or'],\r\n    ['^', 'xor'],\r\n    ['<<', 'leftShift'],\r\n    ['>>', 'signPropagatingRightShift'],\r\n    ['>>>', 'rightShift', 'zeroFillRightShift']\r\n  ];\r\n\r\n  var i;\r\n  var eval2 = eval; // eslint-disable-line no-eval\r\n  for (var operator of operators) {\r\n    var inplaceOp = eval2(fillTemplateFunction(inplaceOperator, { name: operator[1], op: operator[0] }));\r\n    var inplaceOpS = eval2(fillTemplateFunction(inplaceOperatorScalar, { name: `${operator[1]}S`, op: operator[0] }));\r\n    var inplaceOpM = eval2(fillTemplateFunction(inplaceOperatorMatrix, { name: `${operator[1]}M`, op: operator[0] }));\r\n    var staticOp = eval2(fillTemplateFunction(staticOperator, { name: operator[1] }));\r\n    for (i = 1; i < operator.length; i++) {\r\n      Matrix.prototype[operator[i]] = inplaceOp;\r\n      Matrix.prototype[`${operator[i]}S`] = inplaceOpS;\r\n      Matrix.prototype[`${operator[i]}M`] = inplaceOpM;\r\n      Matrix[operator[i]] = staticOp;\r\n    }\r\n  }\r\n\r\n  var methods = [['~', 'not']];\r\n\r\n  [\r\n    'abs', 'acos', 'acosh', 'asin', 'asinh', 'atan', 'atanh', 'cbrt', 'ceil',\r\n    'clz32', 'cos', 'cosh', 'exp', 'expm1', 'floor', 'fround', 'log', 'log1p',\r\n    'log10', 'log2', 'round', 'sign', 'sin', 'sinh', 'sqrt', 'tan', 'tanh', 'trunc'\r\n  ].forEach(function (mathMethod) {\r\n    methods.push([`Math.${mathMethod}`, mathMethod]);\r\n  });\r\n\r\n  for (var method of methods) {\r\n    var inplaceMeth = eval2(fillTemplateFunction(inplaceMethod, { name: method[1], method: method[0] }));\r\n    var staticMeth = eval2(fillTemplateFunction(staticMethod, { name: method[1] }));\r\n    for (i = 1; i < method.length; i++) {\r\n      Matrix.prototype[method[i]] = inplaceMeth;\r\n      Matrix[method[i]] = staticMeth;\r\n    }\r\n  }\r\n\r\n  var methodsWithArgs = [['Math.pow', 1, 'pow']];\r\n\r\n  for (var methodWithArg of methodsWithArgs) {\r\n    var args = 'arg0';\r\n    for (i = 1; i < methodWithArg[1]; i++) {\r\n      args += `, arg${i}`;\r\n    }\r\n    if (methodWithArg[1] !== 1) {\r\n      var inplaceMethWithArgs = eval2(fillTemplateFunction(inplaceMethodWithArgs, {\r\n        name: methodWithArg[2],\r\n        method: methodWithArg[0],\r\n        args: args\r\n      }));\r\n      var staticMethWithArgs = eval2(fillTemplateFunction(staticMethodWithArgs, { name: methodWithArg[2], args: args }));\r\n      for (i = 2; i < methodWithArg.length; i++) {\r\n        Matrix.prototype[methodWithArg[i]] = inplaceMethWithArgs;\r\n        Matrix[methodWithArg[i]] = staticMethWithArgs;\r\n      }\r\n    } else {\r\n      var tmplVar = {\r\n        name: methodWithArg[2],\r\n        args: args,\r\n        method: methodWithArg[0]\r\n      };\r\n      var inplaceMethod2 = eval2(fillTemplateFunction(inplaceMethodWithOneArg, tmplVar));\r\n      var inplaceMethodS = eval2(fillTemplateFunction(inplaceMethodWithOneArgScalar, tmplVar));\r\n      var inplaceMethodM = eval2(fillTemplateFunction(inplaceMethodWithOneArgMatrix, tmplVar));\r\n      var staticMethod2 = eval2(fillTemplateFunction(staticMethodWithOneArg, tmplVar));\r\n      for (i = 2; i < methodWithArg.length; i++) {\r\n        Matrix.prototype[methodWithArg[i]] = inplaceMethod2;\r\n        Matrix.prototype[`${methodWithArg[i]}M`] = inplaceMethodM;\r\n        Matrix.prototype[`${methodWithArg[i]}S`] = inplaceMethodS;\r\n        Matrix[methodWithArg[i]] = staticMethod2;\r\n      }\r\n    }\r\n  }\r\n\r\n  function fillTemplateFunction(template, values) {\r\n    for (var value in values) {\r\n      template = template.replace(new RegExp(`%${value}%`, 'g'), values[value]);\r\n    }\r\n    return template;\r\n  }\r\n\r\n  return Matrix;\r\n}\r\n","import AbstractMatrix from './abstractMatrix';\r\nimport {\r\n  checkColumnIndex,\r\n  checkColumnVector,\r\n  checkRowIndex,\r\n  checkRowVector\r\n} from './util';\r\n\r\nexport default class Matrix extends AbstractMatrix(Array) {\r\n  constructor(nRows, nColumns) {\r\n    var i;\r\n    if (arguments.length === 1 && typeof nRows === 'number') {\r\n      return new Array(nRows);\r\n    }\r\n    if (Matrix.isMatrix(nRows)) {\r\n      return nRows.clone();\r\n    } else if (Number.isInteger(nRows) && nRows > 0) {\r\n      // Create an empty matrix\r\n      super(nRows);\r\n      if (Number.isInteger(nColumns) && nColumns > 0) {\r\n        for (i = 0; i < nRows; i++) {\r\n          this[i] = new Array(nColumns);\r\n        }\r\n      } else {\r\n        throw new TypeError('nColumns must be a positive integer');\r\n      }\r\n    } else if (Array.isArray(nRows)) {\r\n      // Copy the values from the 2D array\r\n      const matrix = nRows;\r\n      nRows = matrix.length;\r\n      nColumns = matrix[0].length;\r\n      if (typeof nColumns !== 'number' || nColumns === 0) {\r\n        throw new TypeError(\r\n          'Data must be a 2D array with at least one element'\r\n        );\r\n      }\r\n      super(nRows);\r\n      for (i = 0; i < nRows; i++) {\r\n        if (matrix[i].length !== nColumns) {\r\n          throw new RangeError('Inconsistent array dimensions');\r\n        }\r\n        this[i] = [].concat(matrix[i]);\r\n      }\r\n    } else {\r\n      throw new TypeError(\r\n        'First argument must be a positive number or an array'\r\n      );\r\n    }\r\n    this.rows = nRows;\r\n    this.columns = nColumns;\r\n    return this;\r\n  }\r\n\r\n  set(rowIndex, columnIndex, value) {\r\n    this[rowIndex][columnIndex] = value;\r\n    return this;\r\n  }\r\n\r\n  get(rowIndex, columnIndex) {\r\n    return this[rowIndex][columnIndex];\r\n  }\r\n\r\n  /**\r\n   * Removes a row from the given index\r\n   * @param {number} index - Row index\r\n   * @return {Matrix} this\r\n   */\r\n  removeRow(index) {\r\n    checkRowIndex(this, index);\r\n    if (this.rows === 1) {\r\n      throw new RangeError('A matrix cannot have less than one row');\r\n    }\r\n    this.splice(index, 1);\r\n    this.rows -= 1;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Adds a row at the given index\r\n   * @param {number} [index = this.rows] - Row index\r\n   * @param {Array|Matrix} array - Array or vector\r\n   * @return {Matrix} this\r\n   */\r\n  addRow(index, array) {\r\n    if (array === undefined) {\r\n      array = index;\r\n      index = this.rows;\r\n    }\r\n    checkRowIndex(this, index, true);\r\n    array = checkRowVector(this, array, true);\r\n    this.splice(index, 0, array);\r\n    this.rows += 1;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Removes a column from the given index\r\n   * @param {number} index - Column index\r\n   * @return {Matrix} this\r\n   */\r\n  removeColumn(index) {\r\n    checkColumnIndex(this, index);\r\n    if (this.columns === 1) {\r\n      throw new RangeError('A matrix cannot have less than one column');\r\n    }\r\n    for (var i = 0; i < this.rows; i++) {\r\n      this[i].splice(index, 1);\r\n    }\r\n    this.columns -= 1;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Adds a column at the given index\r\n   * @param {number} [index = this.columns] - Column index\r\n   * @param {Array|Matrix} array - Array or vector\r\n   * @return {Matrix} this\r\n   */\r\n  addColumn(index, array) {\r\n    if (typeof array === 'undefined') {\r\n      array = index;\r\n      index = this.columns;\r\n    }\r\n    checkColumnIndex(this, index, true);\r\n    array = checkColumnVector(this, array);\r\n    for (var i = 0; i < this.rows; i++) {\r\n      this[i].splice(index, 0, array[i]);\r\n    }\r\n    this.columns += 1;\r\n    return this;\r\n  }\r\n}\r\n","import AbstractMatrix from '../abstractMatrix';\r\nimport Matrix from '../matrix';\r\n\r\nexport default class WrapperMatrix1D extends AbstractMatrix() {\r\n  /**\r\n   * @class WrapperMatrix1D\r\n   * @param {Array<number>} data\r\n   * @param {object} [options]\r\n   * @param {object} [options.rows = 1]\r\n   */\r\n  constructor(data, options = {}) {\r\n    const { rows = 1 } = options;\r\n\r\n    if (data.length % rows !== 0) {\r\n      throw new Error('the data length is not divisible by the number of rows');\r\n    }\r\n    super();\r\n    this.rows = rows;\r\n    this.columns = data.length / rows;\r\n    this.data = data;\r\n  }\r\n\r\n  set(rowIndex, columnIndex, value) {\r\n    var index = this._calculateIndex(rowIndex, columnIndex);\r\n    this.data[index] = value;\r\n    return this;\r\n  }\r\n\r\n  get(rowIndex, columnIndex) {\r\n    var index = this._calculateIndex(rowIndex, columnIndex);\r\n    return this.data[index];\r\n  }\r\n\r\n  _calculateIndex(row, column) {\r\n    return row * this.columns + column;\r\n  }\r\n\r\n  static get [Symbol.species]() {\r\n    return Matrix;\r\n  }\r\n}\r\n","import AbstractMatrix from '../abstractMatrix';\r\nimport Matrix from '../matrix';\r\n\r\nexport default class WrapperMatrix2D extends AbstractMatrix() {\r\n  /**\r\n   * @class WrapperMatrix2D\r\n   * @param {Array<Array<number>>} data\r\n   */\r\n  constructor(data) {\r\n    super();\r\n    this.data = data;\r\n    this.rows = data.length;\r\n    this.columns = data[0].length;\r\n  }\r\n\r\n  set(rowIndex, columnIndex, value) {\r\n    this.data[rowIndex][columnIndex] = value;\r\n    return this;\r\n  }\r\n\r\n  get(rowIndex, columnIndex) {\r\n    return this.data[rowIndex][columnIndex];\r\n  }\r\n\r\n  static get [Symbol.species]() {\r\n    return Matrix;\r\n  }\r\n}\r\n","import WrapperMatrix1D from './WrapperMatrix1D';\r\nimport WrapperMatrix2D from './WrapperMatrix2D';\r\n\r\n/**\r\n * @param {Array<Array<number>>|Array<number>} array\r\n * @param {object} [options]\r\n * @param {object} [options.rows = 1]\r\n * @return {WrapperMatrix1D|WrapperMatrix2D}\r\n */\r\nexport function wrap(array, options) {\r\n  if (Array.isArray(array)) {\r\n    if (array[0] && Array.isArray(array[0])) {\r\n      return new WrapperMatrix2D(array);\r\n    } else {\r\n      return new WrapperMatrix1D(array, options);\r\n    }\r\n  } else {\r\n    throw new Error('the argument is not an array');\r\n  }\r\n}\r\n","import { Matrix, WrapperMatrix2D } from '../index';\r\n\r\nimport { hypotenuse } from './util';\r\n\r\n/**\r\n * @class QrDecomposition\r\n * @link https://github.com/lutzroeder/Mapack/blob/master/Source/QrDecomposition.cs\r\n * @param {Matrix} value\r\n */\r\nexport default class QrDecomposition {\r\n  constructor(value) {\r\n    value = WrapperMatrix2D.checkMatrix(value);\r\n\r\n    var qr = value.clone();\r\n    var m = value.rows;\r\n    var n = value.columns;\r\n    var rdiag = new Array(n);\r\n    var i, j, k, s;\r\n\r\n    for (k = 0; k < n; k++) {\r\n      var nrm = 0;\r\n      for (i = k; i < m; i++) {\r\n        nrm = hypotenuse(nrm, qr.get(i, k));\r\n      }\r\n      if (nrm !== 0) {\r\n        if (qr.get(k, k) < 0) {\r\n          nrm = -nrm;\r\n        }\r\n        for (i = k; i < m; i++) {\r\n          qr.set(i, k, qr.get(i, k) / nrm);\r\n        }\r\n        qr.set(k, k, qr.get(k, k) + 1);\r\n        for (j = k + 1; j < n; j++) {\r\n          s = 0;\r\n          for (i = k; i < m; i++) {\r\n            s += qr.get(i, k) * qr.get(i, j);\r\n          }\r\n          s = -s / qr.get(k, k);\r\n          for (i = k; i < m; i++) {\r\n            qr.set(i, j, qr.get(i, j) + s * qr.get(i, k));\r\n          }\r\n        }\r\n      }\r\n      rdiag[k] = -nrm;\r\n    }\r\n\r\n    this.QR = qr;\r\n    this.Rdiag = rdiag;\r\n  }\r\n\r\n  /**\r\n   * Solve a problem of least square (Ax=b) by using the QR decomposition. Useful when A is rectangular, but not working when A is singular.\r\n   * Example : We search to approximate x, with A matrix shape m*n, x vector size n, b vector size m (m > n). We will use :\r\n   * var qr = QrDecomposition(A);\r\n   * var x = qr.solve(b);\r\n   * @param {Matrix} value - Matrix 1D which is the vector b (in the equation Ax = b)\r\n   * @return {Matrix} - The vector x\r\n   */\r\n  solve(value) {\r\n    value = Matrix.checkMatrix(value);\r\n\r\n    var qr = this.QR;\r\n    var m = qr.rows;\r\n\r\n    if (value.rows !== m) {\r\n      throw new Error('Matrix row dimensions must agree');\r\n    }\r\n    if (!this.isFullRank()) {\r\n      throw new Error('Matrix is rank deficient');\r\n    }\r\n\r\n    var count = value.columns;\r\n    var X = value.clone();\r\n    var n = qr.columns;\r\n    var i, j, k, s;\r\n\r\n    for (k = 0; k < n; k++) {\r\n      for (j = 0; j < count; j++) {\r\n        s = 0;\r\n        for (i = k; i < m; i++) {\r\n          s += qr[i][k] * X[i][j];\r\n        }\r\n        s = -s / qr[k][k];\r\n        for (i = k; i < m; i++) {\r\n          X[i][j] += s * qr[i][k];\r\n        }\r\n      }\r\n    }\r\n    for (k = n - 1; k >= 0; k--) {\r\n      for (j = 0; j < count; j++) {\r\n        X[k][j] /= this.Rdiag[k];\r\n      }\r\n      for (i = 0; i < k; i++) {\r\n        for (j = 0; j < count; j++) {\r\n          X[i][j] -= X[k][j] * qr[i][k];\r\n        }\r\n      }\r\n    }\r\n\r\n    return X.subMatrix(0, n - 1, 0, count - 1);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {boolean}\r\n   */\r\n  isFullRank() {\r\n    var columns = this.QR.columns;\r\n    for (var i = 0; i < columns; i++) {\r\n      if (this.Rdiag[i] === 0) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {Matrix}\r\n   */\r\n  get upperTriangularMatrix() {\r\n    var qr = this.QR;\r\n    var n = qr.columns;\r\n    var X = new Matrix(n, n);\r\n    var i, j;\r\n    for (i = 0; i < n; i++) {\r\n      for (j = 0; j < n; j++) {\r\n        if (i < j) {\r\n          X[i][j] = qr[i][j];\r\n        } else if (i === j) {\r\n          X[i][j] = this.Rdiag[i];\r\n        } else {\r\n          X[i][j] = 0;\r\n        }\r\n      }\r\n    }\r\n    return X;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {Matrix}\r\n   */\r\n  get orthogonalMatrix() {\r\n    var qr = this.QR;\r\n    var rows = qr.rows;\r\n    var columns = qr.columns;\r\n    var X = new Matrix(rows, columns);\r\n    var i, j, k, s;\r\n\r\n    for (k = columns - 1; k >= 0; k--) {\r\n      for (i = 0; i < rows; i++) {\r\n        X[i][k] = 0;\r\n      }\r\n      X[k][k] = 1;\r\n      for (j = k; j < columns; j++) {\r\n        if (qr[k][k] !== 0) {\r\n          s = 0;\r\n          for (i = k; i < rows; i++) {\r\n            s += qr[i][k] * X[i][j];\r\n          }\r\n\r\n          s = -s / qr[k][k];\r\n\r\n          for (i = k; i < rows; i++) {\r\n            X[i][j] += s * qr[i][k];\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return X;\r\n  }\r\n}\r\n","import LuDecomposition from './dc/lu';\r\nimport QrDecomposition from './dc/qr';\r\nimport SingularValueDecomposition from './dc/svd';\r\n\r\nimport { Matrix, WrapperMatrix2D } from './index';\r\n\r\n/**\r\n * Computes the inverse of a Matrix\r\n * @param {Matrix} matrix\r\n * @param {boolean} [useSVD=false]\r\n * @return {Matrix}\r\n */\r\nexport function inverse(matrix, useSVD = false) {\r\n  matrix = WrapperMatrix2D.checkMatrix(matrix);\r\n  if (useSVD) {\r\n    return new SingularValueDecomposition(matrix).inverse();\r\n  } else {\r\n    return solve(matrix, Matrix.eye(matrix.rows));\r\n  }\r\n}\r\n\r\n/**\r\n *\r\n * @param {Matrix} leftHandSide\r\n * @param {Matrix} rightHandSide\r\n * @param {boolean} [useSVD = false]\r\n * @return {Matrix}\r\n */\r\nexport function solve(leftHandSide, rightHandSide, useSVD = false) {\r\n  leftHandSide = WrapperMatrix2D.checkMatrix(leftHandSide);\r\n  rightHandSide = WrapperMatrix2D.checkMatrix(rightHandSide);\r\n  if (useSVD) {\r\n    return new SingularValueDecomposition(leftHandSide).solve(rightHandSide);\r\n  } else {\r\n    return leftHandSide.isSquare()\r\n      ? new LuDecomposition(leftHandSide).solve(rightHandSide)\r\n      : new QrDecomposition(leftHandSide).solve(rightHandSide);\r\n  }\r\n}\r\n","import max from 'ml-array-max';\r\n\r\nimport Matrix from './matrix';\r\nimport SingularValueDecomposition from './dc/svd';\r\n\r\n// function used by rowsDependencies\r\nfunction xrange(n, exception) {\r\n  var range = [];\r\n  for (var i = 0; i < n; i++) {\r\n    if (i !== exception) {\r\n      range.push(i);\r\n    }\r\n  }\r\n  return range;\r\n}\r\n\r\n// function used by rowsDependencies\r\nfunction dependenciesOneRow(\r\n  error,\r\n  matrix,\r\n  index,\r\n  thresholdValue = 10e-10,\r\n  thresholdError = 10e-10\r\n) {\r\n  if (error > thresholdError) {\r\n    return new Array(matrix.rows + 1).fill(0);\r\n  } else {\r\n    var returnArray = matrix.addRow(index, [0]);\r\n    for (var i = 0; i < returnArray.rows; i++) {\r\n      if (Math.abs(returnArray.get(i, 0)) < thresholdValue) {\r\n        returnArray.set(i, 0, 0);\r\n      }\r\n    }\r\n    return returnArray.to1DArray();\r\n  }\r\n}\r\n\r\n/**\r\n * Creates a matrix which represents the dependencies between rows.\r\n * If a row is a linear combination of others rows, the result will be a row with the coefficients of this combination.\r\n * For example : for A = [[2, 0, 0, 1], [0, 1, 6, 0], [0, 3, 0, 1], [0, 0, 1, 0], [0, 1, 2, 0]], the result will be [[0, 0, 0, 0, 0], [0, 0, 0, 4, 1], [0, 0, 0, 0, 0], [0, 0.25, 0, 0, -0.25], [0, 1, 0, -4, 0]]\r\n * @param {Matrix} matrix\r\n * @param {Object} [options] includes thresholdValue and thresholdError.\r\n * @param {number} [options.thresholdValue = 10e-10] If an absolute value is inferior to this threshold, it will equals zero.\r\n * @param {number} [options.thresholdError = 10e-10] If the error is inferior to that threshold, the linear combination found is accepted and the row is dependent from other rows.\r\n * @return {Matrix} the matrix which represents the dependencies between rows.\r\n */\r\n\r\nexport function linearDependencies(matrix, options = {}) {\r\n  const { thresholdValue = 10e-10, thresholdError = 10e-10 } = options;\r\n\r\n  var n = matrix.rows;\r\n  var results = new Matrix(n, n);\r\n\r\n  for (var i = 0; i < n; i++) {\r\n    var b = Matrix.columnVector(matrix.getRow(i));\r\n    var Abis = matrix.subMatrixRow(xrange(n, i)).transposeView();\r\n    var svd = new SingularValueDecomposition(Abis);\r\n    var x = svd.solve(b);\r\n    var error = max(\r\n      Matrix.sub(b, Abis.mmul(x))\r\n        .abs()\r\n        .to1DArray()\r\n    );\r\n    results.setRow(\r\n      i,\r\n      dependenciesOneRow(error, x, i, thresholdValue, thresholdError)\r\n    );\r\n  }\r\n  return results;\r\n}\r\n","import { Matrix, WrapperMatrix2D } from '../index';\r\n\r\nimport { hypotenuse, getFilled2DArray } from './util';\r\n\r\n/**\r\n * @class EigenvalueDecomposition\r\n * @link https://github.com/lutzroeder/Mapack/blob/master/Source/EigenvalueDecomposition.cs\r\n * @param {Matrix} matrix\r\n * @param {object} [options]\r\n * @param {boolean} [options.assumeSymmetric=false]\r\n */\r\nexport default class EigenvalueDecomposition {\r\n  constructor(matrix, options = {}) {\r\n    const { assumeSymmetric = false } = options;\r\n\r\n    matrix = WrapperMatrix2D.checkMatrix(matrix);\r\n    if (!matrix.isSquare()) {\r\n      throw new Error('Matrix is not a square matrix');\r\n    }\r\n\r\n    var n = matrix.columns;\r\n    var V = getFilled2DArray(n, n, 0);\r\n    var d = new Array(n);\r\n    var e = new Array(n);\r\n    var value = matrix;\r\n    var i, j;\r\n\r\n    var isSymmetric = false;\r\n    if (assumeSymmetric) {\r\n      isSymmetric = true;\r\n    } else {\r\n      isSymmetric = matrix.isSymmetric();\r\n    }\r\n\r\n    if (isSymmetric) {\r\n      for (i = 0; i < n; i++) {\r\n        for (j = 0; j < n; j++) {\r\n          V[i][j] = value.get(i, j);\r\n        }\r\n      }\r\n      tred2(n, e, d, V);\r\n      tql2(n, e, d, V);\r\n    } else {\r\n      var H = getFilled2DArray(n, n, 0);\r\n      var ort = new Array(n);\r\n      for (j = 0; j < n; j++) {\r\n        for (i = 0; i < n; i++) {\r\n          H[i][j] = value.get(i, j);\r\n        }\r\n      }\r\n      orthes(n, H, ort, V);\r\n      hqr2(n, e, d, V, H);\r\n    }\r\n\r\n    this.n = n;\r\n    this.e = e;\r\n    this.d = d;\r\n    this.V = V;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {Array<number>}\r\n   */\r\n  get realEigenvalues() {\r\n    return this.d;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {Array<number>}\r\n   */\r\n  get imaginaryEigenvalues() {\r\n    return this.e;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {Matrix}\r\n   */\r\n  get eigenvectorMatrix() {\r\n    if (!Matrix.isMatrix(this.V)) {\r\n      this.V = new Matrix(this.V);\r\n    }\r\n    return this.V;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {Matrix}\r\n   */\r\n  get diagonalMatrix() {\r\n    var n = this.n;\r\n    var e = this.e;\r\n    var d = this.d;\r\n    var X = new Matrix(n, n);\r\n    var i, j;\r\n    for (i = 0; i < n; i++) {\r\n      for (j = 0; j < n; j++) {\r\n        X[i][j] = 0;\r\n      }\r\n      X[i][i] = d[i];\r\n      if (e[i] > 0) {\r\n        X[i][i + 1] = e[i];\r\n      } else if (e[i] < 0) {\r\n        X[i][i - 1] = e[i];\r\n      }\r\n    }\r\n    return X;\r\n  }\r\n}\r\n\r\nfunction tred2(n, e, d, V) {\r\n  var f, g, h, i, j, k, hh, scale;\r\n\r\n  for (j = 0; j < n; j++) {\r\n    d[j] = V[n - 1][j];\r\n  }\r\n\r\n  for (i = n - 1; i > 0; i--) {\r\n    scale = 0;\r\n    h = 0;\r\n    for (k = 0; k < i; k++) {\r\n      scale = scale + Math.abs(d[k]);\r\n    }\r\n\r\n    if (scale === 0) {\r\n      e[i] = d[i - 1];\r\n      for (j = 0; j < i; j++) {\r\n        d[j] = V[i - 1][j];\r\n        V[i][j] = 0;\r\n        V[j][i] = 0;\r\n      }\r\n    } else {\r\n      for (k = 0; k < i; k++) {\r\n        d[k] /= scale;\r\n        h += d[k] * d[k];\r\n      }\r\n\r\n      f = d[i - 1];\r\n      g = Math.sqrt(h);\r\n      if (f > 0) {\r\n        g = -g;\r\n      }\r\n\r\n      e[i] = scale * g;\r\n      h = h - f * g;\r\n      d[i - 1] = f - g;\r\n      for (j = 0; j < i; j++) {\r\n        e[j] = 0;\r\n      }\r\n\r\n      for (j = 0; j < i; j++) {\r\n        f = d[j];\r\n        V[j][i] = f;\r\n        g = e[j] + V[j][j] * f;\r\n        for (k = j + 1; k <= i - 1; k++) {\r\n          g += V[k][j] * d[k];\r\n          e[k] += V[k][j] * f;\r\n        }\r\n        e[j] = g;\r\n      }\r\n\r\n      f = 0;\r\n      for (j = 0; j < i; j++) {\r\n        e[j] /= h;\r\n        f += e[j] * d[j];\r\n      }\r\n\r\n      hh = f / (h + h);\r\n      for (j = 0; j < i; j++) {\r\n        e[j] -= hh * d[j];\r\n      }\r\n\r\n      for (j = 0; j < i; j++) {\r\n        f = d[j];\r\n        g = e[j];\r\n        for (k = j; k <= i - 1; k++) {\r\n          V[k][j] -= f * e[k] + g * d[k];\r\n        }\r\n        d[j] = V[i - 1][j];\r\n        V[i][j] = 0;\r\n      }\r\n    }\r\n    d[i] = h;\r\n  }\r\n\r\n  for (i = 0; i < n - 1; i++) {\r\n    V[n - 1][i] = V[i][i];\r\n    V[i][i] = 1;\r\n    h = d[i + 1];\r\n    if (h !== 0) {\r\n      for (k = 0; k <= i; k++) {\r\n        d[k] = V[k][i + 1] / h;\r\n      }\r\n\r\n      for (j = 0; j <= i; j++) {\r\n        g = 0;\r\n        for (k = 0; k <= i; k++) {\r\n          g += V[k][i + 1] * V[k][j];\r\n        }\r\n        for (k = 0; k <= i; k++) {\r\n          V[k][j] -= g * d[k];\r\n        }\r\n      }\r\n    }\r\n\r\n    for (k = 0; k <= i; k++) {\r\n      V[k][i + 1] = 0;\r\n    }\r\n  }\r\n\r\n  for (j = 0; j < n; j++) {\r\n    d[j] = V[n - 1][j];\r\n    V[n - 1][j] = 0;\r\n  }\r\n\r\n  V[n - 1][n - 1] = 1;\r\n  e[0] = 0;\r\n}\r\n\r\nfunction tql2(n, e, d, V) {\r\n  var g, h, i, j, k, l, m, p, r, dl1, c, c2, c3, el1, s, s2, iter;\r\n\r\n  for (i = 1; i < n; i++) {\r\n    e[i - 1] = e[i];\r\n  }\r\n\r\n  e[n - 1] = 0;\r\n\r\n  var f = 0;\r\n  var tst1 = 0;\r\n  var eps = Number.EPSILON;\r\n\r\n  for (l = 0; l < n; l++) {\r\n    tst1 = Math.max(tst1, Math.abs(d[l]) + Math.abs(e[l]));\r\n    m = l;\r\n    while (m < n) {\r\n      if (Math.abs(e[m]) <= eps * tst1) {\r\n        break;\r\n      }\r\n      m++;\r\n    }\r\n\r\n    if (m > l) {\r\n      iter = 0;\r\n      do {\r\n        iter = iter + 1;\r\n\r\n        g = d[l];\r\n        p = (d[l + 1] - g) / (2 * e[l]);\r\n        r = hypotenuse(p, 1);\r\n        if (p < 0) {\r\n          r = -r;\r\n        }\r\n\r\n        d[l] = e[l] / (p + r);\r\n        d[l + 1] = e[l] * (p + r);\r\n        dl1 = d[l + 1];\r\n        h = g - d[l];\r\n        for (i = l + 2; i < n; i++) {\r\n          d[i] -= h;\r\n        }\r\n\r\n        f = f + h;\r\n\r\n        p = d[m];\r\n        c = 1;\r\n        c2 = c;\r\n        c3 = c;\r\n        el1 = e[l + 1];\r\n        s = 0;\r\n        s2 = 0;\r\n        for (i = m - 1; i >= l; i--) {\r\n          c3 = c2;\r\n          c2 = c;\r\n          s2 = s;\r\n          g = c * e[i];\r\n          h = c * p;\r\n          r = hypotenuse(p, e[i]);\r\n          e[i + 1] = s * r;\r\n          s = e[i] / r;\r\n          c = p / r;\r\n          p = c * d[i] - s * g;\r\n          d[i + 1] = h + s * (c * g + s * d[i]);\r\n\r\n          for (k = 0; k < n; k++) {\r\n            h = V[k][i + 1];\r\n            V[k][i + 1] = s * V[k][i] + c * h;\r\n            V[k][i] = c * V[k][i] - s * h;\r\n          }\r\n        }\r\n\r\n        p = -s * s2 * c3 * el1 * e[l] / dl1;\r\n        e[l] = s * p;\r\n        d[l] = c * p;\r\n      } while (Math.abs(e[l]) > eps * tst1);\r\n    }\r\n    d[l] = d[l] + f;\r\n    e[l] = 0;\r\n  }\r\n\r\n  for (i = 0; i < n - 1; i++) {\r\n    k = i;\r\n    p = d[i];\r\n    for (j = i + 1; j < n; j++) {\r\n      if (d[j] < p) {\r\n        k = j;\r\n        p = d[j];\r\n      }\r\n    }\r\n\r\n    if (k !== i) {\r\n      d[k] = d[i];\r\n      d[i] = p;\r\n      for (j = 0; j < n; j++) {\r\n        p = V[j][i];\r\n        V[j][i] = V[j][k];\r\n        V[j][k] = p;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction orthes(n, H, ort, V) {\r\n  var low = 0;\r\n  var high = n - 1;\r\n  var f, g, h, i, j, m;\r\n  var scale;\r\n\r\n  for (m = low + 1; m <= high - 1; m++) {\r\n    scale = 0;\r\n    for (i = m; i <= high; i++) {\r\n      scale = scale + Math.abs(H[i][m - 1]);\r\n    }\r\n\r\n    if (scale !== 0) {\r\n      h = 0;\r\n      for (i = high; i >= m; i--) {\r\n        ort[i] = H[i][m - 1] / scale;\r\n        h += ort[i] * ort[i];\r\n      }\r\n\r\n      g = Math.sqrt(h);\r\n      if (ort[m] > 0) {\r\n        g = -g;\r\n      }\r\n\r\n      h = h - ort[m] * g;\r\n      ort[m] = ort[m] - g;\r\n\r\n      for (j = m; j < n; j++) {\r\n        f = 0;\r\n        for (i = high; i >= m; i--) {\r\n          f += ort[i] * H[i][j];\r\n        }\r\n\r\n        f = f / h;\r\n        for (i = m; i <= high; i++) {\r\n          H[i][j] -= f * ort[i];\r\n        }\r\n      }\r\n\r\n      for (i = 0; i <= high; i++) {\r\n        f = 0;\r\n        for (j = high; j >= m; j--) {\r\n          f += ort[j] * H[i][j];\r\n        }\r\n\r\n        f = f / h;\r\n        for (j = m; j <= high; j++) {\r\n          H[i][j] -= f * ort[j];\r\n        }\r\n      }\r\n\r\n      ort[m] = scale * ort[m];\r\n      H[m][m - 1] = scale * g;\r\n    }\r\n  }\r\n\r\n  for (i = 0; i < n; i++) {\r\n    for (j = 0; j < n; j++) {\r\n      V[i][j] = i === j ? 1 : 0;\r\n    }\r\n  }\r\n\r\n  for (m = high - 1; m >= low + 1; m--) {\r\n    if (H[m][m - 1] !== 0) {\r\n      for (i = m + 1; i <= high; i++) {\r\n        ort[i] = H[i][m - 1];\r\n      }\r\n\r\n      for (j = m; j <= high; j++) {\r\n        g = 0;\r\n        for (i = m; i <= high; i++) {\r\n          g += ort[i] * V[i][j];\r\n        }\r\n\r\n        g = g / ort[m] / H[m][m - 1];\r\n        for (i = m; i <= high; i++) {\r\n          V[i][j] += g * ort[i];\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction hqr2(nn, e, d, V, H) {\r\n  var n = nn - 1;\r\n  var low = 0;\r\n  var high = nn - 1;\r\n  var eps = Number.EPSILON;\r\n  var exshift = 0;\r\n  var norm = 0;\r\n  var p = 0;\r\n  var q = 0;\r\n  var r = 0;\r\n  var s = 0;\r\n  var z = 0;\r\n  var iter = 0;\r\n  var i, j, k, l, m, t, w, x, y;\r\n  var ra, sa, vr, vi;\r\n  var notlast, cdivres;\r\n\r\n  for (i = 0; i < nn; i++) {\r\n    if (i < low || i > high) {\r\n      d[i] = H[i][i];\r\n      e[i] = 0;\r\n    }\r\n\r\n    for (j = Math.max(i - 1, 0); j < nn; j++) {\r\n      norm = norm + Math.abs(H[i][j]);\r\n    }\r\n  }\r\n\r\n  while (n >= low) {\r\n    l = n;\r\n    while (l > low) {\r\n      s = Math.abs(H[l - 1][l - 1]) + Math.abs(H[l][l]);\r\n      if (s === 0) {\r\n        s = norm;\r\n      }\r\n      if (Math.abs(H[l][l - 1]) < eps * s) {\r\n        break;\r\n      }\r\n      l--;\r\n    }\r\n\r\n    if (l === n) {\r\n      H[n][n] = H[n][n] + exshift;\r\n      d[n] = H[n][n];\r\n      e[n] = 0;\r\n      n--;\r\n      iter = 0;\r\n    } else if (l === n - 1) {\r\n      w = H[n][n - 1] * H[n - 1][n];\r\n      p = (H[n - 1][n - 1] - H[n][n]) / 2;\r\n      q = p * p + w;\r\n      z = Math.sqrt(Math.abs(q));\r\n      H[n][n] = H[n][n] + exshift;\r\n      H[n - 1][n - 1] = H[n - 1][n - 1] + exshift;\r\n      x = H[n][n];\r\n\r\n      if (q >= 0) {\r\n        z = p >= 0 ? p + z : p - z;\r\n        d[n - 1] = x + z;\r\n        d[n] = d[n - 1];\r\n        if (z !== 0) {\r\n          d[n] = x - w / z;\r\n        }\r\n        e[n - 1] = 0;\r\n        e[n] = 0;\r\n        x = H[n][n - 1];\r\n        s = Math.abs(x) + Math.abs(z);\r\n        p = x / s;\r\n        q = z / s;\r\n        r = Math.sqrt(p * p + q * q);\r\n        p = p / r;\r\n        q = q / r;\r\n\r\n        for (j = n - 1; j < nn; j++) {\r\n          z = H[n - 1][j];\r\n          H[n - 1][j] = q * z + p * H[n][j];\r\n          H[n][j] = q * H[n][j] - p * z;\r\n        }\r\n\r\n        for (i = 0; i <= n; i++) {\r\n          z = H[i][n - 1];\r\n          H[i][n - 1] = q * z + p * H[i][n];\r\n          H[i][n] = q * H[i][n] - p * z;\r\n        }\r\n\r\n        for (i = low; i <= high; i++) {\r\n          z = V[i][n - 1];\r\n          V[i][n - 1] = q * z + p * V[i][n];\r\n          V[i][n] = q * V[i][n] - p * z;\r\n        }\r\n      } else {\r\n        d[n - 1] = x + p;\r\n        d[n] = x + p;\r\n        e[n - 1] = z;\r\n        e[n] = -z;\r\n      }\r\n\r\n      n = n - 2;\r\n      iter = 0;\r\n    } else {\r\n      x = H[n][n];\r\n      y = 0;\r\n      w = 0;\r\n      if (l < n) {\r\n        y = H[n - 1][n - 1];\r\n        w = H[n][n - 1] * H[n - 1][n];\r\n      }\r\n\r\n      if (iter === 10) {\r\n        exshift += x;\r\n        for (i = low; i <= n; i++) {\r\n          H[i][i] -= x;\r\n        }\r\n        s = Math.abs(H[n][n - 1]) + Math.abs(H[n - 1][n - 2]);\r\n        x = y = 0.75 * s;\r\n        w = -0.4375 * s * s;\r\n      }\r\n\r\n      if (iter === 30) {\r\n        s = (y - x) / 2;\r\n        s = s * s + w;\r\n        if (s > 0) {\r\n          s = Math.sqrt(s);\r\n          if (y < x) {\r\n            s = -s;\r\n          }\r\n          s = x - w / ((y - x) / 2 + s);\r\n          for (i = low; i <= n; i++) {\r\n            H[i][i] -= s;\r\n          }\r\n          exshift += s;\r\n          x = y = w = 0.964;\r\n        }\r\n      }\r\n\r\n      iter = iter + 1;\r\n\r\n      m = n - 2;\r\n      while (m >= l) {\r\n        z = H[m][m];\r\n        r = x - z;\r\n        s = y - z;\r\n        p = (r * s - w) / H[m + 1][m] + H[m][m + 1];\r\n        q = H[m + 1][m + 1] - z - r - s;\r\n        r = H[m + 2][m + 1];\r\n        s = Math.abs(p) + Math.abs(q) + Math.abs(r);\r\n        p = p / s;\r\n        q = q / s;\r\n        r = r / s;\r\n        if (m === l) {\r\n          break;\r\n        }\r\n        if (\r\n          Math.abs(H[m][m - 1]) * (Math.abs(q) + Math.abs(r)) <\r\n          eps *\r\n            (Math.abs(p) *\r\n              (Math.abs(H[m - 1][m - 1]) +\r\n                Math.abs(z) +\r\n                Math.abs(H[m + 1][m + 1])))\r\n        ) {\r\n          break;\r\n        }\r\n        m--;\r\n      }\r\n\r\n      for (i = m + 2; i <= n; i++) {\r\n        H[i][i - 2] = 0;\r\n        if (i > m + 2) {\r\n          H[i][i - 3] = 0;\r\n        }\r\n      }\r\n\r\n      for (k = m; k <= n - 1; k++) {\r\n        notlast = k !== n - 1;\r\n        if (k !== m) {\r\n          p = H[k][k - 1];\r\n          q = H[k + 1][k - 1];\r\n          r = notlast ? H[k + 2][k - 1] : 0;\r\n          x = Math.abs(p) + Math.abs(q) + Math.abs(r);\r\n          if (x !== 0) {\r\n            p = p / x;\r\n            q = q / x;\r\n            r = r / x;\r\n          }\r\n        }\r\n\r\n        if (x === 0) {\r\n          break;\r\n        }\r\n\r\n        s = Math.sqrt(p * p + q * q + r * r);\r\n        if (p < 0) {\r\n          s = -s;\r\n        }\r\n\r\n        if (s !== 0) {\r\n          if (k !== m) {\r\n            H[k][k - 1] = -s * x;\r\n          } else if (l !== m) {\r\n            H[k][k - 1] = -H[k][k - 1];\r\n          }\r\n\r\n          p = p + s;\r\n          x = p / s;\r\n          y = q / s;\r\n          z = r / s;\r\n          q = q / p;\r\n          r = r / p;\r\n\r\n          for (j = k; j < nn; j++) {\r\n            p = H[k][j] + q * H[k + 1][j];\r\n            if (notlast) {\r\n              p = p + r * H[k + 2][j];\r\n              H[k + 2][j] = H[k + 2][j] - p * z;\r\n            }\r\n\r\n            H[k][j] = H[k][j] - p * x;\r\n            H[k + 1][j] = H[k + 1][j] - p * y;\r\n          }\r\n\r\n          for (i = 0; i <= Math.min(n, k + 3); i++) {\r\n            p = x * H[i][k] + y * H[i][k + 1];\r\n            if (notlast) {\r\n              p = p + z * H[i][k + 2];\r\n              H[i][k + 2] = H[i][k + 2] - p * r;\r\n            }\r\n\r\n            H[i][k] = H[i][k] - p;\r\n            H[i][k + 1] = H[i][k + 1] - p * q;\r\n          }\r\n\r\n          for (i = low; i <= high; i++) {\r\n            p = x * V[i][k] + y * V[i][k + 1];\r\n            if (notlast) {\r\n              p = p + z * V[i][k + 2];\r\n              V[i][k + 2] = V[i][k + 2] - p * r;\r\n            }\r\n\r\n            V[i][k] = V[i][k] - p;\r\n            V[i][k + 1] = V[i][k + 1] - p * q;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  if (norm === 0) {\r\n    return;\r\n  }\r\n\r\n  for (n = nn - 1; n >= 0; n--) {\r\n    p = d[n];\r\n    q = e[n];\r\n\r\n    if (q === 0) {\r\n      l = n;\r\n      H[n][n] = 1;\r\n      for (i = n - 1; i >= 0; i--) {\r\n        w = H[i][i] - p;\r\n        r = 0;\r\n        for (j = l; j <= n; j++) {\r\n          r = r + H[i][j] * H[j][n];\r\n        }\r\n\r\n        if (e[i] < 0) {\r\n          z = w;\r\n          s = r;\r\n        } else {\r\n          l = i;\r\n          if (e[i] === 0) {\r\n            H[i][n] = w !== 0 ? -r / w : -r / (eps * norm);\r\n          } else {\r\n            x = H[i][i + 1];\r\n            y = H[i + 1][i];\r\n            q = (d[i] - p) * (d[i] - p) + e[i] * e[i];\r\n            t = (x * s - z * r) / q;\r\n            H[i][n] = t;\r\n            H[i + 1][n] =\r\n              Math.abs(x) > Math.abs(z) ? (-r - w * t) / x : (-s - y * t) / z;\r\n          }\r\n\r\n          t = Math.abs(H[i][n]);\r\n          if (eps * t * t > 1) {\r\n            for (j = i; j <= n; j++) {\r\n              H[j][n] = H[j][n] / t;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    } else if (q < 0) {\r\n      l = n - 1;\r\n\r\n      if (Math.abs(H[n][n - 1]) > Math.abs(H[n - 1][n])) {\r\n        H[n - 1][n - 1] = q / H[n][n - 1];\r\n        H[n - 1][n] = -(H[n][n] - p) / H[n][n - 1];\r\n      } else {\r\n        cdivres = cdiv(0, -H[n - 1][n], H[n - 1][n - 1] - p, q);\r\n        H[n - 1][n - 1] = cdivres[0];\r\n        H[n - 1][n] = cdivres[1];\r\n      }\r\n\r\n      H[n][n - 1] = 0;\r\n      H[n][n] = 1;\r\n      for (i = n - 2; i >= 0; i--) {\r\n        ra = 0;\r\n        sa = 0;\r\n        for (j = l; j <= n; j++) {\r\n          ra = ra + H[i][j] * H[j][n - 1];\r\n          sa = sa + H[i][j] * H[j][n];\r\n        }\r\n\r\n        w = H[i][i] - p;\r\n\r\n        if (e[i] < 0) {\r\n          z = w;\r\n          r = ra;\r\n          s = sa;\r\n        } else {\r\n          l = i;\r\n          if (e[i] === 0) {\r\n            cdivres = cdiv(-ra, -sa, w, q);\r\n            H[i][n - 1] = cdivres[0];\r\n            H[i][n] = cdivres[1];\r\n          } else {\r\n            x = H[i][i + 1];\r\n            y = H[i + 1][i];\r\n            vr = (d[i] - p) * (d[i] - p) + e[i] * e[i] - q * q;\r\n            vi = (d[i] - p) * 2 * q;\r\n            if (vr === 0 && vi === 0) {\r\n              vr =\r\n                eps *\r\n                norm *\r\n                (Math.abs(w) +\r\n                  Math.abs(q) +\r\n                  Math.abs(x) +\r\n                  Math.abs(y) +\r\n                  Math.abs(z));\r\n            }\r\n            cdivres = cdiv(\r\n              x * r - z * ra + q * sa,\r\n              x * s - z * sa - q * ra,\r\n              vr,\r\n              vi\r\n            );\r\n            H[i][n - 1] = cdivres[0];\r\n            H[i][n] = cdivres[1];\r\n            if (Math.abs(x) > Math.abs(z) + Math.abs(q)) {\r\n              H[i + 1][n - 1] = (-ra - w * H[i][n - 1] + q * H[i][n]) / x;\r\n              H[i + 1][n] = (-sa - w * H[i][n] - q * H[i][n - 1]) / x;\r\n            } else {\r\n              cdivres = cdiv(-r - y * H[i][n - 1], -s - y * H[i][n], z, q);\r\n              H[i + 1][n - 1] = cdivres[0];\r\n              H[i + 1][n] = cdivres[1];\r\n            }\r\n          }\r\n\r\n          t = Math.max(Math.abs(H[i][n - 1]), Math.abs(H[i][n]));\r\n          if (eps * t * t > 1) {\r\n            for (j = i; j <= n; j++) {\r\n              H[j][n - 1] = H[j][n - 1] / t;\r\n              H[j][n] = H[j][n] / t;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  for (i = 0; i < nn; i++) {\r\n    if (i < low || i > high) {\r\n      for (j = i; j < nn; j++) {\r\n        V[i][j] = H[i][j];\r\n      }\r\n    }\r\n  }\r\n\r\n  for (j = nn - 1; j >= low; j--) {\r\n    for (i = low; i <= high; i++) {\r\n      z = 0;\r\n      for (k = low; k <= Math.min(j, high); k++) {\r\n        z = z + V[i][k] * H[k][j];\r\n      }\r\n      V[i][j] = z;\r\n    }\r\n  }\r\n}\r\n\r\nfunction cdiv(xr, xi, yr, yi) {\r\n  var r, d;\r\n  if (Math.abs(yr) > Math.abs(yi)) {\r\n    r = yi / yr;\r\n    d = yr + r * yi;\r\n    return [(xr + r * xi) / d, (xi - r * xr) / d];\r\n  } else {\r\n    r = yr / yi;\r\n    d = yi + r * yr;\r\n    return [(r * xr + xi) / d, (r * xi - xr) / d];\r\n  }\r\n}\r\n","import { Matrix, WrapperMatrix2D } from '../index';\r\n\r\n/**\r\n * @class CholeskyDecomposition\r\n * @link https://github.com/lutzroeder/Mapack/blob/master/Source/CholeskyDecomposition.cs\r\n * @param {Matrix} value\r\n */\r\nexport default class CholeskyDecomposition {\r\n  constructor(value) {\r\n    value = WrapperMatrix2D.checkMatrix(value);\r\n    if (!value.isSymmetric()) {\r\n      throw new Error('Matrix is not symmetric');\r\n    }\r\n\r\n    var a = value;\r\n    var dimension = a.rows;\r\n    var l = new Matrix(dimension, dimension);\r\n    var positiveDefinite = true;\r\n    var i, j, k;\r\n\r\n    for (j = 0; j < dimension; j++) {\r\n      var Lrowj = l[j];\r\n      var d = 0;\r\n      for (k = 0; k < j; k++) {\r\n        var Lrowk = l[k];\r\n        var s = 0;\r\n        for (i = 0; i < k; i++) {\r\n          s += Lrowk[i] * Lrowj[i];\r\n        }\r\n        Lrowj[k] = s = (a.get(j, k) - s) / l[k][k];\r\n        d = d + s * s;\r\n      }\r\n\r\n      d = a.get(j, j) - d;\r\n\r\n      positiveDefinite &= d > 0;\r\n      l[j][j] = Math.sqrt(Math.max(d, 0));\r\n      for (k = j + 1; k < dimension; k++) {\r\n        l[j][k] = 0;\r\n      }\r\n    }\r\n\r\n    if (!positiveDefinite) {\r\n      throw new Error('Matrix is not positive definite');\r\n    }\r\n\r\n    this.L = l;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {Matrix} value\r\n   * @return {Matrix}\r\n   */\r\n  solve(value) {\r\n    value = WrapperMatrix2D.checkMatrix(value);\r\n\r\n    var l = this.L;\r\n    var dimension = l.rows;\r\n\r\n    if (value.rows !== dimension) {\r\n      throw new Error('Matrix dimensions do not match');\r\n    }\r\n\r\n    var count = value.columns;\r\n    var B = value.clone();\r\n    var i, j, k;\r\n\r\n    for (k = 0; k < dimension; k++) {\r\n      for (j = 0; j < count; j++) {\r\n        for (i = 0; i < k; i++) {\r\n          B[k][j] -= B[i][j] * l[k][i];\r\n        }\r\n        B[k][j] /= l[k][k];\r\n      }\r\n    }\r\n\r\n    for (k = dimension - 1; k >= 0; k--) {\r\n      for (j = 0; j < count; j++) {\r\n        for (i = k + 1; i < dimension; i++) {\r\n          B[k][j] -= B[i][j] * l[i][k];\r\n        }\r\n        B[k][j] /= l[k][k];\r\n      }\r\n    }\r\n\r\n    return B;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {Matrix}\r\n   */\r\n  get lowerTriangularMatrix() {\r\n    return this.L;\r\n  }\r\n}\r\n","export { default, default as Matrix } from './matrix';\r\nexport { default as abstractMatrix } from './abstractMatrix';\r\n\r\nexport { wrap } from './wrap/wrap';\r\nexport { default as WrapperMatrix2D } from './wrap/WrapperMatrix2D';\r\nexport { default as WrapperMatrix1D } from './wrap/WrapperMatrix1D';\r\n\r\nexport { solve, inverse } from './decompositions';\r\nexport { linearDependencies } from './linearDependencies';\r\nexport {\r\n  default as SingularValueDecomposition,\r\n  default as SVD\r\n} from './dc/svd.js';\r\nexport {\r\n  default as EigenvalueDecomposition,\r\n  default as EVD\r\n} from './dc/evd.js';\r\nexport {\r\n  default as CholeskyDecomposition,\r\n  default as CHO\r\n} from './dc/cholesky.js';\r\nexport { default as LuDecomposition, default as LU } from './dc/lu.js';\r\nexport { default as QrDecomposition, default as QR } from './dc/qr.js';\r\n","'use strict';\n\nconst toString = Object.prototype.toString;\n\nfunction isAnyArray(object) {\n  return toString.call(object).endsWith('Array]');\n}\n\nmodule.exports = isAnyArray;\n","'use strict';\n\nfunction squaredEuclidean(p, q) {\n    var d = 0;\n    for (var i = 0; i < p.length; i++) {\n        d += (p[i] - q[i]) * (p[i] - q[i]);\n    }\n    return d;\n}\n\nfunction euclidean(p, q) {\n    return Math.sqrt(squaredEuclidean(p, q));\n}\n\nmodule.exports = euclidean;\neuclidean.squared = squaredEuclidean;\n","'use strict';\n\nexports.array = require('./array');\nexports.matrix = require('./matrix');\n","'use strict';\n\nvar arrayStat = require('./array');\n\nfunction compareNumbers(a, b) {\n    return a - b;\n}\n\nexports.max = function max(matrix) {\n    var max = -Infinity;\n    for (var i = 0; i < matrix.length; i++) {\n        for (var j = 0; j < matrix[i].length; j++) {\n            if (matrix[i][j] > max) max = matrix[i][j];\n        }\n    }\n    return max;\n};\n\nexports.min = function min(matrix) {\n    var min = Infinity;\n    for (var i = 0; i < matrix.length; i++) {\n        for (var j = 0; j < matrix[i].length; j++) {\n            if (matrix[i][j] < min) min = matrix[i][j];\n        }\n    }\n    return min;\n};\n\nexports.minMax = function minMax(matrix) {\n    var min = Infinity;\n    var max = -Infinity;\n    for (var i = 0; i < matrix.length; i++) {\n        for (var j = 0; j < matrix[i].length; j++) {\n            if (matrix[i][j] < min) min = matrix[i][j];\n            if (matrix[i][j] > max) max = matrix[i][j];\n        }\n    }\n    return {\n        min:min,\n        max:max\n    };\n};\n\nexports.entropy = function entropy(matrix, eps) {\n    if (typeof (eps) === 'undefined') {\n        eps = 0;\n    }\n    var sum = 0,\n        l1 = matrix.length,\n        l2 = matrix[0].length;\n    for (var i = 0; i < l1; i++) {\n        for (var j = 0; j < l2; j++) {\n            sum += matrix[i][j] * Math.log(matrix[i][j] + eps);\n        }\n    }\n    return -sum;\n};\n\nexports.mean = function mean(matrix, dimension) {\n    if (typeof (dimension) === 'undefined') {\n        dimension = 0;\n    }\n    var rows = matrix.length,\n        cols = matrix[0].length,\n        theMean, N, i, j;\n\n    if (dimension === -1) {\n        theMean = [0];\n        N = rows * cols;\n        for (i = 0; i < rows; i++) {\n            for (j = 0; j < cols; j++) {\n                theMean[0] += matrix[i][j];\n            }\n        }\n        theMean[0] /= N;\n    } else if (dimension === 0) {\n        theMean = new Array(cols);\n        N = rows;\n        for (j = 0; j < cols; j++) {\n            theMean[j] = 0;\n            for (i = 0; i < rows; i++) {\n                theMean[j] += matrix[i][j];\n            }\n            theMean[j] /= N;\n        }\n    } else if (dimension === 1) {\n        theMean = new Array(rows);\n        N = cols;\n        for (j = 0; j < rows; j++) {\n            theMean[j] = 0;\n            for (i = 0; i < cols; i++) {\n                theMean[j] += matrix[j][i];\n            }\n            theMean[j] /= N;\n        }\n    } else {\n        throw new Error('Invalid dimension');\n    }\n    return theMean;\n};\n\nexports.sum = function sum(matrix, dimension) {\n    if (typeof (dimension) === 'undefined') {\n        dimension = 0;\n    }\n    var rows = matrix.length,\n        cols = matrix[0].length,\n        theSum, i, j;\n\n    if (dimension === -1) {\n        theSum = [0];\n        for (i = 0; i < rows; i++) {\n            for (j = 0; j < cols; j++) {\n                theSum[0] += matrix[i][j];\n            }\n        }\n    } else if (dimension === 0) {\n        theSum = new Array(cols);\n        for (j = 0; j < cols; j++) {\n            theSum[j] = 0;\n            for (i = 0; i < rows; i++) {\n                theSum[j] += matrix[i][j];\n            }\n        }\n    } else if (dimension === 1) {\n        theSum = new Array(rows);\n        for (j = 0; j < rows; j++) {\n            theSum[j] = 0;\n            for (i = 0; i < cols; i++) {\n                theSum[j] += matrix[j][i];\n            }\n        }\n    } else {\n        throw new Error('Invalid dimension');\n    }\n    return theSum;\n};\n\nexports.product = function product(matrix, dimension) {\n    if (typeof (dimension) === 'undefined') {\n        dimension = 0;\n    }\n    var rows = matrix.length,\n        cols = matrix[0].length,\n        theProduct, i, j;\n\n    if (dimension === -1) {\n        theProduct = [1];\n        for (i = 0; i < rows; i++) {\n            for (j = 0; j < cols; j++) {\n                theProduct[0] *= matrix[i][j];\n            }\n        }\n    } else if (dimension === 0) {\n        theProduct = new Array(cols);\n        for (j = 0; j < cols; j++) {\n            theProduct[j] = 1;\n            for (i = 0; i < rows; i++) {\n                theProduct[j] *= matrix[i][j];\n            }\n        }\n    } else if (dimension === 1) {\n        theProduct = new Array(rows);\n        for (j = 0; j < rows; j++) {\n            theProduct[j] = 1;\n            for (i = 0; i < cols; i++) {\n                theProduct[j] *= matrix[j][i];\n            }\n        }\n    } else {\n        throw new Error('Invalid dimension');\n    }\n    return theProduct;\n};\n\nexports.standardDeviation = function standardDeviation(matrix, means, unbiased) {\n    var vari = exports.variance(matrix, means, unbiased), l = vari.length;\n    for (var i = 0; i < l; i++) {\n        vari[i] = Math.sqrt(vari[i]);\n    }\n    return vari;\n};\n\nexports.variance = function variance(matrix, means, unbiased) {\n    if (typeof (unbiased) === 'undefined') {\n        unbiased = true;\n    }\n    means = means || exports.mean(matrix);\n    var rows = matrix.length;\n    if (rows === 0) return [];\n    var cols = matrix[0].length;\n    var vari = new Array(cols);\n\n    for (var j = 0; j < cols; j++) {\n        var sum1 = 0, sum2 = 0, x = 0;\n        for (var i = 0; i < rows; i++) {\n            x = matrix[i][j] - means[j];\n            sum1 += x;\n            sum2 += x * x;\n        }\n        if (unbiased) {\n            vari[j] = (sum2 - ((sum1 * sum1) / rows)) / (rows - 1);\n        } else {\n            vari[j] = (sum2 - ((sum1 * sum1) / rows)) / rows;\n        }\n    }\n    return vari;\n};\n\nexports.median = function median(matrix) {\n    var rows = matrix.length, cols = matrix[0].length;\n    var medians = new Array(cols);\n\n    for (var i = 0; i < cols; i++) {\n        var data = new Array(rows);\n        for (var j = 0; j < rows; j++) {\n            data[j] = matrix[j][i];\n        }\n        data.sort(compareNumbers);\n        var N = data.length;\n        if (N % 2 === 0) {\n            medians[i] = (data[N / 2] + data[(N / 2) - 1]) * 0.5;\n        } else {\n            medians[i] = data[Math.floor(N / 2)];\n        }\n    }\n    return medians;\n};\n\nexports.mode = function mode(matrix) {\n    var rows = matrix.length,\n        cols = matrix[0].length,\n        modes = new Array(cols),\n        i, j;\n    for (i = 0; i < cols; i++) {\n        var itemCount = new Array(rows);\n        for (var k = 0; k < rows; k++) {\n            itemCount[k] = 0;\n        }\n        var itemArray = new Array(rows);\n        var count = 0;\n\n        for (j = 0; j < rows; j++) {\n            var index = itemArray.indexOf(matrix[j][i]);\n            if (index >= 0) {\n                itemCount[index]++;\n            } else {\n                itemArray[count] = matrix[j][i];\n                itemCount[count] = 1;\n                count++;\n            }\n        }\n\n        var maxValue = 0, maxIndex = 0;\n        for (j = 0; j < count; j++) {\n            if (itemCount[j] > maxValue) {\n                maxValue = itemCount[j];\n                maxIndex = j;\n            }\n        }\n\n        modes[i] = itemArray[maxIndex];\n    }\n    return modes;\n};\n\nexports.skewness = function skewness(matrix, unbiased) {\n    if (typeof (unbiased) === 'undefined') unbiased = true;\n    var means = exports.mean(matrix);\n    var n = matrix.length, l = means.length;\n    var skew = new Array(l);\n\n    for (var j = 0; j < l; j++) {\n        var s2 = 0, s3 = 0;\n        for (var i = 0; i < n; i++) {\n            var dev = matrix[i][j] - means[j];\n            s2 += dev * dev;\n            s3 += dev * dev * dev;\n        }\n\n        var m2 = s2 / n;\n        var m3 = s3 / n;\n        var g = m3 / Math.pow(m2, 3 / 2);\n\n        if (unbiased) {\n            var a = Math.sqrt(n * (n - 1));\n            var b = n - 2;\n            skew[j] = (a / b) * g;\n        } else {\n            skew[j] = g;\n        }\n    }\n    return skew;\n};\n\nexports.kurtosis = function kurtosis(matrix, unbiased) {\n    if (typeof (unbiased) === 'undefined') unbiased = true;\n    var means = exports.mean(matrix);\n    var n = matrix.length, m = matrix[0].length;\n    var kurt = new Array(m);\n\n    for (var j = 0; j < m; j++) {\n        var s2 = 0, s4 = 0;\n        for (var i = 0; i < n; i++) {\n            var dev = matrix[i][j] - means[j];\n            s2 += dev * dev;\n            s4 += dev * dev * dev * dev;\n        }\n        var m2 = s2 / n;\n        var m4 = s4 / n;\n\n        if (unbiased) {\n            var v = s2 / (n - 1);\n            var a = (n * (n + 1)) / ((n - 1) * (n - 2) * (n - 3));\n            var b = s4 / (v * v);\n            var c = ((n - 1) * (n - 1)) / ((n - 2) * (n - 3));\n            kurt[j] = a * b - 3 * c;\n        } else {\n            kurt[j] = m4 / (m2 * m2) - 3;\n        }\n    }\n    return kurt;\n};\n\nexports.standardError = function standardError(matrix) {\n    var samples = matrix.length;\n    var standardDeviations = exports.standardDeviation(matrix);\n    var l = standardDeviations.length;\n    var standardErrors = new Array(l);\n    var sqrtN = Math.sqrt(samples);\n\n    for (var i = 0; i < l; i++) {\n        standardErrors[i] = standardDeviations[i] / sqrtN;\n    }\n    return standardErrors;\n};\n\nexports.covariance = function covariance(matrix, dimension) {\n    return exports.scatter(matrix, undefined, dimension);\n};\n\nexports.scatter = function scatter(matrix, divisor, dimension) {\n    if (typeof (dimension) === 'undefined') {\n        dimension = 0;\n    }\n    if (typeof (divisor) === 'undefined') {\n        if (dimension === 0) {\n            divisor = matrix.length - 1;\n        } else if (dimension === 1) {\n            divisor = matrix[0].length - 1;\n        }\n    }\n    var means = exports.mean(matrix, dimension);\n    var rows = matrix.length;\n    if (rows === 0) {\n        return [[]];\n    }\n    var cols = matrix[0].length,\n        cov, i, j, s, k;\n\n    if (dimension === 0) {\n        cov = new Array(cols);\n        for (i = 0; i < cols; i++) {\n            cov[i] = new Array(cols);\n        }\n        for (i = 0; i < cols; i++) {\n            for (j = i; j < cols; j++) {\n                s = 0;\n                for (k = 0; k < rows; k++) {\n                    s += (matrix[k][j] - means[j]) * (matrix[k][i] - means[i]);\n                }\n                s /= divisor;\n                cov[i][j] = s;\n                cov[j][i] = s;\n            }\n        }\n    } else if (dimension === 1) {\n        cov = new Array(rows);\n        for (i = 0; i < rows; i++) {\n            cov[i] = new Array(rows);\n        }\n        for (i = 0; i < rows; i++) {\n            for (j = i; j < rows; j++) {\n                s = 0;\n                for (k = 0; k < cols; k++) {\n                    s += (matrix[j][k] - means[j]) * (matrix[i][k] - means[i]);\n                }\n                s /= divisor;\n                cov[i][j] = s;\n                cov[j][i] = s;\n            }\n        }\n    } else {\n        throw new Error('Invalid dimension');\n    }\n\n    return cov;\n};\n\nexports.correlation = function correlation(matrix) {\n    var means = exports.mean(matrix),\n        standardDeviations = exports.standardDeviation(matrix, true, means),\n        scores = exports.zScores(matrix, means, standardDeviations),\n        rows = matrix.length,\n        cols = matrix[0].length,\n        i, j;\n\n    var cor = new Array(cols);\n    for (i = 0; i < cols; i++) {\n        cor[i] = new Array(cols);\n    }\n    for (i = 0; i < cols; i++) {\n        for (j = i; j < cols; j++) {\n            var c = 0;\n            for (var k = 0, l = scores.length; k < l; k++) {\n                c += scores[k][j] * scores[k][i];\n            }\n            c /= rows - 1;\n            cor[i][j] = c;\n            cor[j][i] = c;\n        }\n    }\n    return cor;\n};\n\nexports.zScores = function zScores(matrix, means, standardDeviations) {\n    means = means || exports.mean(matrix);\n    if (typeof (standardDeviations) === 'undefined') standardDeviations = exports.standardDeviation(matrix, true, means);\n    return exports.standardize(exports.center(matrix, means, false), standardDeviations, true);\n};\n\nexports.center = function center(matrix, means, inPlace) {\n    means = means || exports.mean(matrix);\n    var result = matrix,\n        l = matrix.length,\n        i, j, jj;\n\n    if (!inPlace) {\n        result = new Array(l);\n        for (i = 0; i < l; i++) {\n            result[i] = new Array(matrix[i].length);\n        }\n    }\n\n    for (i = 0; i < l; i++) {\n        var row = result[i];\n        for (j = 0, jj = row.length; j < jj; j++) {\n            row[j] = matrix[i][j] - means[j];\n        }\n    }\n    return result;\n};\n\nexports.standardize = function standardize(matrix, standardDeviations, inPlace) {\n    if (typeof (standardDeviations) === 'undefined') standardDeviations = exports.standardDeviation(matrix);\n    var result = matrix,\n        l = matrix.length,\n        i, j, jj;\n\n    if (!inPlace) {\n        result = new Array(l);\n        for (i = 0; i < l; i++) {\n            result[i] = new Array(matrix[i].length);\n        }\n    }\n\n    for (i = 0; i < l; i++) {\n        var resultRow = result[i];\n        var sourceRow = matrix[i];\n        for (j = 0, jj = resultRow.length; j < jj; j++) {\n            if (standardDeviations[j] !== 0 && !isNaN(standardDeviations[j])) {\n                resultRow[j] = sourceRow[j] / standardDeviations[j];\n            }\n        }\n    }\n    return result;\n};\n\nexports.weightedVariance = function weightedVariance(matrix, weights) {\n    var means = exports.mean(matrix);\n    var rows = matrix.length;\n    if (rows === 0) return [];\n    var cols = matrix[0].length;\n    var vari = new Array(cols);\n\n    for (var j = 0; j < cols; j++) {\n        var sum = 0;\n        var a = 0, b = 0;\n\n        for (var i = 0; i < rows; i++) {\n            var z = matrix[i][j] - means[j];\n            var w = weights[i];\n\n            sum += w * (z * z);\n            b += w;\n            a += w * w;\n        }\n\n        vari[j] = sum * (b / (b * b - a));\n    }\n\n    return vari;\n};\n\nexports.weightedMean = function weightedMean(matrix, weights, dimension) {\n    if (typeof (dimension) === 'undefined') {\n        dimension = 0;\n    }\n    var rows = matrix.length;\n    if (rows === 0) return [];\n    var cols = matrix[0].length,\n        means, i, ii, j, w, row;\n\n    if (dimension === 0) {\n        means = new Array(cols);\n        for (i = 0; i < cols; i++) {\n            means[i] = 0;\n        }\n        for (i = 0; i < rows; i++) {\n            row = matrix[i];\n            w = weights[i];\n            for (j = 0; j < cols; j++) {\n                means[j] += row[j] * w;\n            }\n        }\n    } else if (dimension === 1) {\n        means = new Array(rows);\n        for (i = 0; i < rows; i++) {\n            means[i] = 0;\n        }\n        for (j = 0; j < rows; j++) {\n            row = matrix[j];\n            w = weights[j];\n            for (i = 0; i < cols; i++) {\n                means[j] += row[i] * w;\n            }\n        }\n    } else {\n        throw new Error('Invalid dimension');\n    }\n\n    var weightSum = arrayStat.sum(weights);\n    if (weightSum !== 0) {\n        for (i = 0, ii = means.length; i < ii; i++) {\n            means[i] /= weightSum;\n        }\n    }\n    return means;\n};\n\nexports.weightedCovariance = function weightedCovariance(matrix, weights, means, dimension) {\n    dimension = dimension || 0;\n    means = means || exports.weightedMean(matrix, weights, dimension);\n    var s1 = 0, s2 = 0;\n    for (var i = 0, ii = weights.length; i < ii; i++) {\n        s1 += weights[i];\n        s2 += weights[i] * weights[i];\n    }\n    var factor = s1 / (s1 * s1 - s2);\n    return exports.weightedScatter(matrix, weights, means, factor, dimension);\n};\n\nexports.weightedScatter = function weightedScatter(matrix, weights, means, factor, dimension) {\n    dimension = dimension || 0;\n    means = means || exports.weightedMean(matrix, weights, dimension);\n    if (typeof (factor) === 'undefined') {\n        factor = 1;\n    }\n    var rows = matrix.length;\n    if (rows === 0) {\n        return [[]];\n    }\n    var cols = matrix[0].length,\n        cov, i, j, k, s;\n\n    if (dimension === 0) {\n        cov = new Array(cols);\n        for (i = 0; i < cols; i++) {\n            cov[i] = new Array(cols);\n        }\n        for (i = 0; i < cols; i++) {\n            for (j = i; j < cols; j++) {\n                s = 0;\n                for (k = 0; k < rows; k++) {\n                    s += weights[k] * (matrix[k][j] - means[j]) * (matrix[k][i] - means[i]);\n                }\n                cov[i][j] = s * factor;\n                cov[j][i] = s * factor;\n            }\n        }\n    } else if (dimension === 1) {\n        cov = new Array(rows);\n        for (i = 0; i < rows; i++) {\n            cov[i] = new Array(rows);\n        }\n        for (i = 0; i < rows; i++) {\n            for (j = i; j < rows; j++) {\n                s = 0;\n                for (k = 0; k < cols; k++) {\n                    s += weights[k] * (matrix[j][k] - means[j]) * (matrix[i][k] - means[i]);\n                }\n                cov[i][j] = s * factor;\n                cov[j][i] = s * factor;\n            }\n        }\n    } else {\n        throw new Error('Invalid dimension');\n    }\n\n    return cov;\n};\n","import isArray from 'is-any-array';\n\n/**\n * Computes the mean of the given values\n * @param {Array<number>} input\n * @return {number}\n */\n\nfunction mean(input) {\n  if (!isArray(input)) {\n    throw new TypeError('input must be an array');\n  }\n\n  if (input.length === 0) {\n    throw new TypeError('input must not be empty');\n  }\n\n  var sum = 0;\n\n  for (var i = 0; i < input.length; i++) {\n    sum += input[i];\n  }\n\n  return sum / input.length;\n}\n\nexport default mean;\n","module.exports = function(haystack, needle, comparator, low, high) {\n  var mid, cmp;\n\n  if(low === undefined)\n    low = 0;\n\n  else {\n    low = low|0;\n    if(low < 0 || low >= haystack.length)\n      throw new RangeError(\"invalid lower bound\");\n  }\n\n  if(high === undefined)\n    high = haystack.length - 1;\n\n  else {\n    high = high|0;\n    if(high < low || high >= haystack.length)\n      throw new RangeError(\"invalid upper bound\");\n  }\n\n  while(low <= high) {\n    /* Note that \"(low + high) >>> 1\" may overflow, and results in a typecast\n     * to double (which gives the wrong results). */\n    mid = low + (high - low >> 1);\n    cmp = +comparator(haystack[mid], needle, mid, haystack);\n\n    /* Too low. */\n    if(cmp < 0.0)\n      low  = mid + 1;\n\n    /* Too high. */\n    else if(cmp > 0.0)\n      high = mid - 1;\n\n    /* Key found. */\n    else\n      return mid;\n  }\n\n  /* Key not found. */\n  return ~low;\n}\n","'use strict';\nvar numberIsNan = require('number-is-nan');\n\nfunction assertNum(x) {\n\tif (typeof x !== 'number' || numberIsNan(x)) {\n\t\tthrow new TypeError('Expected a number');\n\t}\n}\n\nexports.asc = function (a, b) {\n\tassertNum(a);\n\tassertNum(b);\n\treturn a - b;\n};\n\nexports.desc = function (a, b) {\n\tassertNum(a);\n\tassertNum(b);\n\treturn b - a;\n};\n","import Matrix from 'ml-matrix';\nimport meanArray from 'ml-array-mean';\n\n/**\n * @private\n * return an array of probabilities of each class\n * @param {Array} array - contains the classes\n * @param {number} numberOfClasses\n * @return {Matrix} - rowVector of probabilities.\n */\nexport function toDiscreteDistribution(array, numberOfClasses) {\n    var counts = new Array(numberOfClasses).fill(0);\n    for (var i = 0; i < array.length; ++i) {\n        counts[array[i]] += 1 / array.length;\n    }\n\n    return Matrix.rowVector(counts);\n}\n\n/**\n * @private\n * Retrieves the impurity of array of predictions\n * @param {Array} array - predictions.\n * @return {number} Gini impurity\n */\nexport function giniImpurity(array) {\n    if (array.length === 0) {\n        return 0;\n    }\n\n    var probabilities = toDiscreteDistribution(array, getNumberOfClasses(array))[0];\n\n    var sum = 0.0;\n    for (var i = 0; i < probabilities.length; ++i) {\n        sum += probabilities[i] * probabilities[i];\n    }\n\n    return 1 - sum;\n}\n\n/**\n * @private\n * Return the number of classes given the array of predictions.\n * @param {Array} array - predictions.\n * @return {number} Number of classes.\n */\nexport function getNumberOfClasses(array) {\n    return array.filter(function (val, i, arr) {\n        return arr.indexOf(val) === i;\n    }).length;\n}\n\n/**\n * @private\n * Calculates the Gini Gain of an array of predictions and those predictions splitted by a feature.\n * @para {Array} array - Predictions\n * @param {object} splitted - Object with elements \"greater\" and \"lesser\" that contains an array of predictions splitted.\n * @return {number} - Gini Gain.\n */\n\nexport function giniGain(array, splitted) {\n    var splitsImpurity = 0.0;\n    var splits = ['greater', 'lesser'];\n\n    for (var i = 0; i < splits.length; ++i) {\n        var currentSplit = splitted[splits[i]];\n        splitsImpurity += giniImpurity(currentSplit) * currentSplit.length / array.length;\n    }\n\n    return giniImpurity(array) - splitsImpurity;\n}\n\n/**\n * @private\n * Calculates the squared error of a predictions values.\n * @param {Array} array - predictions values\n * @return {number} squared error.\n */\nexport function squaredError(array) {\n    var l = array.length;\n\n    var m = meanArray(array);\n    var squaredError = 0.0;\n\n    for (var i = 0; i < l; ++i) {\n        var currentElement = array[i];\n        squaredError += (currentElement - m) * (currentElement - m);\n    }\n\n    return squaredError;\n}\n\n/**\n * @private\n * Calculates the sum of squared error of the two arrays that contains the splitted values.\n * @param {Array} array - this argument is no necessary but is used to fit with the main interface.\n * @param {object} splitted - Object with elements \"greater\" and \"lesser\" that contains an array of predictions splitted.\n * @return {number} - sum of squared errors.\n */\nexport function regressionError(array, splitted) {\n    var error = 0.0;\n    var splits = ['greater', 'lesser'];\n\n    for (var i = 0; i < splits.length; ++i) {\n        var currentSplit = splitted[splits[i]];\n        error += squaredError(currentSplit);\n    }\n    return error;\n}\n\n/**\n * @private\n * Split the training set and values from a given column of the training set if is less than a value\n * @param {Matrix} X - Training set.\n * @param {Array} y - Training values.\n * @param {number} column - Column to split.\n * @param {number} value - value to split the Training set and values.\n * @return {object} - Object that contains the splitted values.\n */\nexport function matrixSplitter(X, y, column, value) {\n    var lesserX = [];\n    var greaterX = [];\n    var lesserY = [];\n    var greaterY = [];\n\n    for (var i = 0; i < X.rows; ++i) {\n        if (X[i][column] < value) {\n            lesserX.push(X[i]);\n            lesserY.push(y[i]);\n        } else {\n            greaterX.push(X[i]);\n            greaterY.push(y[i]);\n        }\n    }\n\n    return {\n        greaterX: greaterX,\n        greaterY: greaterY,\n        lesserX: lesserX,\n        lesserY: lesserY\n    };\n}\n\n/**\n * @private\n * Calculates the mean between two values\n * @param {number} a\n * @param {number} b\n * @return {number}\n */\nexport function mean(a, b) {\n    return (a + b) / 2;\n}\n\n/**\n * @private\n * Returns a list of tuples that contains the i-th element of each array.\n * @param {Array} a\n * @param {Array} b\n * @return {Array} list of tuples.\n */\nexport function zip(a, b) {\n    if (a.length !== b.length) {\n        throw new TypeError('Error on zip: the size of a: ' + a.length + ' is different from b: ' + b.length);\n    }\n\n    var ret = new Array(a.length);\n    for (var i = 0; i < a.length; ++i) {\n        ret[i] = [a[i], b[i]];\n    }\n\n    return ret;\n}\n","import Matrix from 'ml-matrix';\nimport * as Utils from './utils';\nimport mean from 'ml-array-mean';\n\nconst gainFunctions = {\n    gini: Utils.giniGain,\n    regression: Utils.regressionError\n};\n\nconst splitFunctions = {\n    mean: Utils.mean\n};\n\nexport default class TreeNode {\n\n    /**\n     * @private\n     * Constructor for a tree node given the options received on the main classes (DecisionTreeClassifier, DecisionTreeRegression)\n     * @param {object|TreeNode} options for loading\n     * @constructor\n     */\n    constructor(options) {\n        // options parameters\n        this.kind = options.kind;\n        this.gainFunction = options.gainFunction;\n        this.splitFunction = options.splitFunction;\n        this.minNumSamples = options.minNumSamples;\n        this.maxDepth = options.maxDepth;\n    }\n\n    /**\n     * @private\n     * Function that retrieve the best feature to make the split.\n     * @param {Matrix} XTranspose - Training set transposed\n     * @param {Array} y - labels or values (depending of the decision tree)\n     * @return {object} - return tree values, the best gain, column and the split value.\n     */\n    bestSplit(XTranspose, y) {\n\n        // Depending in the node tree class, we set the variables to check information gain (to classify)\n        // or error (for regression)\n\n        var bestGain = this.kind === 'classifier' ? -Infinity : Infinity;\n        var check = this.kind === 'classifier' ? (a, b) => a > b : (a, b) => a < b;\n\n\n        var maxColumn;\n        var maxValue;\n\n        for (var i = 0; i < XTranspose.rows; ++i) {\n            var currentFeature = XTranspose[i];\n            var splitValues = this.featureSplit(currentFeature, y);\n            for (var j = 0; j < splitValues.length; ++j) {\n                var currentSplitVal = splitValues[j];\n                var splitted = this.split(currentFeature, y, currentSplitVal);\n\n                var gain = gainFunctions[this.gainFunction](y, splitted);\n                if (check(gain, bestGain)) {\n                    maxColumn = i;\n                    maxValue = currentSplitVal;\n                    bestGain = gain;\n                }\n            }\n        }\n\n        return {\n            maxGain: bestGain,\n            maxColumn: maxColumn,\n            maxValue: maxValue\n        };\n    }\n\n    /**\n     * @private\n     * Makes the split of the training labels or values from the training set feature given a split value.\n     * @param {Array} x - Training set feature\n     * @param {Array} y - Training set value or label\n     * @param {number} splitValue\n     * @return {object}\n     */\n\n    split(x, y, splitValue) {\n        var lesser = [];\n        var greater = [];\n\n        for (var i = 0; i < x.length; ++i) {\n            if (x[i] < splitValue) {\n                lesser.push(y[i]);\n            } else {\n                greater.push(y[i]);\n            }\n        }\n\n        return {\n            greater: greater,\n            lesser: lesser\n        };\n    }\n\n    /**\n     * @private\n     * Calculates the possible points to split over the tree given a training set feature and corresponding labels or values.\n     * @param {Array} x - Training set feature\n     * @param {Array} y - Training set value or label\n     * @return {Array} possible split values.\n     */\n    featureSplit(x, y) {\n        var splitValues = [];\n        var arr = Utils.zip(x, y);\n        arr.sort(function (a, b) {\n            return a[0] - b[0];\n        });\n\n        for (var i = 1; i < arr.length; ++i) {\n            if (arr[i - 1][1] !== arr[i][1]) {\n                splitValues.push(splitFunctions[this.splitFunction](arr[i - 1][0], arr[i][0]));\n            }\n        }\n\n        return splitValues;\n    }\n\n    /**\n     * @private\n     * Calculate the predictions of a leaf tree node given the training labels or values\n     * @param {Array} y\n     */\n    calculatePrediction(y) {\n        if (this.kind === 'classifier') {\n            this.distribution = Utils.toDiscreteDistribution(y, Utils.getNumberOfClasses(y));\n            if (this.distribution.columns === 0) {\n                throw new TypeError('Error on calculate the prediction');\n            }\n        } else {\n            this.distribution = mean(y);\n        }\n    }\n\n    /**\n     * @private\n     * Train a node given the training set and labels, because it trains recursively, it also receive\n     * the current depth of the node, parent gain to avoid infinite recursion and boolean value to check if\n     * the training set is transposed.\n     * @param {Matrix} X - Training set (could be transposed or not given transposed).\n     * @param {Array} y - Training labels or values.\n     * @param {number} currentDepth - Current depth of the node.\n     * @param {number} parentGain - parent node gain or error.\n     */\n    train(X, y, currentDepth, parentGain) {\n        if (X.rows <= this.minNumSamples) {\n            this.calculatePrediction(y);\n            return;\n        }\n        if (parentGain === undefined) parentGain = 0.0;\n\n        var XTranspose = X.transpose();\n        var split = this.bestSplit(XTranspose, y);\n\n        this.splitValue = split.maxValue;\n        this.splitColumn = split.maxColumn;\n        this.gain = split.maxGain;\n\n        var splittedMatrix = Utils.matrixSplitter(X, y, this.splitColumn, this.splitValue);\n\n        if (currentDepth < this.maxDepth &&\n            (this.gain > 0.01 && this.gain !== parentGain) &&\n            (splittedMatrix.lesserX.length > 0 && splittedMatrix.greaterX.length > 0)) {\n            this.left = new TreeNode(this);\n            this.right = new TreeNode(this);\n\n            var lesserX = new Matrix(splittedMatrix.lesserX);\n            var greaterX = new Matrix(splittedMatrix.greaterX);\n\n            this.left.train(lesserX, splittedMatrix.lesserY, currentDepth + 1, this.gain);\n            this.right.train(greaterX, splittedMatrix.greaterY, currentDepth + 1, this.gain);\n        } else {\n            this.calculatePrediction(y);\n        }\n    }\n\n    /**\n     * @private\n     * Calculates the prediction of a given element.\n     * @param {Array} row\n     * @return {number|Array} prediction\n     *          * if a node is a classifier returns an array of probabilities of each class.\n     *          * if a node is for regression returns a number with the prediction.\n     */\n    classify(row) {\n        if (this.right && this.left) {\n            if (row[this.splitColumn] < this.splitValue) {\n                return this.left.classify(row);\n            } else {\n                return this.right.classify(row);\n            }\n        }\n\n        return this.distribution;\n    }\n\n    /**\n     * @private\n     * Set the parameter of the current node and their children.\n     * @param {object} node - parameters of the current node and the children.\n     */\n    setNodeParameters(node) {\n        if (node.distribution !== undefined) {\n            this.distribution = node.distribution.constructor === Array ? new Matrix(node.distribution) :\n                                                                          node.distribution;\n        } else {\n            this.distribution = undefined;\n            this.splitValue = node.splitValue;\n            this.splitColumn = node.splitColumn;\n            this.gain = node.gain;\n\n            this.left = new TreeNode(this);\n            this.right = new TreeNode(this);\n\n            if (node.left !== {}) {\n                this.left.setNodeParameters(node.left);\n            }\n            if (node.right !== {}) {\n                this.right.setNodeParameters(node.right);\n            }\n        }\n    }\n}\n","import Matrix from 'ml-matrix';\nimport Tree from './TreeNode';\n\nconst defaultOptions = {\n    gainFunction: 'gini',\n    splitFunction: 'mean',\n    minNumSamples: 3,\n    maxDepth: Infinity\n};\n\nexport class DecisionTreeClassifier {\n\n    /**\n     * Create new Decision Tree Classifier with CART implementation with the given options\n     * @param {object} options\n     * @param {string} [options.gainFunction=\"gini\"] - gain function to get the best split, \"gini\" the only one supported.\n     * @param {string} [options.splitFunction=\"mean\"] - given two integers from a split feature, get the value to split, \"mean\" the only one supported.\n     * @param {number} [options.minNumSamples=3] - minimum number of samples to create a leaf node to decide a class.\n     * @param {number} [options.maxDepth=Infinity] - Max depth of the tree.\n     * @param {object} model - for load purposes.\n     * @constructor\n     */\n    constructor(options, model) {\n        if (options === true) {\n            this.options = model.options;\n            this.root = new Tree(model.options);\n            this.root.setNodeParameters(model.root);\n        } else {\n            this.options = Object.assign({}, defaultOptions, options);\n            this.options.kind = 'classifier';\n        }\n    }\n\n    /**\n     * Train the decision tree with the given training set and labels.\n     * @param {Matrix|MatrixTransposeView|Array} trainingSet\n     * @param {Array} trainingLabels\n     */\n    train(trainingSet, trainingLabels) {\n        this.root = new Tree(this.options);\n        trainingSet = Matrix.checkMatrix(trainingSet);\n        this.root.train(trainingSet, trainingLabels, 0, null);\n    }\n\n    /**\n     * Predicts the output given the matrix to predict.\n     * @param {Matrix|MatrixTransposeView|Array} toPredict\n     * @return {Array} predictions\n     */\n    predict(toPredict) {\n        toPredict = Matrix.checkMatrix(toPredict);\n        var predictions = new Array(toPredict.rows);\n\n        for (var i = 0; i < toPredict.rows; ++i) {\n            predictions[i] = this.root.classify(toPredict.getRow(i)).maxRowIndex(0)[1];\n        }\n\n        return predictions;\n    }\n\n    /**\n     * Export the current model to JSON.\n     * @return {object} - Current model.\n     */\n    toJSON() {\n        return {\n            options: this.options,\n            root: this.root,\n            name: 'DTClassifier'\n        };\n    }\n\n    /**\n     * Load a Decision tree classifier with the given model.\n     * @param {object} model\n     * @return {DecisionTreeClassifier}\n     */\n    static load(model) {\n        if (model.name !== 'DTClassifier') {\n            throw new RangeError('Invalid model: ' + model.name);\n        }\n\n        return new DecisionTreeClassifier(true, model);\n    }\n}\n","import Matrix from 'ml-matrix';\nimport Tree from './TreeNode';\n\nconst defaultOptions = {\n    gainFunction: 'regression',\n    splitFunction: 'mean',\n    minNumSamples: 3,\n    maxDepth: Infinity\n};\n\nexport class DecisionTreeRegression {\n\n    /**\n     * Create new Decision Tree Regression with CART implementation with the given options.\n     * @param {object} options\n     * @param {string} [options.gainFunction=\"regression\"] - gain function to get the best split, \"regression\" the only one supported.\n     * @param {string} [options.splitFunction=\"mean\"] - given two integers from a split feature, get the value to split, \"mean\" the only one supported.\n     * @param {number} [options.minNumSamples=3] - minimum number of samples to create a leaf node to decide a class.\n     * @param {number} [options.maxDepth=Infinity] - Max depth of the tree.\n     * @param {object} model - for load purposes.\n     */\n    constructor(options, model) {\n        if (options === true) {\n            this.options = model.options;\n            this.root = new Tree(model.options);\n            this.root.setNodeParameters(model.root);\n        } else {\n            this.options = Object.assign({}, defaultOptions, options);\n            this.options.kind = 'regression';\n        }\n    }\n\n    /**\n     * Train the decision tree with the given training set and values.\n     * @param {Matrix|MatrixTransposeView|Array} trainingSet\n     * @param {Array} trainingValues\n     */\n    train(trainingSet, trainingValues) {\n        this.root = new Tree(this.options);\n\n        if (trainingSet[0].length === undefined) trainingSet = Matrix.columnVector(trainingSet);\n        trainingSet = Matrix.checkMatrix(trainingSet);\n        this.root.train(trainingSet, trainingValues, 0);\n    }\n\n    /**\n     * Predicts the values given the matrix to predict.\n     * @param {Matrix|MatrixTransposeView|Array} toPredict\n     * @return {Array} predictions\n     */\n    predict(toPredict) {\n        if (toPredict[0] !== undefined && toPredict[0].length === undefined) toPredict = Matrix.columnVector(toPredict);\n        toPredict = Matrix.checkMatrix(toPredict);\n\n        var predictions = new Array(toPredict.rows);\n        for (var i = 0; i < toPredict.rows; ++i) {\n            predictions[i] = this.root.classify(toPredict.getRow(i));\n        }\n\n        return predictions;\n    }\n\n    /**\n     * Export the current model to JSON.\n     * @return {object} - Current model.\n     */\n    toJSON() {\n        return {\n            options: this.options,\n            root: this.root,\n            name: 'DTRegression'\n        };\n    }\n\n    /**\n     * Load a Decision tree regression with the given model.\n     * @param {object} model\n     * @return {DecisionTreeRegression}\n     */\n    static load(model) {\n        if (model.name !== 'DTRegression') {\n            throw new RangeError('Invalid model:' + model.name);\n        }\n\n        return new DecisionTreeRegression(true, model);\n    }\n}\n","export {DecisionTreeClassifier} from './DecisionTreeClassifier';\nexport {DecisionTreeRegression} from './DecisionTreeRegression';\n","import isArray from 'is-any-array';\n\n/**\n * Computes the maximum of the given values\n * @param {Array<number>} input\n * @return {number}\n */\n\nfunction max(input) {\n  if (!isArray(input)) {\n    throw new TypeError('input must be an array');\n  }\n\n  if (input.length === 0) {\n    throw new TypeError('input must not be empty');\n  }\n\n  var max = input[0];\n\n  for (var i = 1; i < input.length; i++) {\n    if (input[i] > max) max = input[i];\n  }\n\n  return max;\n}\n\nexport default max;\n","'use strict';\n\nconst Matrix = require('ml-matrix').Matrix;\n\nconst GaussianKernel = require('ml-kernel-gaussian');\nconst PolynomialKernel = require('ml-kernel-polynomial');\nconst ANOVAKernel = require('./kernels/anova-kernel');\nconst CauchyKernel = require('./kernels/cauchy-kernel');\nconst ExponentialKernel = require('./kernels/exponential-kernel');\nconst HistogramKernel = require('./kernels/histogram-intersection-kernel');\nconst LaplacianKernel = require('./kernels/laplacian-kernel');\nconst MultiquadraticKernel = require('./kernels/multiquadratic-kernel');\nconst RationalKernel = require('./kernels/rational-quadratic-kernel');\nconst SigmoidKernel = require('ml-kernel-sigmoid');\n\nconst kernelType = {\n    gaussian: GaussianKernel,\n    rbf: GaussianKernel,\n    polynomial: PolynomialKernel,\n    poly: PolynomialKernel,\n    anova: ANOVAKernel,\n    cauchy: CauchyKernel,\n    exponential: ExponentialKernel,\n    histogram: HistogramKernel,\n    min: HistogramKernel,\n    laplacian: LaplacianKernel,\n    multiquadratic: MultiquadraticKernel,\n    rational: RationalKernel,\n    sigmoid: SigmoidKernel,\n    mlp: SigmoidKernel\n};\n\nclass Kernel {\n    constructor(type, options) {\n        this.kernelType = type;\n        if (type === 'linear') return;\n\n        if (typeof type === 'string') {\n            type = type.toLowerCase();\n\n            var KernelConstructor = kernelType[type];\n            if (KernelConstructor) {\n                this.kernelFunction = new KernelConstructor(options);\n            } else {\n                throw new Error('unsupported kernel type: ' + type);\n            }\n        } else if (typeof type === 'object' && typeof type.compute === 'function') {\n            this.kernelFunction = type;\n        } else {\n            throw new TypeError('first argument must be a valid kernel type or instance');\n        }\n    }\n\n    compute(inputs, landmarks) {\n        if (landmarks === undefined) {\n            landmarks = inputs;\n        }\n\n        if (this.kernelType === 'linear') {\n            var matrix = new Matrix(inputs);\n            return matrix.mmul(new Matrix(landmarks).transposeView());\n        }\n\n        const kernelMatrix = new Matrix(inputs.length, landmarks.length);\n        var i, j;\n        if (inputs === landmarks) { // fast path, matrix is symmetric\n            for (i = 0; i < inputs.length; i++) {\n                for (j = i; j < inputs.length; j++) {\n                    kernelMatrix[i][j] = kernelMatrix[j][i] = this.kernelFunction.compute(inputs[i], inputs[j]);\n                }\n            }\n        } else {\n            for (i = 0; i < inputs.length; i++) {\n                for (j = 0; j < landmarks.length; j++) {\n                    kernelMatrix[i][j] = this.kernelFunction.compute(inputs[i], landmarks[j]);\n                }\n            }\n        }\n        return kernelMatrix;\n    }\n}\n\nmodule.exports = Kernel;\n","const PROB_TOLERANCE = 0.00000001;\nfunction randomChoice(values, options = {}, random = Math.random) {\n    const { size = 1, replace = false, probabilities } = options;\n    let valuesArr;\n    let cumSum;\n    if (typeof values === 'number') {\n        valuesArr = getArray(values);\n    }\n    else {\n        valuesArr = values.slice();\n    }\n    if (probabilities) {\n        if (!replace) {\n            throw new Error('choice with probabilities and no replacement is not implemented');\n        }\n        // check input is sane\n        if (probabilities.length !== valuesArr.length) {\n            throw new Error('the length of probabilities option should be equal to the number of choices');\n        }\n        cumSum = [probabilities[0]];\n        for (let i = 1; i < probabilities.length; i++) {\n            cumSum[i] = cumSum[i - 1] + probabilities[i];\n        }\n        if (Math.abs(1 - cumSum[cumSum.length - 1]) > PROB_TOLERANCE) {\n            throw new Error(`probabilities should sum to 1, but instead sums to ${cumSum[cumSum.length - 1]}`);\n        }\n    }\n    if (replace === false && size > valuesArr.length) {\n        throw new Error('size option is too large');\n    }\n    const result = [];\n    for (let i = 0; i < size; i++) {\n        const index = randomIndex(valuesArr.length, random, cumSum);\n        result.push(valuesArr[index]);\n        if (!replace) {\n            valuesArr.splice(index, 1);\n        }\n    }\n    return result;\n}\nfunction getArray(n) {\n    const arr = [];\n    for (let i = 0; i < n; i++) {\n        arr.push(i);\n    }\n    return arr;\n}\nfunction randomIndex(n, random, cumSum) {\n    const rand = random();\n    if (!cumSum) {\n        return Math.floor(rand * n);\n    }\n    else {\n        let idx = 0;\n        while (rand > cumSum[idx]) {\n            idx++;\n        }\n        return idx;\n    }\n}\nexport default randomChoice;\n","// tslint:disable-next-line\nimport XSAdd from 'ml-xsadd';\nimport choice from './choice';\n/**\n * @classdesc Random class\n */\nexport default class Random {\n    /**\n     * @param [seedOrRandom=Math.random] - Control the random number generator used by the Random class instance. Pass a random number generator function with a uniform distribution over the half-open interval [0, 1[. If seed will pass it to ml-xsadd to create a seeded random number generator. If undefined will use Math.random.\n     */\n    constructor(seedOrRandom = Math.random) {\n        if (typeof seedOrRandom === 'number') {\n            const xsadd = new XSAdd(seedOrRandom);\n            this.randomGenerator = xsadd.random;\n        }\n        else {\n            this.randomGenerator = seedOrRandom;\n        }\n    }\n    choice(values, options) {\n        if (typeof values === 'number') {\n            return choice(values, options, this.randomGenerator);\n        }\n        return choice(values, options, this.randomGenerator);\n    }\n    /**\n     * Draw a random number from a uniform distribution on [0,1)\n     * @return The random number\n     */\n    random() {\n        return this.randomGenerator();\n    }\n    /**\n     * Draw a random integer from a uniform distribution on [low, high). If only low is specified, the number is drawn on [0, low)\n     * @param low - The lower bound of the uniform distribution interval.\n     * @param high - The higher bound of the uniform distribution interval.\n     */\n    randInt(low, high) {\n        if (high === undefined) {\n            high = low;\n            low = 0;\n        }\n        return low + Math.floor(this.randomGenerator() * (high - low));\n    }\n    /**\n     * Draw several random number from a uniform distribution on [0, 1)\n     * @param size - The number of number to draw\n     * @return - The list of drawn numbers.\n     */\n    randomSample(size) {\n        const result = [];\n        for (let i = 0; i < size; i++) {\n            result.push(this.random());\n        }\n        return result;\n    }\n}\n","/*jshint eqnull:true*/\n(function (root) {\n  \"use strict\";\n\n  var GLOBAL_KEY = \"Random\";\n\n  var imul = (typeof Math.imul !== \"function\" || Math.imul(0xffffffff, 5) !== -5 ?\n    function (a, b) {\n      var ah = (a >>> 16) & 0xffff;\n      var al = a & 0xffff;\n      var bh = (b >>> 16) & 0xffff;\n      var bl = b & 0xffff;\n      // the shift by 0 fixes the sign on the high part\n      // the final |0 converts the unsigned value into a signed value\n      return (al * bl) + (((ah * bl + al * bh) << 16) >>> 0) | 0;\n    } :\n    Math.imul);\n\n  var stringRepeat = (typeof String.prototype.repeat === \"function\" && \"x\".repeat(3) === \"xxx\" ?\n    function (x, y) {\n      return x.repeat(y);\n    } : function (pattern, count) {\n      var result = \"\";\n      while (count > 0) {\n        if (count & 1) {\n          result += pattern;\n        }\n        count >>= 1;\n        pattern += pattern;\n      }\n      return result;\n    });\n\n  function Random(engine) {\n    if (!(this instanceof Random)) {\n      return new Random(engine);\n    }\n\n    if (engine == null) {\n      engine = Random.engines.nativeMath;\n    } else if (typeof engine !== \"function\") {\n      throw new TypeError(\"Expected engine to be a function, got \" + typeof engine);\n    }\n    this.engine = engine;\n  }\n  var proto = Random.prototype;\n\n  Random.engines = {\n    nativeMath: function () {\n      return (Math.random() * 0x100000000) | 0;\n    },\n    mt19937: (function (Int32Array) {\n      // http://en.wikipedia.org/wiki/Mersenne_twister\n      function refreshData(data) {\n        var k = 0;\n        var tmp = 0;\n        for (;\n          (k | 0) < 227; k = (k + 1) | 0) {\n          tmp = (data[k] & 0x80000000) | (data[(k + 1) | 0] & 0x7fffffff);\n          data[k] = data[(k + 397) | 0] ^ (tmp >>> 1) ^ ((tmp & 0x1) ? 0x9908b0df : 0);\n        }\n\n        for (;\n          (k | 0) < 623; k = (k + 1) | 0) {\n          tmp = (data[k] & 0x80000000) | (data[(k + 1) | 0] & 0x7fffffff);\n          data[k] = data[(k - 227) | 0] ^ (tmp >>> 1) ^ ((tmp & 0x1) ? 0x9908b0df : 0);\n        }\n\n        tmp = (data[623] & 0x80000000) | (data[0] & 0x7fffffff);\n        data[623] = data[396] ^ (tmp >>> 1) ^ ((tmp & 0x1) ? 0x9908b0df : 0);\n      }\n\n      function temper(value) {\n        value ^= value >>> 11;\n        value ^= (value << 7) & 0x9d2c5680;\n        value ^= (value << 15) & 0xefc60000;\n        return value ^ (value >>> 18);\n      }\n\n      function seedWithArray(data, source) {\n        var i = 1;\n        var j = 0;\n        var sourceLength = source.length;\n        var k = Math.max(sourceLength, 624) | 0;\n        var previous = data[0] | 0;\n        for (;\n          (k | 0) > 0; --k) {\n          data[i] = previous = ((data[i] ^ imul((previous ^ (previous >>> 30)), 0x0019660d)) + (source[j] | 0) + (j | 0)) | 0;\n          i = (i + 1) | 0;\n          ++j;\n          if ((i | 0) > 623) {\n            data[0] = data[623];\n            i = 1;\n          }\n          if (j >= sourceLength) {\n            j = 0;\n          }\n        }\n        for (k = 623;\n          (k | 0) > 0; --k) {\n          data[i] = previous = ((data[i] ^ imul((previous ^ (previous >>> 30)), 0x5d588b65)) - i) | 0;\n          i = (i + 1) | 0;\n          if ((i | 0) > 623) {\n            data[0] = data[623];\n            i = 1;\n          }\n        }\n        data[0] = 0x80000000;\n      }\n\n      function mt19937() {\n        var data = new Int32Array(624);\n        var index = 0;\n        var uses = 0;\n\n        function next() {\n          if ((index | 0) >= 624) {\n            refreshData(data);\n            index = 0;\n          }\n\n          var value = data[index];\n          index = (index + 1) | 0;\n          uses += 1;\n          return temper(value) | 0;\n        }\n        next.getUseCount = function() {\n          return uses;\n        };\n        next.discard = function (count) {\n          uses += count;\n          if ((index | 0) >= 624) {\n            refreshData(data);\n            index = 0;\n          }\n          while ((count - index) > 624) {\n            count -= 624 - index;\n            refreshData(data);\n            index = 0;\n          }\n          index = (index + count) | 0;\n          return next;\n        };\n        next.seed = function (initial) {\n          var previous = 0;\n          data[0] = previous = initial | 0;\n\n          for (var i = 1; i < 624; i = (i + 1) | 0) {\n            data[i] = previous = (imul((previous ^ (previous >>> 30)), 0x6c078965) + i) | 0;\n          }\n          index = 624;\n          uses = 0;\n          return next;\n        };\n        next.seedWithArray = function (source) {\n          next.seed(0x012bd6aa);\n          seedWithArray(data, source);\n          return next;\n        };\n        next.autoSeed = function () {\n          return next.seedWithArray(Random.generateEntropyArray());\n        };\n        return next;\n      }\n\n      return mt19937;\n    }(typeof Int32Array === \"function\" ? Int32Array : Array)),\n    browserCrypto: (typeof crypto !== \"undefined\" && typeof crypto.getRandomValues === \"function\" && typeof Int32Array === \"function\") ? (function () {\n      var data = null;\n      var index = 128;\n\n      return function () {\n        if (index >= 128) {\n          if (data === null) {\n            data = new Int32Array(128);\n          }\n          crypto.getRandomValues(data);\n          index = 0;\n        }\n\n        return data[index++] | 0;\n      };\n    }()) : null\n  };\n\n  Random.generateEntropyArray = function () {\n    var array = [];\n    var engine = Random.engines.nativeMath;\n    for (var i = 0; i < 16; ++i) {\n      array[i] = engine() | 0;\n    }\n    array.push(new Date().getTime() | 0);\n    return array;\n  };\n\n  function returnValue(value) {\n    return function () {\n      return value;\n    };\n  }\n\n  // [-0x80000000, 0x7fffffff]\n  Random.int32 = function (engine) {\n    return engine() | 0;\n  };\n  proto.int32 = function () {\n    return Random.int32(this.engine);\n  };\n\n  // [0, 0xffffffff]\n  Random.uint32 = function (engine) {\n    return engine() >>> 0;\n  };\n  proto.uint32 = function () {\n    return Random.uint32(this.engine);\n  };\n\n  // [0, 0x1fffffffffffff]\n  Random.uint53 = function (engine) {\n    var high = engine() & 0x1fffff;\n    var low = engine() >>> 0;\n    return (high * 0x100000000) + low;\n  };\n  proto.uint53 = function () {\n    return Random.uint53(this.engine);\n  };\n\n  // [0, 0x20000000000000]\n  Random.uint53Full = function (engine) {\n    while (true) {\n      var high = engine() | 0;\n      if (high & 0x200000) {\n        if ((high & 0x3fffff) === 0x200000 && (engine() | 0) === 0) {\n          return 0x20000000000000;\n        }\n      } else {\n        var low = engine() >>> 0;\n        return ((high & 0x1fffff) * 0x100000000) + low;\n      }\n    }\n  };\n  proto.uint53Full = function () {\n    return Random.uint53Full(this.engine);\n  };\n\n  // [-0x20000000000000, 0x1fffffffffffff]\n  Random.int53 = function (engine) {\n    var high = engine() | 0;\n    var low = engine() >>> 0;\n    return ((high & 0x1fffff) * 0x100000000) + low + (high & 0x200000 ? -0x20000000000000 : 0);\n  };\n  proto.int53 = function () {\n    return Random.int53(this.engine);\n  };\n\n  // [-0x20000000000000, 0x20000000000000]\n  Random.int53Full = function (engine) {\n    while (true) {\n      var high = engine() | 0;\n      if (high & 0x400000) {\n        if ((high & 0x7fffff) === 0x400000 && (engine() | 0) === 0) {\n          return 0x20000000000000;\n        }\n      } else {\n        var low = engine() >>> 0;\n        return ((high & 0x1fffff) * 0x100000000) + low + (high & 0x200000 ? -0x20000000000000 : 0);\n      }\n    }\n  };\n  proto.int53Full = function () {\n    return Random.int53Full(this.engine);\n  };\n\n  function add(generate, addend) {\n    if (addend === 0) {\n      return generate;\n    } else {\n      return function (engine) {\n        return generate(engine) + addend;\n      };\n    }\n  }\n\n  Random.integer = (function () {\n    function isPowerOfTwoMinusOne(value) {\n      return ((value + 1) & value) === 0;\n    }\n\n    function bitmask(masking) {\n      return function (engine) {\n        return engine() & masking;\n      };\n    }\n\n    function downscaleToLoopCheckedRange(range) {\n      var extendedRange = range + 1;\n      var maximum = extendedRange * Math.floor(0x100000000 / extendedRange);\n      return function (engine) {\n        var value = 0;\n        do {\n          value = engine() >>> 0;\n        } while (value >= maximum);\n        return value % extendedRange;\n      };\n    }\n\n    function downscaleToRange(range) {\n      if (isPowerOfTwoMinusOne(range)) {\n        return bitmask(range);\n      } else {\n        return downscaleToLoopCheckedRange(range);\n      }\n    }\n\n    function isEvenlyDivisibleByMaxInt32(value) {\n      return (value | 0) === 0;\n    }\n\n    function upscaleWithHighMasking(masking) {\n      return function (engine) {\n        var high = engine() & masking;\n        var low = engine() >>> 0;\n        return (high * 0x100000000) + low;\n      };\n    }\n\n    function upscaleToLoopCheckedRange(extendedRange) {\n      var maximum = extendedRange * Math.floor(0x20000000000000 / extendedRange);\n      return function (engine) {\n        var ret = 0;\n        do {\n          var high = engine() & 0x1fffff;\n          var low = engine() >>> 0;\n          ret = (high * 0x100000000) + low;\n        } while (ret >= maximum);\n        return ret % extendedRange;\n      };\n    }\n\n    function upscaleWithinU53(range) {\n      var extendedRange = range + 1;\n      if (isEvenlyDivisibleByMaxInt32(extendedRange)) {\n        var highRange = ((extendedRange / 0x100000000) | 0) - 1;\n        if (isPowerOfTwoMinusOne(highRange)) {\n          return upscaleWithHighMasking(highRange);\n        }\n      }\n      return upscaleToLoopCheckedRange(extendedRange);\n    }\n\n    function upscaleWithinI53AndLoopCheck(min, max) {\n      return function (engine) {\n        var ret = 0;\n        do {\n          var high = engine() | 0;\n          var low = engine() >>> 0;\n          ret = ((high & 0x1fffff) * 0x100000000) + low + (high & 0x200000 ? -0x20000000000000 : 0);\n        } while (ret < min || ret > max);\n        return ret;\n      };\n    }\n\n    return function (min, max) {\n      min = Math.floor(min);\n      max = Math.floor(max);\n      if (min < -0x20000000000000 || !isFinite(min)) {\n        throw new RangeError(\"Expected min to be at least \" + (-0x20000000000000));\n      } else if (max > 0x20000000000000 || !isFinite(max)) {\n        throw new RangeError(\"Expected max to be at most \" + 0x20000000000000);\n      }\n\n      var range = max - min;\n      if (range <= 0 || !isFinite(range)) {\n        return returnValue(min);\n      } else if (range === 0xffffffff) {\n        if (min === 0) {\n          return Random.uint32;\n        } else {\n          return add(Random.int32, min + 0x80000000);\n        }\n      } else if (range < 0xffffffff) {\n        return add(downscaleToRange(range), min);\n      } else if (range === 0x1fffffffffffff) {\n        return add(Random.uint53, min);\n      } else if (range < 0x1fffffffffffff) {\n        return add(upscaleWithinU53(range), min);\n      } else if (max - 1 - min === 0x1fffffffffffff) {\n        return add(Random.uint53Full, min);\n      } else if (min === -0x20000000000000 && max === 0x20000000000000) {\n        return Random.int53Full;\n      } else if (min === -0x20000000000000 && max === 0x1fffffffffffff) {\n        return Random.int53;\n      } else if (min === -0x1fffffffffffff && max === 0x20000000000000) {\n        return add(Random.int53, 1);\n      } else if (max === 0x20000000000000) {\n        return add(upscaleWithinI53AndLoopCheck(min - 1, max - 1), 1);\n      } else {\n        return upscaleWithinI53AndLoopCheck(min, max);\n      }\n    };\n  }());\n  proto.integer = function (min, max) {\n    return Random.integer(min, max)(this.engine);\n  };\n\n  // [0, 1] (floating point)\n  Random.realZeroToOneInclusive = function (engine) {\n    return Random.uint53Full(engine) / 0x20000000000000;\n  };\n  proto.realZeroToOneInclusive = function () {\n    return Random.realZeroToOneInclusive(this.engine);\n  };\n\n  // [0, 1) (floating point)\n  Random.realZeroToOneExclusive = function (engine) {\n    return Random.uint53(engine) / 0x20000000000000;\n  };\n  proto.realZeroToOneExclusive = function () {\n    return Random.realZeroToOneExclusive(this.engine);\n  };\n\n  Random.real = (function () {\n    function multiply(generate, multiplier) {\n      if (multiplier === 1) {\n        return generate;\n      } else if (multiplier === 0) {\n        return function () {\n          return 0;\n        };\n      } else {\n        return function (engine) {\n          return generate(engine) * multiplier;\n        };\n      }\n    }\n\n    return function (left, right, inclusive) {\n      if (!isFinite(left)) {\n        throw new RangeError(\"Expected left to be a finite number\");\n      } else if (!isFinite(right)) {\n        throw new RangeError(\"Expected right to be a finite number\");\n      }\n      return add(\n        multiply(\n          inclusive ? Random.realZeroToOneInclusive : Random.realZeroToOneExclusive,\n          right - left),\n        left);\n    };\n  }());\n  proto.real = function (min, max, inclusive) {\n    return Random.real(min, max, inclusive)(this.engine);\n  };\n\n  Random.bool = (function () {\n    function isLeastBitTrue(engine) {\n      return (engine() & 1) === 1;\n    }\n\n    function lessThan(generate, value) {\n      return function (engine) {\n        return generate(engine) < value;\n      };\n    }\n\n    function probability(percentage) {\n      if (percentage <= 0) {\n        return returnValue(false);\n      } else if (percentage >= 1) {\n        return returnValue(true);\n      } else {\n        var scaled = percentage * 0x100000000;\n        if (scaled % 1 === 0) {\n          return lessThan(Random.int32, (scaled - 0x80000000) | 0);\n        } else {\n          return lessThan(Random.uint53, Math.round(percentage * 0x20000000000000));\n        }\n      }\n    }\n\n    return function (numerator, denominator) {\n      if (denominator == null) {\n        if (numerator == null) {\n          return isLeastBitTrue;\n        }\n        return probability(numerator);\n      } else {\n        if (numerator <= 0) {\n          return returnValue(false);\n        } else if (numerator >= denominator) {\n          return returnValue(true);\n        }\n        return lessThan(Random.integer(0, denominator - 1), numerator);\n      }\n    };\n  }());\n  proto.bool = function (numerator, denominator) {\n    return Random.bool(numerator, denominator)(this.engine);\n  };\n\n  function toInteger(value) {\n    var number = +value;\n    if (number < 0) {\n      return Math.ceil(number);\n    } else {\n      return Math.floor(number);\n    }\n  }\n\n  function convertSliceArgument(value, length) {\n    if (value < 0) {\n      return Math.max(value + length, 0);\n    } else {\n      return Math.min(value, length);\n    }\n  }\n  Random.pick = function (engine, array, begin, end) {\n    var length = array.length;\n    var start = begin == null ? 0 : convertSliceArgument(toInteger(begin), length);\n    var finish = end === void 0 ? length : convertSliceArgument(toInteger(end), length);\n    if (start >= finish) {\n      return void 0;\n    }\n    var distribution = Random.integer(start, finish - 1);\n    return array[distribution(engine)];\n  };\n  proto.pick = function (array, begin, end) {\n    return Random.pick(this.engine, array, begin, end);\n  };\n\n  function returnUndefined() {\n    return void 0;\n  }\n  var slice = Array.prototype.slice;\n  Random.picker = function (array, begin, end) {\n    var clone = slice.call(array, begin, end);\n    if (!clone.length) {\n      return returnUndefined;\n    }\n    var distribution = Random.integer(0, clone.length - 1);\n    return function (engine) {\n      return clone[distribution(engine)];\n    };\n  };\n\n  Random.shuffle = function (engine, array, downTo) {\n    var length = array.length;\n    if (length) {\n      if (downTo == null) {\n        downTo = 0;\n      }\n      for (var i = (length - 1) >>> 0; i > downTo; --i) {\n        var distribution = Random.integer(0, i);\n        var j = distribution(engine);\n        if (i !== j) {\n          var tmp = array[i];\n          array[i] = array[j];\n          array[j] = tmp;\n        }\n      }\n    }\n    return array;\n  };\n  proto.shuffle = function (array) {\n    return Random.shuffle(this.engine, array);\n  };\n\n  Random.sample = function (engine, population, sampleSize) {\n    if (sampleSize < 0 || sampleSize > population.length || !isFinite(sampleSize)) {\n      throw new RangeError(\"Expected sampleSize to be within 0 and the length of the population\");\n    }\n\n    if (sampleSize === 0) {\n      return [];\n    }\n\n    var clone = slice.call(population);\n    var length = clone.length;\n    if (length === sampleSize) {\n      return Random.shuffle(engine, clone, 0);\n    }\n    var tailLength = length - sampleSize;\n    return Random.shuffle(engine, clone, tailLength - 1).slice(tailLength);\n  };\n  proto.sample = function (population, sampleSize) {\n    return Random.sample(this.engine, population, sampleSize);\n  };\n\n  Random.die = function (sideCount) {\n    return Random.integer(1, sideCount);\n  };\n  proto.die = function (sideCount) {\n    return Random.die(sideCount)(this.engine);\n  };\n\n  Random.dice = function (sideCount, dieCount) {\n    var distribution = Random.die(sideCount);\n    return function (engine) {\n      var result = [];\n      result.length = dieCount;\n      for (var i = 0; i < dieCount; ++i) {\n        result[i] = distribution(engine);\n      }\n      return result;\n    };\n  };\n  proto.dice = function (sideCount, dieCount) {\n    return Random.dice(sideCount, dieCount)(this.engine);\n  };\n\n  // http://en.wikipedia.org/wiki/Universally_unique_identifier\n  Random.uuid4 = (function () {\n    function zeroPad(string, zeroCount) {\n      return stringRepeat(\"0\", zeroCount - string.length) + string;\n    }\n\n    return function (engine) {\n      var a = engine() >>> 0;\n      var b = engine() | 0;\n      var c = engine() | 0;\n      var d = engine() >>> 0;\n\n      return (\n        zeroPad(a.toString(16), 8) +\n        \"-\" +\n        zeroPad((b & 0xffff).toString(16), 4) +\n        \"-\" +\n        zeroPad((((b >> 4) & 0x0fff) | 0x4000).toString(16), 4) +\n        \"-\" +\n        zeroPad(((c & 0x3fff) | 0x8000).toString(16), 4) +\n        \"-\" +\n        zeroPad(((c >> 4) & 0xffff).toString(16), 4) +\n        zeroPad(d.toString(16), 8));\n    };\n  }());\n  proto.uuid4 = function () {\n    return Random.uuid4(this.engine);\n  };\n\n  Random.string = (function () {\n    // has 2**x chars, for faster uniform distribution\n    var DEFAULT_STRING_POOL = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_-\";\n\n    return function (pool) {\n      if (pool == null) {\n        pool = DEFAULT_STRING_POOL;\n      }\n\n      var length = pool.length;\n      if (!length) {\n        throw new Error(\"Expected pool not to be an empty string\");\n      }\n\n      var distribution = Random.integer(0, length - 1);\n      return function (engine, length) {\n        var result = \"\";\n        for (var i = 0; i < length; ++i) {\n          var j = distribution(engine);\n          result += pool.charAt(j);\n        }\n        return result;\n      };\n    };\n  }());\n  proto.string = function (length, pool) {\n    return Random.string(pool)(this.engine, length);\n  };\n\n  Random.hex = (function () {\n    var LOWER_HEX_POOL = \"0123456789abcdef\";\n    var lowerHex = Random.string(LOWER_HEX_POOL);\n    var upperHex = Random.string(LOWER_HEX_POOL.toUpperCase());\n\n    return function (upper) {\n      if (upper) {\n        return upperHex;\n      } else {\n        return lowerHex;\n      }\n    };\n  }());\n  proto.hex = function (length, upper) {\n    return Random.hex(upper)(this.engine, length);\n  };\n\n  Random.date = function (start, end) {\n    if (!(start instanceof Date)) {\n      throw new TypeError(\"Expected start to be a Date, got \" + typeof start);\n    } else if (!(end instanceof Date)) {\n      throw new TypeError(\"Expected end to be a Date, got \" + typeof end);\n    }\n    var distribution = Random.integer(start.getTime(), end.getTime());\n    return function (engine) {\n      return new Date(distribution(engine));\n    };\n  };\n  proto.date = function (start, end) {\n    return Random.date(start, end)(this.engine);\n  };\n\n  if (typeof define === \"function\" && define.amd) {\n    define(function () {\n      return Random;\n    });\n  } else if (typeof module !== \"undefined\" && typeof require === \"function\") {\n    module.exports = Random;\n  } else {\n    (function () {\n      var oldGlobal = root[GLOBAL_KEY];\n      Random.noConflict = function () {\n        root[GLOBAL_KEY] = oldGlobal;\n        return this;\n      };\n    }());\n    root[GLOBAL_KEY] = Random;\n  }\n}(this));","import max from 'ml-array-max';\nimport min from 'ml-array-min';\nimport isArray from 'is-any-array';\n\nfunction rescale(input) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!isArray(input)) {\n    throw new TypeError('input must be an array');\n  } else if (input.length === 0) {\n    throw new TypeError('input must not be empty');\n  }\n\n  var output;\n\n  if (options.output !== undefined) {\n    if (!isArray(options.output)) {\n      throw new TypeError('output option must be an array if specified');\n    }\n\n    output = options.output;\n  } else {\n    output = new Array(input.length);\n  }\n\n  var currentMin = min(input);\n  var currentMax = max(input);\n\n  if (currentMin === currentMax) {\n    throw new RangeError('minimum and maximum input values are equal. Cannot rescale a constant array');\n  }\n\n  var _options$min = options.min,\n      minValue = _options$min === void 0 ? options.autoMinMax ? currentMin : 0 : _options$min,\n      _options$max = options.max,\n      maxValue = _options$max === void 0 ? options.autoMinMax ? currentMax : 1 : _options$max;\n\n  if (minValue >= maxValue) {\n    throw new RangeError('min option must be smaller than max option');\n  }\n\n  var factor = (maxValue - minValue) / (currentMax - currentMin);\n\n  for (var i = 0; i < input.length; i++) {\n    output[i] = (input[i] - currentMin) * factor + minValue;\n  }\n\n  return output;\n}\n\nexport default rescale;\n","'use strict';\n\nconst newArray = require('new-array');\n\nconst primeFinder = require('./primeFinder');\nconst nextPrime = primeFinder.nextPrime;\nconst largestPrime = primeFinder.largestPrime;\n\nconst FREE = 0;\nconst FULL = 1;\nconst REMOVED = 2;\n\nconst defaultInitialCapacity = 150;\nconst defaultMinLoadFactor = 1 / 6;\nconst defaultMaxLoadFactor = 2 / 3;\n\nclass HashTable {\n    constructor(options = {}) {\n        if (options instanceof HashTable) {\n            this.table = options.table.slice();\n            this.values = options.values.slice();\n            this.state = options.state.slice();\n            this.minLoadFactor = options.minLoadFactor;\n            this.maxLoadFactor = options.maxLoadFactor;\n            this.distinct = options.distinct;\n            this.freeEntries = options.freeEntries;\n            this.lowWaterMark = options.lowWaterMark;\n            this.highWaterMark = options.maxLoadFactor;\n            return;\n        }\n\n        const initialCapacity = options.initialCapacity === undefined ? defaultInitialCapacity : options.initialCapacity;\n        if (initialCapacity < 0) {\n            throw new RangeError(`initial capacity must not be less than zero: ${initialCapacity}`);\n        }\n\n        const minLoadFactor = options.minLoadFactor === undefined ? defaultMinLoadFactor : options.minLoadFactor;\n        const maxLoadFactor = options.maxLoadFactor === undefined ? defaultMaxLoadFactor : options.maxLoadFactor;\n        if (minLoadFactor < 0 || minLoadFactor >= 1) {\n            throw new RangeError(`invalid minLoadFactor: ${minLoadFactor}`);\n        }\n        if (maxLoadFactor <= 0 || maxLoadFactor >= 1) {\n            throw new RangeError(`invalid maxLoadFactor: ${maxLoadFactor}`);\n        }\n        if (minLoadFactor >= maxLoadFactor) {\n            throw new RangeError(`minLoadFactor (${minLoadFactor}) must be smaller than maxLoadFactor (${maxLoadFactor})`);\n        }\n\n        let capacity = initialCapacity;\n        // User wants to put at least capacity elements. We need to choose the size based on the maxLoadFactor to\n        // avoid the need to rehash before this capacity is reached.\n        // actualCapacity * maxLoadFactor >= capacity\n        capacity = (capacity / maxLoadFactor) | 0;\n        capacity = nextPrime(capacity);\n        if (capacity === 0) capacity = 1;\n\n        this.table = newArray(capacity, 0);\n        this.values = newArray(capacity, 0);\n        this.state = newArray(capacity, 0);\n\n        this.minLoadFactor = minLoadFactor;\n        if (capacity === largestPrime) {\n            this.maxLoadFactor = 1;\n        } else {\n            this.maxLoadFactor = maxLoadFactor;\n        }\n\n        this.distinct = 0;\n        this.freeEntries = capacity;\n\n        this.lowWaterMark = 0;\n        this.highWaterMark = chooseHighWaterMark(capacity, this.maxLoadFactor);\n    }\n\n    clone() {\n        return new HashTable(this);\n    }\n\n    get size() {\n        return this.distinct;\n    }\n\n    get(key) {\n        const i = this.indexOfKey(key);\n        if (i < 0) return 0;\n        return this.values[i];\n    }\n\n    set(key, value) {\n        let i = this.indexOfInsertion(key);\n        if (i < 0) {\n            i = -i - 1;\n            this.values[i] = value;\n            return false;\n        }\n\n        if (this.distinct > this.highWaterMark) {\n            const newCapacity = chooseGrowCapacity(this.distinct + 1, this.minLoadFactor, this.maxLoadFactor);\n            this.rehash(newCapacity);\n            return this.set(key, value);\n        }\n\n        this.table[i] = key;\n        this.values[i] = value;\n        if (this.state[i] === FREE) this.freeEntries--;\n        this.state[i] = FULL;\n        this.distinct++;\n\n        if (this.freeEntries < 1) {\n            const newCapacity = chooseGrowCapacity(this.distinct + 1, this.minLoadFactor, this.maxLoadFactor);\n            this.rehash(newCapacity);\n        }\n\n        return true;\n    }\n    \n    remove(key, noRehash) {\n        const i = this.indexOfKey(key);\n        if (i < 0) return false;\n\n        this.state[i] = REMOVED;\n        this.distinct--;\n\n        if (!noRehash) this.maybeShrinkCapacity();\n\n        return true;\n    }\n\n    delete(key, noRehash) {\n        const i = this.indexOfKey(key);\n        if (i < 0) return false;\n\n        this.state[i] = FREE;\n        this.distinct--;\n\n        if (!noRehash) this.maybeShrinkCapacity();\n\n        return true;\n    }\n\n    maybeShrinkCapacity() {\n        if (this.distinct < this.lowWaterMark) {\n            const newCapacity = chooseShrinkCapacity(this.distinct, this.minLoadFactor, this.maxLoadFactor);\n            this.rehash(newCapacity);\n        }\n    }\n\n    containsKey(key) {\n        return this.indexOfKey(key) >= 0;\n    }\n\n    indexOfKey(key) {\n        const table = this.table;\n        const state = this.state;\n        const length = this.table.length;\n\n        const hash = key & 0x7fffffff;\n        let i = hash % length;\n        let decrement = hash % (length - 2);\n        if (decrement === 0) decrement = 1;\n\n        while (state[i] !== FREE && (state[i] === REMOVED || table[i] !== key)) {\n            i -= decrement;\n            if (i < 0) i += length;\n        }\n\n        if (state[i] === FREE) return -1;\n        return i;\n    }\n\n    containsValue(value) {\n        return this.indexOfValue(value) >= 0;\n    }\n\n    indexOfValue(value) {\n        const values = this.values;\n        const state = this.state;\n\n        for (var i = 0; i < state.length; i++) {\n            if (state[i] === FULL && values[i] === value) {\n                return i;\n            }\n        }\n\n        return -1;\n    }\n\n    indexOfInsertion(key) {\n        const table = this.table;\n        const state = this.state;\n        const length = table.length;\n\n\n        const hash = key & 0x7fffffff;\n        let i = hash % length;\n        let decrement = hash % (length - 2);\n        if (decrement === 0) decrement = 1;\n\n        while (state[i] === FULL && table[i] !== key) {\n            i -= decrement;\n            if (i < 0) i += length;\n        }\n\n        if (state[i] === REMOVED) {\n            const j = i;\n            while (state[i] !== FREE && (state[i] === REMOVED || table[i] !== key)) {\n                i -= decrement;\n                if (i < 0) i += length;\n            }\n            if (state[i] === FREE) i = j;\n        }\n\n        if (state[i] === FULL) {\n            return -i - 1;\n        }\n\n        return i;\n    }\n\n    ensureCapacity(minCapacity) {\n        if (this.table.length < minCapacity) {\n            const newCapacity = nextPrime(minCapacity);\n            this.rehash(newCapacity);\n        }\n    }\n\n    rehash(newCapacity) {\n        const oldCapacity = this.table.length;\n\n        if (newCapacity <= this.distinct) throw new Error('Unexpected');\n\n        const oldTable = this.table;\n        const oldValues = this.values;\n        const oldState = this.state;\n\n        const newTable = newArray(newCapacity, 0);\n        const newValues = newArray(newCapacity, 0);\n        const newState = newArray(newCapacity, 0);\n\n        this.lowWaterMark = chooseLowWaterMark(newCapacity, this.minLoadFactor);\n        this.highWaterMark = chooseHighWaterMark(newCapacity, this.maxLoadFactor);\n\n        this.table = newTable;\n        this.values = newValues;\n        this.state = newState;\n        this.freeEntries = newCapacity - this.distinct;\n\n        for (var i = 0; i < oldCapacity; i++) {\n            if (oldState[i] === FULL) {\n                var element = oldTable[i];\n                var index = this.indexOfInsertion(element);\n                newTable[index] = element;\n                newValues[index] = oldValues[i];\n                newState[index] = FULL;\n            }\n        }\n    }\n\n    forEachKey(callback) {\n        for (var i = 0; i < this.state.length; i++) {\n            if (this.state[i] === FULL) {\n                if (!callback(this.table[i])) return false;\n            }\n        }\n        return true;\n    }\n\n    forEachValue(callback) {\n        for (var i = 0; i < this.state.length; i++) {\n            if (this.state[i] === FULL) {\n                if (!callback(this.values[i])) return false;\n            }\n        }\n        return true;\n    }\n\n    forEachPair(callback) {\n        for (var i = 0; i < this.state.length; i++) {\n            if (this.state[i] === FULL) {\n                if (!callback(this.table[i], this.values[i])) return false;\n            }\n        }\n        return true;\n    }\n}\n\nmodule.exports = HashTable;\n\nfunction chooseLowWaterMark(capacity, minLoad) {\n    return (capacity * minLoad) | 0;\n}\n\nfunction chooseHighWaterMark(capacity, maxLoad) {\n    return Math.min(capacity - 2, (capacity * maxLoad) | 0);\n}\n\nfunction chooseGrowCapacity(size, minLoad, maxLoad) {\n    return nextPrime(Math.max(size + 1, (4 * size / (3 * minLoad + maxLoad)) | 0));\n}\n\nfunction chooseShrinkCapacity(size, minLoad, maxLoad) {\n    return nextPrime(Math.max(size + 1, (4 * size / (minLoad + 3 * maxLoad)) | 0));\n}\n","'use strict';\n\nconst Heap = require('heap');\n\nfunction Cluster() {\n    this.children = [];\n    this.distance = -1;\n    this.index = [];\n}\n\n/**\n * Creates an array of values where maximum distance smaller than the threshold\n * @param {number} threshold\n * @return {Array <Cluster>}\n */\nCluster.prototype.cut = function (threshold) {\n    if (threshold < 0) throw new RangeError('Threshold too small');\n    var root = new Cluster();\n    root.children = this.children;\n    root.distance = this.distance;\n    root.index = this.index;\n    var list = [root];\n    var ans = [];\n    while (list.length > 0) {\n        var aux = list.shift();\n        if (threshold >= aux.distance) {\n            ans.push(aux);\n        } else {\n            list = list.concat(aux.children);\n        }\n    }\n    return ans;\n};\n\n/**\n * Merge the leaves in the minimum way to have 'minGroups' number of clusters\n * @param {number} minGroups - Them minimum number of children the first level of the tree should have\n * @return {Cluster}\n */\nCluster.prototype.group = function (minGroups) {\n    if (!Number.isInteger(minGroups) || minGroups < 1) throw new RangeError('Number of groups must be a positive integer');\n\n    const heap = new Heap(function (a, b) {\n        return b.distance - a.distance;\n    });\n\n    heap.push(this);\n\n    while (heap.size() < minGroups) {\n        var first = heap.pop();\n        if (first.children.length === 0) {\n            break;\n        }\n        first.children.forEach(child => heap.push(child));\n    }\n\n    var root = new Cluster();\n    root.children = heap.toArray();\n    root.distance = this.distance;\n\n    return root;\n};\n\n/**\n * Traverses the tree depth-first and provide callback to be called on each individual node\n * @param {function} cb - The callback to be called on each node encounter\n * @type {Cluster}\n */\nCluster.prototype.traverse = function (cb) {\n    function visit(root, callback) {\n        callback(root);\n        if (root.children) {\n            for (var i = root.children.length - 1; i >= 0; i--) {\n                visit(root.children[i], callback);\n            }\n        }\n    }\n    visit(this, cb);\n};\n\nmodule.exports = Cluster;\n","'use strict';\n\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar toStr = Object.prototype.toString;\nvar defineProperty = Object.defineProperty;\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nvar isArray = function isArray(arr) {\n\tif (typeof Array.isArray === 'function') {\n\t\treturn Array.isArray(arr);\n\t}\n\n\treturn toStr.call(arr) === '[object Array]';\n};\n\nvar isPlainObject = function isPlainObject(obj) {\n\tif (!obj || toStr.call(obj) !== '[object Object]') {\n\t\treturn false;\n\t}\n\n\tvar hasOwnConstructor = hasOwn.call(obj, 'constructor');\n\tvar hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t// Not own constructor property must be Object\n\tif (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tvar key;\n\tfor (key in obj) { /**/ }\n\n\treturn typeof key === 'undefined' || hasOwn.call(obj, key);\n};\n\n// If name is '__proto__', and Object.defineProperty is available, define __proto__ as an own property on target\nvar setProperty = function setProperty(target, options) {\n\tif (defineProperty && options.name === '__proto__') {\n\t\tdefineProperty(target, options.name, {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\t\t\tvalue: options.newValue,\n\t\t\twritable: true\n\t\t});\n\t} else {\n\t\ttarget[options.name] = options.newValue;\n\t}\n};\n\n// Return undefined instead of __proto__ if '__proto__' is not an own property\nvar getProperty = function getProperty(obj, name) {\n\tif (name === '__proto__') {\n\t\tif (!hasOwn.call(obj, name)) {\n\t\t\treturn void 0;\n\t\t} else if (gOPD) {\n\t\t\t// In early versions of node, obj['__proto__'] is buggy when obj has\n\t\t\t// __proto__ as an own property. Object.getOwnPropertyDescriptor() works.\n\t\t\treturn gOPD(obj, name).value;\n\t\t}\n\t}\n\n\treturn obj[name];\n};\n\nmodule.exports = function extend() {\n\tvar options, name, src, copy, copyIsArray, clone;\n\tvar target = arguments[0];\n\tvar i = 1;\n\tvar length = arguments.length;\n\tvar deep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === 'boolean') {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t}\n\tif (target == null || (typeof target !== 'object' && typeof target !== 'function')) {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; ++i) {\n\t\toptions = arguments[i];\n\t\t// Only deal with non-null/undefined values\n\t\tif (options != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = getProperty(target, name);\n\t\t\t\tcopy = getProperty(options, name);\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target !== copy) {\n\t\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\n\t\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\t\tclone = src && isArray(src) ? src : [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: extend(deep, clone, copy) });\n\n\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t\t} else if (typeof copy !== 'undefined') {\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: copy });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n","import isArray from 'is-any-array';\n\n/**\n * Computes the minimum of the given values\n * @param {Array<number>} input\n * @return {number}\n */\n\nfunction min(input) {\n  if (!isArray(input)) {\n    throw new TypeError('input must be an array');\n  }\n\n  if (input.length === 0) {\n    throw new TypeError('input must not be empty');\n  }\n\n  var min = input[0];\n\n  for (var i = 1; i < input.length; i++) {\n    if (input[i] < min) min = input[i];\n  }\n\n  return min;\n}\n\nexport default min;\n","import quickSelectMedian from 'median-quickselect';\nimport isArray from 'is-any-array';\n\n/**\n * Computes the median of the given values\n * @param {Array<number>} input\n * @return {number}\n */\n\nfunction median(input) {\n  if (!isArray(input)) {\n    throw new TypeError('input must be an array');\n  }\n\n  if (input.length === 0) {\n    throw new TypeError('input must not be empty');\n  }\n\n  return quickSelectMedian(input.slice());\n}\n\nexport default median;\n","const LOOP = 8;\nconst FLOAT_MUL = 1 / 16777216;\nconst sh1 = 15;\nconst sh2 = 18;\nconst sh3 = 11;\nfunction multiply_uint32(n, m) {\n    n >>>= 0;\n    m >>>= 0;\n    const nlo = n & 0xffff;\n    const nhi = n - nlo;\n    return (((nhi * m) >>> 0) + nlo * m) >>> 0;\n}\nexport default class XSadd {\n    constructor(seed = Date.now()) {\n        this.state = new Uint32Array(4);\n        this.init(seed);\n        this.random = this.getFloat.bind(this);\n    }\n    /**\n     * Returns a 32-bit integer r (0 <= r < 2^32)\n     */\n    getUint32() {\n        this.nextState();\n        return (this.state[3] + this.state[2]) >>> 0;\n    }\n    /**\n     * Returns a floating point number r (0.0 <= r < 1.0)\n     */\n    getFloat() {\n        return (this.getUint32() >>> 8) * FLOAT_MUL;\n    }\n    init(seed) {\n        if (!Number.isInteger(seed)) {\n            throw new TypeError('seed must be an integer');\n        }\n        this.state[0] = seed;\n        this.state[1] = 0;\n        this.state[2] = 0;\n        this.state[3] = 0;\n        for (let i = 1; i < LOOP; i++) {\n            this.state[i & 3] ^=\n                (i +\n                    multiply_uint32(1812433253, this.state[(i - 1) & 3] ^ ((this.state[(i - 1) & 3] >>> 30) >>> 0))) >>>\n                    0;\n        }\n        this.periodCertification();\n        for (let i = 0; i < LOOP; i++) {\n            this.nextState();\n        }\n    }\n    periodCertification() {\n        if (this.state[0] === 0 &&\n            this.state[1] === 0 &&\n            this.state[2] === 0 &&\n            this.state[3] === 0) {\n            this.state[0] = 88; // X\n            this.state[1] = 83; // S\n            this.state[2] = 65; // A\n            this.state[3] = 68; // D\n        }\n    }\n    nextState() {\n        let t = this.state[0];\n        t ^= t << sh1;\n        t ^= t >>> sh2;\n        t ^= this.state[3] << sh3;\n        this.state[0] = this.state[1];\n        this.state[1] = this.state[2];\n        this.state[2] = this.state[3];\n        this.state[3] = t;\n    }\n}\n","import isArray from 'is-any-array';\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\n/**\n * Fill an array with sequential numbers\n * @param {Array<number>} [input] - optional destination array (if not provided a new array will be created)\n * @param {object} [options={}]\n * @param {number} [options.from=0] - first value in the array\n * @param {number} [options.to=10] - last value in the array\n * @param {number} [options.size=input.length] - size of the array (if not provided calculated from step)\n * @param {number} [options.step] - if not provided calculated from size\n * @return {Array<number>}\n */\n\nfunction sequentialFill() {\n  var input = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (_typeof(input) === 'object' && !isArray(input)) {\n    options = input;\n    input = [];\n  }\n\n  if (!isArray(input)) {\n    throw new TypeError('input must be an array');\n  }\n\n  var _options = options,\n      _options$from = _options.from,\n      from = _options$from === void 0 ? 0 : _options$from,\n      _options$to = _options.to,\n      to = _options$to === void 0 ? 10 : _options$to,\n      _options$size = _options.size,\n      size = _options$size === void 0 ? input.length : _options$size,\n      step = _options.step;\n\n  if (size && step) {\n    throw new Error('step is defined by the array size');\n  }\n\n  if (!size) {\n    if (step) {\n      size = Math.floor((to - from) / step) + 1;\n    } else {\n      size = to - from + 1;\n    }\n  }\n\n  if (!step && size) {\n    step = (to - from) / (size - 1);\n  }\n\n  if (Array.isArray(input)) {\n    input.length = 0; // only works with normal array\n\n    for (var i = 0; i < size; i++) {\n      input.push(from);\n      from += step;\n    }\n  } else {\n    if (input.length !== size) {\n      throw new Error('sequentialFill typed array must have the correct length');\n    }\n\n    for (var _i = 0; _i < size; _i++) {\n      input[_i] = from;\n      from += step;\n    }\n  }\n\n  return input;\n}\n\nexport default sequentialFill;\n","import arrayMean from 'ml-array-mean';\nimport isArray from 'is-any-array';\n\n/**\n * Computes the variance of the given values\n * @param {Array} values\n * @param {object} [options]\n * @param {boolean} [options.unbiased = true] - if true, divide by (n-1); if false, divide by n.\n * @param {number} [options.mean = arrayMean] - precalculated mean, if any.\n * @return {number}\n */\n\nfunction variance(values) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!isArray(values)) {\n    throw new TypeError('input must be an array');\n  }\n\n  var _options$unbiased = options.unbiased,\n      unbiased = _options$unbiased === void 0 ? true : _options$unbiased,\n      _options$mean = options.mean,\n      mean = _options$mean === void 0 ? arrayMean(values) : _options$mean;\n  var sqrError = 0;\n\n  for (var i = 0; i < values.length; i++) {\n    var x = values[i] - mean;\n    sqrError += x * x;\n  }\n\n  if (unbiased) {\n    return sqrError / (values.length - 1);\n  } else {\n    return sqrError / values.length;\n  }\n}\n\nexport default variance;\n","'use strict';\n\nfunction compareNumbers(a, b) {\n    return a - b;\n}\n\n/**\n * Computes the sum of the given values\n * @param {Array} values\n * @returns {number}\n */\nexports.sum = function sum(values) {\n    var sum = 0;\n    for (var i = 0; i < values.length; i++) {\n        sum += values[i];\n    }\n    return sum;\n};\n\n/**\n * Computes the maximum of the given values\n * @param {Array} values\n * @returns {number}\n */\nexports.max = function max(values) {\n    var max = values[0];\n    var l = values.length;\n    for (var i = 1; i < l; i++) {\n        if (values[i] > max) max = values[i];\n    }\n    return max;\n};\n\n/**\n * Computes the minimum of the given values\n * @param {Array} values\n * @returns {number}\n */\nexports.min = function min(values) {\n    var min = values[0];\n    var l = values.length;\n    for (var i = 1; i < l; i++) {\n        if (values[i] < min) min = values[i];\n    }\n    return min;\n};\n\n/**\n * Computes the min and max of the given values\n * @param {Array} values\n * @returns {{min: number, max: number}}\n */\nexports.minMax = function minMax(values) {\n    var min = values[0];\n    var max = values[0];\n    var l = values.length;\n    for (var i = 1; i < l; i++) {\n        if (values[i] < min) min = values[i];\n        if (values[i] > max) max = values[i];\n    }\n    return {\n        min: min,\n        max: max\n    };\n};\n\n/**\n * Computes the arithmetic mean of the given values\n * @param {Array} values\n * @returns {number}\n */\nexports.arithmeticMean = function arithmeticMean(values) {\n    var sum = 0;\n    var l = values.length;\n    for (var i = 0; i < l; i++) {\n        sum += values[i];\n    }\n    return sum / l;\n};\n\n/**\n * {@link arithmeticMean}\n */\nexports.mean = exports.arithmeticMean;\n\n/**\n * Computes the geometric mean of the given values\n * @param {Array} values\n * @returns {number}\n */\nexports.geometricMean = function geometricMean(values) {\n    var mul = 1;\n    var l = values.length;\n    for (var i = 0; i < l; i++) {\n        mul *= values[i];\n    }\n    return Math.pow(mul, 1 / l);\n};\n\n/**\n * Computes the mean of the log of the given values\n * If the return value is exponentiated, it gives the same result as the\n * geometric mean.\n * @param {Array} values\n * @returns {number}\n */\nexports.logMean = function logMean(values) {\n    var lnsum = 0;\n    var l = values.length;\n    for (var i = 0; i < l; i++) {\n        lnsum += Math.log(values[i]);\n    }\n    return lnsum / l;\n};\n\n/**\n * Computes the weighted grand mean for a list of means and sample sizes\n * @param {Array} means - Mean values for each set of samples\n * @param {Array} samples - Number of original values for each set of samples\n * @returns {number}\n */\nexports.grandMean = function grandMean(means, samples) {\n    var sum = 0;\n    var n = 0;\n    var l = means.length;\n    for (var i = 0; i < l; i++) {\n        sum += samples[i] * means[i];\n        n += samples[i];\n    }\n    return sum / n;\n};\n\n/**\n * Computes the truncated mean of the given values using a given percentage\n * @param {Array} values\n * @param {number} percent - The percentage of values to keep (range: [0,1])\n * @param {boolean} [alreadySorted=false]\n * @returns {number}\n */\nexports.truncatedMean = function truncatedMean(values, percent, alreadySorted) {\n    if (alreadySorted === undefined) alreadySorted = false;\n    if (!alreadySorted) {\n        values = [].concat(values).sort(compareNumbers);\n    }\n    var l = values.length;\n    var k = Math.floor(l * percent);\n    var sum = 0;\n    for (var i = k; i < (l - k); i++) {\n        sum += values[i];\n    }\n    return sum / (l - 2 * k);\n};\n\n/**\n * Computes the harmonic mean of the given values\n * @param {Array} values\n * @returns {number}\n */\nexports.harmonicMean = function harmonicMean(values) {\n    var sum = 0;\n    var l = values.length;\n    for (var i = 0; i < l; i++) {\n        if (values[i] === 0) {\n            throw new RangeError('value at index ' + i + 'is zero');\n        }\n        sum += 1 / values[i];\n    }\n    return l / sum;\n};\n\n/**\n * Computes the contraharmonic mean of the given values\n * @param {Array} values\n * @returns {number}\n */\nexports.contraHarmonicMean = function contraHarmonicMean(values) {\n    var r1 = 0;\n    var r2 = 0;\n    var l = values.length;\n    for (var i = 0; i < l; i++) {\n        r1 += values[i] * values[i];\n        r2 += values[i];\n    }\n    if (r2 < 0) {\n        throw new RangeError('sum of values is negative');\n    }\n    return r1 / r2;\n};\n\n/**\n * Computes the median of the given values\n * @param {Array} values\n * @param {boolean} [alreadySorted=false]\n * @returns {number}\n */\nexports.median = function median(values, alreadySorted) {\n    if (alreadySorted === undefined) alreadySorted = false;\n    if (!alreadySorted) {\n        values = [].concat(values).sort(compareNumbers);\n    }\n    var l = values.length;\n    var half = Math.floor(l / 2);\n    if (l % 2 === 0) {\n        return (values[half - 1] + values[half]) * 0.5;\n    } else {\n        return values[half];\n    }\n};\n\n/**\n * Computes the variance of the given values\n * @param {Array} values\n * @param {boolean} [unbiased=true] - if true, divide by (n-1); if false, divide by n.\n * @returns {number}\n */\nexports.variance = function variance(values, unbiased) {\n    if (unbiased === undefined) unbiased = true;\n    var theMean = exports.mean(values);\n    var theVariance = 0;\n    var l = values.length;\n\n    for (var i = 0; i < l; i++) {\n        var x = values[i] - theMean;\n        theVariance += x * x;\n    }\n\n    if (unbiased) {\n        return theVariance / (l - 1);\n    } else {\n        return theVariance / l;\n    }\n};\n\n/**\n * Computes the standard deviation of the given values\n * @param {Array} values\n * @param {boolean} [unbiased=true] - if true, divide by (n-1); if false, divide by n.\n * @returns {number}\n */\nexports.standardDeviation = function standardDeviation(values, unbiased) {\n    return Math.sqrt(exports.variance(values, unbiased));\n};\n\nexports.standardError = function standardError(values) {\n    return exports.standardDeviation(values) / Math.sqrt(values.length);\n};\n\n/**\n * IEEE Transactions on biomedical engineering, vol. 52, no. 1, january 2005, p. 76-\n * Calculate the standard deviation via the Median of the absolute deviation\n *  The formula for the standard deviation only holds for Gaussian random variables.\n * @returns {{mean: number, stdev: number}}\n */\nexports.robustMeanAndStdev = function robustMeanAndStdev(y) {\n    var mean = 0, stdev = 0;\n    var length = y.length, i = 0;\n    for (i = 0; i < length; i++) {\n        mean += y[i];\n    }\n    mean /= length;\n    var averageDeviations = new Array(length);\n    for (i = 0; i < length; i++)\n        averageDeviations[i] = Math.abs(y[i] - mean);\n    averageDeviations.sort(compareNumbers);\n    if (length % 2 === 1) {\n        stdev = averageDeviations[(length - 1) / 2] / 0.6745;\n    } else {\n        stdev = 0.5 * (averageDeviations[length / 2] + averageDeviations[length / 2 - 1]) / 0.6745;\n    }\n\n    return {\n        mean: mean,\n        stdev: stdev\n    };\n};\n\nexports.quartiles = function quartiles(values, alreadySorted) {\n    if (typeof (alreadySorted) === 'undefined') alreadySorted = false;\n    if (!alreadySorted) {\n        values = [].concat(values).sort(compareNumbers);\n    }\n\n    var quart = values.length / 4;\n    var q1 = values[Math.ceil(quart) - 1];\n    var q2 = exports.median(values, true);\n    var q3 = values[Math.ceil(quart * 3) - 1];\n\n    return {q1: q1, q2: q2, q3: q3};\n};\n\nexports.pooledStandardDeviation = function pooledStandardDeviation(samples, unbiased) {\n    return Math.sqrt(exports.pooledVariance(samples, unbiased));\n};\n\nexports.pooledVariance = function pooledVariance(samples, unbiased) {\n    if (typeof (unbiased) === 'undefined') unbiased = true;\n    var sum = 0;\n    var length = 0, l = samples.length;\n    for (var i = 0; i < l; i++) {\n        var values = samples[i];\n        var vari = exports.variance(values);\n\n        sum += (values.length - 1) * vari;\n\n        if (unbiased)\n            length += values.length - 1;\n        else\n            length += values.length;\n    }\n    return sum / length;\n};\n\nexports.mode = function mode(values) {\n    var l = values.length,\n        itemCount = new Array(l),\n        i;\n    for (i = 0; i < l; i++) {\n        itemCount[i] = 0;\n    }\n    var itemArray = new Array(l);\n    var count = 0;\n\n    for (i = 0; i < l; i++) {\n        var index = itemArray.indexOf(values[i]);\n        if (index >= 0)\n            itemCount[index]++;\n        else {\n            itemArray[count] = values[i];\n            itemCount[count] = 1;\n            count++;\n        }\n    }\n\n    var maxValue = 0, maxIndex = 0;\n    for (i = 0; i < count; i++) {\n        if (itemCount[i] > maxValue) {\n            maxValue = itemCount[i];\n            maxIndex = i;\n        }\n    }\n\n    return itemArray[maxIndex];\n};\n\nexports.covariance = function covariance(vector1, vector2, unbiased) {\n    if (typeof (unbiased) === 'undefined') unbiased = true;\n    var mean1 = exports.mean(vector1);\n    var mean2 = exports.mean(vector2);\n\n    if (vector1.length !== vector2.length)\n        throw 'Vectors do not have the same dimensions';\n\n    var cov = 0, l = vector1.length;\n    for (var i = 0; i < l; i++) {\n        var x = vector1[i] - mean1;\n        var y = vector2[i] - mean2;\n        cov += x * y;\n    }\n\n    if (unbiased)\n        return cov / (l - 1);\n    else\n        return cov / l;\n};\n\nexports.skewness = function skewness(values, unbiased) {\n    if (typeof (unbiased) === 'undefined') unbiased = true;\n    var theMean = exports.mean(values);\n\n    var s2 = 0, s3 = 0, l = values.length;\n    for (var i = 0; i < l; i++) {\n        var dev = values[i] - theMean;\n        s2 += dev * dev;\n        s3 += dev * dev * dev;\n    }\n    var m2 = s2 / l;\n    var m3 = s3 / l;\n\n    var g = m3 / (Math.pow(m2, 3 / 2.0));\n    if (unbiased) {\n        var a = Math.sqrt(l * (l - 1));\n        var b = l - 2;\n        return (a / b) * g;\n    } else {\n        return g;\n    }\n};\n\nexports.kurtosis = function kurtosis(values, unbiased) {\n    if (typeof (unbiased) === 'undefined') unbiased = true;\n    var theMean = exports.mean(values);\n    var n = values.length, s2 = 0, s4 = 0;\n\n    for (var i = 0; i < n; i++) {\n        var dev = values[i] - theMean;\n        s2 += dev * dev;\n        s4 += dev * dev * dev * dev;\n    }\n    var m2 = s2 / n;\n    var m4 = s4 / n;\n\n    if (unbiased) {\n        var v = s2 / (n - 1);\n        var a = (n * (n + 1)) / ((n - 1) * (n - 2) * (n - 3));\n        var b = s4 / (v * v);\n        var c = ((n - 1) * (n - 1)) / ((n - 2) * (n - 3));\n\n        return a * b - 3 * c;\n    } else {\n        return m4 / (m2 * m2) - 3;\n    }\n};\n\nexports.entropy = function entropy(values, eps) {\n    if (typeof (eps) === 'undefined') eps = 0;\n    var sum = 0, l = values.length;\n    for (var i = 0; i < l; i++)\n        sum += values[i] * Math.log(values[i] + eps);\n    return -sum;\n};\n\nexports.weightedMean = function weightedMean(values, weights) {\n    var sum = 0, l = values.length;\n    for (var i = 0; i < l; i++)\n        sum += values[i] * weights[i];\n    return sum;\n};\n\nexports.weightedStandardDeviation = function weightedStandardDeviation(values, weights) {\n    return Math.sqrt(exports.weightedVariance(values, weights));\n};\n\nexports.weightedVariance = function weightedVariance(values, weights) {\n    var theMean = exports.weightedMean(values, weights);\n    var vari = 0, l = values.length;\n    var a = 0, b = 0;\n\n    for (var i = 0; i < l; i++) {\n        var z = values[i] - theMean;\n        var w = weights[i];\n\n        vari += w * (z * z);\n        b += w;\n        a += w * w;\n    }\n\n    return vari * (b / (b * b - a));\n};\n\nexports.center = function center(values, inPlace) {\n    if (typeof (inPlace) === 'undefined') inPlace = false;\n\n    var result = values;\n    if (!inPlace)\n        result = [].concat(values);\n\n    var theMean = exports.mean(result), l = result.length;\n    for (var i = 0; i < l; i++)\n        result[i] -= theMean;\n};\n\nexports.standardize = function standardize(values, standardDev, inPlace) {\n    if (typeof (standardDev) === 'undefined') standardDev = exports.standardDeviation(values);\n    if (typeof (inPlace) === 'undefined') inPlace = false;\n    var l = values.length;\n    var result = inPlace ? values : new Array(l);\n    for (var i = 0; i < l; i++)\n        result[i] = values[i] / standardDev;\n    return result;\n};\n\nexports.cumulativeSum = function cumulativeSum(array) {\n    var l = array.length;\n    var result = new Array(l);\n    result[0] = array[0];\n    for (var i = 1; i < l; i++)\n        result[i] = result[i - 1] + array[i];\n    return result;\n};\n","'use strict';\n\nconst Cluster = require('./Cluster');\nconst util = require('util');\n\nfunction ClusterLeaf(index) {\n    Cluster.call(this);\n    this.index = index;\n    this.distance = 0;\n    this.children = [];\n}\n\nutil.inherits(ClusterLeaf, Cluster);\n\nmodule.exports = ClusterLeaf;\n","'use strict';\n\n\n/**\n * Computes a distance/similarity matrix given an array of data and a distance/similarity function.\n * @param {Array} data An array of data\n * @param {function} distanceFn  A function that accepts two arguments and computes a distance/similarity between them\n * @return {Array<Array>} The similarity matrix. The similarity matrix is square and has a size equal to the length of\n * the data array\n */\nfunction distanceMatrix(data, distanceFn) {\n    const length = data.length;\n    let result = Array.from({length}).map(() => Array.from({length}));\n\n    // Compute upper distance matrix\n    for (let i = 0; i < length; i++) {\n        for (let j = 0; j <= i; j++) {\n            result[i][j] = distanceFn(data[i], data[j]);\n        }\n    }\n\n    // Copy to lower distance matrix\n    for (let i = 0; i < length; i++) {\n        for (let j = i + 1; j < length; j++) {\n            result[i][j] = result[j][i];\n        }\n    }\n\n    return result;\n}\n\nmodule.exports = distanceMatrix;\n","/**\n *  Constructs a confusion matrix\n * @class ConfusionMatrix\n * @example\n * const CM = new ConfusionMatrix([[13, 2], [10, 5]], ['cat', 'dog'])\n * @param {Array<Array<number>>} matrix - The confusion matrix, a 2D Array. Rows represent the actual label and columns\n *     the predicted label.\n * @param {Array<any>} labels - Labels of the confusion matrix, a 1D Array\n */\nclass ConfusionMatrix {\n    constructor(matrix, labels) {\n        if (matrix.length !== matrix[0].length) {\n            throw new Error('Confusion matrix must be square');\n        }\n        if (labels.length !== matrix.length) {\n            throw new Error('Confusion matrix and labels should have the same length');\n        }\n        this.labels = labels;\n        this.matrix = matrix;\n    }\n\n\n    /**\n     * Construct confusion matrix from the predicted and actual labels (classes). Be sure to provide the arguments in\n     * the correct order!\n     * @param {Array<any>} actual  - The predicted labels of the classification\n     * @param {Array<any>} predicted     - The actual labels of the classification. Has to be of same length as\n     *     predicted.\n     * @param {object} [options] - Additional options\n     * @param {Array<any>} [options.labels] - The list of labels that should be used. If not provided the distinct set\n     *     of labels present in predicted and actual is used. Labels are compared using the strict equality operator\n     *     '==='\n     * @return {ConfusionMatrix} - Confusion matrix\n     */\n    static fromLabels(actual, predicted, options = {}) {\n        if (predicted.length !== actual.length) {\n            throw new Error('predicted and actual must have the same length');\n        }\n        let distinctLabels;\n        if (options.labels) {\n            distinctLabels = new Set(options.labels);\n        } else {\n            distinctLabels = new Set([...actual, ...predicted]);\n        }\n        distinctLabels = Array.from(distinctLabels);\n        if (options.sort) {\n            distinctLabels.sort(options.sort);\n        }\n\n        // Create confusion matrix and fill with 0's\n        const matrix = Array.from({length: distinctLabels.length});\n        for (let i = 0; i < matrix.length; i++) {\n            matrix[i] = new Array(matrix.length);\n            matrix[i].fill(0);\n        }\n\n        for (let i = 0; i < predicted.length; i++) {\n            const actualIdx = distinctLabels.indexOf(actual[i]);\n            const predictedIdx = distinctLabels.indexOf(predicted[i]);\n            if (actualIdx >= 0 && predictedIdx >= 0) {\n                matrix[actualIdx][predictedIdx]++;\n            }\n        }\n\n        return new ConfusionMatrix(matrix, distinctLabels);\n    }\n\n    /**\n     * Get the confusion matrix\n     * @return {Array<Array<number> >}\n     */\n    getMatrix() {\n        return this.matrix;\n    }\n\n    getLabels() {\n        return this.labels;\n    }\n\n    /**\n     * Get the total number of samples\n     * @return {number}\n     */\n    getTotalCount() {\n        let predicted = 0;\n        for (var i = 0; i < this.matrix.length; i++) {\n            for (var j = 0; j < this.matrix.length; j++) {\n                predicted += this.matrix[i][j];\n            }\n        }\n        return predicted;\n    }\n\n    /**\n     * Get the total number of true predictions\n     * @return {number}\n     */\n    getTrueCount() {\n        var count = 0;\n        for (var i = 0; i < this.matrix.length; i++) {\n            count += this.matrix[i][i];\n        }\n        return count;\n    }\n\n    /**\n     * Get the total number of false predictions.\n     * @return {number}\n     */\n    getFalseCount() {\n        return this.getTotalCount() - this.getTrueCount();\n    }\n\n    /**\n     * Get the number of true positive predictions.\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getTruePositiveCount(label) {\n        const index = this.getIndex(label);\n        return this.matrix[index][index];\n    }\n\n    /**\n     * Get the number of true negative predictions\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getTrueNegativeCount(label) {\n        const index = this.getIndex(label);\n        var count = 0;\n        for (var i = 0; i < this.matrix.length; i++) {\n            for (var j = 0; j < this.matrix.length; j++) {\n                if (i !== index && j !== index) {\n                    count += this.matrix[i][j];\n                }\n            }\n        }\n        return count;\n    }\n\n    /**\n     * Get the number of false positive predictions.\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getFalsePositiveCount(label) {\n        const index = this.getIndex(label);\n        var count = 0;\n        for (var i = 0; i < this.matrix.length; i++) {\n            if (i !== index) {\n                count += this.matrix[i][index];\n            }\n        }\n        return count;\n    }\n\n    /**\n     * Get the number of false negative predictions.\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getFalseNegativeCount(label) {\n        const index = this.getIndex(label);\n        var count = 0;\n        for (var i = 0; i < this.matrix.length; i++) {\n            if (i !== index) {\n                count += this.matrix[index][i];\n            }\n        }\n        return count;\n    }\n\n    /**\n     * Get the number of real positive samples.\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getPositiveCount(label) {\n        return this.getTruePositiveCount(label) + this.getFalseNegativeCount(label);\n    }\n\n    /**\n     * Get the number of real negative samples.\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getNegativeCount(label) {\n        return this.getTrueNegativeCount(label) + this.getFalsePositiveCount(label);\n    }\n\n    /**\n     * Get the index in the confusion matrix that corresponds to the given label\n     * @param {any} label - The label to search for\n     * @throws if the label is not found\n     * @return {number}\n     */\n    getIndex(label) {\n        const index = this.labels.indexOf(label);\n        if (index === -1) throw new Error('The label does not exist');\n        return index;\n    }\n\n    /**\n     * Get the true positive rate a.k.a. sensitivity. Computes the ratio between the number of true positive predictions and the total number of positive samples.\n     * {@link https://en.wikipedia.org/wiki/Sensitivity_and_specificity}\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number} - The true positive rate [0-1]\n     */\n    getTruePositiveRate(label) {\n        return this.getTruePositiveCount(label) / this.getPositiveCount(label);\n    }\n\n    /**\n     * Get the true negative rate a.k.a. specificity. Computes the ration between the number of true negative predictions and the total number of negative samples.\n     * {@link https://en.wikipedia.org/wiki/Sensitivity_and_specificity}\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getTrueNegativeRate(label) {\n        return this.getTrueNegativeCount(label) / this.getNegativeCount(label);\n    }\n\n    /**\n     * Get the positive predictive value a.k.a. precision. Computes TP / (TP + FP)\n     * {@link https://en.wikipedia.org/wiki/Positive_and_negative_predictive_values}\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getPositivePredictiveValue(label) {\n        const TP = this.getTruePositiveCount(label);\n        return TP / (TP + this.getFalsePositiveCount(label));\n    }\n\n    /**\n     * Negative predictive value\n     * {@link https://en.wikipedia.org/wiki/Positive_and_negative_predictive_values}\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getNegativePredictiveValue(label) {\n        const TN = this.getTrueNegativeCount(label);\n        return TN / (TN + this.getFalseNegativeCount(label));\n    }\n\n    /**\n     * False negative rate a.k.a. miss rate.\n     * {@link https://en.wikipedia.org/wiki/Type_I_and_type_II_errors#False_positive_and_false_negative_rates}\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getFalseNegativeRate(label) {\n        return 1 - this.getTruePositiveRate(label);\n    }\n\n    /**\n     * False positive rate a.k.a. fall-out rate.\n     * {@link https://en.wikipedia.org/wiki/Type_I_and_type_II_errors#False_positive_and_false_negative_rates}\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getFalsePositiveRate(label) {\n        return 1 - this.getTrueNegativeRate(label);\n    }\n\n    /**\n     * False discovery rate (FDR)\n     * {@link https://en.wikipedia.org/wiki/False_discovery_rate}\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getFalseDiscoveryRate(label) {\n        const FP = this.getFalsePositiveCount(label);\n        return FP / (FP + this.getTruePositiveCount(label));\n    }\n\n    /**\n     * False omission rate (FOR)\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getFalseOmissionRate(label) {\n        const FN = this.getFalseNegativeCount(label);\n        return FN / (FN + this.getTruePositiveCount(label));\n    }\n\n    /**\n     * F1 score\n     * {@link https://en.wikipedia.org/wiki/F1_score}\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getF1Score(label) {\n        const TP = this.getTruePositiveCount(label);\n        return 2 * TP / (2 * TP + this.getFalsePositiveCount(label) + this.getFalseNegativeCount(label));\n    }\n\n    /**\n     * Matthews correlation coefficient (MCC)\n     * {@link https://en.wikipedia.org/wiki/Matthews_correlation_coefficient}\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getMatthewsCorrelationCoefficient(label) {\n        const TP = this.getTruePositiveCount(label);\n        const TN = this.getTrueNegativeCount(label);\n        const FP = this.getFalsePositiveCount(label);\n        const FN = this.getFalseNegativeCount(label);\n        return (TP * TN - FP * FN) / Math.sqrt((TP + FP) * (TP + FN) * (TN + FP) * (TN + FN));\n    }\n\n    /**\n     * Informedness\n     * {@link https://en.wikipedia.org/wiki/Youden%27s_J_statistic}\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getInformedness(label) {\n        return this.getTruePositiveRate(label) + this.getTrueNegativeRate(label) - 1;\n    }\n\n    /**\n     * Markedness\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getMarkedness(label) {\n        return this.getPositivePredictiveValue(label) + this.getNegativePredictiveValue(label) - 1;\n    }\n\n    /**\n     * Get the confusion table.\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {Array<Array<number> >} - The 2x2 confusion table. [[TP, FN], [FP, TN]]\n     */\n    getConfusionTable(label) {\n        return [\n            [\n                this.getTruePositiveCount(label),\n                this.getFalseNegativeCount(label)\n            ],\n            [\n                this.getFalsePositiveCount(label),\n                this.getTrueNegativeCount(label)\n            ]\n        ];\n    }\n\n    /**\n     * Get total accuracy.\n     * @return {number} - The ratio between the number of true predictions and total number of classifications ([0-1])\n     */\n    getAccuracy() {\n        let correct = 0;\n        let incorrect = 0;\n        for (var i = 0; i < this.matrix.length; i++) {\n            for (var j = 0; j < this.matrix.length; j++) {\n                if (i === j) correct += this.matrix[i][j];\n                else incorrect += this.matrix[i][j];\n            }\n        }\n        return correct / (correct + incorrect);\n    }\n\n\n    /**\n     * Returns the element in the confusion matrix that corresponds to the given actual and predicted labels.\n     * @param {any} actual - The true label\n     * @param {any} predicted - The predicted label\n     * @return {number} - The element in the confusion matrix\n     */\n    getCount(actual, predicted) {\n        const actualIndex = this.getIndex(actual);\n        const predictedIndex = this.getIndex(predicted);\n        return this.matrix[actualIndex][predictedIndex];\n    }\n\n    /**\n     * Compute the general prediction accuracy\n     * @deprecated Use getAccuracy\n     * @return {number} - The prediction accuracy ([0-1]\n     */\n    get accuracy() {\n        return this.getAccuracy();\n    }\n\n    /**\n     * Compute the number of predicted observations\n     * @deprecated Use getTotalCount\n     * @return {number}\n     */\n    get total() {\n        return this.getTotalCount();\n    }\n}\n\nmodule.exports = ConfusionMatrix;\n","'use strict';\n\nvar Matrix = require('ml-matrix').Matrix;\n\nvar Utils = require('./utils');\nconst ACTIVATION_FUNCTIONS = require('./activationFunctions');\n\nclass Layer {\n    /**\n     * @private\n     * Create a new layer with the given options\n     * @param {object} options\n     * @param {number} [options.inputSize] - Number of conections that enter the neurons.\n     * @param {number} [options.outputSize] - Number of conections that leave the neurons.\n     * @param {number} [options.regularization] - Regularization parameter.\n     * @param {number} [options.epsilon] - Learning rate parameter.\n     * @param {string} [options.activation] - Activation function parameter from the FeedForwardNeuralNetwork class.\n     * @param {number} [options.activationParam] - Activation parameter if needed.\n     */\n    constructor(options) {\n        this.inputSize = options.inputSize;\n        this.outputSize = options.outputSize;\n        this.regularization = options.regularization;\n        this.epsilon = options.epsilon;\n        this.activation = options.activation;\n        this.activationParam = options.activationParam;\n\n        var selectedFunction = ACTIVATION_FUNCTIONS[options.activation];\n        var params = selectedFunction.activation.length;\n\n        var actFunction = params > 1 ? val => selectedFunction.activation(val, options.activationParam) : selectedFunction.activation;\n        var derFunction = params > 1 ? val => selectedFunction.derivate(val, options.activationParam) : selectedFunction.derivate;\n\n        this.activationFunction = function (i, j) {\n            this[i][j] = actFunction(this[i][j]);\n        };\n        this.derivate = function (i, j) {\n            this[i][j] = derFunction(this[i][j]);\n        };\n\n        if (options.model) {\n            // load model\n            this.W = Matrix.checkMatrix(options.W);\n            this.b = Matrix.checkMatrix(options.b);\n\n        } else {\n            // default constructor\n\n            this.W = Matrix.rand(this.inputSize, this.outputSize);\n            this.b = Matrix.zeros(1, this.outputSize);\n\n            this.W.apply(function (i, j) {\n                this[i][j] /= Math.sqrt(options.inputSize);\n            });\n        }\n    }\n\n    /**\n     * @private\n     * propagate the given input through the current layer.\n     * @param {Matrix} X - input.\n     * @return {Matrix} output at the current layer.\n     */\n    forward(X) {\n        var z = X.mmul(this.W).addRowVector(this.b);\n        z.apply(this.activationFunction);\n        this.a = z.clone();\n        return z;\n    }\n\n    /**\n     * @private\n     * apply backpropagation algorithm at the current layer\n     * @param {Matrix} delta - delta values estimated at the following layer.\n     * @param {Matrix} a - 'a' values from the following layer.\n     * @return {Matrix} the new delta values for the next layer.\n     */\n    backpropagation(delta, a) {\n        this.dW = a.transposeView().mmul(delta);\n        this.db = Utils.sumCol(delta);\n\n        var aCopy = a.clone();\n        return delta.mmul(this.W.transposeView()).mul(aCopy.apply(this.derivate));\n    }\n\n    /**\n     * @private\n     * Function that updates the weights at the current layer with the derivatives.\n     */\n    update() {\n        this.dW.add(this.W.clone().mul(this.regularization));\n        this.W.add(this.dW.mul(-this.epsilon));\n        this.b.add(this.db.mul(-this.epsilon));\n    }\n\n    /**\n     * @private\n     * Export the current layer to JSON.\n     * @return {object} model\n     */\n    toJSON() {\n        return {\n            model: 'Layer',\n            inputSize: this.inputSize,\n            outputSize: this.outputSize,\n            regularization: this.regularization,\n            epsilon: this.epsilon,\n            activation: this.activation,\n            W: this.W,\n            b: this.b\n        };\n    }\n\n    /**\n     * @private\n     * Creates a new Layer with the given model.\n     * @param {object} model\n     * @return {Layer}\n     */\n    static load(model) {\n        if (model.model !== 'Layer') {\n            throw new RangeError('the current model is not a Layer model');\n        }\n        return new Layer(model);\n    }\n\n}\n\nmodule.exports = Layer;\n","'use strict';\n\nvar Matrix = require('ml-matrix').Matrix;\n\n/**\n * @private\n * Retrieves the sum at each row of the given matrix.\n * @param {Matrix} matrix\n * @return {Matrix}\n */\nfunction sumRow(matrix) {\n    var sum = Matrix.zeros(matrix.rows, 1);\n    for (var i = 0; i < matrix.rows; ++i) {\n        for (var j = 0; j < matrix.columns; ++j) {\n            sum[i][0] += matrix[i][j];\n        }\n    }\n    return sum;\n}\n\n/**\n * @private\n * Retrieves the sum at each column of the given matrix.\n * @param {Matrix} matrix\n * @return {Matrix}\n */\nfunction sumCol(matrix) {\n    var sum = Matrix.zeros(1, matrix.columns);\n    for (var i = 0; i < matrix.rows; ++i) {\n        for (var j = 0; j < matrix.columns; ++j) {\n            sum[0][j] += matrix[i][j];\n        }\n    }\n    return sum;\n}\n\n/**\n * @private\n * Method that given an array of labels(predictions), returns two dictionaries, one to transform from labels to\n * numbers and other in the reverse way\n * @param {Array} array\n * @return {object}\n */\nfunction dictOutputs(array) {\n    var inputs = {};\n    var outputs = {};\n    var index = 0;\n    for (var i = 0; i < array.length; i += 1) {\n        if (inputs[array[i]] === undefined) {\n            inputs[array[i]] = index;\n            outputs[index] = array[i];\n            index++;\n        }\n    }\n\n    return {\n        inputs: inputs,\n        outputs: outputs\n    };\n}\n\nmodule.exports = {\n    dictOutputs: dictOutputs,\n    sumCol: sumCol,\n    sumRow: sumRow\n};\n","'use strict';\n\nfunction logistic(val) {\n    return 1 / (1 + Math.exp(-val));\n}\n\nfunction expELU(val, param) {\n    return val < 0 ? param * (Math.exp(val) - 1) : val;\n}\n\nfunction softExponential(val, param) {\n    if (param < 0) {\n        return -Math.log(1 - param * (val + param)) / param;\n    }\n    if (param > 0) {\n        return ((Math.exp(param * val) - 1) / param) + param;\n    }\n    return val;\n}\n\nfunction softExponentialPrime(val, param) {\n    if (param < 0) {\n        return 1 / (1 - param * (param + val));\n    } else {\n        return Math.exp(param * val);\n    }\n}\n\nconst ACTIVATION_FUNCTIONS = {\n    tanh: {\n        activation: Math.tanh,\n        derivate: val => 1 - (val * val)\n    },\n    identity: {\n        activation: val => val,\n        derivate: () => 1\n    },\n    logistic: {\n        activation: logistic,\n        derivate: val => logistic(val) * (1 - logistic(val))\n    },\n    arctan: {\n        activation: Math.atan,\n        derivate: val => 1 / (val * val + 1)\n    },\n    softsign: {\n        activation: val => val / (1 + Math.abs(val)),\n        derivate: val => 1 / ((1 + Math.abs(val)) * (1 + Math.abs(val)))\n    },\n    relu: {\n        activation: val => val < 0 ? 0 : val,\n        derivate: val => val < 0 ? 0 : 1\n    },\n    softplus: {\n        activation: val => Math.log(1 + Math.exp(val)),\n        derivate: val => 1 / (1 + Math.exp(-val))\n    },\n    bent: {\n        activation: val => ((Math.sqrt(val * val + 1) - 1) / 2) + val,\n        derivate: val => (val / (2 * Math.sqrt(val * val + 1))) + 1\n    },\n    sinusoid: {\n        activation: Math.sin,\n        derivate: Math.cos\n    },\n    sinc: {\n        activation: val => val === 0 ? 1 : Math.sin(val) / val,\n        derivate: val => val === 0 ? 0 : (Math.cos(val) / val) - (Math.sin(val) / (val * val))\n    },\n    gaussian: {\n        activation: val => Math.exp(-(val * val)),\n        derivate: val => -2 * val * Math.exp(-(val * val))\n    },\n    'parametric-relu': {\n        activation: (val, param) => val < 0 ? param * val : val,\n        derivate: (val, param) => val < 0 ? param : 1\n    },\n    'exponential-elu': {\n        activation: expELU,\n        derivate: (val, param) => val < 0 ? expELU(val, param) + param : 1\n    },\n    'soft-exponential': {\n        activation: softExponential,\n        derivate: softExponentialPrime\n    }\n};\n\nmodule.exports = ACTIVATION_FUNCTIONS;\n","function NodeSquare(x, y, weights, som) {\n    this.x = x;\n    this.y = y;\n    this.weights = weights;\n    this.som = som;\n    this.neighbors = {};\n}\n\nNodeSquare.prototype.adjustWeights = function adjustWeights(target, learningRate, influence) {\n    for (var i = 0, ii = this.weights.length; i < ii; i++) {\n        this.weights[i] += learningRate * influence * (target[i] - this.weights[i]);\n    }\n};\n\nNodeSquare.prototype.getDistance = function getDistance(otherNode) {\n    return Math.max(Math.abs(this.x - otherNode.x), Math.abs(this.y - otherNode.y));\n};\n\nNodeSquare.prototype.getDistanceTorus = function getDistanceTorus(otherNode) {\n    var distX = Math.abs(this.x - otherNode.x),\n        distY = Math.abs(this.y - otherNode.y);\n    return Math.max(Math.min(distX, this.som.gridDim.x - distX), Math.min(distY, this.som.gridDim.y - distY));\n};\n\nNodeSquare.prototype.getNeighbors = function getNeighbors(xy) {\n    if (!this.neighbors[xy]) {\n        this.neighbors[xy] = new Array(2);\n\n        // left or bottom neighbor\n        var v;\n        if (this[xy] > 0) {\n            v = this[xy] - 1;\n        } else if (this.som.torus) {\n            v = this.som.gridDim[xy] - 1\n        }\n        if (typeof v !== 'undefined') {\n            var x, y;\n            if (xy === 'x') {\n                x = v;\n                y = this.y;\n            } else {\n                x = this.x;\n                y = v;\n            }\n            this.neighbors[xy][0] = this.som.nodes[x][y];\n        }\n\n        // top or right neighbor\n        var w;\n        if (this[xy] < (this.som.gridDim[xy] - 1)) {\n            w = this[xy] + 1;\n        } else if (this.som.torus) {\n            w = 0;\n        }\n        if (typeof w !== 'undefined') {\n            if (xy === 'x') {\n                x = w;\n                y = this.y;\n            } else {\n                x = this.x;\n                y = w;\n            }\n            this.neighbors[xy][1] = this.som.nodes[x][y];\n        }\n    }\n    return this.neighbors[xy];\n};\n\nNodeSquare.prototype.getPos = function getPos(xy, element) {\n    var neighbors = this.getNeighbors(xy),\n        distance = this.som.distance,\n        bestNeighbor,\n        direction;\n    if(neighbors[0]) {\n        if (neighbors[1]) {\n            var dist1 = distance(element, neighbors[0].weights),\n                dist2 = distance(element, neighbors[1].weights);\n            if(dist1 < dist2) {\n                bestNeighbor = neighbors[0];\n                direction = -1;\n            } else {\n                bestNeighbor = neighbors[1];\n                direction = 1;\n            }\n        } else {\n            bestNeighbor = neighbors[0];\n            direction = -1;\n        }\n    } else {\n        bestNeighbor = neighbors[1];\n        direction = 1;\n    }\n    var simA = 1 - distance(element, this.weights),\n        simB = 1 - distance(element, bestNeighbor.weights);\n    var factor = ((simA - simB) / (2 - simA - simB));\n    return 0.5 + 0.5 * factor * direction;\n};\n\nNodeSquare.prototype.getPosition = function getPosition(element) {\n    return [\n        this.getPos('x', element),\n        this.getPos('y', element)\n    ];\n};\n\nmodule.exports = NodeSquare;","'use strict';\n\nexports.distance = require('./distances');\nexports.similarity = require('./similarities');","'use strict';\n\nmodule.exports = function czekanowskiSimilarity(a, b) {\n    var up = 0;\n    var down = 0;\n    for (var i = 0; i < a.length; i++) {\n        up += Math.min(a[i], b[i]);\n        down += a[i] + b[i];\n    }\n    return 2 * up / down;\n};\n","module.exports = function dice(a, b) {\n    var ii = a.length,\n        p = 0,\n        q1 = 0,\n        q2 = 0;\n    for (var i = 0; i < ii ; i++) {\n        p += a[i] * a[i];\n        q1 += b[i] * b[i];\n        q2 += (a[i] - b[i]) * (a[i] - b[i]);\n    }\n    return q2 / (p + q1);\n};\n","module.exports = function intersection(a, b) {\n    var ii = a.length,\n        ans = 0;\n    for (var i = 0; i < ii ; i++) {\n        ans += Math.min(a[i], b[i]);\n    }\n    return 1 - ans;\n};\n","module.exports = function jaccard(a, b) {\n    var ii = a.length,\n        p1 = 0,\n        p2 = 0,\n        q1 = 0,\n        q2 = 0;\n    for (var i = 0; i < ii ; i++) {\n        p1 += a[i] * b[i];\n        p2 += a[i] * a[i];\n        q1 += b[i] * b[i];\n        q2 += (a[i] - b[i]) * (a[i] - b[i]);\n    }\n    return q2 / (p2 + q1 - p1);\n};\n","module.exports = function kulczynski(a, b) {\n    var ii = a.length,\n        up = 0,\n        down = 0;\n    for (var i = 0; i < ii ; i++) {\n        up += Math.abs(a[i] - b[i]);\n        down += Math.min(a[i],b[i]);\n    }\n    return up / down;\n};\n","module.exports = function motyka(a, b) {\n    var ii = a.length,\n        up = 0,\n        down = 0;\n    for (var i = 0; i < ii ; i++) {\n        up += Math.min(a[i], b[i]);\n        down += a[i] + b[i];\n    }\n    return 1 - (up / down);\n};\n","module.exports = function squaredChord(a, b) {\n    var ii = a.length,\n        ans = 0;\n    for (var i = 0; i < ii ; i++) {\n        ans += (Math.sqrt(a[i]) - Math.sqrt(b[i])) * (Math.sqrt(a[i]) - Math.sqrt(b[i]));\n    }\n    return ans;\n};\n","module.exports = function tanimoto(a, b, bitvector) {\n    if (bitvector) {\n        var inter = 0,\n            union = 0;\n        for (var j = 0; j < a.length; j++) {\n            inter += a[j] && b[j];\n            union += a[j] || b[j];\n        }\n        if (union === 0)\n            return 1;\n        return inter / union;\n    }\n    else {\n        var ii = a.length,\n            p = 0,\n            q = 0,\n            m = 0;\n        for (var i = 0; i < ii ; i++) {\n            p += a[i];\n            q += b[i];\n            m += Math.min(a[i],b[i]);\n        }\n        return 1 - (p + q - 2 * m) / (p + q - m);\n    }\n};\n","module.exports = function cosine(a, b) {\n    var ii = a.length,\n        p = 0,\n        p2 = 0,\n        q2 = 0;\n    for (var i = 0; i < ii ; i++) {\n        p += a[i] * b[i];\n        p2 += a[i] * a[i];\n        q2 += b[i] * b[i];\n    }\n    return p / (Math.sqrt(p2) * Math.sqrt(q2));\n};\n","'use strict';\n\nvar extend = require('extend');\n\nvar defaultOptions = {\n    size: 1,\n    value: 0\n};\n\n/**\n * Case when the entry is an array\n * @param data\n * @param options\n * @returns {Array}\n */\nfunction arrayCase(data, options) {\n    var len = data.length;\n    if (typeof options.size === 'number')\n        options.size = [options.size, options.size];\n\n    var cond = len + options.size[0] + options.size[1];\n\n    var output;\n    if (options.output) {\n        if (options.output.length !== cond)\n            throw new RangeError('Wrong output size');\n        output = options.output;\n    }\n    else\n        output = new Array(cond);\n\n    var i;\n\n    // circular option\n    if (options.value === 'circular') {\n        for (i = 0; i < cond; i++) {\n            if (i < options.size[0])\n                output[i] = data[((len - (options.size[0] % len)) + i) % len];\n            else if (i < (options.size[0] + len))\n                output[i] = data[i - options.size[0]];\n            else\n                output[i] = data[(i - options.size[0]) % len];\n        }\n    }\n\n    // replicate option\n    else if (options.value === 'replicate') {\n        for (i = 0; i < cond; i++) {\n            if (i < options.size[0])\n                output[i] = data[0];\n            else if (i < (options.size[0] + len))\n                output[i] = data[i - options.size[0]];\n            else\n                output[i] = data[len - 1];\n        }\n    }\n\n    // symmetric option\n    else if (options.value === 'symmetric') {\n        if ((options.size[0] > len) || (options.size[1] > len))\n            throw new RangeError('expanded value should not be bigger than the data length');\n        for (i = 0; i < cond; i++) {\n            if (i < options.size[0])\n                output[i] = data[options.size[0] - 1 - i];\n            else if (i < (options.size[0] + len))\n                output[i] = data[i - options.size[0]];\n            else\n                output[i] = data[2*len + options.size[0] - i - 1];\n        }\n    }\n\n    // default option\n    else {\n        for (i = 0; i < cond; i++) {\n            if (i < options.size[0])\n                output[i] = options.value;\n            else if (i < (options.size[0] + len))\n                output[i] = data[i - options.size[0]];\n            else\n                output[i] = options.value;\n        }\n    }\n\n    return output;\n}\n\n/**\n * Case when the entry is a matrix\n * @param data\n * @param options\n * @returns {Array}\n */\nfunction matrixCase(data, options) {\n    var row = data.length;\n    var col = data[0].length;\n    if (options.size[0] === undefined)\n        options.size = [options.size, options.size, options.size, options.size];\n    throw new Error('matrix not supported yet, sorry');\n}\n\n/**\n * Pads and array\n * @param {Array <number>} data\n * @param {object} options\n */\nfunction padArray (data, options) {\n    options = extend({}, defaultOptions, options);\n\n    if (Array.isArray(data)) {\n        if (Array.isArray(data[0]))\n            return matrixCase(data, options);\n        else\n            return arrayCase(data, options);\n    }\n    else\n        throw new TypeError('data should be an array');\n}\n\nmodule.exports = padArray;\n","export default function maybeToPrecision(value, digits) {\n    if (value < 0) {\n        value = 0 - value;\n        if (typeof digits === 'number') {\n            return '- ' + value.toPrecision(digits);\n        } else {\n            return '- ' + value.toString();\n        }\n    } else {\n        if (typeof digits === 'number') {\n            return value.toPrecision(digits);\n        } else {\n            return value.toString();\n        }\n    }\n}\n","export default function checkArraySize(x, y) {\n    if (!Array.isArray(x) || !Array.isArray(y)) {\n        throw new TypeError('x and y must be arrays');\n    }\n    if (x.length !== y.length) {\n        throw new RangeError('x and y arrays must have the same length');\n    }\n}\n","export {default as maybeToPrecision} from './maybeToPrecision';\nexport {default as checkArrayLength} from './checkArrayLength';\n\nexport default class BaseRegression {\n    constructor() {\n        if (new.target === BaseRegression) {\n            throw new Error('BaseRegression must be subclassed');\n        }\n    }\n\n    predict(x) {\n        if (typeof x === 'number') {\n            return this._predict(x);\n        } else if (Array.isArray(x)) {\n            const y = new Array(x.length);\n            for (let i = 0; i < x.length; i++) {\n                y[i] = this._predict(x[i]);\n            }\n            return y;\n        } else {\n            throw new TypeError('x must be a number or array');\n        }\n    }\n\n    _predict() {\n        throw new Error('_predict must be implemented');\n    }\n\n    train() {\n        //Do nothing for this package\n    }\n\n    toString() {\n        return '';\n    }\n\n    toLaTeX() {\n        return '';\n    }\n\n    /**\n     * Return the correlation coefficient of determination (r) and chi-square.\n     * @param {Array<number>} x\n     * @param {Array<number>} y\n     * @return {object}\n     */\n    score(x, y) {\n        if (!Array.isArray(x) || !Array.isArray(y) || x.length !== y.length) {\n            throw new Error('x and y must be arrays of the same length');\n        }\n\n        const n = x.length;\n        const y2 = new Array(n);\n        for (let i = 0; i < n; i++) {\n            y2[i] = this._predict(x[i]);\n        }\n\n        let xSum = 0;\n        let ySum = 0;\n        let chi2 = 0;\n        let rmsd = 0;\n        let xSquared = 0;\n        let ySquared = 0;\n        let xY = 0;\n        for (let i = 0; i < n; i++) {\n            xSum += y2[i];\n            ySum += y[i];\n            xSquared += y2[i] * y2[i];\n            ySquared += y[i] * y[i];\n            xY += y2[i] * y[i];\n            if (y[i] !== 0) {\n                chi2 += (y[i] - y2[i]) * (y[i] - y2[i]) / y[i];\n            }\n            rmsd = (y[i] - y2[i]) * (y[i] - y2[i]);\n        }\n\n        const r = (n * xY - xSum * ySum) / Math.sqrt((n * xSquared - xSum * xSum) * (n * ySquared - ySum * ySum));\n\n        return {\n            r: r,\n            r2: r * r,\n            chi2: chi2,\n            rmsd: rmsd * rmsd / n\n        };\n    }\n}\n","import BaseRegression, {checkArrayLength, maybeToPrecision} from 'ml-regression-base';\n\nexport default class SimpleLinearRegression extends BaseRegression {\n    constructor(x, y) {\n        super();\n        if (x === true) {\n            this.slope = y.slope;\n            this.intercept = y.intercept;\n            this.coefficients = [y.intercept, y.slope];\n        } else {\n            checkArrayLength(x, y);\n            regress(this, x, y);\n        }\n    }\n\n    toJSON() {\n        return {\n            name: 'simpleLinearRegression',\n            slope: this.slope,\n            intercept: this.intercept\n        };\n    }\n\n    _predict(x) {\n        return this.slope * x + this.intercept;\n    }\n\n    computeX(y) {\n        return (y - this.intercept) / this.slope;\n    }\n\n    toString(precision) {\n        let result = 'f(x) = ';\n        if (this.slope !== 0) {\n            const xFactor = maybeToPrecision(this.slope, precision);\n            result += (xFactor === '1' ? '' : xFactor + ' * ') + 'x';\n            if (this.intercept) {\n                const absIntercept = Math.abs(this.intercept);\n                const operator = absIntercept === this.intercept ? '+' : '-';\n                result += ` ${operator} ${maybeToPrecision(absIntercept, precision)}`;\n            }\n        } else {\n            result += maybeToPrecision(this.intercept, precision);\n        }\n        return result;\n    }\n\n    toLaTeX(precision) {\n        return this.toString(precision);\n    }\n\n    static load(json) {\n        if (json.name !== 'simpleLinearRegression') {\n            throw new TypeError('not a SLR model');\n        }\n        return new SimpleLinearRegression(true, json);\n    }\n}\n\nfunction regress(slr, x, y) {\n    const n = x.length;\n    let xSum = 0;\n    let ySum = 0;\n\n    let xSquared = 0;\n    let xY = 0;\n\n    for (let i = 0; i < n; i++) {\n        xSum += x[i];\n        ySum += y[i];\n        xSquared += x[i] * x[i];\n        xY += x[i] * y[i];\n    }\n\n    const numerator = (n * xY - xSum * ySum);\n    slr.slope = numerator / (n * xSquared - xSum * xSum);\n    slr.intercept = (1 / n) * ySum - slr.slope * (1 / n) * xSum;\n    slr.coefficients = [slr.intercept, slr.slope];\n}\n","import BaseRegression, {checkArrayLength, maybeToPrecision} from 'ml-regression-base';\nimport Matrix, {solve} from 'ml-matrix';\n\nexport default class PolynomialRegression extends BaseRegression {\n    constructor(x, y, degree) {\n        super();\n        if (x === true) {\n            this.degree = y.degree;\n            this.powers = y.powers;\n            this.coefficients = y.coefficients;\n        } else {\n            checkArrayLength(x, y);\n            regress(this, x, y, degree);\n        }\n    }\n\n    _predict(x) {\n        let y = 0;\n        for (let k = 0; k < this.powers.length; k++) {\n            y += this.coefficients[k] * Math.pow(x, this.powers[k]);\n        }\n        return y;\n    }\n\n    toJSON() {\n        return {\n            name: 'polynomialRegression',\n            degree: this.degree,\n            powers: this.powers,\n            coefficients: this.coefficients\n        };\n    }\n\n    toString(precision) {\n        return this._toFormula(precision, false);\n    }\n\n    toLaTeX(precision) {\n        return this._toFormula(precision, true);\n    }\n\n    _toFormula(precision, isLaTeX) {\n        let sup = '^';\n        let closeSup = '';\n        let times = ' * ';\n        if (isLaTeX) {\n            sup = '^{';\n            closeSup = '}';\n            times = '';\n        }\n\n        let fn = '';\n        let str = '';\n        for (let k = 0; k < this.coefficients.length; k++) {\n            str = '';\n            if (this.coefficients[k] !== 0) {\n                if (this.powers[k] === 0) {\n                    str = maybeToPrecision(this.coefficients[k], precision);\n                } else {\n                    if (this.powers[k] === 1) {\n                        str = maybeToPrecision(this.coefficients[k], precision) + times + 'x';\n                    } else {\n                        str = maybeToPrecision(this.coefficients[k], precision) + times + 'x' + sup + this.powers[k] + closeSup;\n                    }\n                }\n\n                if (this.coefficients[k] > 0 && k !== (this.coefficients.length - 1)) {\n                    str = ' + ' + str;\n                } else if (k !== (this.coefficients.length - 1)) {\n                    str = ' ' + str;\n                }\n            }\n            fn = str + fn;\n        }\n        if (fn.charAt(0) === '+') {\n            fn = fn.slice(1);\n        }\n\n        return 'f(x) = ' + fn;\n    }\n\n    static load(json) {\n        if (json.name !== 'polynomialRegression') {\n            throw new TypeError('not a polynomial regression model');\n        }\n        return new PolynomialRegression(true, json);\n    }\n}\n\nfunction regress(pr, x, y, degree) {\n    const n = x.length;\n    let powers;\n    if (Array.isArray(degree)) {\n        powers = degree;\n        degree = powers.length;\n    } else {\n        degree++;\n        powers = new Array(degree);\n        for (let k = 0; k < degree; k++) {\n            powers[k] = k;\n        }\n    }\n    const F = new Matrix(n, degree);\n    const Y = new Matrix([y]);\n    for (let k = 0; k < degree; k++) {\n        for (let i = 0; i < n; i++) {\n            if (powers[k] === 0) {\n                F[i][k] = 1;\n            } else {\n                F[i][k] = Math.pow(x[i], powers[k]);\n            }\n        }\n    }\n\n    const FT = F.transposeView();\n    const A = FT.mmul(F);\n    const B = FT.mmul(Y.transposeView());\n\n    pr.degree = degree - 1;\n    pr.powers = powers;\n    pr.coefficients = solve(A, B).to1DArray();\n}\n","import BaseRegression, {checkArrayLength, maybeToPrecision} from 'ml-regression-base';\nimport SimpleLinearRegression from 'ml-regression-simple-linear';\n\nexport default class ExponentialRegression extends BaseRegression {\n    constructor(x, y) {\n        super();\n        if (x === true) {\n            this.A = y.A;\n            this.B = y.B;\n        } else {\n            checkArrayLength(x, y);\n            regress(this, x, y);\n        }\n    }\n\n    _predict(input) {\n        return this.B * Math.exp(input * this.A);\n    }\n\n    toJSON() {\n        return {\n            name: 'exponentialRegression',\n            A: this.A,\n            B: this.B\n        };\n    }\n\n    toString(precision) {\n        return 'f(x) = ' + maybeToPrecision(this.B, precision) + ' * e^(' + maybeToPrecision(this.A, precision) + ' * x)';\n    }\n\n    toLaTeX(precision) {\n        if (this.A >= 0) {\n            return 'f(x) = ' + maybeToPrecision(this.B, precision) + 'e^{' + maybeToPrecision(this.A, precision) + 'x}';\n        } else {\n            return 'f(x) = \\\\frac{' + maybeToPrecision(this.B, precision) + '}{e^{' + maybeToPrecision(-this.A, precision) + 'x}}';\n        }\n\n    }\n\n    static load(json) {\n        if (json.name !== 'exponentialRegression') {\n            throw new TypeError('not a exponential regression model');\n        }\n        return new ExponentialRegression(true, json);\n    }\n}\n\nfunction regress(er, x, y) {\n    const n = x.length;\n    const yl = new Array(n);\n    for (let i = 0; i < n; i++) {\n        yl[i] = Math.log(y[i]);\n    }\n\n    const linear = new SimpleLinearRegression(x, yl);\n    er.A = linear.slope;\n    er.B = Math.exp(linear.intercept);\n}\n","import BaseRegression, {checkArrayLength, maybeToPrecision} from 'ml-regression-base';\nimport SimpleLinearRegression from 'ml-regression-simple-linear';\n\nexport default class PowerRegression extends BaseRegression {\n    constructor(x, y) {\n        super();\n        if (x === true) { // reloading model\n            this.A = y.A;\n            this.B = y.B;\n        } else {\n            checkArrayLength(x, y);\n            regress(this, x, y);\n        }\n    }\n\n    _predict(newInputs) {\n        return this.A * Math.pow(newInputs, this.B);\n    }\n\n    toJSON() {\n        return {\n            name: 'powerRegression',\n            A: this.A,\n            B: this.B\n        };\n    }\n\n    toString(precision) {\n        return 'f(x) = ' + maybeToPrecision(this.A, precision) + ' * x^' + maybeToPrecision(this.B, precision);\n    }\n\n    toLaTeX(precision) {\n        if (this.B >= 0) {\n            return 'f(x) = ' + maybeToPrecision(this.A, precision) + 'x^{' + maybeToPrecision(this.B, precision) + '}';\n        } else {\n            return 'f(x) = \\\\frac{' + maybeToPrecision(this.A, precision) + '}{x^{' + maybeToPrecision(-this.B, precision) + '}}';\n        }\n    }\n\n    static load(json) {\n        if (json.name !== 'powerRegression') {\n            throw new TypeError('not a power regression model');\n        }\n        return new PowerRegression(true, json);\n    }\n}\n\nfunction regress(pr, x, y) {\n    const n = x.length;\n    const xl = new Array(n);\n    const yl = new Array(n);\n    for (let i = 0; i < n; i++) {\n        xl[i] = Math.log(x[i]);\n        yl[i] = Math.log(y[i]);\n    }\n\n    const linear = new SimpleLinearRegression(xl, yl);\n    pr.A = Math.exp(linear.intercept);\n    pr.B = linear.slope;\n}\n","import Matrix, { SVD } from 'ml-matrix';\nimport BaseRegression from 'ml-regression-base';\n\nexport default class MultivariateLinearRegression extends BaseRegression {\n  constructor(x, y, options = {}) {\n    const { intercept = true, statistics = true } = options;\n    super();\n    this.statistics = statistics;\n    if (x === true) {\n      this.weights = y.weights;\n      this.inputs = y.inputs;\n      this.outputs = y.outputs;\n      this.intercept = y.intercept;\n    } else {\n      x = new Matrix(x);\n      if (intercept) {\n        x.addColumn(new Array(x.length).fill(1));\n      }\n      const beta = new SVD(x, { autoTranspose: true }).solve(y);\n      this.weights = beta.to2DArray();\n      this.inputs = x[0].length;\n      this.outputs = y[0].length;\n      if (intercept) this.inputs--;\n      this.intercept = intercept;\n      if (statistics) {\n        /*\n         * Let's add some basic statistics about the beta's to be able to interpret them.\n         * source: http://dept.stat.lsa.umich.edu/~kshedden/Courses/Stat401/Notes/401-multreg.pdf\n         * validated against Excel Regression AddIn\n         * test: \"datamining statistics test\"\n         */\n        const fittedValues = x.mmul(beta);\n        const residuals = new Matrix(y).addM(fittedValues.neg());\n        const variance =\n          residuals\n            .to2DArray()\n            .map((ri) => Math.pow(ri[0], 2))\n            .reduce((a, b) => a + b) /\n          (y.length - x.columns);\n        this.stdError = Math.sqrt(variance);\n        this.stdErrorMatrix = x\n          .transposeView()\n          .mmul(x)\n          .pseudoInverse()\n          .mul(variance);\n        this.stdErrors = this.stdErrorMatrix.diagonal().map((d) => Math.sqrt(d));\n        this.tStats = this.weights.map(\n          (d, i) => (this.stdErrors[i] === 0 ? 0 : d[0] / this.stdErrors[i])\n        );\n      }\n    }\n  }\n\n  predict(x) {\n    if (Array.isArray(x)) {\n      if (typeof x[0] === 'number') {\n        return this._predict(x);\n      } else if (Array.isArray(x[0])) {\n        const y = new Array(x.length);\n        for (let i = 0; i < x.length; i++) {\n          y[i] = this._predict(x[i]);\n        }\n        return y;\n      }\n    }\n    throw new TypeError('x must be a matrix or array of numbers');\n  }\n\n  _predict(x) {\n    const result = new Array(this.outputs);\n    if (this.intercept) {\n      for (let i = 0; i < this.outputs; i++) {\n        result[i] = this.weights[this.inputs][i];\n      }\n    } else {\n      result.fill(0);\n    }\n    for (let i = 0; i < this.inputs; i++) {\n      for (let j = 0; j < this.outputs; j++) {\n        result[j] += this.weights[i][j] * x[i];\n      }\n    }\n    return result;\n  }\n\n  score() {\n    throw new Error('score method is not implemented yet');\n  }\n\n  toJSON() {\n    return {\n      name: 'multivariateLinearRegression',\n      weights: this.weights,\n      inputs: this.inputs,\n      outputs: this.outputs,\n      intercept: this.intercept,\n      summary: (this.statistics)\n        ? {\n          regressionStatistics: {\n            standardError: this.stdError,\n            observations: this.outputs\n          },\n          variables: this.weights.map((d, i) => {\n            return {\n              label:\n                i === this.weights.length - 1\n                  ? 'Intercept'\n                  : `X Variable ${i + 1}`,\n              coefficients: d,\n              standardError: this.stdErrors[i],\n              tStat: this.tStats[i]\n            };\n          })\n        }\n        : undefined,\n    };\n  }\n\n  static load(model) {\n    if (model.name !== 'multivariateLinearRegression') {\n      throw new Error('not a MLR model');\n    }\n    return new MultivariateLinearRegression(true, model);\n  }\n}\n","import {maybeToPrecision} from 'ml-regression-base';\nimport PolynomialRegression from 'ml-regression-polynomial';\nimport BaseRegression from 'ml-regression-base';\n\n/*\n * Function that calculate the potential fit in the form f(x) = A*x^M\n * with a given M and return de A coefficient.\n *\n * @param {Vector} X - Vector of the x positions of the points.\n * @param {Vector} Y - Vector of the x positions of the points.\n * @param {Number} M - The exponent of the potential fit.\n * @return {Number} A - The A coefficient of the potential fit.\n */\nexport default class PotentialRegression extends BaseRegression {\n    /**\n     * @constructor\n     * @param x: Independent variable\n     * @param y: Dependent variable\n     * @param M\n     */\n    constructor(x, y, M) {\n        super();\n        if (x === true) { // reloading model\n            this.A = y.A;\n            this.M = y.M;\n        } else {\n            var n = x.length;\n            if (n !== y.length) {\n                throw new RangeError('input and output array have a different length');\n            }\n\n            var linear = new PolynomialRegression(x, y, [M]);\n            this.A = linear.coefficients[0];\n            this.M = M;\n        }\n    }\n\n    _predict(x) {\n        return this.A * Math.pow(x, this.M);\n    }\n\n    toJSON() {\n        return {\n            name: 'potentialRegression',\n            A: this.A,\n            M: this.M\n        };\n    }\n\n    toString(precision) {\n        return 'f(x) = ' + maybeToPrecision(this.A, precision) + ' * x^' + this.M;\n    }\n\n    toLaTeX(precision) {\n        if (this.M >= 0) {\n            return 'f(x) = ' + maybeToPrecision(this.A, precision) + 'x^{' + this.M + '}';\n        } else {\n            return 'f(x) = \\\\frac{' + maybeToPrecision(this.A, precision) + '}{x^{' + (-this.M) + '}}';\n        }\n    }\n\n    static load(json) {\n        if (json.name !== 'potentialRegression') {\n            throw new TypeError('not a potential regression model');\n        }\n        return new PotentialRegression(true, json);\n    }\n}\n","import {Matrix, solve} from 'ml-matrix';\nimport Kernel from 'ml-kernel';\n\nimport BaseRegression from 'ml-regression-base';\n\nconst defaultOptions = {\n    lambda: 0.1,\n    kernelType: 'gaussian',\n    kernelOptions: {},\n    computeCoefficient: false\n};\n\n// Implements the Kernel ridge regression algorithm.\n// http://www.ics.uci.edu/~welling/classnotes/papers_class/Kernel-Ridge.pdf\nexport default class KernelRidgeRegression extends BaseRegression {\n    constructor(inputs, outputs, options) {\n        super();\n        if (inputs === true) { // reloading model\n            this.alpha = outputs.alpha;\n            this.inputs = outputs.inputs;\n            this.kernelType = outputs.kernelType;\n            this.kernelOptions = outputs.kernelOptions;\n            this.kernel = new Kernel(outputs.kernelType, outputs.kernelOptions);\n        } else {\n            options = Object.assign({}, defaultOptions, options);\n\n            const kernelFunction = new Kernel(options.kernelType, options.kernelOptions);\n            const K = kernelFunction.compute(inputs);\n            const n = inputs.length;\n            K.add(Matrix.eye(n, n).mul(options.lambda));\n\n            this.alpha = solve(K, outputs);\n            this.inputs = inputs;\n            this.kernelType = options.kernelType;\n            this.kernelOptions = options.kernelOptions;\n            this.kernel = kernelFunction;\n        }\n    }\n\n    _predict(newInputs) {\n        return this.kernel.compute([newInputs], this.inputs).mmul(this.alpha)[0];\n    }\n\n    toJSON() {\n        return {\n            name: 'kernelRidgeRegression',\n            alpha: this.alpha,\n            inputs: this.inputs,\n            kernelType: this.kernelType,\n            kernelOptions: this.kernelOptions\n        };\n    }\n\n    static load(json) {\n        if (json.name !== 'kernelRidgeRegression') {\n            throw new TypeError('not a KRR model');\n        }\n        return new KernelRidgeRegression(true, json);\n    }\n}\n","import {Matrix, SVD} from 'ml-matrix';\nimport BaseRegression from 'ml-regression-base';\n\nconst defaultOptions = {\n    order: 2\n};\n// Implements the Kernel ridge regression algorithm.\n// http://www.ics.uci.edu/~welling/classnotes/papers_class/Kernel-Ridge.pdf\nexport default class PolynomialFitRegression2D extends BaseRegression {\n    /**\n     * Constructor for the 2D polynomial fitting\n     *\n     * @param inputs\n     * @param outputs\n     * @param options\n     * @constructor\n     */\n    constructor(inputs, outputs, options) {\n        super();\n        if (inputs === true) { // reloading model\n            this.coefficients = Matrix.columnVector(outputs.coefficients);\n            this.order = outputs.order;\n            if (outputs.r) {\n                this.r = outputs.r;\n                this.r2 = outputs.r2;\n            }\n            if (outputs.chi2) {\n                this.chi2 = outputs.chi2;\n            }\n        } else {\n            options = Object.assign({}, defaultOptions, options);\n            this.order = options.order;\n            this.coefficients = [];\n            this.X = inputs;\n            this.y = outputs;\n\n            this.train(this.X, this.y, options);\n        }\n    }\n\n    /**\n     * Function that fits the model given the data(X) and predictions(y).\n     * The third argument is an object with the following options:\n     * * order: order of the polynomial to fit.\n     *\n     * @param {Matrix} X - A matrix with n rows and 2 columns.\n     * @param {Matrix} y - A vector of the prediction values.\n     */\n    train(X, y) {\n        if (!Matrix.isMatrix(X)) X = new Matrix(X);\n        if (!Matrix.isMatrix(y)) y = Matrix.columnVector(y);\n\n        if (y.rows !== X.rows) {\n            y = y.transpose();\n        }\n\n        if (X.columns !== 2) {\n            throw new RangeError('You give X with ' + X.columns + ' columns and it must be 2');\n        }\n        if (X.rows !== y.rows) {\n            throw new RangeError('X and y must have the same rows');\n        }\n\n        var examples = X.rows;\n        var coefficients = ((this.order + 2) * (this.order + 1)) / 2;\n        this.coefficients = new Array(coefficients);\n\n        var x1 = X.getColumnVector(0);\n        var x2 = X.getColumnVector(1);\n\n        var scaleX1 = 1.0 / x1.clone().apply(abs).max();\n        var scaleX2 = 1.0 / x2.clone().apply(abs).max();\n        var scaleY = 1.0 / y.clone().apply(abs).max();\n\n        x1.mulColumn(0, scaleX1);\n        x2.mulColumn(0, scaleX2);\n        y.mulColumn(0, scaleY);\n\n        var A = new Matrix(examples, coefficients);\n        var col = 0;\n\n        for (var i = 0; i <= this.order; ++i) {\n            var limit = this.order - i;\n            for (var j = 0; j <= limit; ++j) {\n                var result = powColVector(x1, i).mulColumnVector(powColVector(x2, j));\n                A.setColumn(col, result);\n                col++;\n            }\n        }\n\n        var svd = new SVD(A.transpose(), {\n            computeLeftSingularVectors: true,\n            computeRightSingularVectors: true,\n            autoTranspose: false\n        });\n\n        var qqs = Matrix.rowVector(svd.diagonal);\n        qqs = qqs.apply(function (i, j) {\n            if (this[i][j] >= 1e-15) this[i][j] = 1 / this[i][j];\n            else this[i][j] = 0;\n        });\n\n        var qqs1 = Matrix.zeros(examples, coefficients);\n        for (i = 0; i < coefficients; ++i) {\n            qqs1[i][i] = qqs[0][i];\n        }\n\n        qqs = qqs1;\n\n        var U = svd.rightSingularVectors;\n        var V = svd.leftSingularVectors;\n\n        this.coefficients = V.mmul(qqs.transpose()).mmul(U.transpose()).mmul(y);\n\n        col = 0;\n\n        for (i = 0; i <= coefficients; ++i) {\n            limit = this.order - i;\n            for (j = 0; j <= limit; ++j) {\n                this.coefficients[col][0] = (this.coefficients[col][0] * Math.pow(scaleX1, i) * Math.pow(scaleX2, j)) / scaleY;\n                col++;\n            }\n        }\n    }\n\n    _predict(newInputs) {\n        var x1 = newInputs[0];\n        var x2 = newInputs[1];\n\n        var y = 0;\n        var column = 0;\n\n        for (var i = 0; i <= this.order; i++) {\n            for (var j = 0; j <= this.order - i; j++) {\n                y += Math.pow(x1, i) * (Math.pow(x2, j)) * this.coefficients[column][0];\n                column++;\n            }\n        }\n\n        return y;\n    }\n\n    toJSON() {\n        return {\n            name: 'polyfit2D',\n            order: this.order,\n            coefficients: this.coefficients\n        };\n    }\n\n    static load(json) {\n        if (json.name !== 'polyfit2D') {\n            throw new TypeError('not a polyfit2D model');\n        }\n        return new PolynomialFitRegression2D(true, json);\n    }\n}\n\n/**\n * Function that given a column vector return this: vector^power\n *\n * @param x - Column vector.\n * @param power - Pow number.\n * @return {Suite|Matrix}\n */\nfunction powColVector(x, power) {\n    var result = x.clone();\n    for (var i = 0; i < x.rows; ++i) {\n        result[i][0] = Math.pow(result[i][0], power);\n    }\n    return result;\n}\n\n/**\n * Function to use in the apply method to get the absolute value\n * of each element of the matrix\n *\n * @param i - current row.\n * @param j - current column.\n */\nfunction abs(i, j) {\n    this[i][j] = Math.abs(this[i][j]);\n}\n","import BaseRegression, {checkArrayLength, maybeToPrecision} from 'ml-regression-base';\nimport {array} from 'ml-stat';\nconst median = array.median;\n\nexport default class TheilSenRegression extends BaseRegression {\n\n    /**\n     * Theil–Sen estimator\n     * https://en.wikipedia.org/wiki/Theil%E2%80%93Sen_estimator\n     * @param {Array<number>|boolean} x\n     * @param {Array<number>|object} y\n     * @constructor\n     */\n    constructor(x, y) {\n        super();\n        if (x === true) {\n            // loads the model\n            this.slope = y.slope;\n            this.intercept = y.intercept;\n            this.coefficients = y.coefficients;\n        } else {\n            // creates the model\n            checkArrayLength(x, y);\n            theilSen(this, x, y);\n        }\n\n    }\n\n    toJSON() {\n        return {\n            name: 'TheilSenRegression',\n            slope: this.slope,\n            intercept: this.intercept\n        };\n    }\n\n    _predict(input) {\n        return this.slope * input + this.intercept;\n    }\n\n    computeX(input) {\n        return (input - this.intercept) / this.slope;\n    }\n\n    toString(precision) {\n        var result = 'f(x) = ';\n        if (this.slope) {\n            var xFactor = maybeToPrecision(this.slope, precision);\n            result += (Math.abs(xFactor - 1) < 1e-5 ? '' : xFactor + ' * ') + 'x';\n            if (this.intercept) {\n                var absIntercept = Math.abs(this.intercept);\n                var operator = absIntercept === this.intercept ? '+' : '-';\n                result += ' ' + operator + ' ' + maybeToPrecision(absIntercept, precision);\n            }\n        } else {\n            result += maybeToPrecision(this.intercept, precision);\n        }\n        return result;\n    }\n\n    toLaTeX(precision) {\n        return this.toString(precision);\n    }\n\n    static load(json) {\n        if (json.name !== 'TheilSenRegression') {\n            throw new TypeError('not a Theil-Sen model');\n        }\n        return new TheilSenRegression(true, json);\n    }\n}\n\nfunction theilSen(regression, x, y) {\n    let len = x.length;\n    let slopes = new Array(len * len);\n    let count = 0;\n    for (let i = 0; i < len; ++i) {\n        for (let j = i + 1; j < len; ++j) {\n            if (x[i] !== x[j]) {\n                slopes[count++] = (y[j] - y[i]) / (x[j] - x[i]);\n            }\n        }\n    }\n    slopes.length = count;\n    let medianSlope = median(slopes);\n\n    let cuts = new Array(len);\n    for (let i = 0; i < len; ++i) {\n        cuts[i] = y[i] - medianSlope * x[i];\n    }\n\n    regression.slope = medianSlope;\n    regression.intercept = median(cuts);\n    regression.coefficients = [regression.intercept, regression.slope];\n}\n","import BaseRegression, {checkArrayLength, maybeToPrecision} from 'ml-regression-base';\nimport {solve} from 'ml-matrix';\n\nexport default class RobustPolynomialRegression extends BaseRegression {\n    constructor(x, y, degree) {\n        super();\n        if (x === true) {\n            this.degree = y.degree;\n            this.powers = y.powers;\n            this.coefficients = y.coefficients;\n        } else {\n            checkArrayLength(x, y);\n            robustPolynomial(this, x, y, degree);\n        }\n    }\n\n    toJSON() {\n        return {\n            name: 'robustPolynomialRegression',\n            degree: this.degree,\n            powers: this.powers,\n            coefficients: this.coefficients\n        };\n    }\n\n    _predict(x) {\n        return predict(x, this.powers, this.coefficients);\n    }\n\n    toString(precision) {\n        return this._toFormula(precision, false);\n    }\n\n    toLaTeX(precision) {\n        return this._toFormula(precision, true);\n    }\n\n    _toFormula(precision, isLaTeX) {\n        let sup = '^';\n        let closeSup = '';\n        let times = ' * ';\n        if (isLaTeX) {\n            sup = '^{';\n            closeSup = '}';\n            times = '';\n        }\n\n        let fn = '';\n        let str = '';\n        for (let k = 0; k < this.coefficients.length; k++) {\n            str = '';\n            if (this.coefficients[k] !== 0) {\n                if (this.powers[k] === 0) {\n                    str = maybeToPrecision(this.coefficients[k], precision);\n                } else {\n                    if (this.powers[k] === 1) {\n                        str = maybeToPrecision(this.coefficients[k], precision) + times + 'x';\n                    } else {\n                        str = maybeToPrecision(this.coefficients[k], precision) + times + 'x' + sup + this.powers[k] + closeSup;\n                    }\n                }\n\n                if (this.coefficients[k] > 0 && k !== (this.coefficients.length - 1)) {\n                    str = ' + ' + str;\n                } else if (k !== (this.coefficients.length - 1)) {\n                    str = ' ' + str;\n                }\n            }\n            fn = str + fn;\n        }\n        if (fn.charAt(0) === '+') {\n            fn = fn.slice(1);\n        }\n\n        return 'f(x) = ' + fn;\n    }\n\n    static load(json) {\n        if (json.name !== 'robustPolynomialRegression') {\n            throw new TypeError('not a RobustPolynomialRegression model');\n        }\n        return new RobustPolynomialRegression(true, json);\n    }\n}\n\nfunction robustPolynomial(regression, x, y, degree) {\n    let powers = new Array(degree);\n    for (let k = 0; k < degree; k++) {\n        powers[k] = k;\n    }\n\n    const tuples = getRandomTuples(x, y, degree);\n    var min;\n\n    for (var i = 0; i < tuples.length; i++) {\n        var tuple = tuples[i];\n        var coefficients = calcCoefficients(tuple, powers);\n\n        var residuals = x.slice();\n        for (var j = 0; j < x.length; j++) {\n            residuals[j] = y[j] - predict(x[j], powers, coefficients);\n            residuals[j] = {\n                residual: residuals[j] * residuals[j],\n                coefficients\n            };\n        }\n\n        var median = residualsMedian(residuals);\n        if (!min || median.residual < min.residual) {\n            min = median;\n        }\n    }\n\n    regression.degree = degree;\n    regression.powers = powers;\n    regression.coefficients = min.coefficients;\n}\n\n/**\n * @ignore\n * @param {Array<number>} x\n * @param {Array<number>} y\n * @param {number} degree\n * @return {Array<{x:number,y:number}>}\n */\nfunction getRandomTuples(x, y, degree) {\n    var len = Math.floor(x.length / degree);\n    var tuples = new Array(len);\n\n    for (var i = 0; i < x.length; i++) {\n        var pos = Math.floor(Math.random() * len);\n\n        var counter = 0;\n        while (counter < x.length) {\n            if (!tuples[pos]) {\n                tuples[pos] = [{\n                    x: x[i],\n                    y: y[i]\n                }];\n                break;\n            } else if (tuples[pos].length < degree) {\n                tuples[pos].push({\n                    x: x[i],\n                    y: y[i]\n                });\n                break;\n            } else {\n                counter++;\n                pos = (pos + 1) % len;\n            }\n        }\n\n        if (counter === x.length) {\n            return tuples;\n        }\n    }\n    return tuples;\n}\n\n/**\n * @ignore\n * @param {{x:number,y:number}} tuple\n * @param {Array<number>} powers\n * @return {Array<number>}\n */\nfunction calcCoefficients(tuple, powers) {\n    var X = tuple.slice();\n    var Y = tuple.slice();\n    for (var i = 0; i < X.length; i++) {\n        Y[i] = [tuple[i].y];\n        X[i] = new Array(powers.length);\n        for (var j = 0; j < powers.length; j++) {\n            X[i][j] = Math.pow(tuple[i].x, powers[j]);\n        }\n    }\n\n    return solve(X, Y).to1DArray();\n}\n\nfunction predict(x, powers, coefficients) {\n    let y = 0;\n    for (let k = 0; k < powers.length; k++) {\n        y += coefficients[k] * Math.pow(x, powers[k]);\n    }\n    return y;\n}\n\nfunction residualsMedian(residuals) {\n    residuals.sort((a, b) => a.residual - b.residual);\n\n    var l = residuals.length;\n    var half = Math.floor(l / 2);\n    if (l % 2 === 0) {\n        return residuals[half - 1];\n    } else {\n        return residuals[half];\n    }\n}\n","export {default as SimpleLinearRegression, default as SLR} from 'ml-regression-simple-linear';\nexport {default as PolynomialRegression} from 'ml-regression-polynomial';\nexport {default as ExponentialRegression} from 'ml-regression-exponential';\nexport {default as PowerRegression} from 'ml-regression-power';\nexport {default as MultivariateLinearRegression} from 'ml-regression-multivariate-linear';\n\nimport PotentialRegression from './regression/potential-regression';\nconst NLR = {\n    PotentialRegression\n};\nexport {NLR, NLR as NonLinearRegression};\n\nexport {default as KernelRidgeRegression, default as KRR} from './regression/kernel-ridge-regression';\nexport {default as PolinomialFitting2D} from './regression/poly-fit-regression2d';\n\n// robust regressions\nexport {default as TheilSenRegression} from 'ml-regression-theil-sen';\nexport {default as RobustPolynomialRegression} from 'ml-regression-robust-polynomial';\n","(function(){function a(d){for(var e=0,f=d.length-1,g=void 0,h=void 0,i=void 0,j=c(e,f);!0;){if(f<=e)return d[j];if(f==e+1)return d[e]>d[f]&&b(d,e,f),d[j];for(g=c(e,f),d[g]>d[f]&&b(d,g,f),d[e]>d[f]&&b(d,e,f),d[g]>d[e]&&b(d,g,e),b(d,g,e+1),h=e+1,i=f;!0;){do h++;while(d[e]>d[h]);do i--;while(d[i]>d[e]);if(i<h)break;b(d,h,i)}b(d,e,i),i<=j&&(e=h),i>=j&&(f=i-1)}}var b=function b(d,e,f){var _ref;return _ref=[d[f],d[e]],d[e]=_ref[0],d[f]=_ref[1],_ref},c=function c(d,e){return~~((d+e)/2)};'undefined'!=typeof module&&module.exports?module.exports=a:window.median=a})();\n","'use strict';\n\nconst mlCart = require('ml-cart');\nconst mlRandomForest = require('ml-random-forest');\n\nconst ML = exports;\n\n// Try to keep this list in the same structure as the README.\n\n// Unsupervised learning\nML.PCA = require('ml-pca');\nML.HClust = require('ml-hclust');\nML.KMeans = require('ml-kmeans');\n\n// Supervised learning\nML.SVM = require('ml-svm');\nML.NaiveBayes = require('ml-naivebayes');\nML.KNN = require('ml-knn');\nML.PLS = require('ml-pls');\nML.CrossValidation = require('ml-cross-validation');\nML.ConfusionMatrix = require('ml-confusion-matrix');\nML.DecisionTreeClassifier = mlCart.DecisionTreeClassifier;\nML.RandomForestClassifier = mlRandomForest.RandomForestClassifier;\n\n// Artificial neural networks\nML.FNN = require('ml-fnn');\nML.SOM = require('ml-som');\n\n// Regression\nconst Regression = require('ml-regression');\nML.SimpleLinearRegression = Regression.SimpleLinearRegression;\nML.PolynomialRegression = Regression.PolynomialRegression;\nML.MultivariateLinearRegression = Regression.MultivariateLinearRegression;\nML.PowerRegression = Regression.PowerRegression;\nML.ExponentialRegression = Regression.ExponentialRegression;\nML.TheilSenRegression = Regression.TheilSenRegression;\nML.RobustPolynomialRegression = Regression.RobustPolynomialRegression;\nML.DecisionTreeRegression = mlCart.DecisionTreeRegression;\nML.RandomForestRegression = mlRandomForest.RandomForestRegression;\n\n// Optimization\nML.levenbergMarquardt = require('ml-levenberg-marquardt');\n\n// Math\nconst Matrix = require('ml-matrix');\nML.Matrix = Matrix.Matrix;\nML.SVD = Matrix.SVD;\nML.EVD = Matrix.EVD;\nML.CholeskyDecomposition = Matrix.CholeskyDecomposition;\nML.LuDecomposition = Matrix.LuDecomposition;\nML.QrDecomposition = Matrix.QrDecomposition;\n\nML.SparseMatrix = require('ml-sparse-matrix');\nML.Kernel = require('ml-kernel');\nML.Distance = require('ml-distance').distance;\nML.Similarity = require('ml-distance').similarity;\nML.distanceMatrix = require('ml-distance-matrix');\nML.XSadd = require('ml-xsadd').default;\n\n// Statistics\nML.Performance = require('ml-performance');\n\n// Data preprocessing\nML.savitzkyGolay = require('ml-savitzky-golay');\nML.savitzkyGolayGeneralized = require('ml-savitzky-golay-generalized');\n\n// Utility\nML.BitArray = require('ml-bit-array');\nML.HashTable = require('ml-hash-table');\nML.padArray = require('ml-pad-array');\nML.binarySearch = require('binary-search');\nML.numSort = require('num-sort');\nML.Random = require('ml-random').default;\n\n// Undocumented/deprecated packages\nML.ArrayUtils = require('ml-array-utils');\nML.Regression = require('ml-regression');\nML.MatrixUtil = require('ml-matrix');\nML.ArrayStat = require('ml-stat').array;\nML.MatrixStat = require('ml-stat').matrix;\n\nML.Array = {\n  min: require('ml-array-min').default,\n  max: require('ml-array-max').default,\n  median: require('ml-array-median').default,\n  mean: require('ml-array-mean').default,\n  mode: require('ml-array-mode').default,\n  normed: require('ml-array-normed').default,\n  rescale: require('ml-array-rescale').default,\n  sequentialFill: require('ml-array-sequential-fill').default,\n  standardDeviation: require('ml-array-standard-deviation').default,\n  variance: require('ml-array-variance').default\n};\n\nML.ArrayXY = {\n  centroidsMerge: require('ml-array-xy-centroids-merge').default,\n  closestX: require('ml-arrayxy-closestx').default,\n  maxMerge: require('ml-array-xy-max-merge').default,\n  maxY: require('ml-array-xy-max-y').default,\n  sortX: require('ml-array-xy-sort-x').default,\n  uniqueX: require('ml-arrayxy-uniquex').default,\n  weightedMerge: require('ml-array-xy-weighted-merge').default,\n  equallySpaced: require('ml-array-xy-equally-spaced').default,\n  filterX: require('ml-array-xy-filter-x').default\n};\n","'use strict';\n\nconst matrixLib = require('ml-matrix');\nconst Matrix = matrixLib.Matrix;\nconst EVD = matrixLib.EVD;\nconst SVD = matrixLib.SVD;\nconst Stat = require('ml-stat/matrix');\nconst mean = Stat.mean;\nconst stdev = Stat.standardDeviation;\n\nconst defaultOptions = {\n    isCovarianceMatrix: false,\n    center: true,\n    scale: false\n};\n\n/**\n * Creates new PCA (Principal Component Analysis) from the dataset\n * @param {Matrix} dataset - dataset or covariance matrix\n * @param {Object} options\n * @param {boolean} [options.isCovarianceMatrix=false] - true if the dataset is a covariance matrix\n * @param {boolean} [options.center=true] - should the data be centered (subtract the mean)\n * @param {boolean} [options.scale=false] - should the data be scaled (divide by the standard deviation)\n * */\nclass PCA {\n    constructor(dataset, options) {\n        if (dataset === true) {\n            const model = options;\n            this.center = model.center;\n            this.scale = model.scale;\n            this.means = model.means;\n            this.stdevs = model.stdevs;\n            this.U = Matrix.checkMatrix(model.U);\n            this.S = model.S;\n            return;\n        }\n\n        options = Object.assign({}, defaultOptions, options);\n\n        this.center = false;\n        this.scale = false;\n        this.means = null;\n        this.stdevs = null;\n\n        if (options.isCovarianceMatrix) { // user provided a covariance matrix instead of dataset\n            this._computeFromCovarianceMatrix(dataset);\n            return;\n        }\n\n        var useCovarianceMatrix;\n        if (typeof options.useCovarianceMatrix === 'boolean') {\n            useCovarianceMatrix = options.useCovarianceMatrix;\n        } else {\n            useCovarianceMatrix = dataset.length > dataset[0].length;\n        }\n\n        if (useCovarianceMatrix) { // user provided a dataset but wants us to compute and use the covariance matrix\n            dataset = this._adjust(dataset, options);\n            const covarianceMatrix = dataset.transposeView().mmul(dataset).div(dataset.rows - 1);\n            this._computeFromCovarianceMatrix(covarianceMatrix);\n        } else {\n            dataset = this._adjust(dataset, options);\n            var svd = new SVD(dataset, {\n                computeLeftSingularVectors: false,\n                computeRightSingularVectors: true,\n                autoTranspose: true\n            });\n\n            this.U = svd.rightSingularVectors;\n\n            const singularValues = svd.diagonal;\n            const eigenvalues = new Array(singularValues.length);\n            for (var i = 0; i < singularValues.length; i++) {\n                eigenvalues[i] = singularValues[i] * singularValues[i] / (dataset.length - 1);\n            }\n            this.S = eigenvalues;\n        }\n    }\n\n    /**\n     * Load a PCA model from JSON\n     * @param {Object} model\n     * @return {PCA}\n     */\n    static load(model) {\n        if (model.name !== 'PCA')\n            throw new RangeError('Invalid model: ' + model.name);\n        return new PCA(true, model);\n    }\n\n\n    /**\n     * Project the dataset into the PCA space\n     * @param {Matrix} dataset\n     * @param {Object} options\n     * @return {Matrix} dataset projected in the PCA space\n     */\n    predict(dataset, options = {}) {\n        const {\n           nComponents = this.U.columns\n        } = options;\n\n        dataset = new Matrix(dataset);\n        if (this.center) {\n            dataset.subRowVector(this.means);\n            if (this.scale) {\n                dataset.divRowVector(this.stdevs);\n            }\n        }\n\n        var predictions = dataset.mmul(this.U);\n        return predictions.subMatrix(0, predictions.rows - 1, 0, nComponents - 1);\n    }\n\n    /**\n     * Returns the proportion of variance for each component\n     * @return {[number]}\n     */\n    getExplainedVariance() {\n        var sum = 0;\n        for (var i = 0; i < this.S.length; i++) {\n            sum += this.S[i];\n        }\n        return this.S.map(value => value / sum);\n    }\n\n    /**\n     * Returns the cumulative proportion of variance\n     * @return {[number]}\n     */\n    getCumulativeVariance() {\n        var explained = this.getExplainedVariance();\n        for (var i = 1; i < explained.length; i++) {\n            explained[i] += explained[i - 1];\n        }\n        return explained;\n    }\n\n    /**\n     * Returns the Eigenvectors of the covariance matrix\n     * @returns {Matrix}\n     */\n    getEigenvectors() {\n        return this.U;\n    }\n\n    /**\n     * Returns the Eigenvalues (on the diagonal)\n     * @returns {[number]}\n     */\n    getEigenvalues() {\n        return this.S;\n    }\n\n    /**\n     * Returns the standard deviations of the principal components\n     * @returns {[number]}\n     */\n    getStandardDeviations() {\n        return this.S.map(x => Math.sqrt(x));\n    }\n\n    /**\n     * Returns the loadings matrix\n     * @return {Matrix}\n     */\n    getLoadings() {\n        return this.U.transpose();\n    }\n\n    /**\n     * Export the current model to a JSON object\n     * @return {Object} model\n     */\n    toJSON() {\n        return {\n            name: 'PCA',\n            center: this.center,\n            scale: this.scale,\n            means: this.means,\n            stdevs: this.stdevs,\n            U: this.U,\n            S: this.S,\n        };\n    }\n\n    _adjust(dataset, options) {\n        this.center = !!options.center;\n        this.scale = !!options.scale;\n\n        dataset = new Matrix(dataset);\n\n        if (this.center) {\n            const means = mean(dataset);\n            const stdevs = this.scale ? stdev(dataset, means, true) : null;\n            this.means = means;\n            dataset.subRowVector(means);\n            if (this.scale) {\n                for (var i = 0; i < stdevs.length; i++) {\n                    if (stdevs[i] === 0) {\n                        throw new RangeError('Cannot scale the dataset (standard deviation is zero at index ' + i);\n                    }\n                }\n                this.stdevs = stdevs;\n                dataset.divRowVector(stdevs);\n            }\n        }\n\n        return dataset;\n    }\n\n    _computeFromCovarianceMatrix(dataset) {\n        const evd = new EVD(dataset, {assumeSymmetric: true});\n        this.U = evd.eigenvectorMatrix;\n        for (var i = 0; i < this.U.length; i++) {\n            this.U[i].reverse();\n        }\n        this.S = evd.realEigenvalues.reverse();\n    }\n}\n\nmodule.exports = PCA;\n","'use strict';\n\nexports.agnes = require('./agnes');\nexports.diana = require('./diana');\n//exports.birch = require('./birch');\n//exports.cure = require('./cure');\n//exports.chameleon = require('./chameleon');\n","'use strict';\n\nconst euclidean = require('ml-distance-euclidean');\nconst ClusterLeaf = require('./ClusterLeaf');\nconst Cluster = require('./Cluster');\nconst distanceMatrix = require('ml-distance-matrix');\n\n/**\n * @private\n * @param cluster1\n * @param cluster2\n * @param disFun\n * @returns {number}\n */\nfunction simpleLink(cluster1, cluster2, disFun) {\n    var m = 10e100;\n    for (var i = 0; i < cluster1.length; i++) {\n        for (var j = 0; j < cluster2.length; j++) {\n            var d = disFun[cluster1[i]][ cluster2[j]];\n            m = Math.min(d, m);\n        }\n    }\n    return m;\n}\n\n/**\n * @private\n * @param cluster1\n * @param cluster2\n * @param disFun\n * @returns {number}\n */\nfunction completeLink(cluster1, cluster2, disFun) {\n    var m = -1;\n    for (var i = 0; i < cluster1.length; i++) {\n        for (var j = 0; j < cluster2.length; j++) {\n            var d = disFun[cluster1[i]][ cluster2[j]];\n            m = Math.max(d, m);\n        }\n    }\n    return m;\n}\n\n/**\n * @private\n * @param cluster1\n * @param cluster2\n * @param disFun\n * @returns {number}\n */\nfunction averageLink(cluster1, cluster2, disFun) {\n    var m = 0;\n    for (var i = 0; i < cluster1.length; i++) {\n        for (var j = 0; j < cluster2.length; j++) {\n            m += disFun[cluster1[i]][ cluster2[j]];\n        }\n    }\n    return m / (cluster1.length * cluster2.length);\n}\n\n/**\n * @private\n * @param cluster1\n * @param cluster2\n * @param disFun\n * @returns {*}\n */\nfunction centroidLink(cluster1, cluster2, disFun) {\n    var dist = new Array(cluster1.length * cluster2.length);\n    for (var i = 0; i < cluster1.length; i++) {\n        for (var j = 0; j < cluster2.length; j++) {\n            dist[i * cluster2.length + j] = (disFun[cluster1[i]][ cluster2[j]]);\n        }\n    }\n    return median(dist);\n}\n\n/**\n * @private\n * @param cluster1\n * @param cluster2\n * @param disFun\n * @returns {number}\n */\nfunction wardLink(cluster1, cluster2, disFun) {\n    return centroidLink(cluster1, cluster2, disFun)\n        * cluster1.length * cluster2.length / (cluster1.length + cluster2.length);\n}\n\nfunction compareNumbers(a, b) {\n    return a - b;\n}\n\nfunction median(values, alreadySorted) {\n    if (alreadySorted === undefined) alreadySorted = false;\n    if (!alreadySorted) {\n        values = [].concat(values).sort(compareNumbers);\n    }\n    var l = values.length;\n    var half = Math.floor(l / 2);\n    if (l % 2 === 0) {\n        return (values[half - 1] + values[half]) * 0.5;\n    } else {\n        return values[half];\n    }\n}\n\nvar defaultOptions = {\n    disFunc: euclidean,\n    kind: 'single',\n    isDistanceMatrix: false\n\n};\n\n/**\n * Continuously merge nodes that have the least dissimilarity\n * @param {Array <Array <number>>} distance - Array of points to be clustered\n * @param {json} options\n * @option isDistanceMatrix: Is the input a distance matrix?\n * @constructor\n */\nfunction agnes(data, options) {\n    options = Object.assign({}, defaultOptions, options);\n    var len = data.length;\n    var distance = data;//If source\n    if (!options.isDistanceMatrix) {\n        distance = distanceMatrix(data, options.disFunc);\n    }\n\n\n    // allows to use a string or a given function\n    if (typeof options.kind === 'string') {\n        switch (options.kind) {\n            case 'single':\n                options.kind = simpleLink;\n                break;\n            case 'complete':\n                options.kind = completeLink;\n                break;\n            case 'average':\n                options.kind = averageLink;\n                break;\n            case 'centroid':\n                options.kind = centroidLink;\n                break;\n            case 'ward':\n                options.kind = wardLink;\n                break;\n            default:\n                throw new RangeError('Unknown kind of similarity');\n        }\n    } else if (typeof options.kind !== 'function') {\n        throw new TypeError('Undefined kind of similarity');\n    }\n\n    var list = new Array(len);\n    for (var i = 0; i < distance.length; i++) {\n        list[i] = new ClusterLeaf(i);\n    }\n    var min = 10e5,\n        d = {},\n        dis = 0;\n\n    while (list.length > 1) {\n        // calculates the minimum distance\n        d = {};\n        min = 10e5;\n        for (var j = 0; j < list.length; j++) {\n            for (var k = j + 1; k < list.length; k++) {\n                var fdistance, sdistance;\n                if (list[j] instanceof ClusterLeaf) {\n                    fdistance = [list[j].index];\n                } else {\n                    fdistance = new Array(list[j].index.length);\n                    for (var e = 0; e < fdistance.length; e++) {\n                        fdistance[e] = list[j].index[e].index;\n                    }\n                }\n                if (list[k] instanceof ClusterLeaf) {\n                    sdistance = [list[k].index];\n                } else {\n                    sdistance = new Array(list[k].index.length);\n                    for (var f = 0; f < sdistance.length; f++) {\n                        sdistance[f] = list[k].index[f].index;\n                    }\n                }\n                dis = options.kind(fdistance, sdistance, distance).toFixed(4);\n                if (dis in d) {\n                    d[dis].push([list[j], list[k]]);\n                } else {\n                    d[dis] = [[list[j], list[k]]];\n                }\n                min = Math.min(dis, min);\n            }\n        }\n        // cluster dots\n        var dmin = d[min.toFixed(4)];\n        var clustered = new Array(dmin.length);\n        var aux,\n            count = 0;\n        while (dmin.length > 0) {\n            aux = dmin.shift();\n            for (var q = 0; q < dmin.length; q++) {\n                var int = dmin[q].filter(function (n) {\n                    //noinspection JSReferencingMutableVariableFromClosure\n                    return aux.indexOf(n) !== -1;\n                });\n                if (int.length > 0) {\n                    var diff = dmin[q].filter(function (n) {\n                        //noinspection JSReferencingMutableVariableFromClosure\n                        return aux.indexOf(n) === -1;\n                    });\n                    aux = aux.concat(diff);\n                    dmin.splice(q--, 1);\n                }\n            }\n            clustered[count++] = aux;\n        }\n        clustered.length = count;\n\n        for (var ii = 0; ii < clustered.length; ii++) {\n            var obj = new Cluster();\n            obj.children = clustered[ii].concat();\n            obj.distance = min;\n            obj.index = new Array(len);\n            var indCount = 0;\n            for (var jj = 0; jj < clustered[ii].length; jj++) {\n                if (clustered[ii][jj] instanceof ClusterLeaf) {\n                    obj.index[indCount++] = clustered[ii][jj];\n                } else {\n                    indCount += clustered[ii][jj].index.length;\n                    obj.index = clustered[ii][jj].index.concat(obj.index);\n                }\n                list.splice((list.indexOf(clustered[ii][jj])), 1);\n            }\n            obj.index.length = indCount;\n            list.push(obj);\n        }\n    }\n    return list[0];\n}\n\nmodule.exports = agnes;\n","module.exports = require('./lib/heap');\n","// Generated by CoffeeScript 1.8.0\n(function() {\n  var Heap, defaultCmp, floor, heapify, heappop, heappush, heappushpop, heapreplace, insort, min, nlargest, nsmallest, updateItem, _siftdown, _siftup;\n\n  floor = Math.floor, min = Math.min;\n\n\n  /*\n  Default comparison function to be used\n   */\n\n  defaultCmp = function(x, y) {\n    if (x < y) {\n      return -1;\n    }\n    if (x > y) {\n      return 1;\n    }\n    return 0;\n  };\n\n\n  /*\n  Insert item x in list a, and keep it sorted assuming a is sorted.\n  \n  If x is already in a, insert it to the right of the rightmost x.\n  \n  Optional args lo (default 0) and hi (default a.length) bound the slice\n  of a to be searched.\n   */\n\n  insort = function(a, x, lo, hi, cmp) {\n    var mid;\n    if (lo == null) {\n      lo = 0;\n    }\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    if (lo < 0) {\n      throw new Error('lo must be non-negative');\n    }\n    if (hi == null) {\n      hi = a.length;\n    }\n    while (lo < hi) {\n      mid = floor((lo + hi) / 2);\n      if (cmp(x, a[mid]) < 0) {\n        hi = mid;\n      } else {\n        lo = mid + 1;\n      }\n    }\n    return ([].splice.apply(a, [lo, lo - lo].concat(x)), x);\n  };\n\n\n  /*\n  Push item onto heap, maintaining the heap invariant.\n   */\n\n  heappush = function(array, item, cmp) {\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    array.push(item);\n    return _siftdown(array, 0, array.length - 1, cmp);\n  };\n\n\n  /*\n  Pop the smallest item off the heap, maintaining the heap invariant.\n   */\n\n  heappop = function(array, cmp) {\n    var lastelt, returnitem;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    lastelt = array.pop();\n    if (array.length) {\n      returnitem = array[0];\n      array[0] = lastelt;\n      _siftup(array, 0, cmp);\n    } else {\n      returnitem = lastelt;\n    }\n    return returnitem;\n  };\n\n\n  /*\n  Pop and return the current smallest value, and add the new item.\n  \n  This is more efficient than heappop() followed by heappush(), and can be\n  more appropriate when using a fixed size heap. Note that the value\n  returned may be larger than item! That constrains reasonable use of\n  this routine unless written as part of a conditional replacement:\n      if item > array[0]\n        item = heapreplace(array, item)\n   */\n\n  heapreplace = function(array, item, cmp) {\n    var returnitem;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    returnitem = array[0];\n    array[0] = item;\n    _siftup(array, 0, cmp);\n    return returnitem;\n  };\n\n\n  /*\n  Fast version of a heappush followed by a heappop.\n   */\n\n  heappushpop = function(array, item, cmp) {\n    var _ref;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    if (array.length && cmp(array[0], item) < 0) {\n      _ref = [array[0], item], item = _ref[0], array[0] = _ref[1];\n      _siftup(array, 0, cmp);\n    }\n    return item;\n  };\n\n\n  /*\n  Transform list into a heap, in-place, in O(array.length) time.\n   */\n\n  heapify = function(array, cmp) {\n    var i, _i, _j, _len, _ref, _ref1, _results, _results1;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    _ref1 = (function() {\n      _results1 = [];\n      for (var _j = 0, _ref = floor(array.length / 2); 0 <= _ref ? _j < _ref : _j > _ref; 0 <= _ref ? _j++ : _j--){ _results1.push(_j); }\n      return _results1;\n    }).apply(this).reverse();\n    _results = [];\n    for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n      i = _ref1[_i];\n      _results.push(_siftup(array, i, cmp));\n    }\n    return _results;\n  };\n\n\n  /*\n  Update the position of the given item in the heap.\n  This function should be called every time the item is being modified.\n   */\n\n  updateItem = function(array, item, cmp) {\n    var pos;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    pos = array.indexOf(item);\n    if (pos === -1) {\n      return;\n    }\n    _siftdown(array, 0, pos, cmp);\n    return _siftup(array, pos, cmp);\n  };\n\n\n  /*\n  Find the n largest elements in a dataset.\n   */\n\n  nlargest = function(array, n, cmp) {\n    var elem, result, _i, _len, _ref;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    result = array.slice(0, n);\n    if (!result.length) {\n      return result;\n    }\n    heapify(result, cmp);\n    _ref = array.slice(n);\n    for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n      elem = _ref[_i];\n      heappushpop(result, elem, cmp);\n    }\n    return result.sort(cmp).reverse();\n  };\n\n\n  /*\n  Find the n smallest elements in a dataset.\n   */\n\n  nsmallest = function(array, n, cmp) {\n    var elem, i, los, result, _i, _j, _len, _ref, _ref1, _results;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    if (n * 10 <= array.length) {\n      result = array.slice(0, n).sort(cmp);\n      if (!result.length) {\n        return result;\n      }\n      los = result[result.length - 1];\n      _ref = array.slice(n);\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        elem = _ref[_i];\n        if (cmp(elem, los) < 0) {\n          insort(result, elem, 0, null, cmp);\n          result.pop();\n          los = result[result.length - 1];\n        }\n      }\n      return result;\n    }\n    heapify(array, cmp);\n    _results = [];\n    for (i = _j = 0, _ref1 = min(n, array.length); 0 <= _ref1 ? _j < _ref1 : _j > _ref1; i = 0 <= _ref1 ? ++_j : --_j) {\n      _results.push(heappop(array, cmp));\n    }\n    return _results;\n  };\n\n  _siftdown = function(array, startpos, pos, cmp) {\n    var newitem, parent, parentpos;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    newitem = array[pos];\n    while (pos > startpos) {\n      parentpos = (pos - 1) >> 1;\n      parent = array[parentpos];\n      if (cmp(newitem, parent) < 0) {\n        array[pos] = parent;\n        pos = parentpos;\n        continue;\n      }\n      break;\n    }\n    return array[pos] = newitem;\n  };\n\n  _siftup = function(array, pos, cmp) {\n    var childpos, endpos, newitem, rightpos, startpos;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    endpos = array.length;\n    startpos = pos;\n    newitem = array[pos];\n    childpos = 2 * pos + 1;\n    while (childpos < endpos) {\n      rightpos = childpos + 1;\n      if (rightpos < endpos && !(cmp(array[childpos], array[rightpos]) < 0)) {\n        childpos = rightpos;\n      }\n      array[pos] = array[childpos];\n      pos = childpos;\n      childpos = 2 * pos + 1;\n    }\n    array[pos] = newitem;\n    return _siftdown(array, startpos, pos, cmp);\n  };\n\n  Heap = (function() {\n    Heap.push = heappush;\n\n    Heap.pop = heappop;\n\n    Heap.replace = heapreplace;\n\n    Heap.pushpop = heappushpop;\n\n    Heap.heapify = heapify;\n\n    Heap.updateItem = updateItem;\n\n    Heap.nlargest = nlargest;\n\n    Heap.nsmallest = nsmallest;\n\n    function Heap(cmp) {\n      this.cmp = cmp != null ? cmp : defaultCmp;\n      this.nodes = [];\n    }\n\n    Heap.prototype.push = function(x) {\n      return heappush(this.nodes, x, this.cmp);\n    };\n\n    Heap.prototype.pop = function() {\n      return heappop(this.nodes, this.cmp);\n    };\n\n    Heap.prototype.peek = function() {\n      return this.nodes[0];\n    };\n\n    Heap.prototype.contains = function(x) {\n      return this.nodes.indexOf(x) !== -1;\n    };\n\n    Heap.prototype.replace = function(x) {\n      return heapreplace(this.nodes, x, this.cmp);\n    };\n\n    Heap.prototype.pushpop = function(x) {\n      return heappushpop(this.nodes, x, this.cmp);\n    };\n\n    Heap.prototype.heapify = function() {\n      return heapify(this.nodes, this.cmp);\n    };\n\n    Heap.prototype.updateItem = function(x) {\n      return updateItem(this.nodes, x, this.cmp);\n    };\n\n    Heap.prototype.clear = function() {\n      return this.nodes = [];\n    };\n\n    Heap.prototype.empty = function() {\n      return this.nodes.length === 0;\n    };\n\n    Heap.prototype.size = function() {\n      return this.nodes.length;\n    };\n\n    Heap.prototype.clone = function() {\n      var heap;\n      heap = new Heap();\n      heap.nodes = this.nodes.slice(0);\n      return heap;\n    };\n\n    Heap.prototype.toArray = function() {\n      return this.nodes.slice(0);\n    };\n\n    Heap.prototype.insert = Heap.prototype.push;\n\n    Heap.prototype.top = Heap.prototype.peek;\n\n    Heap.prototype.front = Heap.prototype.peek;\n\n    Heap.prototype.has = Heap.prototype.contains;\n\n    Heap.prototype.copy = Heap.prototype.clone;\n\n    return Heap;\n\n  })();\n\n  (function(root, factory) {\n    if (typeof define === 'function' && define.amd) {\n      return define([], factory);\n    } else if (typeof exports === 'object') {\n      return module.exports = factory();\n    } else {\n      return root.Heap = factory();\n    }\n  })(this, function() {\n    return Heap;\n  });\n\n}).call(this);\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar getOwnPropertyDescriptors = Object.getOwnPropertyDescriptors ||\n  function getOwnPropertyDescriptors(obj) {\n    var keys = Object.keys(obj);\n    var descriptors = {};\n    for (var i = 0; i < keys.length; i++) {\n      descriptors[keys[i]] = Object.getOwnPropertyDescriptor(obj, keys[i]);\n    }\n    return descriptors;\n  };\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  if (typeof process !== 'undefined' && process.noDeprecation === true) {\n    return fn;\n  }\n\n  // Allow for deprecating things in the process of starting up.\n  if (typeof process === 'undefined') {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nvar kCustomPromisifiedSymbol = typeof Symbol !== 'undefined' ? Symbol('util.promisify.custom') : undefined;\n\nexports.promisify = function promisify(original) {\n  if (typeof original !== 'function')\n    throw new TypeError('The \"original\" argument must be of type Function');\n\n  if (kCustomPromisifiedSymbol && original[kCustomPromisifiedSymbol]) {\n    var fn = original[kCustomPromisifiedSymbol];\n    if (typeof fn !== 'function') {\n      throw new TypeError('The \"util.promisify.custom\" argument must be of type Function');\n    }\n    Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n      value: fn, enumerable: false, writable: false, configurable: true\n    });\n    return fn;\n  }\n\n  function fn() {\n    var promiseResolve, promiseReject;\n    var promise = new Promise(function (resolve, reject) {\n      promiseResolve = resolve;\n      promiseReject = reject;\n    });\n\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n    args.push(function (err, value) {\n      if (err) {\n        promiseReject(err);\n      } else {\n        promiseResolve(value);\n      }\n    });\n\n    try {\n      original.apply(this, args);\n    } catch (err) {\n      promiseReject(err);\n    }\n\n    return promise;\n  }\n\n  Object.setPrototypeOf(fn, Object.getPrototypeOf(original));\n\n  if (kCustomPromisifiedSymbol) Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n    value: fn, enumerable: false, writable: false, configurable: true\n  });\n  return Object.defineProperties(\n    fn,\n    getOwnPropertyDescriptors(original)\n  );\n}\n\nexports.promisify.custom = kCustomPromisifiedSymbol\n\nfunction callbackifyOnRejected(reason, cb) {\n  // `!reason` guard inspired by bluebird (Ref: https://goo.gl/t5IS6M).\n  // Because `null` is a special error value in callbacks which means \"no error\n  // occurred\", we error-wrap so the callback consumer can distinguish between\n  // \"the promise rejected with null\" or \"the promise fulfilled with undefined\".\n  if (!reason) {\n    var newReason = new Error('Promise was rejected with a falsy value');\n    newReason.reason = reason;\n    reason = newReason;\n  }\n  return cb(reason);\n}\n\nfunction callbackify(original) {\n  if (typeof original !== 'function') {\n    throw new TypeError('The \"original\" argument must be of type Function');\n  }\n\n  // We DO NOT return the promise as it gives the user a false sense that\n  // the promise is actually somehow related to the callback's execution\n  // and that the callback throwing will reject the promise.\n  function callbackified() {\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n\n    var maybeCb = args.pop();\n    if (typeof maybeCb !== 'function') {\n      throw new TypeError('The last argument must be of type Function');\n    }\n    var self = this;\n    var cb = function() {\n      return maybeCb.apply(self, arguments);\n    };\n    // In true node style we process the callback on `nextTick` with all the\n    // implications (stack, `uncaughtException`, `async_hooks`)\n    original.apply(this, args)\n      .then(function(ret) { process.nextTick(cb, null, ret) },\n            function(rej) { process.nextTick(callbackifyOnRejected, rej, cb) });\n  }\n\n  Object.setPrototypeOf(callbackified, Object.getPrototypeOf(original));\n  Object.defineProperties(callbackified,\n                          getOwnPropertyDescriptors(original));\n  return callbackified;\n}\nexports.callbackify = callbackify;\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n","'use strict';\n\nconst euclidean = require('ml-distance-euclidean');\nconst ClusterLeaf = require('./ClusterLeaf');\nconst Cluster = require('./Cluster');\n\n/**\n * @private\n * @param {Array <Array <number>>} cluster1\n * @param {Array <Array <number>>} cluster2\n * @param {function} disFun\n * @returns {number}\n */\nfunction simpleLink(cluster1, cluster2, disFun) {\n    var m = 10e100;\n    for (var i = 0; i < cluster1.length; i++) {\n        for (var j = i; j < cluster2.length; j++) {\n            var d = disFun(cluster1[i], cluster2[j]);\n            m = Math.min(d, m);\n        }\n    }\n    return m;\n}\n\n/**\n * @private\n * @param {Array <Array <number>>} cluster1\n * @param {Array <Array <number>>} cluster2\n * @param {function} disFun\n * @returns {number}\n */\nfunction completeLink(cluster1, cluster2, disFun) {\n    var m = -1;\n    for (var i = 0; i < cluster1.length; i++) {\n        for (var j = i; j < cluster2.length; j++) {\n            var d = disFun(cluster1[i], cluster2[j]);\n            m = Math.max(d, m);\n        }\n    }\n    return m;\n}\n\n/**\n * @private\n * @param {Array <Array <number>>} cluster1\n * @param {Array <Array <number>>} cluster2\n * @param {function} disFun\n * @returns {number}\n */\nfunction averageLink(cluster1, cluster2, disFun) {\n    var m = 0;\n    for (var i = 0; i < cluster1.length; i++) {\n        for (var j = 0; j < cluster2.length; j++) {\n            m += disFun(cluster1[i], cluster2[j]);\n        }\n    }\n    return m / (cluster1.length * cluster2.length);\n}\n\n/**\n * @private\n * @param {Array <Array <number>>} cluster1\n * @param {Array <Array <number>>} cluster2\n * @param {function} disFun\n * @returns {number}\n */\nfunction centroidLink(cluster1, cluster2, disFun) {\n    var x1 = 0,\n        y1 = 0,\n        x2 = 0,\n        y2 = 0;\n    for (var i = 0; i < cluster1.length; i++) {\n        x1 += cluster1[i][0];\n        y1 += cluster1[i][1];\n    }\n    for (var j = 0; j < cluster2.length; j++) {\n        x2 += cluster2[j][0];\n        y2 += cluster2[j][1];\n    }\n    x1 /= cluster1.length;\n    y1 /= cluster1.length;\n    x2 /= cluster2.length;\n    y2 /= cluster2.length;\n    return disFun([x1, y1], [x2, y2]);\n}\n\n/**\n * @private\n * @param {Array <Array <number>>} cluster1\n * @param {Array <Array <number>>} cluster2\n * @param {function} disFun\n * @returns {number}\n */\nfunction wardLink(cluster1, cluster2, disFun) {\n    var x1 = 0,\n        y1 = 0,\n        x2 = 0,\n        y2 = 0;\n    for (var i = 0; i < cluster1.length; i++) {\n        x1 += cluster1[i][0];\n        y1 += cluster1[i][1];\n    }\n    for (var j = 0; j < cluster2.length; j++) {\n        x2 += cluster2[j][0];\n        y2 += cluster2[j][1];\n    }\n    x1 /= cluster1.length;\n    y1 /= cluster1.length;\n    x2 /= cluster2.length;\n    y2 /= cluster2.length;\n    return disFun([x1, y1], [x2, y2]) * cluster1.length * cluster2.length / (cluster1.length + cluster2.length);\n}\n\n/**\n * @private\n * Returns the most distant point and his distance\n * @param {Array <Array <number>>} splitting - Clusters to split\n * @param {Array <Array <number>>} data - Original data\n * @param {function} disFun - Distance function\n * @returns {{d: number, p: number}} - d: maximum difference between points, p: the point more distant\n */\nfunction diff(splitting, data, disFun) {\n    var ans = {\n        d: 0,\n        p: 0\n    };\n\n    var Ci = new Array(splitting[0].length);\n    for (var e = 0; e < splitting[0].length; e++) {\n        Ci[e] = data[splitting[0][e]];\n    }\n    var Cj = new Array(splitting[1].length);\n    for (var f = 0; f < splitting[1].length; f++) {\n        Cj[f] = data[splitting[1][f]];\n    }\n\n    var dist, ndist;\n    for (var i = 0; i < Ci.length; i++) {\n        dist = 0;\n        for (var j = 0; j < Ci.length; j++) {\n            if (i !== j) {\n                dist += disFun(Ci[i], Ci[j]);\n            }\n        }\n        dist /= (Ci.length - 1);\n        ndist = 0;\n        for (var k = 0; k < Cj.length; k++) {\n            ndist += disFun(Ci[i], Cj[k]);\n        }\n        ndist /= Cj.length;\n        if ((dist - ndist) > ans.d) {\n            ans.d = (dist - ndist);\n            ans.p = i;\n        }\n    }\n    return ans;\n}\n\nvar defaultOptions = {\n    dist: euclidean,\n    kind: 'single'\n};\n\n/**\n * @private\n * Intra-cluster distance\n * @param {Array} index\n * @param {Array} data\n * @param {function} disFun\n * @returns {number}\n */\nfunction intrDist(index, data, disFun) {\n    var dist = 0,\n        count = 0;\n    for (var i = 0; i < index.length; i++) {\n        for (var j = i; j < index.length; j++) {\n            dist += disFun(data[index[i].index], data[index[j].index]);\n            count++;\n        }\n    }\n    return dist / count;\n}\n\n/**\n * Splits the higher level clusters\n * @param {Array <Array <number>>} data - Array of points to be clustered\n * @param {json} options\n * @constructor\n */\nfunction diana(data, options) {\n    options = Object.assign({}, defaultOptions, options);\n    if (typeof options.kind === 'string') {\n        switch (options.kind) {\n            case 'single':\n                options.kind = simpleLink;\n                break;\n            case 'complete':\n                options.kind = completeLink;\n                break;\n            case 'average':\n                options.kind = averageLink;\n                break;\n            case 'centroid':\n                options.kind = centroidLink;\n                break;\n            case 'ward':\n                options.kind = wardLink;\n                break;\n            default:\n                throw new RangeError('Unknown kind of similarity');\n        }\n    } else if (typeof options.kind !== 'function') {\n        throw new TypeError('Undefined kind of similarity');\n    }\n    var tree = new Cluster();\n    tree.children = new Array(data.length);\n    tree.index = new Array(data.length);\n    for (var ind = 0; ind < data.length; ind++) {\n        tree.children[ind] = new ClusterLeaf(ind);\n        tree.index[ind] = new ClusterLeaf(ind);\n    }\n\n    tree.distance = intrDist(tree.index, data, options.dist);\n    var m, M, clId,\n        dist, rebel;\n    var list = [tree];\n    while (list.length > 0) {\n        M = 0;\n        clId = 0;\n        for (var i = 0; i < list.length; i++) {\n            m = 0;\n            for (var j = 0; j < list[i].length; j++) {\n                for (var l = (j + 1); l < list[i].length; l++) {\n                    m = Math.max(options.dist(data[list[i].index[j].index], data[list[i].index[l].index]), m);\n                }\n            }\n            if (m > M) {\n                M = m;\n                clId = i;\n            }\n        }\n        M = 0;\n        if (list[clId].index.length === 2) {\n            list[clId].children = [list[clId].index[0], list[clId].index[1]];\n            list[clId].distance = options.dist(data[list[clId].index[0].index], data[list[clId].index[1].index]);\n        } else if (list[clId].index.length === 3) {\n            list[clId].children = [list[clId].index[0], list[clId].index[1], list[clId].index[2]];\n            var d = [\n                options.dist(data[list[clId].index[0].index], data[list[clId].index[1].index]),\n                options.dist(data[list[clId].index[1].index], data[list[clId].index[2].index])\n            ];\n            list[clId].distance = (d[0] + d[1]) / 2;\n        } else {\n            var C = new Cluster();\n            var sG = new Cluster();\n            var splitting = [new Array(list[clId].index.length), []];\n            for (var spl = 0; spl < splitting[0].length; spl++) {\n                splitting[0][spl] = spl;\n            }\n            for (var ii = 0; ii < splitting[0].length; ii++) {\n                dist = 0;\n                for (var jj = 0; jj < splitting[0].length; jj++) {\n                    if (ii !== jj) {\n                        dist += options.dist(data[list[clId].index[splitting[0][jj]].index], data[list[clId].index[splitting[0][ii]].index]);\n                    }\n                }\n                dist /= (splitting[0].length - 1);\n                if (dist > M) {\n                    M = dist;\n                    rebel = ii;\n                }\n            }\n            splitting[1] = [rebel];\n            splitting[0].splice(rebel, 1);\n            dist = diff(splitting, data, options.dist);\n            while (dist.d > 0) {\n                splitting[1].push(splitting[0][dist.p]);\n                splitting[0].splice(dist.p, 1);\n                dist = diff(splitting, data, options.dist);\n            }\n            var fData = new Array(splitting[0].length);\n            C.index = new Array(splitting[0].length);\n            for (var e = 0; e < fData.length; e++) {\n                fData[e] = data[list[clId].index[splitting[0][e]].index];\n                C.index[e] = list[clId].index[splitting[0][e]];\n                C.children[e] = list[clId].index[splitting[0][e]];\n            }\n            var sData = new Array(splitting[1].length);\n            sG.index = new Array(splitting[1].length);\n            for (var f = 0; f < sData.length; f++) {\n                sData[f] = data[list[clId].index[splitting[1][f]].index];\n                sG.index[f] = list[clId].index[splitting[1][f]];\n                sG.children[f] = list[clId].index[splitting[1][f]];\n            }\n            C.distance = intrDist(C.index, data, options.dist);\n            sG.distance = intrDist(sG.index, data, options.dist);\n            list.push(C);\n            list.push(sG);\n            list[clId].children = [C, sG];\n        }\n        list.splice(clId, 1);\n    }\n    return tree;\n}\n\nmodule.exports = diana;\n","'use strict';\nconst Kernel = require('ml-kernel');\nconst stat = require('ml-stat').array;\n\nvar defaultOptions = {\n    C: 1,\n    tol: 1e-4,\n    maxPasses: 10,\n    maxIterations: 10000,\n    kernel: 'linear',\n    alphaTol: 1e-6,\n    random: Math.random,\n    whitening: true\n};\n\n/**\n * Simplified version of the Sequential Minimal Optimization algorithm for training\n * support vector machines\n * @param {{Object}} options - SVM options\n * @param {Number} [options.C=1] - regularization parameter\n * @param {Number} [options.tol=1e-4] - numerical tolerance\n * @param {Number} [options.alphaTol=1e-6] - alpha tolerance, threshold to decide support vectors\n * @param {Number} [options.maxPasses=10] - max number of times to iterate over alphas without changing\n * @param {Number} [options.maxIterations=10000] - max number of iterations\n * @param {String} [options.kernel=linear] - the kind of kernel. {@link https://github.com/mljs/kernel/tree/1252de5f9012776e6e0eb06c7b434b8631fb21f0 List of kernels}\n * @param {Function} [options.random=Math.random] - custom random number generator\n * @constructor\n */\nfunction SVM(options) {\n    this.options = Object.assign({}, defaultOptions, options);\n\n    this.kernel = new Kernel(this.options.kernel, this.options.kernelOptions);\n    this.b = 0;\n}\n\n/**\n * Train the SVM model\n * @param {Array <Array <number>>} features - training data features\n * @param {Array <number>} labels - training data labels in the domain {1,-1}\n */\nSVM.prototype.train = function (features, labels) {\n    if (features.length !== labels.length) {\n        throw new Error('Features and labels should have the same length');\n    }\n    if (features.length < 2) {\n        throw new Error('Cannot train with less than 2 observations');\n    }\n    this._trained = false;\n    this._loaded = false;\n    this.N = labels.length;\n    this.D = features[0].length;\n    if (this.options.whitening) {\n        this.X = new Array(this.N);\n        for (var i = 0; i < this.N; i++) {\n            this.X[i] = new Array(this.D);\n        }\n        this.minMax = new Array(this.D);\n        // Apply normalization and keep normalization parameters\n        for (var j = 0; j < this.D; j++) {\n            var d = new Array(this.N);\n            for (i = 0; i < this.N; i++) {\n                d[i] = features[i][j];\n            }\n            this.minMax[j] = stat.minMax(d);\n            for (i = 0; i < this.N; i++) {\n                this.X[i][j] = (features[i][j] - this.minMax[j].min) / (this.minMax[j].max - this.minMax[j].min);\n            }\n        }\n    } else {\n        this.X = features;\n    }\n    this.Y = labels;\n    this.b = 0;\n    this.W = undefined;\n\n    var kernel = this.kernel.compute(this.X);\n    var m = labels.length;\n    var alpha = new Array(m).fill(0);\n    this.alphas = alpha;\n    for (var a = 0; a < m; a++)\n        alpha[a] = 0;\n\n    var b1 = 0,\n        b2 = 0,\n        iter = 0,\n        passes = 0,\n        Ei = 0,\n        Ej = 0,\n        ai = 0,\n        aj = 0,\n        L = 0,\n        H = 0,\n        eta = 0;\n\n    while (passes < this.options.maxPasses && iter < this.options.maxIterations) {\n        var numChange = 0;\n        for (i = 0; i < m; i++) {\n            Ei = this._marginOnePrecomputed(i, kernel) - labels[i];\n            if (labels[i] * Ei < -this.options.tol && alpha[i] < this.options.C || labels[i] * Ei > this.options.tol && alpha[i] > 0) {\n                j = i;\n                while (j === i) j = Math.floor(this.options.random() * m);\n                Ej = this._marginOnePrecomputed(j, kernel) - labels[j];\n                ai = alpha[i];\n                aj = alpha[j];\n                if (labels[i] === labels[j]) {\n                    L = Math.max(0, ai + aj - this.options.C);\n                    H = Math.min(this.options.C, ai + aj);\n                } else  {\n                    L = Math.max(0, aj - ai);\n                    H = Math.min(this.options.C, this.options.C + aj + ai);\n                }\n                if (Math.abs(L - H) < 1e-4) continue;\n\n                eta = 2 * kernel[i][j] - kernel[i][i] - kernel[j][j];\n                if (eta >= 0) continue;\n                var newaj = alpha[j] - labels[j] * (Ei - Ej) / eta;\n                if (newaj > H)\n                    newaj = H;\n                else if (newaj < L)\n                    newaj = L;\n                if (Math.abs(aj - newaj) < 10e-4) continue;\n                alpha[j] = newaj;\n                alpha[i] = alpha[i] + labels[i] * labels[j] * (aj - newaj);\n                b1 = this.b - Ei - labels[i] * (alpha[i] - ai) * kernel[i][i] - labels[j] * (alpha[j] - aj) * kernel[i][j];\n                b2 = this.b - Ej - labels[i] * (alpha[i] - ai) * kernel[i][j] - labels[j] * (alpha[j] - aj) * kernel[j][j];\n                this.b = (b1 + b2) / 2;\n                if (alpha[i] < this.options.C && alpha[i] > 0) this.b = b1;\n                if (alpha[j] < this.options.C && alpha[j] > 0) this.b = b2;\n                numChange += 1;\n            }\n        }\n        iter++;\n        if (numChange === 0)\n            passes += 1;\n        else\n            passes = 0;\n    }\n    if (iter === this.options.maxIterations) {\n        throw new Error('max iterations reached');\n    }\n\n    this.iterations = iter;\n\n    // Compute the weights (useful for fast decision on new test instances when linear SVM)\n    if (this.options.kernel === 'linear') {\n        this.W = new Array(this.D);\n        for (var r = 0; r < this.D; r++) {\n            this.W[r] = 0;\n            for (var w = 0; w < m; w++)\n                this.W[r] += labels[w] * alpha[w] * this.X[w][r];\n        }\n    }\n\n    // Keep only support vectors\n    // It will compute decision on new test instances faster\n    // We also keep the index of the support vectors\n    // in the original data\n    var nX = [];\n    var nY = [];\n    var nAlphas = [];\n    this._supportVectorIdx = [];\n    for (i = 0; i < this.N; i++) {\n        if (this.alphas[i] > this.options.alphaTol) {\n            nX.push(this.X[i]);\n            nY.push(labels[i]);\n            nAlphas.push(this.alphas[i]);\n            this._supportVectorIdx.push(i);\n\n        }\n    }\n    this.X = nX;\n    this.Y = nY;\n    this.N = nX.length;\n    this.alphas = nAlphas;\n\n\n    // A flag to say this SVM has been trained\n    this._trained = true;\n};\n\n/**\n * Get prediction ({-1,1}) given one observation's features.\n * @private\n * @param p The observation's features.\n * @returns {number} Classification result ({-1,1})\n */\nSVM.prototype.predictOne = function (p) {\n    var margin = this.marginOne(p);\n    return margin > 0 ? 1 : -1;\n};\n\n/**\n * Predict the classification outcome of a trained svm given one or several observations' features.\n * @param {Array} features - The observation(s)' features\n * @returns {Array<Number>|Number} An array of {-1, 1} if several observations are given or a number if one observation\n * is given\n */\nSVM.prototype.predict = function (features) {\n    if (!this._trained && !this._loaded) throw new Error('Cannot predict, you need to train the SVM first');\n    if (Array.isArray(features) && Array.isArray(features[0])) {\n        return features.map(this.predictOne.bind(this));\n    } else {\n        return this.predictOne(features);\n    }\n};\n\n/**\n * Get margin given one observation's features\n * @private\n * @param {Array<Number>} features - Features\n * @returns {Number} - The computed margin\n */\nSVM.prototype.marginOne = function (features, noWhitening) {\n    // Apply normalization\n    if (this.options.whitening && !noWhitening) {\n        features = this._applyWhitening(features);\n    }\n    var ans = this.b, i;\n    if (this.options.kernel === 'linear' && this.W) {\n        // Use weights, it's faster\n        for (i = 0; i < this.W.length; i++) {\n            ans += this.W[i] * features[i];\n        }\n    } else {\n        for (i = 0; i < this.N; i++) {\n            ans += this.alphas[i] * this.Y[i] * this.kernel.compute([features], [this.X[i]])[0][0];\n        }\n    }\n    return ans;\n};\n\n\n/**\n * Get a margin using the precomputed kernel. Much faster than normal margin computation\n * @private\n * @param {Number} index - Train data index\n * @param {Array< Array<Number> >} kernel - The precomputed kernel\n * @returns {number} Computed margin\n * @private\n */\nSVM.prototype._marginOnePrecomputed = function (index, kernel) {\n    var ans = this.b, i;\n    for (i = 0; i < this.N; i++) {\n        ans += this.alphas[i] * this.Y[i] * kernel[index][i];\n    }\n    return ans;\n};\n\n\n/**\n * Returns the margin of one or several observations given its features\n * @param {Array <Array<Number> >|Array<Number>} features - Features from on or several observations.\n * @returns {Number|Array} The computed margin. Is an Array if several observations' features given, or a Number if\n * only one observation's features given\n */\nSVM.prototype.margin = function (features) {\n    if (Array.isArray(features)) {\n        return features.map(this.marginOne.bind(this));\n    } else {\n        return this.marginOne(features);\n    }\n};\n\n/**\n * Get support vectors indexes of the trained classifier. WARINNG: this method does not work for svm instances\n * created from {@link #SVM.load load} if linear kernel\n * @returns {Array<Number>} The indices in the training vector of the support vectors\n */\nSVM.prototype.supportVectors = function () {\n    if (!this._trained && !this._loaded) throw new Error('Cannot get support vectors, you need to train the SVM first');\n    if (this._loaded && this.options.kernel === 'linear') throw new Error('Cannot get support vectors from saved linear model, you need to train the SVM to have them');\n    return this._supportVectorIdx;\n};\n\n/**\n * Create a SVM instance from a saved model\n * @param {Object} model -  Object such as returned by a trained SVM instance with {@link #SVM#toJSON toJSON}\n * @returns {SVM} Instance of svm classifier\n */\nSVM.load = function (model) {\n    this._loaded = true;\n    this._trained = false;\n    var svm = new SVM(model.options);\n    if (model.options.kernel === 'linear') {\n        svm.W = model.W.slice();\n        svm.D = svm.W.length;\n    } else {\n        svm.X = model.X.slice();\n        svm.Y = model.Y.slice();\n        svm.alphas = model.alphas.slice();\n        svm.N = svm.X.length;\n        svm.D = svm.X[0].length;\n    }\n    svm.minMax = model.minMax;\n    svm.b = model.b;\n    svm._loaded = true;\n    svm._trained = false;\n    return svm;\n};\n\n/**\n * Export the minimal object that enables to reload the model\n * @returns {Object} Model object that can be reused with {@link #SVM.load load}\n */\nSVM.prototype.toJSON = function () {\n    if (!this._trained && !this._loaded) throw new Error('Cannot export, you need to train the SVM first');\n    var model = {};\n    model.options = Object.assign({}, this.options);\n    model.b = this.b;\n    model.minMax = this.minMax;\n    if (model.options.kernel === 'linear') {\n        model.W = this.W.slice();\n    } else {\n        // Exporting non-linear models is heavier\n        model.X = this.X.slice();\n        model.Y = this.Y.slice();\n        model.alphas = this.alphas.slice();\n    }\n    return model;\n};\n\nSVM.prototype._applyWhitening = function (features) {\n    if (!this.minMax) throw new Error('Could not apply whitening');\n    var whitened = new Array(features.length);\n    for (var j = 0; j < features.length; j++) {\n        whitened[j] = (features[j] - this.minMax[j].min) / (this.minMax[j].max - this.minMax[j].min);\n    }\n    return whitened;\n};\n\nmodule.exports = SVM;\n","'use strict';\n\nconst squaredEuclidean = require('ml-distance-euclidean').squared;\n\nconst defaultOptions = {\n    sigma: 1\n};\n\nclass GaussianKernel {\n    constructor(options) {\n        options = Object.assign({}, defaultOptions, options);\n        this.sigma = options.sigma;\n        this.divisor = 2 * options.sigma * options.sigma;\n    }\n\n    compute(x, y) {\n        const distance = squaredEuclidean(x, y);\n        return Math.exp(-distance / this.divisor);\n    }\n}\n\nmodule.exports = GaussianKernel;\n","'use strict';\n\nconst defaultOptions = {\n    degree: 1,\n    constant: 1,\n    scale: 1\n};\n\nclass PolynomialKernel {\n    constructor(options) {\n        options = Object.assign({}, defaultOptions, options);\n\n        this.degree = options.degree;\n        this.constant = options.constant;\n        this.scale = options.scale;\n    }\n\n    compute(x, y) {\n        var sum = 0;\n        for (var i = 0; i < x.length; i++) {\n            sum += x[i] * y[i];\n        }\n        return Math.pow(this.scale * sum + this.constant, this.degree);\n    }\n}\n\nmodule.exports = PolynomialKernel;\n","'use strict';\n\nconst defaultOptions = {\n    sigma: 1,\n    degree: 1\n};\n\nclass ANOVAKernel {\n    constructor(options) {\n        options = Object.assign({}, defaultOptions, options);\n        this.sigma = options.sigma;\n        this.degree = options.degree;\n    }\n\n    compute(x, y) {\n        var sum = 0;\n        var len = Math.min(x.length, y.length);\n        for (var i = 1; i <= len; ++i) {\n            sum += Math.pow(Math.exp(-this.sigma * Math.pow(Math.pow(x[i - 1], i) -\n                    Math.pow(y[i - 1], i), 2)), this.degree);\n        }\n        return sum;\n    }\n}\n\nmodule.exports = ANOVAKernel;\n","'use strict';\n\nconst squaredEuclidean = require('ml-distance-euclidean').squared;\n\nconst defaultOptions = {\n    sigma: 1\n};\n\nclass CauchyKernel {\n    constructor(options) {\n        options = Object.assign({}, defaultOptions, options);\n        this.sigma = options.sigma;\n    }\n\n    compute(x, y) {\n        return 1 / (1 + squaredEuclidean(x, y) / (this.sigma * this.sigma));\n    }\n}\n\nmodule.exports = CauchyKernel;\n","'use strict';\n\nconst euclidean = require('ml-distance-euclidean');\n\nconst defaultOptions = {\n    sigma: 1\n};\n\nclass ExponentialKernel {\n    constructor(options) {\n        options = Object.assign({}, defaultOptions, options);\n        this.sigma = options.sigma;\n        this.divisor = 2 * options.sigma * options.sigma;\n    }\n\n    compute(x, y) {\n        const distance = euclidean(x, y);\n        return Math.exp(-distance / this.divisor);\n    }\n}\n\nmodule.exports = ExponentialKernel;\n","'use strict';\n\nclass HistogramIntersectionKernel {\n    compute(x, y) {\n        var min = Math.min(x.length, y.length);\n        var sum = 0;\n        for (var i = 0; i < min; ++i) {\n            sum += Math.min(x[i], y[i]);\n        }\n\n        return sum;\n    }\n}\n\nmodule.exports = HistogramIntersectionKernel;\n","'use strict';\n\nconst euclidean = require('ml-distance-euclidean');\n\nconst defaultOptions = {\n    sigma: 1\n};\n\nclass LaplacianKernel {\n    constructor(options) {\n        options = Object.assign({}, defaultOptions, options);\n        this.sigma = options.sigma;\n    }\n\n    compute(x, y) {\n        const distance = euclidean(x, y);\n        return Math.exp(-distance / this.sigma);\n    }\n}\n\nmodule.exports = LaplacianKernel;\n","'use strict';\n\nconst squaredEuclidean = require('ml-distance-euclidean').squared;\n\nconst defaultOptions = {\n    constant: 1\n};\n\nclass MultiquadraticKernel {\n    constructor(options) {\n        options = Object.assign({}, defaultOptions, options);\n        this.constant = options.constant;\n    }\n\n    compute(x, y) {\n        return Math.sqrt(squaredEuclidean(x, y) + this.constant * this.constant);\n    }\n}\n\nmodule.exports = MultiquadraticKernel;\n","'use strict';\n\nconst squaredEuclidean = require('ml-distance-euclidean').squared;\n\nconst defaultOptions = {\n    constant: 1\n};\n\nclass RationalQuadraticKernel {\n    constructor(options) {\n        options = Object.assign({}, defaultOptions, options);\n        this.constant = options.constant;\n    }\n\n    compute(x, y) {\n        const distance = squaredEuclidean(x, y);\n        return 1 - (distance / (distance + this.constant));\n    }\n}\n\nmodule.exports = RationalQuadraticKernel;\n","'use strict';\n\nconst defaultOptions = {\n    alpha: 0.01,\n    constant: -Math.E\n};\n\nclass SigmoidKernel {\n    constructor(options) {\n        options = Object.assign({}, defaultOptions, options);\n        this.alpha = options.alpha;\n        this.constant = options.constant;\n    }\n\n    compute(x, y) {\n        var sum = 0;\n        for (var i = 0; i < x.length; i++) {\n            sum += x[i] * y[i];\n        }\n        return Math.tanh(this.alpha * sum + this.constant);\n    }\n}\n\nmodule.exports = SigmoidKernel;\n","'use strict';\n\nconst ConfusionMatrix = require('ml-confusion-matrix');\n\nconst CV = {};\nconst combinations = require('ml-combinations');\n\n/**\n * Performs a leave-one-out cross-validation (LOO-CV) of the given samples. In LOO-CV, 1 observation is used as the\n * validation set while the rest is used as the training set. This is repeated once for each observation. LOO-CV is a\n * special case of LPO-CV. @see leavePout\n * @param {function} Classifier - The classifier's constructor to use for the cross validation. Expect ml-classifier\n *     api.\n * @param {Array} features - The features for all samples of the data-set\n * @param {Array} labels - The classification class of all samples of the data-set\n * @param {object} classifierOptions - The classifier options with which the classifier should be instantiated.\n * @return {ConfusionMatrix} - The cross-validation confusion matrix\n */\nCV.leaveOneOut = function (Classifier, features, labels, classifierOptions) {\n    if (typeof labels === 'function') {\n        var callback = labels;\n        labels = features;\n        features = Classifier;\n        return CV.leavePOut(features, labels, 1, callback);\n    }\n    return CV.leavePOut(Classifier, features, labels, classifierOptions, 1);\n};\n\n\n/**\n * Performs a leave-p-out cross-validation (LPO-CV) of the given samples. In LPO-CV, p observations are used as the\n * validation set while the rest is used as the training set. This is repeated as many times as there are possible\n * ways to combine p observations from the set (unordered without replacement). Be aware that for relatively small\n * data-set size this can require a very large number of training and testing to do!\n * @param {function} Classifier - The classifier's constructor to use for the cross validation. Expect ml-classifier\n *     api.\n * @param {Array} features - The features for all samples of the data-set\n * @param {Array} labels - The classification class of all samples of the data-set\n * @param {object} classifierOptions - The classifier options with which the classifier should be instantiated.\n * @param {number} p - The size of the validation sub-samples' set\n * @return {ConfusionMatrix} - The cross-validation confusion matrix\n */\nCV.leavePOut = function (Classifier, features, labels, classifierOptions, p) {\n    if (typeof classifierOptions === 'function') {\n        var callback = classifierOptions;\n        p = labels;\n        labels = features;\n        features = Classifier;\n    }\n    check(features, labels);\n    const distinct = getDistinct(labels);\n    const confusionMatrix = initMatrix(distinct.length, distinct.length);\n\n    var N = features.length;\n    var gen = combinations(p, N);\n    var allIdx = new Array(N);\n    for (let i = 0; i < N; i++) {\n        allIdx[i] = i;\n    }\n    for (const testIdx of gen) {\n        var trainIdx = allIdx.slice();\n\n        for (let i = testIdx.length - 1; i >= 0; i--) {\n            trainIdx.splice(testIdx[i], 1);\n        }\n\n        if (callback) {\n            validateWithCallback(features, labels, testIdx, trainIdx, confusionMatrix, distinct, callback);\n        } else {\n            validate(Classifier, features, labels, classifierOptions, testIdx, trainIdx, confusionMatrix, distinct);\n        }\n\n    }\n\n    return new ConfusionMatrix(confusionMatrix, distinct);\n};\n\n/**\n * Performs k-fold cross-validation (KF-CV). KF-CV separates the data-set into k random equally sized partitions, and\n * uses each as a validation set, with all other partitions used in the training set. Observations left over from if k\n * does not divide the number of observations are left out of the cross-validation process.\n * @param {function} Classifier - The classifier's to use for the cross validation. Expect ml-classifier api.\n * @param {Array} features - The features for all samples of the data-set\n * @param {Array} labels - The classification class of all samples of the data-set\n * @param {object} classifierOptions - The classifier options with which the classifier should be instantiated.\n * @param {number} k - The number of partitions to create\n * @return {ConfusionMatrix} - The cross-validation confusion matrix\n */\nCV.kFold = function (Classifier, features, labels, classifierOptions, k) {\n    if (typeof classifierOptions === 'function') {\n        var callback = classifierOptions;\n        k = labels;\n        labels = features;\n        features = Classifier;\n    }\n    check(features, labels);\n    const distinct = getDistinct(labels);\n    const confusionMatrix = initMatrix(distinct.length, distinct.length);\n    var N = features.length;\n    var allIdx = new Array(N);\n    for (var i = 0; i < N; i++) {\n        allIdx[i] = i;\n    }\n\n    var l = Math.floor(N / k);\n    // create random k-folds\n    var current = [];\n    var folds = [];\n    while (allIdx.length) {\n        var randi = Math.floor(Math.random() * allIdx.length);\n        current.push(allIdx[randi]);\n        allIdx.splice(randi, 1);\n        if (current.length === l) {\n            folds.push(current);\n            current = [];\n        }\n    }\n    if (current.length) folds.push(current);\n    folds = folds.slice(0, k);\n\n\n    for (i = 0; i < folds.length; i++) {\n        var testIdx = folds[i];\n        var trainIdx = [];\n        for (var j = 0; j < folds.length; j++) {\n            if (j !== i) trainIdx = trainIdx.concat(folds[j]);\n        }\n\n        if (callback) {\n            validateWithCallback(features, labels, testIdx, trainIdx, confusionMatrix, distinct, callback);\n        } else {\n            validate(Classifier, features, labels, classifierOptions, testIdx, trainIdx, confusionMatrix, distinct);\n        }\n    }\n\n    return new ConfusionMatrix(confusionMatrix, distinct);\n};\n\nfunction check(features, labels) {\n    if (features.length !== labels.length) {\n        throw new Error('features and labels should have the same length');\n    }\n}\n\nfunction initMatrix(rows, columns) {\n    return new Array(rows).fill(0).map(() => new Array(columns).fill(0));\n}\n\nfunction getDistinct(arr) {\n    var s = new Set();\n    for (let i = 0; i < arr.length; i++) {\n        s.add(arr[i]);\n    }\n    return Array.from(s);\n}\n\nfunction validate(Classifier, features, labels, classifierOptions, testIdx, trainIdx, confusionMatrix, distinct) {\n    const {testFeatures, trainFeatures, testLabels, trainLabels} = getTrainTest(features, labels, testIdx, trainIdx);\n\n    var classifier;\n    if (Classifier.prototype.train) {\n        classifier = new Classifier(classifierOptions);\n        classifier.train(trainFeatures, trainLabels);\n    } else {\n        classifier = new Classifier(trainFeatures, trainLabels, classifierOptions);\n    }\n\n    var predictedLabels = classifier.predict(testFeatures);\n    updateConfusionMatrix(confusionMatrix, testLabels, predictedLabels, distinct);\n}\n\nfunction validateWithCallback(features, labels, testIdx, trainIdx, confusionMatrix, distinct, callback) {\n    const {testFeatures, trainFeatures, testLabels, trainLabels} = getTrainTest(features, labels, testIdx, trainIdx);\n    const predictedLabels = callback(trainFeatures, trainLabels, testFeatures);\n    updateConfusionMatrix(confusionMatrix, testLabels, predictedLabels, distinct);\n}\n\nfunction updateConfusionMatrix(confusionMatrix, testLabels, predictedLabels, distinct) {\n\n    for (var i = 0; i < predictedLabels.length; i++) {\n        const actualIdx = distinct.indexOf(testLabels[i]);\n        const predictedIdx = distinct.indexOf(predictedLabels[i]);\n        if (actualIdx < 0 || predictedIdx < 0) {\n            // eslint-disable-next-line no-console\n            console.warn(`ignore unknown predicted label ${predictedLabels[i]}`);\n        }\n        confusionMatrix[actualIdx][predictedIdx]++;\n    }\n}\n\n\nfunction getTrainTest(features, labels, testIdx, trainIdx) {\n    return {\n        testFeatures: testIdx.map(function (index) {\n            return features[index];\n        }),\n        trainFeatures: trainIdx.map(function (index) {\n            return features[index];\n        }),\n        testLabels: testIdx.map(function (index) {\n            return labels[index];\n        }),\n        trainLabels: trainIdx.map(function (index) {\n            return labels[index];\n        })\n    };\n}\n\nmodule.exports = CV;\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(factory());\n}(this, (function () { 'use strict';\n\n\tfunction createCommonjsModule(fn, module) {\n\t\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n\t}\n\n\tvar runtime = createCommonjsModule(function (module) {\n\t/**\n\t * Copyright (c) 2014-present, Facebook, Inc.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\n\t!(function(global) {\n\n\t  var Op = Object.prototype;\n\t  var hasOwn = Op.hasOwnProperty;\n\t  var undefined; // More compressible than void 0.\n\t  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n\t  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n\t  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n\t  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\t  var runtime = global.regeneratorRuntime;\n\t  if (runtime) {\n\t    {\n\t      // If regeneratorRuntime is defined globally and we're in a module,\n\t      // make the exports object identical to regeneratorRuntime.\n\t      module.exports = runtime;\n\t    }\n\t    // Don't bother evaluating the rest of this file if the runtime was\n\t    // already defined globally.\n\t    return;\n\t  }\n\n\t  // Define the runtime globally (as expected by generated code) as either\n\t  // module.exports (if we're in a module) or a new, empty object.\n\t  runtime = global.regeneratorRuntime = module.exports;\n\n\t  function wrap(innerFn, outerFn, self, tryLocsList) {\n\t    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n\t    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n\t    var generator = Object.create(protoGenerator.prototype);\n\t    var context = new Context(tryLocsList || []);\n\n\t    // The ._invoke method unifies the implementations of the .next,\n\t    // .throw, and .return methods.\n\t    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n\t    return generator;\n\t  }\n\t  runtime.wrap = wrap;\n\n\t  // Try/catch helper to minimize deoptimizations. Returns a completion\n\t  // record like context.tryEntries[i].completion. This interface could\n\t  // have been (and was previously) designed to take a closure to be\n\t  // invoked without arguments, but in all the cases we care about we\n\t  // already have an existing method we want to call, so there's no need\n\t  // to create a new function object. We can even get away with assuming\n\t  // the method takes exactly one argument, since that happens to be true\n\t  // in every case, so we don't have to touch the arguments object. The\n\t  // only additional allocation required is the completion record, which\n\t  // has a stable shape and so hopefully should be cheap to allocate.\n\t  function tryCatch(fn, obj, arg) {\n\t    try {\n\t      return { type: \"normal\", arg: fn.call(obj, arg) };\n\t    } catch (err) {\n\t      return { type: \"throw\", arg: err };\n\t    }\n\t  }\n\n\t  var GenStateSuspendedStart = \"suspendedStart\";\n\t  var GenStateSuspendedYield = \"suspendedYield\";\n\t  var GenStateExecuting = \"executing\";\n\t  var GenStateCompleted = \"completed\";\n\n\t  // Returning this object from the innerFn has the same effect as\n\t  // breaking out of the dispatch switch statement.\n\t  var ContinueSentinel = {};\n\n\t  // Dummy constructor functions that we use as the .constructor and\n\t  // .constructor.prototype properties for functions that return Generator\n\t  // objects. For full spec compliance, you may wish to configure your\n\t  // minifier not to mangle the names of these two functions.\n\t  function Generator() {}\n\t  function GeneratorFunction() {}\n\t  function GeneratorFunctionPrototype() {}\n\n\t  // This is a polyfill for %IteratorPrototype% for environments that\n\t  // don't natively support it.\n\t  var IteratorPrototype = {};\n\t  IteratorPrototype[iteratorSymbol] = function () {\n\t    return this;\n\t  };\n\n\t  var getProto = Object.getPrototypeOf;\n\t  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n\t  if (NativeIteratorPrototype &&\n\t      NativeIteratorPrototype !== Op &&\n\t      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n\t    // This environment has a native %IteratorPrototype%; use it instead\n\t    // of the polyfill.\n\t    IteratorPrototype = NativeIteratorPrototype;\n\t  }\n\n\t  var Gp = GeneratorFunctionPrototype.prototype =\n\t    Generator.prototype = Object.create(IteratorPrototype);\n\t  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n\t  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n\t  GeneratorFunctionPrototype[toStringTagSymbol] =\n\t    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n\t  // Helper for defining the .next, .throw, and .return methods of the\n\t  // Iterator interface in terms of a single ._invoke method.\n\t  function defineIteratorMethods(prototype) {\n\t    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n\t      prototype[method] = function(arg) {\n\t        return this._invoke(method, arg);\n\t      };\n\t    });\n\t  }\n\n\t  runtime.isGeneratorFunction = function(genFun) {\n\t    var ctor = typeof genFun === \"function\" && genFun.constructor;\n\t    return ctor\n\t      ? ctor === GeneratorFunction ||\n\t        // For the native GeneratorFunction constructor, the best we can\n\t        // do is to check its .name property.\n\t        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n\t      : false;\n\t  };\n\n\t  runtime.mark = function(genFun) {\n\t    if (Object.setPrototypeOf) {\n\t      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n\t    } else {\n\t      genFun.__proto__ = GeneratorFunctionPrototype;\n\t      if (!(toStringTagSymbol in genFun)) {\n\t        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n\t      }\n\t    }\n\t    genFun.prototype = Object.create(Gp);\n\t    return genFun;\n\t  };\n\n\t  // Within the body of any async function, `await x` is transformed to\n\t  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n\t  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n\t  // meant to be awaited.\n\t  runtime.awrap = function(arg) {\n\t    return { __await: arg };\n\t  };\n\n\t  function AsyncIterator(generator) {\n\t    function invoke(method, arg, resolve, reject) {\n\t      var record = tryCatch(generator[method], generator, arg);\n\t      if (record.type === \"throw\") {\n\t        reject(record.arg);\n\t      } else {\n\t        var result = record.arg;\n\t        var value = result.value;\n\t        if (value &&\n\t            typeof value === \"object\" &&\n\t            hasOwn.call(value, \"__await\")) {\n\t          return Promise.resolve(value.__await).then(function(value) {\n\t            invoke(\"next\", value, resolve, reject);\n\t          }, function(err) {\n\t            invoke(\"throw\", err, resolve, reject);\n\t          });\n\t        }\n\n\t        return Promise.resolve(value).then(function(unwrapped) {\n\t          // When a yielded Promise is resolved, its final value becomes\n\t          // the .value of the Promise<{value,done}> result for the\n\t          // current iteration. If the Promise is rejected, however, the\n\t          // result for this iteration will be rejected with the same\n\t          // reason. Note that rejections of yielded Promises are not\n\t          // thrown back into the generator function, as is the case\n\t          // when an awaited Promise is rejected. This difference in\n\t          // behavior between yield and await is important, because it\n\t          // allows the consumer to decide what to do with the yielded\n\t          // rejection (swallow it and continue, manually .throw it back\n\t          // into the generator, abandon iteration, whatever). With\n\t          // await, by contrast, there is no opportunity to examine the\n\t          // rejection reason outside the generator function, so the\n\t          // only option is to throw it from the await expression, and\n\t          // let the generator function handle the exception.\n\t          result.value = unwrapped;\n\t          resolve(result);\n\t        }, reject);\n\t      }\n\t    }\n\n\t    var previousPromise;\n\n\t    function enqueue(method, arg) {\n\t      function callInvokeWithMethodAndArg() {\n\t        return new Promise(function(resolve, reject) {\n\t          invoke(method, arg, resolve, reject);\n\t        });\n\t      }\n\n\t      return previousPromise =\n\t        // If enqueue has been called before, then we want to wait until\n\t        // all previous Promises have been resolved before calling invoke,\n\t        // so that results are always delivered in the correct order. If\n\t        // enqueue has not been called before, then it is important to\n\t        // call invoke immediately, without waiting on a callback to fire,\n\t        // so that the async generator function has the opportunity to do\n\t        // any necessary setup in a predictable way. This predictability\n\t        // is why the Promise constructor synchronously invokes its\n\t        // executor callback, and why async functions synchronously\n\t        // execute code before the first await. Since we implement simple\n\t        // async functions in terms of async generators, it is especially\n\t        // important to get this right, even though it requires care.\n\t        previousPromise ? previousPromise.then(\n\t          callInvokeWithMethodAndArg,\n\t          // Avoid propagating failures to Promises returned by later\n\t          // invocations of the iterator.\n\t          callInvokeWithMethodAndArg\n\t        ) : callInvokeWithMethodAndArg();\n\t    }\n\n\t    // Define the unified helper method that is used to implement .next,\n\t    // .throw, and .return (see defineIteratorMethods).\n\t    this._invoke = enqueue;\n\t  }\n\n\t  defineIteratorMethods(AsyncIterator.prototype);\n\t  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n\t    return this;\n\t  };\n\t  runtime.AsyncIterator = AsyncIterator;\n\n\t  // Note that simple async functions are implemented on top of\n\t  // AsyncIterator objects; they just return a Promise for the value of\n\t  // the final result produced by the iterator.\n\t  runtime.async = function(innerFn, outerFn, self, tryLocsList) {\n\t    var iter = new AsyncIterator(\n\t      wrap(innerFn, outerFn, self, tryLocsList)\n\t    );\n\n\t    return runtime.isGeneratorFunction(outerFn)\n\t      ? iter // If outerFn is a generator, return the full iterator.\n\t      : iter.next().then(function(result) {\n\t          return result.done ? result.value : iter.next();\n\t        });\n\t  };\n\n\t  function makeInvokeMethod(innerFn, self, context) {\n\t    var state = GenStateSuspendedStart;\n\n\t    return function invoke(method, arg) {\n\t      if (state === GenStateExecuting) {\n\t        throw new Error(\"Generator is already running\");\n\t      }\n\n\t      if (state === GenStateCompleted) {\n\t        if (method === \"throw\") {\n\t          throw arg;\n\t        }\n\n\t        // Be forgiving, per 25.3.3.3.3 of the spec:\n\t        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n\t        return doneResult();\n\t      }\n\n\t      context.method = method;\n\t      context.arg = arg;\n\n\t      while (true) {\n\t        var delegate = context.delegate;\n\t        if (delegate) {\n\t          var delegateResult = maybeInvokeDelegate(delegate, context);\n\t          if (delegateResult) {\n\t            if (delegateResult === ContinueSentinel) continue;\n\t            return delegateResult;\n\t          }\n\t        }\n\n\t        if (context.method === \"next\") {\n\t          // Setting context._sent for legacy support of Babel's\n\t          // function.sent implementation.\n\t          context.sent = context._sent = context.arg;\n\n\t        } else if (context.method === \"throw\") {\n\t          if (state === GenStateSuspendedStart) {\n\t            state = GenStateCompleted;\n\t            throw context.arg;\n\t          }\n\n\t          context.dispatchException(context.arg);\n\n\t        } else if (context.method === \"return\") {\n\t          context.abrupt(\"return\", context.arg);\n\t        }\n\n\t        state = GenStateExecuting;\n\n\t        var record = tryCatch(innerFn, self, context);\n\t        if (record.type === \"normal\") {\n\t          // If an exception is thrown from innerFn, we leave state ===\n\t          // GenStateExecuting and loop back for another invocation.\n\t          state = context.done\n\t            ? GenStateCompleted\n\t            : GenStateSuspendedYield;\n\n\t          if (record.arg === ContinueSentinel) {\n\t            continue;\n\t          }\n\n\t          return {\n\t            value: record.arg,\n\t            done: context.done\n\t          };\n\n\t        } else if (record.type === \"throw\") {\n\t          state = GenStateCompleted;\n\t          // Dispatch the exception by looping back around to the\n\t          // context.dispatchException(context.arg) call above.\n\t          context.method = \"throw\";\n\t          context.arg = record.arg;\n\t        }\n\t      }\n\t    };\n\t  }\n\n\t  // Call delegate.iterator[context.method](context.arg) and handle the\n\t  // result, either by returning a { value, done } result from the\n\t  // delegate iterator, or by modifying context.method and context.arg,\n\t  // setting context.delegate to null, and returning the ContinueSentinel.\n\t  function maybeInvokeDelegate(delegate, context) {\n\t    var method = delegate.iterator[context.method];\n\t    if (method === undefined) {\n\t      // A .throw or .return when the delegate iterator has no .throw\n\t      // method always terminates the yield* loop.\n\t      context.delegate = null;\n\n\t      if (context.method === \"throw\") {\n\t        if (delegate.iterator.return) {\n\t          // If the delegate iterator has a return method, give it a\n\t          // chance to clean up.\n\t          context.method = \"return\";\n\t          context.arg = undefined;\n\t          maybeInvokeDelegate(delegate, context);\n\n\t          if (context.method === \"throw\") {\n\t            // If maybeInvokeDelegate(context) changed context.method from\n\t            // \"return\" to \"throw\", let that override the TypeError below.\n\t            return ContinueSentinel;\n\t          }\n\t        }\n\n\t        context.method = \"throw\";\n\t        context.arg = new TypeError(\n\t          \"The iterator does not provide a 'throw' method\");\n\t      }\n\n\t      return ContinueSentinel;\n\t    }\n\n\t    var record = tryCatch(method, delegate.iterator, context.arg);\n\n\t    if (record.type === \"throw\") {\n\t      context.method = \"throw\";\n\t      context.arg = record.arg;\n\t      context.delegate = null;\n\t      return ContinueSentinel;\n\t    }\n\n\t    var info = record.arg;\n\n\t    if (! info) {\n\t      context.method = \"throw\";\n\t      context.arg = new TypeError(\"iterator result is not an object\");\n\t      context.delegate = null;\n\t      return ContinueSentinel;\n\t    }\n\n\t    if (info.done) {\n\t      // Assign the result of the finished delegate to the temporary\n\t      // variable specified by delegate.resultName (see delegateYield).\n\t      context[delegate.resultName] = info.value;\n\n\t      // Resume execution at the desired location (see delegateYield).\n\t      context.next = delegate.nextLoc;\n\n\t      // If context.method was \"throw\" but the delegate handled the\n\t      // exception, let the outer generator proceed normally. If\n\t      // context.method was \"next\", forget context.arg since it has been\n\t      // \"consumed\" by the delegate iterator. If context.method was\n\t      // \"return\", allow the original .return call to continue in the\n\t      // outer generator.\n\t      if (context.method !== \"return\") {\n\t        context.method = \"next\";\n\t        context.arg = undefined;\n\t      }\n\n\t    } else {\n\t      // Re-yield the result returned by the delegate method.\n\t      return info;\n\t    }\n\n\t    // The delegate iterator is finished, so forget it and continue with\n\t    // the outer generator.\n\t    context.delegate = null;\n\t    return ContinueSentinel;\n\t  }\n\n\t  // Define Generator.prototype.{next,throw,return} in terms of the\n\t  // unified ._invoke helper method.\n\t  defineIteratorMethods(Gp);\n\n\t  Gp[toStringTagSymbol] = \"Generator\";\n\n\t  // A Generator should always return itself as the iterator object when the\n\t  // @@iterator function is called on it. Some browsers' implementations of the\n\t  // iterator prototype chain incorrectly implement this, causing the Generator\n\t  // object to not be returned from this call. This ensures that doesn't happen.\n\t  // See https://github.com/facebook/regenerator/issues/274 for more details.\n\t  Gp[iteratorSymbol] = function() {\n\t    return this;\n\t  };\n\n\t  Gp.toString = function() {\n\t    return \"[object Generator]\";\n\t  };\n\n\t  function pushTryEntry(locs) {\n\t    var entry = { tryLoc: locs[0] };\n\n\t    if (1 in locs) {\n\t      entry.catchLoc = locs[1];\n\t    }\n\n\t    if (2 in locs) {\n\t      entry.finallyLoc = locs[2];\n\t      entry.afterLoc = locs[3];\n\t    }\n\n\t    this.tryEntries.push(entry);\n\t  }\n\n\t  function resetTryEntry(entry) {\n\t    var record = entry.completion || {};\n\t    record.type = \"normal\";\n\t    delete record.arg;\n\t    entry.completion = record;\n\t  }\n\n\t  function Context(tryLocsList) {\n\t    // The root entry object (effectively a try statement without a catch\n\t    // or a finally block) gives us a place to store values thrown from\n\t    // locations where there is no enclosing try statement.\n\t    this.tryEntries = [{ tryLoc: \"root\" }];\n\t    tryLocsList.forEach(pushTryEntry, this);\n\t    this.reset(true);\n\t  }\n\n\t  runtime.keys = function(object) {\n\t    var keys = [];\n\t    for (var key in object) {\n\t      keys.push(key);\n\t    }\n\t    keys.reverse();\n\n\t    // Rather than returning an object with a next method, we keep\n\t    // things simple and return the next function itself.\n\t    return function next() {\n\t      while (keys.length) {\n\t        var key = keys.pop();\n\t        if (key in object) {\n\t          next.value = key;\n\t          next.done = false;\n\t          return next;\n\t        }\n\t      }\n\n\t      // To avoid creating an additional object, we just hang the .value\n\t      // and .done properties off the next function object itself. This\n\t      // also ensures that the minifier will not anonymize the function.\n\t      next.done = true;\n\t      return next;\n\t    };\n\t  };\n\n\t  function values(iterable) {\n\t    if (iterable) {\n\t      var iteratorMethod = iterable[iteratorSymbol];\n\t      if (iteratorMethod) {\n\t        return iteratorMethod.call(iterable);\n\t      }\n\n\t      if (typeof iterable.next === \"function\") {\n\t        return iterable;\n\t      }\n\n\t      if (!isNaN(iterable.length)) {\n\t        var i = -1, next = function next() {\n\t          while (++i < iterable.length) {\n\t            if (hasOwn.call(iterable, i)) {\n\t              next.value = iterable[i];\n\t              next.done = false;\n\t              return next;\n\t            }\n\t          }\n\n\t          next.value = undefined;\n\t          next.done = true;\n\n\t          return next;\n\t        };\n\n\t        return next.next = next;\n\t      }\n\t    }\n\n\t    // Return an iterator with no values.\n\t    return { next: doneResult };\n\t  }\n\t  runtime.values = values;\n\n\t  function doneResult() {\n\t    return { value: undefined, done: true };\n\t  }\n\n\t  Context.prototype = {\n\t    constructor: Context,\n\n\t    reset: function(skipTempReset) {\n\t      this.prev = 0;\n\t      this.next = 0;\n\t      // Resetting context._sent for legacy support of Babel's\n\t      // function.sent implementation.\n\t      this.sent = this._sent = undefined;\n\t      this.done = false;\n\t      this.delegate = null;\n\n\t      this.method = \"next\";\n\t      this.arg = undefined;\n\n\t      this.tryEntries.forEach(resetTryEntry);\n\n\t      if (!skipTempReset) {\n\t        for (var name in this) {\n\t          // Not sure about the optimal order of these conditions:\n\t          if (name.charAt(0) === \"t\" &&\n\t              hasOwn.call(this, name) &&\n\t              !isNaN(+name.slice(1))) {\n\t            this[name] = undefined;\n\t          }\n\t        }\n\t      }\n\t    },\n\n\t    stop: function() {\n\t      this.done = true;\n\n\t      var rootEntry = this.tryEntries[0];\n\t      var rootRecord = rootEntry.completion;\n\t      if (rootRecord.type === \"throw\") {\n\t        throw rootRecord.arg;\n\t      }\n\n\t      return this.rval;\n\t    },\n\n\t    dispatchException: function(exception) {\n\t      if (this.done) {\n\t        throw exception;\n\t      }\n\n\t      var context = this;\n\t      function handle(loc, caught) {\n\t        record.type = \"throw\";\n\t        record.arg = exception;\n\t        context.next = loc;\n\n\t        if (caught) {\n\t          // If the dispatched exception was caught by a catch block,\n\t          // then let that catch block handle the exception normally.\n\t          context.method = \"next\";\n\t          context.arg = undefined;\n\t        }\n\n\t        return !! caught;\n\t      }\n\n\t      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n\t        var entry = this.tryEntries[i];\n\t        var record = entry.completion;\n\n\t        if (entry.tryLoc === \"root\") {\n\t          // Exception thrown outside of any try block that could handle\n\t          // it, so set the completion value of the entire function to\n\t          // throw the exception.\n\t          return handle(\"end\");\n\t        }\n\n\t        if (entry.tryLoc <= this.prev) {\n\t          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n\t          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n\t          if (hasCatch && hasFinally) {\n\t            if (this.prev < entry.catchLoc) {\n\t              return handle(entry.catchLoc, true);\n\t            } else if (this.prev < entry.finallyLoc) {\n\t              return handle(entry.finallyLoc);\n\t            }\n\n\t          } else if (hasCatch) {\n\t            if (this.prev < entry.catchLoc) {\n\t              return handle(entry.catchLoc, true);\n\t            }\n\n\t          } else if (hasFinally) {\n\t            if (this.prev < entry.finallyLoc) {\n\t              return handle(entry.finallyLoc);\n\t            }\n\n\t          } else {\n\t            throw new Error(\"try statement without catch or finally\");\n\t          }\n\t        }\n\t      }\n\t    },\n\n\t    abrupt: function(type, arg) {\n\t      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n\t        var entry = this.tryEntries[i];\n\t        if (entry.tryLoc <= this.prev &&\n\t            hasOwn.call(entry, \"finallyLoc\") &&\n\t            this.prev < entry.finallyLoc) {\n\t          var finallyEntry = entry;\n\t          break;\n\t        }\n\t      }\n\n\t      if (finallyEntry &&\n\t          (type === \"break\" ||\n\t           type === \"continue\") &&\n\t          finallyEntry.tryLoc <= arg &&\n\t          arg <= finallyEntry.finallyLoc) {\n\t        // Ignore the finally entry if control is not jumping to a\n\t        // location outside the try/catch block.\n\t        finallyEntry = null;\n\t      }\n\n\t      var record = finallyEntry ? finallyEntry.completion : {};\n\t      record.type = type;\n\t      record.arg = arg;\n\n\t      if (finallyEntry) {\n\t        this.method = \"next\";\n\t        this.next = finallyEntry.finallyLoc;\n\t        return ContinueSentinel;\n\t      }\n\n\t      return this.complete(record);\n\t    },\n\n\t    complete: function(record, afterLoc) {\n\t      if (record.type === \"throw\") {\n\t        throw record.arg;\n\t      }\n\n\t      if (record.type === \"break\" ||\n\t          record.type === \"continue\") {\n\t        this.next = record.arg;\n\t      } else if (record.type === \"return\") {\n\t        this.rval = this.arg = record.arg;\n\t        this.method = \"return\";\n\t        this.next = \"end\";\n\t      } else if (record.type === \"normal\" && afterLoc) {\n\t        this.next = afterLoc;\n\t      }\n\n\t      return ContinueSentinel;\n\t    },\n\n\t    finish: function(finallyLoc) {\n\t      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n\t        var entry = this.tryEntries[i];\n\t        if (entry.finallyLoc === finallyLoc) {\n\t          this.complete(entry.completion, entry.afterLoc);\n\t          resetTryEntry(entry);\n\t          return ContinueSentinel;\n\t        }\n\t      }\n\t    },\n\n\t    \"catch\": function(tryLoc) {\n\t      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n\t        var entry = this.tryEntries[i];\n\t        if (entry.tryLoc === tryLoc) {\n\t          var record = entry.completion;\n\t          if (record.type === \"throw\") {\n\t            var thrown = record.arg;\n\t            resetTryEntry(entry);\n\t          }\n\t          return thrown;\n\t        }\n\t      }\n\n\t      // The context.catch method must only be called with a location\n\t      // argument that corresponds to a known catch block.\n\t      throw new Error(\"illegal catch attempt\");\n\t    },\n\n\t    delegateYield: function(iterable, resultName, nextLoc) {\n\t      this.delegate = {\n\t        iterator: values(iterable),\n\t        resultName: resultName,\n\t        nextLoc: nextLoc\n\t      };\n\n\t      if (this.method === \"next\") {\n\t        // Deliberately forget the last sent value so that we don't\n\t        // accidentally pass it on to the delegate.\n\t        this.arg = undefined;\n\t      }\n\n\t      return ContinueSentinel;\n\t    }\n\t  };\n\t})(\n\t  // In sloppy mode, unbound `this` refers to the global object, fallback to\n\t  // Function constructor if we're in global strict mode. That is sadly a form\n\t  // of indirect eval which violates Content Security Policy.\n\t  (function() { return this })() || Function(\"return this\")()\n\t);\n\t});\n\n\t/**\n\t * Copyright (c) 2014-present, Facebook, Inc.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\n\t// This method of obtaining a reference to the global object needs to be\n\t// kept identical to the way it is obtained in runtime.js\n\tvar g = (function() { return this })() || Function(\"return this\")();\n\n\t// Use `getOwnPropertyNames` because not all browsers support calling\n\t// `hasOwnProperty` on the global `self` object in a worker. See #183.\n\tvar hadRuntime = g.regeneratorRuntime &&\n\t  Object.getOwnPropertyNames(g).indexOf(\"regeneratorRuntime\") >= 0;\n\n\t// Save the old regeneratorRuntime in case it needs to be restored later.\n\tvar oldRuntime = hadRuntime && g.regeneratorRuntime;\n\n\t// Force reevalutation of runtime.js.\n\tg.regeneratorRuntime = undefined;\n\n\tvar runtimeModule = runtime;\n\n\tif (hadRuntime) {\n\t  // Restore the original runtime.\n\t  g.regeneratorRuntime = oldRuntime;\n\t} else {\n\t  // Remove the global property added by runtime.js.\n\t  try {\n\t    delete g.regeneratorRuntime;\n\t  } catch(e) {\n\t    g.regeneratorRuntime = undefined;\n\t  }\n\t}\n\n\tvar regenerator = runtimeModule;\n\n\tvar defaultOptions = {\n\t  mode: 'index'\n\t};\n\n\tmodule.exports = /*#__PURE__*/regenerator.mark(function _callee(M, N, options) {\n\t  var a, c, b, p, x, y, z, i, twiddle;\n\t  return regenerator.wrap(function _callee$(_context) {\n\t    while (1) {\n\t      switch (_context.prev = _context.next) {\n\t        case 0:\n\t          twiddle = function twiddle() {\n\t            var i, j, k;\n\t            j = 1;\n\t            while (p[j] <= 0) {\n\t              j++;\n\t            }\n\t            if (p[j - 1] === 0) {\n\t              for (i = j - 1; i !== 1; i--) {\n\t                p[i] = -1;\n\t              }\n\t              p[j] = 0;\n\t              x = z = 0;\n\t              p[1] = 1;\n\t              y = j - 1;\n\t            } else {\n\t              if (j > 1) {\n\t                p[j - 1] = 0;\n\t              }\n\t              do {\n\t                j++;\n\t              } while (p[j] > 0);\n\t              k = j - 1;\n\t              i = j;\n\t              while (p[i] === 0) {\n\t                p[i++] = -1;\n\t              }\n\t              if (p[i] === -1) {\n\t                p[i] = p[k];\n\t                z = p[k] - 1;\n\t                x = i - 1;\n\t                y = k - 1;\n\t                p[k] = -1;\n\t              } else {\n\t                if (i === p[0]) {\n\t                  return 0;\n\t                } else {\n\t                  p[j] = p[i];\n\t                  z = p[i] - 1;\n\t                  p[i] = 0;\n\t                  x = j - 1;\n\t                  y = i - 1;\n\t                }\n\t              }\n\t            }\n\t            return 1;\n\t          };\n\n\t          options = Object.assign({}, defaultOptions, options);\n\t          a = new Array(N);\n\t          c = new Array(M);\n\t          b = new Array(N);\n\t          p = new Array(N + 2);\n\n\n\t          // init a and b\n\t          for (i = 0; i < N; i++) {\n\t            a[i] = i;\n\t            if (i < N - M) b[i] = 0;else b[i] = 1;\n\t          }\n\n\t          // init c\n\t          for (i = 0; i < M; i++) {\n\t            c[i] = N - M + i;\n\t          }\n\n\t          // init p\n\t          for (i = 0; i < p.length; i++) {\n\t            if (i === 0) p[i] = N + 1;else if (i <= N - M) p[i] = 0;else if (i <= N) p[i] = i - N + M;else p[i] = -2;\n\t          }\n\n\t          if (!(options.mode === 'index')) {\n\t            _context.next = 20;\n\t            break;\n\t          }\n\n\t          _context.next = 12;\n\t          return c.slice();\n\n\t        case 12:\n\t          if (!twiddle()) {\n\t            _context.next = 18;\n\t            break;\n\t          }\n\n\t          c[z] = a[x];\n\t          _context.next = 16;\n\t          return c.slice();\n\n\t        case 16:\n\t          _context.next = 12;\n\t          break;\n\n\t        case 18:\n\t          _context.next = 33;\n\t          break;\n\n\t        case 20:\n\t          if (!(options.mode === 'mask')) {\n\t            _context.next = 32;\n\t            break;\n\t          }\n\n\t          _context.next = 23;\n\t          return b.slice();\n\n\t        case 23:\n\t          if (!twiddle()) {\n\t            _context.next = 30;\n\t            break;\n\t          }\n\n\t          b[x] = 1;\n\t          b[y] = 0;\n\t          _context.next = 28;\n\t          return b.slice();\n\n\t        case 28:\n\t          _context.next = 23;\n\t          break;\n\n\t        case 30:\n\t          _context.next = 33;\n\t          break;\n\n\t        case 32:\n\t          throw new Error('Invalid mode');\n\n\t        case 33:\n\t        case 'end':\n\t          return _context.stop();\n\t      }\n\t    }\n\t  }, _callee, this);\n\t});\n\n})));\n","'use strict';\n\nconst Matrix = require('ml-matrix').Matrix;\n\nconst Layer = require('./Layer');\nconst OutputLayer = require('./OutputLayer');\nconst Utils = require('./utils');\nconst ACTIVATION_FUNCTIONS = require('./activationFunctions');\n\nclass FeedForwardNeuralNetworks {\n\n    /**\n     * Create a new Feedforword neural network model.\n     * @class FeedForwardNeuralNetworks\n     * @param {object} [options]\n     * @param {Array} [options.hiddenLayers=[10]] - Array that contains the sizes of the hidden layers.\n     * @param {number} [options.iterations=50] - Number of iterations at the training step.\n     * @param {number} [options.learningRate=0.01] - Learning rate of the neural net (also known as epsilon).\n     * @param {number} [options.regularization=0.01] - Regularization parameter af the neural net.\n     * @param {string} [options.activation='tanh'] - activation function to be used. (options: 'tanh'(default),\n     * 'identity', 'logistic', 'arctan', 'softsign', 'relu', 'softplus', 'bent', 'sinusoid', 'sinc', 'gaussian').\n     * (single-parametric options: 'parametric-relu', 'exponential-relu', 'soft-exponential').\n     * @param {number} [options.activationParam=1] - if the selected activation function needs a parameter.\n     */\n    constructor(options) {\n        options = options || {};\n        if (options.model) {\n            // load network\n            this.hiddenLayers = options.hiddenLayers;\n            this.iterations = options.iterations;\n            this.learningRate = options.learningRate;\n            this.regularization = options.regularization;\n            this.dicts = options.dicts;\n            this.activation = options.activation;\n            this.activationParam = options.activationParam;\n            this.model = new Array(options.layers.length);\n\n            for (var i = 0; i < this.model.length - 1; ++i) {\n                this.model[i] = Layer.load(options.layers[i]);\n            }\n            this.model[this.model.length - 1] = OutputLayer.load(options.layers[this.model.length - 1]);\n        } else {\n            // default constructor\n            this.hiddenLayers = options.hiddenLayers || [10];\n            this.iterations = options.iterations || 50;\n\n            this.learningRate = options.learningRate || 0.01;\n            this.regularization = options.regularization || 0.01;\n\n            this.activation = options.activation || 'tanh';\n            this.activationParam = options.activationParam || 1;\n            if (!(this.activation in Object.keys(ACTIVATION_FUNCTIONS))) {\n                this.activation = 'tanh';\n            }\n        }\n    }\n\n    /**\n     * @private\n     * Function that build and initialize the neural net.\n     * @param {number} inputSize - total of features to fit.\n     * @param {number} outputSize - total of labels of the prediction set.\n     */\n    buildNetwork(inputSize, outputSize) {\n        var size = 2 + (this.hiddenLayers.length - 1);\n        this.model = new Array(size);\n\n        // input layer\n        this.model[0] = new Layer({\n            inputSize: inputSize,\n            outputSize: this.hiddenLayers[0],\n            activation: this.activation,\n            activationParam: this.activationParam,\n            regularization: this.regularization,\n            epsilon: this.learningRate\n        });\n\n        // hidden layers\n        for (var i = 1; i < this.hiddenLayers.length; ++i) {\n            this.model[i] = new Layer({\n                inputSize: this.hiddenLayers[i - 1],\n                outputSize: this.hiddenLayers[i],\n                activation: this.activation,\n                activationParam: this.activationParam,\n                regularization: this.regularization,\n                epsilon: this.learningRate\n            });\n        }\n\n        // output layer\n        this.model[size - 1] = new OutputLayer({\n            inputSize: this.hiddenLayers[this.hiddenLayers.length - 1],\n            outputSize: outputSize,\n            activation: this.activation,\n            activationParam: this.activationParam,\n            regularization: this.regularization,\n            epsilon: this.learningRate\n        });\n    }\n\n    /**\n     * Train the neural net with the given features and labels.\n     * @param {Matrix|Array} features\n     * @param {Matrix|Array} labels\n     */\n    train(features, labels) {\n        features = Matrix.checkMatrix(features);\n        this.dicts = Utils.dictOutputs(labels);\n\n        var inputSize = features.columns;\n        var outputSize = Object.keys(this.dicts.inputs).length;\n\n        this.buildNetwork(inputSize, outputSize);\n\n        for (var i = 0; i < this.iterations; ++i) {\n            var probabilities = this.propagate(features);\n            this.backpropagation(features, labels, probabilities);\n        }\n    }\n\n    /**\n     * @private\n     * Propagate the input(training set) and retrives the probabilities of each class.\n     * @param {Matrix} X\n     * @return {Matrix} probabilities of each class.\n     */\n    propagate(X) {\n        var input = X;\n        for (var i = 0; i < this.model.length; ++i) {\n            //console.log(i);\n            input = this.model[i].forward(input);\n        }\n\n        // get probabilities\n        return input.divColumnVector(Utils.sumRow(input));\n    }\n\n    /**\n     * @private\n     * Function that applies the backpropagation algorithm on each layer of the network\n     * in order to fit the features and labels.\n     * @param {Matrix} features\n     * @param {Array} labels\n     * @param {Matrix} probabilities - probabilities of each class of the feature set.\n     */\n    backpropagation(features, labels, probabilities) {\n        for (var i = 0; i < probabilities.length; ++i) {\n            probabilities[i][this.dicts.inputs[labels[i]]] -= 1;\n        }\n\n        // remember, the last delta doesn't matter\n        var delta = probabilities;\n        for (i = this.model.length - 1; i >= 0; --i) {\n            var a = i > 0 ? this.model[i - 1].a : features;\n            delta = this.model[i].backpropagation(delta, a);\n        }\n\n        for (i = 0; i < this.model.length; ++i) {\n            this.model[i].update();\n        }\n    }\n\n    /**\n     * Predict the output given the feature set.\n     * @param {Array|Matrix} features\n     * @return {Array}\n     */\n    predict(features) {\n        features = Matrix.checkMatrix(features);\n        var outputs = new Array(features.rows);\n        var probabilities = this.propagate(features);\n        for (var i = 0; i < features.rows; ++i) {\n            outputs[i] = this.dicts.outputs[probabilities.maxRowIndex(i)[1]];\n        }\n\n        return outputs;\n    }\n\n    /**\n     * Export the current model to JSON.\n     * @return {object} model\n     */\n    toJSON() {\n        var model = {\n            model: 'FNN',\n            hiddenLayers: this.hiddenLayers,\n            iterations: this.iterations,\n            learningRate: this.learningRate,\n            regularization: this.regularization,\n            activation: this.activation,\n            activationParam: this.activationParam,\n            dicts: this.dicts,\n            layers: new Array(this.model.length)\n        };\n\n        for (var i = 0; i < this.model.length; ++i) {\n            model.layers[i] = this.model[i].toJSON();\n        }\n\n        return model;\n    }\n\n    /**\n     * Load a Feedforward Neural Network with the current model.\n     * @param {object} model\n     * @return {FeedForwardNeuralNetworks}\n     */\n    static load(model) {\n        if (model.model !== 'FNN') {\n            throw new RangeError('the current model is not a feed forward network');\n        }\n\n        return new FeedForwardNeuralNetworks(model);\n    }\n}\n\nmodule.exports = FeedForwardNeuralNetworks;\n","'use strict';\n\nvar Layer = require('./Layer');\n\nclass OutputLayer extends Layer {\n    constructor(options) {\n        super(options);\n\n        this.activationFunction = function (i, j) {\n            this[i][j] = Math.exp(this[i][j]);\n        };\n    }\n\n    static load(model) {\n        if (model.model !== 'Layer') {\n            throw new RangeError('the current model is not a Layer model');\n        }\n\n        return new OutputLayer(model);\n    }\n}\n\nmodule.exports = OutputLayer;\n","'use strict';\n\nvar NodeSquare = require('./node-square'),\n    NodeHexagonal = require('./node-hexagonal');\n\nvar defaultOptions = {\n    fields: 3,\n    randomizer: Math.random,\n    distance: squareEuclidean,\n    iterations: 10,\n    learningRate: 0.1,\n    gridType: 'rect',\n    torus: true,\n    method: 'random'\n};\n\nfunction SOM(x, y, options, reload) {\n\n    this.x = x;\n    this.y = y;\n\n    options = options || {};\n    this.options = {};\n    for (var i in defaultOptions) {\n        if (options.hasOwnProperty(i)) {\n            this.options[i] = options[i];\n        } else {\n            this.options[i] = defaultOptions[i];\n        }\n    }\n\n    if (typeof this.options.fields === 'number') {\n        this.numWeights = this.options.fields;\n    } else if (Array.isArray(this.options.fields)) {\n        this.numWeights = this.options.fields.length;\n        var converters = getConverters(this.options.fields);\n        this.extractor = converters.extractor;\n        this.creator = converters.creator;\n    } else {\n        throw new Error('Invalid fields definition');\n    }\n\n    if (this.options.gridType === 'rect') {\n        this.nodeType = NodeSquare;\n        this.gridDim = {\n            x: x,\n            y: y\n        };\n    } else {\n        this.nodeType = NodeHexagonal;\n        var hx = this.x - Math.floor(this.y / 2);\n        this.gridDim = {\n            x: hx,\n            y: this.y,\n            z: -(0 - hx - this.y)\n        };\n    }\n\n    this.torus = this.options.torus;\n    this.distanceMethod = this.torus ? 'getDistanceTorus' : 'getDistance';\n\n    this.distance = this.options.distance;\n\n    this.maxDistance = getMaxDistance(this.distance, this.numWeights);\n\n    if (reload === true) { // For model loading\n        this.done = true;\n        return;\n    }\n    if (!(x > 0 && y > 0)) {\n        throw new Error('x and y must be positive');\n    }\n\n    this.times = {\n        findBMU: 0,\n        adjust: 0\n    };\n\n    this.randomizer = this.options.randomizer;\n\n    this.iterationCount = 0;\n    this.iterations = this.options.iterations;\n\n    this.startLearningRate = this.learningRate = this.options.learningRate;\n\n    this.mapRadius = Math.floor(Math.max(x, y) / 2);\n\n    this.algorithmMethod = this.options.method;\n\n    this._initNodes();\n\n    this.done = false;\n}\n\nSOM.load = function loadModel(model, distance) {\n    if (model.name === 'SOM') {\n        var x = model.data.length,\n            y = model.data[0].length;\n        if (distance) {\n            model.options.distance = distance;\n        } else if (model.options.distance) {\n            model.options.distance = eval('(' + model.options.distance + ')');\n        }\n        var som = new SOM(x, y, model.options, true);\n        som.nodes = new Array(x);\n        for (var i = 0; i < x; i++) {\n            som.nodes[i] = new Array(y);\n            for (var j = 0; j < y; j++) {\n                som.nodes[i][j] = new som.nodeType(i, j, model.data[i][j], som);\n            }\n        }\n        return som;\n    } else {\n        throw new Error('expecting a SOM model');\n    }\n};\n\nSOM.prototype.export = function exportModel(includeDistance) {\n    if (!this.done) {\n        throw new Error('model is not ready yet');\n    }\n    var model = {\n        name: 'SOM'\n    };\n    model.options = {\n        fields: this.options.fields,\n        gridType: this.options.gridType,\n        torus: this.options.torus\n    };\n    model.data = new Array(this.x);\n    for (var i = 0; i < this.x; i++) {\n        model.data[i] = new Array(this.y);\n        for (var j = 0; j < this.y; j++) {\n            model.data[i][j] = this.nodes[i][j].weights;\n        }\n    }\n    if (includeDistance) {\n        model.options.distance = this.distance.toString();\n    }\n    return model;\n};\n\nSOM.prototype._initNodes = function initNodes() {\n    var now = Date.now(),\n        i, j, k;\n    this.nodes = new Array(this.x);\n    for (i = 0; i < this.x; i++) {\n        this.nodes[i] = new Array(this.y);\n        for (j = 0; j < this.y; j++) {\n            var weights = new Array(this.numWeights);\n            for (k = 0; k < this.numWeights; k++) {\n                weights[k] = this.randomizer();\n            }\n            this.nodes[i][j] = new this.nodeType(i, j, weights, this);\n        }\n    }\n    this.times.initNodes = Date.now() - now;\n};\n\nSOM.prototype.setTraining = function setTraining(trainingSet) {\n    if (this.trainingSet) {\n        throw new Error('training set has already been set');\n    }\n    var now = Date.now();\n    var convertedSet = trainingSet;\n    var i, l = trainingSet.length;\n    if (this.extractor) {\n        convertedSet = new Array(l);\n        for (i = 0; i < l; i++) {\n            convertedSet[i] = this.extractor(trainingSet[i]);\n        }\n    }\n    this.numIterations = this.iterations * l;\n\n    if (this.algorithmMethod === 'random') {\n        this.timeConstant = this.numIterations / Math.log(this.mapRadius);\n    } else {\n        this.timeConstant = l / Math.log(this.mapRadius);\n    }\n    this.trainingSet = convertedSet;\n    this.times.setTraining = Date.now() - now;\n};\n\nSOM.prototype.trainOne = function trainOne() {\n    if (this.done) {\n\n        return false;\n\n    } else if (this.numIterations-- > 0) {\n\n        var neighbourhoodRadius,\n            trainingValue,\n            trainingSetFactor;\n\n        if (this.algorithmMethod === 'random') { // Pick a random value of the training set at each step\n            neighbourhoodRadius = this.mapRadius * Math.exp(-this.iterationCount / this.timeConstant);\n            trainingValue = getRandomValue(this.trainingSet, this.randomizer);\n            this._adjust(trainingValue, neighbourhoodRadius);\n            this.learningRate = this.startLearningRate * Math.exp(-this.iterationCount / this.numIterations);\n        } else { // Get next input vector\n            trainingSetFactor = -Math.floor(this.iterationCount / this.trainingSet.length);\n            neighbourhoodRadius = this.mapRadius * Math.exp(trainingSetFactor / this.timeConstant);\n            trainingValue = this.trainingSet[this.iterationCount % this.trainingSet.length];\n            this._adjust(trainingValue, neighbourhoodRadius);\n            if (((this.iterationCount + 1) % this.trainingSet.length) === 0) {\n                this.learningRate = this.startLearningRate * Math.exp(trainingSetFactor / Math.floor(this.numIterations / this.trainingSet.length));\n            }\n        }\n\n        this.iterationCount++;\n\n        return true;\n\n    } else {\n\n        this.done = true;\n        return false;\n\n    }\n};\n\nSOM.prototype._adjust = function adjust(trainingValue, neighbourhoodRadius) {\n    var now = Date.now(),\n        x, y, dist, influence;\n\n    var bmu = this._findBestMatchingUnit(trainingValue);\n\n    var now2 = Date.now();\n    this.times.findBMU += now2 - now;\n\n    var radiusLimit = Math.floor(neighbourhoodRadius);\n    var xMin = bmu.x - radiusLimit,\n        xMax = bmu.x + radiusLimit,\n        yMin = bmu.y - radiusLimit,\n        yMax = bmu.y + radiusLimit;\n\n    for (x = xMin; x <= xMax; x++) {\n        var theX = x;\n        if (x < 0) {\n            theX += this.x;\n        } else if (x >= this.x) {\n            theX -= this.x;\n        }\n        for (y = yMin; y <= yMax; y++) {\n            var theY = y;\n            if (y < 0) {\n                theY += this.y;\n            } else if (y >= this.y) {\n                theY -= this.y;\n            }\n\n            dist = bmu[this.distanceMethod](this.nodes[theX][theY]);\n\n            if (dist < neighbourhoodRadius) {\n                influence = Math.exp(-dist / (2 * neighbourhoodRadius));\n                this.nodes[theX][theY].adjustWeights(trainingValue, this.learningRate, influence);\n            }\n\n        }\n    }\n\n    this.times.adjust += (Date.now() - now2);\n\n};\n\nSOM.prototype.train = function train(trainingSet) {\n    if (!this.done) {\n        this.setTraining(trainingSet);\n        while (this.trainOne()) {\n        }\n    }\n};\n\nSOM.prototype.getConvertedNodes = function getConvertedNodes() {\n    var result = new Array(this.x);\n    for (var i = 0; i < this.x; i++) {\n        result[i] = new Array(this.y);\n        for (var j = 0; j < this.y; j++) {\n            var node = this.nodes[i][j];\n            result[i][j] = this.creator ? this.creator(node.weights) : node.weights;\n        }\n    }\n    return result;\n};\n\nSOM.prototype._findBestMatchingUnit = function findBestMatchingUnit(candidate) {\n\n    var bmu,\n        lowest = Infinity,\n        dist;\n\n    for (var i = 0; i < this.x; i++) {\n        for (var j = 0; j < this.y; j++) {\n            dist = this.distance(this.nodes[i][j].weights, candidate);\n            if (dist < lowest) {\n                lowest = dist;\n                bmu = this.nodes[i][j];\n            }\n        }\n    }\n\n    return bmu;\n\n};\n\nSOM.prototype.predict = function predict(data, computePosition) {\n    if (typeof data === 'boolean') {\n        computePosition = data;\n        data = null;\n    }\n    if (!data) {\n        data = this.trainingSet;\n    }\n    if (Array.isArray(data) && (Array.isArray(data[0]) || (typeof data[0] === 'object'))) { // predict a dataset\n        var self = this;\n        return data.map(function (element) {\n            return self._predict(element, computePosition);\n        });\n    } else { // predict a single element\n        return this._predict(data, computePosition);\n    }\n};\n\nSOM.prototype._predict = function _predict(element, computePosition) {\n    if (!Array.isArray(element)) {\n        element = this.extractor(element);\n    }\n    var bmu = this._findBestMatchingUnit(element);\n    var result = [bmu.x, bmu.y];\n    if (computePosition) {\n        result[2] = bmu.getPosition(element);\n    }\n    return result;\n};\n\n// As seen in http://www.scholarpedia.org/article/Kohonen_network\nSOM.prototype.getQuantizationError = function getQuantizationError() {\n    var fit = this.getFit(),\n        l = fit.length,\n        sum = 0;\n    for (var i = 0; i < l; i++) {\n        sum += fit[i];\n    }\n    return sum / l;\n};\n\nSOM.prototype.getFit = function getFit(dataset) {\n    if (!dataset) {\n        dataset = this.trainingSet;\n    }\n    var l = dataset.length,\n        bmu,\n        result = new Array(l);\n    for (var i = 0; i < l; i++) {\n        bmu = this._findBestMatchingUnit(dataset[i]);\n        result[i] = Math.sqrt(this.distance(dataset[i], bmu.weights));\n    }\n    return result;\n};\n\nfunction getConverters(fields) {\n    var l = fields.length,\n        normalizers = new Array(l),\n        denormalizers = new Array(l);\n    for (var i = 0; i < l; i++) {\n        normalizers[i] = getNormalizer(fields[i].range);\n        denormalizers[i] = getDenormalizer(fields[i].range);\n    }\n    return {\n        extractor: function extractor(value) {\n            var result = new Array(l);\n            for (var i = 0; i < l; i++) {\n                result[i] = normalizers[i](value[fields[i].name]);\n            }\n            return result;\n        },\n        creator: function creator(value) {\n            var result = {};\n            for (var i = 0; i < l; i++) {\n                result[fields[i].name] = denormalizers[i](value[i]);\n            }\n            return result;\n        }\n    };\n}\n\nfunction getNormalizer(minMax) {\n    return function normalizer(value) {\n        return (value - minMax[0]) / (minMax[1] - minMax[0]);\n    };\n}\n\nfunction getDenormalizer(minMax) {\n    return function denormalizer(value) {\n        return (minMax[0] + value * (minMax[1] - minMax[0]));\n    };\n}\n\nfunction squareEuclidean(a, b) {\n    var d = 0;\n    for (var i = 0, ii = a.length; i < ii; i++) {\n        d += (a[i] - b[i]) * (a[i] - b[i]);\n    }\n    return d;\n}\n\nfunction getRandomValue(arr, randomizer) {\n    return arr[Math.floor(randomizer() * arr.length)];\n}\n\nfunction getMaxDistance(distance, numWeights) {\n    var zero = new Array(numWeights),\n        one = new Array(numWeights);\n    for (var i = 0; i < numWeights; i++) {\n        zero[i] = 0;\n        one[i] = 1;\n    }\n    return distance(zero, one);\n}\n\nmodule.exports = SOM;","var NodeSquare = require('./node-square');\n\nfunction NodeHexagonal(x, y, weights, som) {\n\n    NodeSquare.call(this, x, y, weights, som);\n\n    this.hX = x - Math.floor(y / 2);\n    this.z = 0 - this.hX - y;\n\n}\n\nNodeHexagonal.prototype = new NodeSquare;\nNodeHexagonal.prototype.constructor = NodeHexagonal;\n\nNodeHexagonal.prototype.getDistance = function getDistanceHexagonal(otherNode) {\n    return Math.max(Math.abs(this.hX - otherNode.hX), Math.abs(this.y - otherNode.y), Math.abs(this.z - otherNode.z));\n};\n\nNodeHexagonal.prototype.getDistanceTorus = function getDistanceTorus(otherNode) {\n    var distX = Math.abs(this.hX - otherNode.hX),\n        distY = Math.abs(this.y - otherNode.y),\n        distZ = Math.abs(this.z - otherNode.z);\n    return Math.max(Math.min(distX, this.som.gridDim.x - distX), Math.min(distY, this.som.gridDim.y - distY), Math.min(distZ, this.som.gridDim.z - distZ));\n};\n\nNodeHexagonal.prototype.getPosition = function getPosition() {\n    throw new Error('Unimplemented : cannot get position of the points for hexagonal grid');\n};\n\nmodule.exports = NodeHexagonal;","import HashTable from 'ml-hash-table';\n\nexport class SparseMatrix {\n    constructor(rows, columns, options = {}) {\n        if (rows instanceof SparseMatrix) { // clone\n            const other = rows;\n            this._init(other.rows, other.columns, other.elements.clone(), other.threshold);\n            return;\n        }\n\n        if (Array.isArray(rows)) {\n            const matrix = rows;\n            rows = matrix.length;\n            options = columns || {};\n            columns = matrix[0].length;\n            this._init(rows, columns, new HashTable(options), options.threshold);\n            for (var i = 0; i < rows; i++) {\n                for (var j = 0; j < columns; j++) {\n                    var value = matrix[i][j];\n                    if (this.threshold && Math.abs(value) < this.threshold) value = 0;\n                    if (value !== 0) {\n                        this.elements.set(i * columns + j, matrix[i][j]);\n                    }\n                }\n            }\n        } else {\n            this._init(rows, columns, new HashTable(options), options.threshold);\n        }\n    }\n\n    _init(rows, columns, elements, threshold) {\n        this.rows = rows;\n        this.columns = columns;\n        this.elements = elements;\n        this.threshold = threshold || 0;\n    }\n\n    static eye(rows = 1, columns = rows) {\n        const min = Math.min(rows, columns);\n        const matrix = new SparseMatrix(rows, columns, {initialCapacity: min});\n        for (var i = 0; i < min; i++) {\n            matrix.set(i, i, 1);\n        }\n        return matrix;\n    }\n\n    clone() {\n        return new SparseMatrix(this);\n    }\n\n    to2DArray() {\n        const copy = new Array(this.rows);\n        for (var i = 0; i < this.rows; i++) {\n            copy[i] = new Array(this.columns);\n            for (var j = 0; j < this.columns; j++) {\n                copy[i][j] = this.get(i, j);\n            }\n        }\n        return copy;\n    }\n\n    isSquare() {\n        return this.rows === this.columns;\n    }\n\n    isSymmetric() {\n        if (!this.isSquare()) return false;\n\n        var symmetric = true;\n        this.forEachNonZero((i, j, v) => {\n            if (this.get(j, i) !== v) {\n                symmetric = false;\n                return false;\n            }\n            return v;\n        });\n        return symmetric;\n    }\n\n    /**\n     * Search for the wither band in the main diagonals\n     * @return {number}\n     */\n    bandWidth() {\n        let min = this.columns;\n        let max = -1;\n        this.forEachNonZero((i, j, v) => {\n            let diff = i - j;\n            min = Math.min(min, diff);\n            max = Math.max(max, diff);\n            return v;\n        });\n        return max - min;\n    }\n\n    /**\n     * Test if a matrix is consider banded using a threshold\n     * @param {number} width\n     * @return {boolean}\n     */\n    isBanded(width) {\n        let bandWidth = this.bandWidth();\n        return bandWidth <= width;\n    }\n\n    get cardinality() {\n        return this.elements.size;\n    }\n\n    get size() {\n        return this.rows * this.columns;\n    }\n\n    get(row, column) {\n        return this.elements.get(row * this.columns + column);\n    }\n\n    set(row, column, value) {\n        if (this.threshold && Math.abs(value) < this.threshold) value = 0;\n        if (value === 0) {\n            this.elements.remove(row * this.columns + column);\n        } else {\n            this.elements.set(row * this.columns + column, value);\n        }\n        return this;\n    }\n\n    mmul(other) {\n        if (this.columns !== other.rows) {\n            // eslint-disable-next-line no-console\n            console.warn('Number of columns of left matrix are not equal to number of rows of right matrix.');\n        }\n\n        const m = this.rows;\n        const p = other.columns;\n\n        const result = new SparseMatrix(m, p);\n        this.forEachNonZero((i, j, v1) => {\n            other.forEachNonZero((k, l, v2) => {\n                if (j === k) {\n                    result.set(i, l, result.get(i, l) + v1 * v2);\n                }\n                return v2;\n            });\n            return v1;\n        });\n        return result;\n    }\n\n    kroneckerProduct(other) {\n        const m = this.rows;\n        const n = this.columns;\n        const p = other.rows;\n        const q = other.columns;\n\n        const result = new SparseMatrix(m * p, n * q, {\n            initialCapacity: this.cardinality * other.cardinality\n        });\n        this.forEachNonZero((i, j, v1) => {\n            other.forEachNonZero((k, l, v2) => {\n                result.set(p * i + k, q * j + l, v1 * v2);\n                return v2;\n            });\n            return v1;\n        });\n        return result;\n    }\n\n    forEachNonZero(callback) {\n        this.elements.forEachPair((key, value) => {\n            const i = (key / this.columns) | 0;\n            const j = key % this.columns;\n            let r = callback(i, j, value);\n            if (r === false) return false; // stop iteration\n            if (this.threshold && Math.abs(r) < this.threshold) r = 0;\n            if (r !== value) {\n                if (r === 0) {\n                    this.elements.remove(key, true);\n                } else {\n                    this.elements.set(key, r);\n                }\n            }\n            return true;\n        });\n        this.elements.maybeShrinkCapacity();\n        return this;\n    }\n\n    getNonZeros() {\n        const cardinality = this.cardinality;\n        const rows = new Array(cardinality);\n        const columns = new Array(cardinality);\n        const values = new Array(cardinality);\n        var idx = 0;\n        this.forEachNonZero((i, j, value) => {\n            rows[idx] = i;\n            columns[idx] = j;\n            values[idx] = value;\n            idx++;\n            return value;\n        });\n        return {rows, columns, values};\n    }\n\n    setThreshold(newThreshold) {\n        if (newThreshold !== 0 && newThreshold !== this.threshold) {\n            this.threshold = newThreshold;\n            this.forEachNonZero((i, j, v) => v);\n        }\n        return this;\n    }\n\n    /**\n     * @return {SparseMatrix} - New transposed sparse matrix\n     */\n    transpose() {\n        let trans = new SparseMatrix(this.columns, this.rows, {initialCapacity: this.cardinality});\n        this.forEachNonZero((i, j, value) => {\n            trans.set(j, i, value);\n            return value;\n        });\n        return trans;\n    }\n}\n\nSparseMatrix.prototype.klass = 'Matrix';\n\nSparseMatrix.identity = SparseMatrix.eye;\nSparseMatrix.prototype.tensorProduct = SparseMatrix.prototype.kroneckerProduct;\n\n/*\n Add dynamically instance and static methods for mathematical operations\n */\n\nvar inplaceOperator = `\n(function %name%(value) {\n    if (typeof value === 'number') return this.%name%S(value);\n    return this.%name%M(value);\n})\n`;\n\nvar inplaceOperatorScalar = `\n(function %name%S(value) {\n    this.forEachNonZero((i, j, v) => v %op% value);\n    return this;\n})\n`;\n\nvar inplaceOperatorMatrix = `\n(function %name%M(matrix) {\n    matrix.forEachNonZero((i, j, v) => {\n        this.set(i, j, this.get(i, j) %op% v);\n        return v;\n    });\n    return this;\n})\n`;\n\nvar staticOperator = `\n(function %name%(matrix, value) {\n    var newMatrix = new SparseMatrix(matrix);\n    return newMatrix.%name%(value);\n})\n`;\n\nvar inplaceMethod = `\n(function %name%() {\n    this.forEachNonZero((i, j, v) => %method%(v));\n    return this;\n})\n`;\n\nvar staticMethod = `\n(function %name%(matrix) {\n    var newMatrix = new SparseMatrix(matrix);\n    return newMatrix.%name%();\n})\n`;\n\nconst operators = [\n    // Arithmetic operators\n    ['+', 'add'],\n    ['-', 'sub', 'subtract'],\n    ['*', 'mul', 'multiply'],\n    ['/', 'div', 'divide'],\n    ['%', 'mod', 'modulus'],\n    // Bitwise operators\n    ['&', 'and'],\n    ['|', 'or'],\n    ['^', 'xor'],\n    ['<<', 'leftShift'],\n    ['>>', 'signPropagatingRightShift'],\n    ['>>>', 'rightShift', 'zeroFillRightShift']\n];\n\nfor (const operator of operators) {\n    for (let i = 1; i < operator.length; i++) {\n        SparseMatrix.prototype[operator[i]] = eval(fillTemplateFunction(inplaceOperator, {name: operator[i], op: operator[0]}));\n        SparseMatrix.prototype[operator[i] + 'S'] = eval(fillTemplateFunction(inplaceOperatorScalar, {name: operator[i] + 'S', op: operator[0]}));\n        SparseMatrix.prototype[operator[i] + 'M'] = eval(fillTemplateFunction(inplaceOperatorMatrix, {name: operator[i] + 'M', op: operator[0]}));\n\n        SparseMatrix[operator[i]] = eval(fillTemplateFunction(staticOperator, {name: operator[i]}));\n    }\n}\n\nvar methods = [\n    ['~', 'not']\n];\n\n[\n    'abs', 'acos', 'acosh', 'asin', 'asinh', 'atan', 'atanh', 'cbrt', 'ceil',\n    'clz32', 'cos', 'cosh', 'exp', 'expm1', 'floor', 'fround', 'log', 'log1p',\n    'log10', 'log2', 'round', 'sign', 'sin', 'sinh', 'sqrt', 'tan', 'tanh', 'trunc'\n].forEach(function (mathMethod) {\n    methods.push(['Math.' + mathMethod, mathMethod]);\n});\n\nfor (const method of methods) {\n    for (let i = 1; i < method.length; i++) {\n        SparseMatrix.prototype[method[i]] = eval(fillTemplateFunction(inplaceMethod, {name: method[i], method: method[0]}));\n        SparseMatrix[method[i]] = eval(fillTemplateFunction(staticMethod, {name: method[i]}));\n    }\n}\n\nfunction fillTemplateFunction(template, values) {\n    for (const i in values) {\n        template = template.replace(new RegExp('%' + i + '%', 'g'), values[i]);\n    }\n    return template;\n}\n","module.exports = newArray\n\nfunction newArray (n, value) {\n  n = n || 0\n  var array = new Array(n)\n  for (var i = 0; i < n; i++) {\n    array[i] = value\n  }\n  return array\n}\n","const binarySearch = require('binary-search');\nconst sortAsc = require('num-sort').asc;\n\nconst largestPrime = 0x7fffffff;\n\nconst primeNumbers = [\n    //chunk #0\n    largestPrime, // 2^31-1\n\n    //chunk #1\n    5, 11, 23, 47, 97, 197, 397, 797, 1597, 3203, 6421, 12853, 25717, 51437, 102877, 205759,\n    411527, 823117, 1646237, 3292489, 6584983, 13169977, 26339969, 52679969, 105359939,\n    210719881, 421439783, 842879579, 1685759167,\n\n    //chunk #2\n    433, 877, 1759, 3527, 7057, 14143, 28289, 56591, 113189, 226379, 452759, 905551, 1811107,\n    3622219, 7244441, 14488931, 28977863, 57955739, 115911563, 231823147, 463646329, 927292699,\n    1854585413,\n\n    //chunk #3\n    953, 1907, 3821, 7643, 15287, 30577, 61169, 122347, 244703, 489407, 978821, 1957651, 3915341,\n    7830701, 15661423, 31322867, 62645741, 125291483, 250582987, 501165979, 1002331963,\n    2004663929,\n\n    //chunk #4\n    1039, 2081, 4177, 8363, 16729, 33461, 66923, 133853, 267713, 535481, 1070981, 2141977, 4283963,\n    8567929, 17135863, 34271747, 68543509, 137087021, 274174111, 548348231, 1096696463,\n\n    //chunk #5\n    31, 67, 137, 277, 557, 1117, 2237, 4481, 8963, 17929, 35863, 71741, 143483, 286973, 573953,\n    1147921, 2295859, 4591721, 9183457, 18366923, 36733847, 73467739, 146935499, 293871013,\n    587742049, 1175484103,\n\n    //chunk #6\n    599, 1201, 2411, 4831, 9677, 19373, 38747, 77509, 155027, 310081, 620171, 1240361, 2480729,\n    4961459, 9922933, 19845871, 39691759, 79383533, 158767069, 317534141, 635068283, 1270136683,\n\n    //chunk #7\n    311, 631, 1277, 2557, 5119, 10243, 20507, 41017, 82037, 164089, 328213, 656429, 1312867,\n    2625761, 5251529, 10503061, 21006137, 42012281, 84024581, 168049163, 336098327, 672196673,\n    1344393353,\n\n    //chunk #8\n    3, 7, 17, 37, 79, 163, 331, 673, 1361, 2729, 5471, 10949, 21911, 43853, 87719, 175447, 350899,\n    701819, 1403641, 2807303, 5614657, 11229331, 22458671, 44917381, 89834777, 179669557,\n    359339171, 718678369, 1437356741,\n\n    //chunk #9\n    43, 89, 179, 359, 719, 1439, 2879, 5779, 11579, 23159, 46327, 92657, 185323, 370661, 741337,\n    1482707, 2965421, 5930887, 11861791, 23723597, 47447201, 94894427, 189788857, 379577741,\n    759155483, 1518310967,\n\n    //chunk #10\n    379, 761, 1523, 3049, 6101, 12203, 24407, 48817, 97649, 195311, 390647, 781301, 1562611,\n    3125257, 6250537, 12501169, 25002389, 50004791, 100009607, 200019221, 400038451, 800076929,\n    1600153859,\n\n    //chunk #11\n    13, 29, 59, 127, 257, 521, 1049, 2099, 4201, 8419, 16843, 33703, 67409, 134837, 269683,\n    539389, 1078787, 2157587, 4315183, 8630387, 17260781, 34521589, 69043189, 138086407,\n    276172823, 552345671, 1104691373,\n\n    //chunk #12\n    19, 41, 83, 167, 337, 677,\n    1361, 2729, 5471, 10949, 21911, 43853, 87719, 175447, 350899,\n    701819, 1403641, 2807303, 5614657, 11229331, 22458671, 44917381, 89834777, 179669557,\n    359339171, 718678369, 1437356741,\n\n    //chunk #13\n    53, 107, 223, 449, 907, 1823, 3659, 7321, 14653, 29311, 58631, 117269,\n    234539, 469099, 938207, 1876417, 3752839, 7505681, 15011389, 30022781,\n    60045577, 120091177, 240182359, 480364727, 960729461, 1921458943\n];\n\nprimeNumbers.sort(sortAsc);\n\nfunction nextPrime(value) {\n    let index = binarySearch(primeNumbers, value, sortAsc);\n    if (index < 0) {\n        index = ~index;\n    }\n    return primeNumbers[index];\n}\n\nexports.nextPrime = nextPrime;\nexports.largestPrime = largestPrime;\n","'use strict';\nmodule.exports = Number.isNaN || function (x) {\n\treturn x !== x;\n};\n","\"use strict\";\n\nexports.additiveSymmetric = require('./distances/additiveSymmetric');\nexports.avg = require('./distances/avg');\nexports.bhattacharyya = require('./distances/bhattacharyya');\nexports.canberra = require('./distances/canberra');\nexports.chebyshev = require('./distances/chebyshev');\nexports.clark = require('./distances/clark');\nexports.czekanowski = require('./distances/czekanowski');\nexports.dice = require('./distances/dice');\nexports.divergence = require('./distances/divergence');\nexports.euclidean = require('ml-distance-euclidean');\nexports.fidelity = require('./distances/fidelity');\nexports.gower = require('./distances/gower');\nexports.harmonicMean = require('./distances/harmonicMean');\nexports.hellinger = require('./distances/hellinger');\nexports.innerProduct = require('./distances/innerProduct');\nexports.intersection = require('./distances/intersection');\nexports.jaccard = require('./distances/jaccard');\nexports.jeffreys = require('./distances/jeffreys');\nexports.jensenDifference = require('./distances/jensenDifference');\nexports.jensenShannon = require('./distances/jensenShannon');\nexports.kdivergence = require('./distances/kdivergence');\nexports.kulczynski = require('./distances/kulczynski');\nexports.kullbackLeibler = require('./distances/kullbackLeibler');\nexports.kumarHassebrook = require('./distances/kumarHassebrook');\nexports.kumarJohnson = require('./distances/kumarJohnson');\nexports.lorentzian = require('./distances/lorentzian');\nexports.manhattan = require('./distances/manhattan');\nexports.matusita = require('./distances/matusita');\nexports.minkowski = require('./distances/minkowski');\nexports.motyka = require('./distances/motyka');\nexports.neyman = require('./distances/neyman');\nexports.pearson = require('./distances/pearson');\nexports.probabilisticSymmetric = require('./distances/probabilisticSymmetric');\nexports.ruzicka = require('./distances/ruzicka');\nexports.soergel = require('./distances/soergel');\nexports.sorensen = require('./distances/sorensen');\nexports.squared = require('./distances/squared');\nexports.squaredChord = require('./distances/squaredChord');\nexports.squaredEuclidean = require('ml-distance-euclidean').squared;\nexports.taneja = require('./distances/taneja');\nexports.tanimoto = require('./distances/tanimoto');\nexports.topsoe = require('./distances/topsoe');\nexports.tree = require('ml-tree-similarity');\nexports.waveHedges = require('./distances/waveHedges');\n","module.exports = function additiveSymmetric(a, b) {\n    var i = 0,\n        ii = a.length,\n        d = 0;\n    for (; i < ii; i++) {\n        d += ((a[i] - b[i]) * (a[i] - b[i]) * (a[i] + b[i])) / (a[i] * b[i]);\n    }\n    return 2 * d;\n};\n","module.exports = function avg(a, b) {\n    var ii = a.length,\n        max = 0,\n        ans = 0,\n        aux = 0;\n    for (var i = 0; i < ii ; i++) {\n        aux = Math.abs(a[i] - b[i]);\n        ans += aux;\n        if (max < aux) {\n            max = aux;\n        }\n    }\n    return (max + ans) / 2;\n};\n","module.exports = function bhattacharyya(a, b) {\n    var ii = a.length,\n        ans = 0;\n    for (var i = 0; i < ii ; i++) {\n        ans += Math.sqrt(a[i] * b[i]);\n    }\n    return - Math.log(ans);\n};\n","module.exports = function canberra(a, b) {\n    var ii = a.length,\n        ans = 0;\n    for (var i = 0; i < ii ; i++) {\n        ans += Math.abs(a[i] - b[i]) / (a[i] + b[i]);\n    }\n    return ans;\n};\n","module.exports = function chebyshev(a, b) {\n    var ii = a.length,\n        max = 0,\n        aux = 0;\n    for (var i = 0; i < ii ; i++) {\n        aux = Math.abs(a[i] - b[i]);\n        if (max < aux) {\n            max = aux;\n        }\n    }\n    return max;\n};\n","module.exports = function clark(a, b) {\n    var i = 0,\n        ii = a.length,\n        d = 0;\n    for (; i < ii; i++) {\n        d += Math.sqrt(((a[i] - b[i]) * (a[i] - b[i])) / ((a[i] + b[i]) * (a[i] + b[i])));\n    }\n    return 2 * d;\n};\n","'use strict';\n\nconst czekanowskiSimilarity = require('../similarities/czekanowski');\n\nmodule.exports = function czekanowskiDistance(a, b) {\n    return 1 - czekanowskiSimilarity(a, b);\n};\n","module.exports = function divergence(a, b) {\n    var i = 0,\n        ii = a.length,\n        d = 0;\n    for (; i < ii; i++) {\n        d += ((a[i] - b[i]) * (a[i] - b[i])) / ((a[i] + b[i]) * (a[i] + b[i]));\n    }\n    return 2 * d;\n};\n","module.exports = function fidelity(a, b) {\n    var ii = a.length,\n        ans = 0;\n    for (var i = 0; i < ii ; i++) {\n        ans += Math.sqrt(a[i] * b[i]);\n    }\n    return ans;\n};\n","module.exports = function gower(a, b) {\n    var ii = a.length,\n        ans = 0;\n    for (var i = 0; i < ii ; i++) {\n        ans += Math.abs(a[i] - b[i]);\n    }\n    return ans / ii;\n};\n","module.exports = function harmonicMean(a, b) {\n    var ii = a.length,\n        ans = 0;\n    for (var i = 0; i < ii ; i++) {\n        ans += (a[i] * b[i]) / (a[i] + b[i]);\n    }\n    return 2 * ans;\n};\n","module.exports = function hellinger(a, b) {\n    var ii = a.length,\n        ans = 0;\n    for (var i = 0; i < ii ; i++) {\n        ans += Math.sqrt(a[i] * b[i]);\n    }\n    return 2 * Math.sqrt(1 - ans);\n};\n","module.exports = function innerProduct(a, b) {\n    var ii = a.length,\n        ans = 0;\n    for (var i = 0; i < ii ; i++) {\n        ans += a[i] * b[i];\n    }\n    return ans;\n};\n","module.exports = function jeffreys(a, b) {\n    var ii = a.length,\n        ans = 0;\n    for (var i = 0; i < ii ; i++) {\n        ans += (a[i] - b[i]) * Math.log(a[i] / b[i]);\n    }\n    return ans;\n};\n","module.exports = function jensenDifference(a, b) {\n    var ii = a.length,\n        ans = 0;\n    for (var i = 0; i < ii ; i++) {\n        ans += ((a[i] * Math.log(a[i]) + b[i] * Math.log(b[i])) / 2) - ((a[i] + b[i]) / 2) * Math.log((a[i] + b[i]) / 2);\n    }\n    return ans;\n};\n","module.exports = function jensenShannon(a, b) {\n    var ii = a.length,\n        p = 0,\n        q = 0;\n    for (var i = 0; i < ii ; i++) {\n        p += a[i] * Math.log(2 * a[i] / (a[i] + b[i]));\n        q += b[i] * Math.log(2 * b[i] / (a[i] + b[i]));\n    }\n    return (p + q) / 2;\n};\n","module.exports = function kdivergence(a, b) {\n    var ii = a.length,\n        ans = 0;\n    for (var i = 0; i < ii ; i++) {\n        ans += a[i] * Math.log(2 * a[i] / (a[i] + b[i]));\n    }\n    return ans;\n};\n","module.exports = function kullbackLeibler(a, b) {\n    var ii = a.length,\n        ans = 0;\n    for (var i = 0; i < ii ; i++) {\n        ans += a[i] * Math.log(a[i] / b[i]);\n    }\n    return ans;\n};\n","module.exports = function kumarHassebrook(a, b) {\n    var ii = a.length,\n        p = 0,\n        p2 = 0,\n        q2 = 0;\n    for (var i = 0; i < ii ; i++) {\n        p += a[i] * b[i];\n        p2 += a[i] * a[i];\n        q2 += b[i] * b[i];\n    }\n    return p / (p2 + q2 - p);\n};\n","module.exports = function kumarJohnson(a, b) {\n    var ii = a.length,\n        ans = 0;\n    for (var i = 0; i < ii ; i++) {\n        ans += Math.pow(a[i] * a[i] - b[i] * b[i],2) / (2 * Math.pow(a[i] * b[i],1.5));\n    }\n    return ans;\n};\n","module.exports = function lorentzian(a, b) {\n    var ii = a.length,\n        ans = 0;\n    for (var i = 0; i < ii ; i++) {\n        ans += Math.log(Math.abs(a[i] - b[i]) + 1);\n    }\n    return ans;\n};\n","module.exports = function manhattan(a, b) {\n    var i = 0,\n        ii = a.length,\n        d = 0;\n    for (; i < ii; i++) {\n        d += Math.abs(a[i] - b[i]);\n    }\n    return d;\n};\n","module.exports = function matusita(a, b) {\n    var ii = a.length,\n        ans = 0;\n    for (var i = 0; i < ii ; i++) {\n        ans += Math.sqrt(a[i] * b[i]);\n    }\n    return Math.sqrt(2 - 2 * ans);\n};\n","module.exports = function minkowski(a, b, p) {\n    var i = 0,\n        ii = a.length,\n        d = 0;\n    for (; i < ii; i++) {\n        d += Math.pow(Math.abs(a[i] - b[i]),p);\n    }\n    return Math.pow(d,(1/p));\n};\n","module.exports = function neyman(a, b) {\n    var i = 0,\n        ii = a.length,\n        d = 0;\n    for (; i < ii; i++) {\n        d += ((a[i] - b[i]) * (a[i] - b[i])) / a[i];\n    }\n    return d;\n};\n","module.exports = function pearson(a, b) {\n    var i = 0,\n        ii = a.length,\n        d = 0;\n    for (; i < ii; i++) {\n        d += ((a[i] - b[i]) * (a[i] - b[i])) / b[i];\n    }\n    return d;\n};\n","module.exports = function probabilisticSymmetric(a, b) {\n    var i = 0,\n        ii = a.length,\n        d = 0;\n    for (; i < ii; i++) {\n        d += ((a[i] - b[i]) * (a[i] - b[i])) / (a[i] + b[i]);\n    }\n    return 2 * d;\n};\n","module.exports = function ruzicka(a, b) {\n    var ii = a.length,\n        up = 0,\n        down = 0;\n    for (var i = 0; i < ii ; i++) {\n        up += Math.min(a[i],b[i]);\n        down += Math.max(a[i],b[i]);\n    }\n    return up / down;\n};\n","module.exports = function soergel(a, b) {\n    var ii = a.length,\n        up = 0,\n        down = 0;\n    for (var i = 0; i < ii ; i++) {\n        up += Math.abs(a[i] - b[i]);\n        down += Math.max(a[i],b[i]);\n    }\n    return up / down;\n};\n","module.exports = function sorensen(a, b) {\n    var ii = a.length,\n        up = 0,\n        down = 0;\n    for (var i = 0; i < ii ; i++) {\n        up += Math.abs(a[i] - b[i]);\n        down += a[i] + b[i];\n    }\n    return up / down;\n};\n","module.exports = function squared(a, b) {\n    var i = 0,\n        ii = a.length,\n        d = 0;\n    for (; i < ii; i++) {\n        d += ((a[i] - b[i]) * (a[i] - b[i])) / (a[i] + b[i]);\n    }\n    return d;\n};\n","module.exports = function taneja(a, b) {\n    var ii = a.length,\n        ans = 0;\n    for (var i = 0; i < ii ; i++) {\n        ans += (a[i] + b[i]) / 2 * Math.log((a[i] + b[i]) / (2 * Math.sqrt(a[i] * b[i])));\n    }\n    return ans;\n};\n","var tanimotoS = require('./../similarities/tanimoto');\n\nmodule.exports = function tanimoto(a, b, bitvector) {\n    if (bitvector)\n        return 1 - tanimotoS(a, b, bitvector);\n    else {\n        var ii = a.length,\n            p = 0,\n            q = 0,\n            m = 0;\n        for (var i = 0; i < ii ; i++) {\n            p += a[i];\n            q += b[i];\n            m += Math.min(a[i],b[i]);\n        }\n        return (p + q - 2 * m) / (p + q - m);\n    }\n};\n","module.exports = function topsoe(a, b) {\n    var ii = a.length,\n        ans = 0;\n    for (var i = 0; i < ii ; i++) {\n        ans += a[i] * Math.log(2 * a[i] / (a[i] + b[i])) + b[i] * Math.log(2 * b[i] / (a[i] + b[i]));\n    }\n    return ans;\n};\n","\"use strict\";\n\n/**\n * Function that creates the tree\n * @param {Array <number>} X - chemical shifts of the signal\n * @param {Array <number>} Y - intensity of the signal\n * @param {number} from - the low limit of x\n * @param {number} to - the top limit of x\n * @param {number} minWindow - smallest range to accept in x\n * @param {number} threshold - smallest range to accept in y\n * @returns {{sum: number, center: number, left: {json}, right: {json}}}\n * left and right have the same structure than the parent, or have a\n * undefined value if are leafs\n */\nfunction createTree (X, Y, from, to, minWindow, threshold) {\n    minWindow = minWindow || 0.16;\n    threshold = threshold || 0.01;\n    if ((to - from) < minWindow)\n        return undefined;\n    var sum = 0;\n    for (var i = 0; X[i] < to; i++) {\n        if (X[i] > from)\n            sum += Y[i];\n    }\n    if (sum < threshold) {\n        return undefined;\n    }\n    var center = 0;\n    for (var j = 0; X[j] < to; j++) {\n        if (X[i] > from)\n            center += X[j] * Y[j];\n    }\n    center = center / sum;\n    if (((center - from) < 10e-6) || ((to - center) < 10e-6)) return undefined;\n    if ((center - from) < (minWindow /4)) {\n        return createTree(X, Y, center, to, minWindow, threshold);\n    }\n    else {\n        if ((to - center) < (minWindow / 4)) {\n            return createTree(X, Y, from, center, minWindow, threshold);\n        }\n        else {\n            return {\n                'sum': sum,\n                'center': center,\n                'left': createTree(X, Y, from, center, minWindow, threshold),\n                'right': createTree(X, Y, center, to, minWindow, threshold)\n            };\n        }\n    }\n}\n\n/**\n * Similarity between two nodes\n * @param {{sum: number, center: number, left: {json}, right: {json}}} a - tree A node\n * @param {{sum: number, center: number, left: {json}, right: {json}}} b - tree B node\n * @param {number} alpha - weights the relative importance of intensity vs. shift match\n * @param {number} beta - weights the relative importance of node matching and children matching\n * @param {number} gamma - controls the attenuation of the effect of chemical shift differences\n * @returns {number} similarity measure between tree nodes\n */\nfunction S(a, b, alpha, beta, gamma) {\n    if (a === undefined || b === undefined) {\n        return 0;\n    }\n    else {\n        var C = (alpha*Math.min(a.sum, b.sum)/Math.max(a.sum, b.sum)+ (1-alpha)*Math.exp(-gamma*Math.abs(a.center - b.center)));\n    }\n    return beta*C + (1-beta)*(S(a.left, b.left, alpha, beta, gamma)+S(a.right, b.right, alpha, beta, gamma));\n}\n\n/**\n * @type {number} alpha - weights the relative importance of intensity vs. shift match\n * @type {number} beta - weights the relative importance of node matching and children matching\n * @type {number} gamma - controls the attenuation of the effect of chemical shift differences\n * @type {number} minWindow - smallest range to accept in x\n * @type {number} threshold - smallest range to accept in y\n */\nvar defaultOptions = {\n    minWindow: 0.16,\n    threshold : 0.01,\n    alpha: 0.1,\n    beta: 0.33,\n    gamma: 0.001\n};\n\n/**\n * Builds a tree based in the spectra and compares this trees\n * @param {{x: Array<number>, y: Array<number>}} A - first spectra to be compared\n * @param {{x: Array<number>, y: Array<number>}} B - second spectra to be compared\n * @param {number} from - the low limit of x\n * @param {number} to - the top limit of x\n * @param {{minWindow: number, threshold: number, alpha: number, beta: number, gamma: number}} options\n * @returns {number} similarity measure between the spectra\n */\nfunction tree(A, B, from, to, options) {\n    options = options || {};\n    for (var o in defaultOptions)\n        if (!options.hasOwnProperty(o)) {\n            options[o] = defaultOptions[o];\n        }\n    var Atree, Btree;\n    if (A.sum)\n        Atree = A;\n    else\n        Atree = createTree(A.x, A.y, from, to, options.minWindow, options.threshold);\n    if (B.sum)\n        Btree = B;\n    else\n        Btree = createTree(B.x, B.y, from, to, options.minWindow, options.threshold);\n    return S(Atree, Btree, options.alpha, options.beta, options.gamma);\n}\n\nmodule.exports = {\n    calc: tree,\n    createTree: createTree\n};","module.exports = function waveHedges(a, b) {\n    var ii = a.length,\n        ans = 0;\n    for (var i = 0; i < ii ; i++) {\n        ans += 1 - (Math.min(a[i], b[i]) / Math.max(a[i], b[i]));\n    }\n    return ans;\n};\n","\"use strict\";\n\nexports.cosine = require('./similarities/cosine');\nexports.czekanowski = require('./similarities/czekanowski');\nexports.dice = require('./similarities/dice');\nexports.intersection = require('./similarities/intersection');\nexports.jaccard = require('./similarities/jaccard');\nexports.kulczynski = require('./similarities/kulczynski');\nexports.motyka = require('./similarities/motyka');\nexports.pearson = require('./similarities/pearson');\nexports.squaredChord = require('./similarities/squaredChord');\nexports.tanimoto = require('./similarities/tanimoto');\n","var diceD = require('./../distances/dice');\n\nmodule.exports = function dice(a, b) {\n    return 1 - diceD(a,b);\n};\n","var intersectionD = require('./../distances/intersection');\n\nmodule.exports = function intersection(a, b) {\n    return 1 - intersectionD(a,b);\n};\n","var jaccardD = require('./../distances/jaccard');\n\nmodule.exports = function jaccard(a, b) {\n    return 1 - jaccardD(a, b);\n};\n","var kulczynskiD = require('./../distances/kulczynski');\n\nmodule.exports = function kulczynski(a, b) {\n    return 1 / kulczynskiD(a, b);\n};\n","var motykaD = require('./../distances/motyka');\n\nmodule.exports = function motyka(a, b) {\n    return 1 - motykaD(a,b);\n};\n","'use strict';\n\nvar stat=require('ml-stat').array;\nvar cosine=require('./cosine');\n\nmodule.exports = function pearson(a, b) {\n    var avgA=stat.mean(a);\n    var avgB=stat.mean(b);\n\n    var newA=new Array(a.length);\n    var newB=new Array(b.length);\n    for (var i=0; i<newA.length; i++) {\n        newA[i]=a[i]-avgA;\n        newB[i]=b[i]-avgB;\n    }\n\n    return cosine(newA, newB);\n};\n","var squaredChordD = require('./../distances/squaredChord');\n\nmodule.exports = function squaredChord(a, b) {\n    return 1 - squaredChordD(a, b);\n};\n","'use strict';\n\nconst measures = require('./measures');\n\nclass Performance {\n    /**\n     *\n     * @param prediction - The prediction matrix\n     * @param target - The target matrix (values: truthy for same class, falsy for different class)\n     * @param options\n     *\n     * @option    all    True if the entire matrix must be used. False to ignore the diagonal and lower part (default is false, for similarity/distance matrices)\n     * @option    max    True if the max value corresponds to a perfect match (like in similarity matrices), false if it is the min value (default is false, like in distance matrices. All values will be multiplied by -1)\n     */\n    constructor(prediction, target, options) {\n        options = options || {};\n        if (prediction.length !== target.length || prediction[0].length !== target[0].length) {\n            throw new Error('dimensions of prediction and target do not match');\n        }\n        const rows = prediction.length;\n        const columns = prediction[0].length;\n        const isDistance = !options.max;\n\n        const predP = [];\n\n        if (options.all) {\n            for (var i = 0; i < rows; i++) {\n                for (var j = 0; j < columns; j++) {\n                    predP.push({\n                        pred: prediction[i][j],\n                        targ: target[i][j]\n                    });\n                }\n            }\n        } else {\n            if (rows < 3 || rows !== columns) {\n                throw new Error('When \"all\" option is false, the prediction matrix must be square and have at least 3 columns');\n            }\n            for (var i = 0; i < rows - 1; i++) {\n                for (var j = i + 1; j < columns; j++) {\n                    predP.push({\n                        pred: prediction[i][j],\n                        targ: target[i][j]\n                    });\n                }\n            }\n        }\n\n        if (isDistance) {\n            predP.sort((a, b) => a.pred - b.pred);\n        } else {\n            predP.sort((a, b) => b.pred - a.pred);\n        }\n        \n        const cutoffs = this.cutoffs = [isDistance ? Number.MIN_VALUE : Number.MAX_VALUE];\n        const fp = this.fp = [0];\n        const tp = this.tp = [0];\n\n        var nPos = 0;\n        var nNeg = 0;\n\n        var currentPred = predP[0].pred;\n        var nTp = 0;\n        var nFp = 0;\n        for (var i = 0; i < predP.length; i++) {\n            if (predP[i].pred !== currentPred) {\n                cutoffs.push(currentPred);\n                fp.push(nFp);\n                tp.push(nTp);\n                currentPred = predP[i].pred;\n            }\n            if (predP[i].targ) {\n                nPos++;\n                nTp++;\n            } else {\n                nNeg++;\n                nFp++;\n            }\n        }\n        cutoffs.push(currentPred);\n        fp.push(nFp);\n        tp.push(nTp);\n\n        const l = cutoffs.length;\n        const fn = this.fn = new Array(l);\n        const tn = this.tn = new Array(l);\n        const nPosPred = this.nPosPred = new Array(l);\n        const nNegPred = this.nNegPred = new Array(l);\n\n        for (var i = 0; i < l; i++) {\n            fn[i] = nPos - tp[i];\n            tn[i] = nNeg - fp[i];\n\n            nPosPred[i] = tp[i] + fp[i];\n            nNegPred[i] = tn[i] + fn[i];\n        }\n\n        this.nPos = nPos;\n        this.nNeg = nNeg;\n        this.nSamples = nPos + nNeg;\n    }\n\n    /**\n     * Computes a measure from the prediction object.\n     *\n     * Many measures are available and can be combined :\n     * To create a ROC curve, you need fpr and tpr\n     * To create a DET curve, you need fnr and fpr\n     * To create a Lift chart, you need rpp and lift\n     *\n     * Possible measures are : threshold (Threshold), acc (Accuracy), err (Error rate),\n     * fpr (False positive rate), tpr (True positive rate), fnr (False negative rate), tnr (True negative rate), ppv (Positive predictive value),\n     * npv (Negative predictive value), pcfall (Prediction-conditioned fallout), pcmiss (Prediction-conditioned miss), lift (Lift value), rpp (Rate of positive predictions), rnp (Rate of negative predictions)\n     *\n     * @param measure - The short name of the measure\n     *\n     * @return [number]\n     */\n    getMeasure(measure) {\n        if (typeof measure !== 'string') {\n            throw new Error('No measure specified');\n        }\n        if (!measures[measure]) {\n            throw new Error(`The specified measure (${measure}) does not exist`);\n        }\n        return measures[measure](this);\n    }\n\n    /**\n     * Returns the area under the ROC curve\n     */\n    getAURC() {\n        const l = this.cutoffs.length;\n        const x = new Array(l);\n        const y = new Array(l);\n        for (var i = 0; i < l; i++) {\n            x[i] = this.fp[i] / this.nNeg;\n            y[i] = this.tp[i] / this.nPos;\n        }\n        var auc = 0;\n        for (i = 1; i < l; i++) {\n            auc += 0.5 * (x[i] - x[i - 1]) * (y[i] + y[i - 1]);\n        }\n        return auc;\n    }\n\n    /**\n     * Returns the area under the DET curve\n     */\n    getAUDC() {\n        const l = this.cutoffs.length;\n        const x = new Array(l);\n        const y = new Array(l);\n        for (var i = 0; i < l; i++) {\n            x[i] = this.fn[i] / this.nPos;\n            y[i] = this.fp[i] / this.nNeg;\n        }\n        var auc = 0;\n        for (i = 1; i < l; i++) {\n            auc += 0.5 * (x[i] + x[i - 1]) * (y[i] - y[i - 1]);\n        }\n        return auc;\n    }\n\n    getDistribution(options) {\n        options = options || {};\n        var cutLength = this.cutoffs.length;\n        var cutLow = options.xMin || Math.floor(this.cutoffs[cutLength - 1] * 100) / 100;\n        var cutHigh = options.xMax || Math.ceil(this.cutoffs[1] * 100) / 100;\n        var interval = options.interval || Math.floor(((cutHigh - cutLow) / 20 * 10000000) - 1) / 10000000; // Trick to avoid the precision problem of float numbers\n\n        var xLabels = [];\n        var interValues = [];\n        var intraValues = [];\n        var interCumPercent = [];\n        var intraCumPercent = [];\n\n        var nTP = this.tp[cutLength - 1], currentTP = 0;\n        var nFP = this.fp[cutLength - 1], currentFP = 0;\n\n        for (var i = cutLow, j = (cutLength - 1); i <= cutHigh; i += interval) {\n            while (this.cutoffs[j] < i)\n                j--;\n\n            xLabels.push(i);\n\n            var thisTP = nTP - currentTP - this.tp[j];\n            var thisFP = nFP - currentFP - this.fp[j];\n\n            currentTP += thisTP;\n            currentFP += thisFP;\n\n            interValues.push(thisFP);\n            intraValues.push(thisTP);\n\n            interCumPercent.push(100 - (nFP - this.fp[j]) / nFP * 100);\n            intraCumPercent.push(100 - (nTP - this.tp[j]) / nTP * 100);\n        }\n\n        return {\n            xLabels: xLabels,\n            interValues: interValues,\n            intraValues: intraValues,\n            interCumPercent: interCumPercent,\n            intraCumPercent: intraCumPercent\n        };\n    }\n}\n\nPerformance.names = {\n    acc: 'Accuracy',\n    err: 'Error rate',\n    fpr: 'False positive rate',\n    tpr: 'True positive rate',\n    fnr: 'False negative rate',\n    tnr: 'True negative rate',\n    ppv: 'Positive predictive value',\n    npv: 'Negative predictive value',\n    pcfall: 'Prediction-conditioned fallout',\n    pcmiss: 'Prediction-conditioned miss',\n    lift: 'Lift value',\n    rpp: 'Rate of positive predictions',\n    rnp: 'Rate of negative predictions',\n    threshold: 'Threshold'\n};\n\nmodule.exports = Performance;\n","'use strict';\n\n// Accuracy\nexports.acc = pred => {\n    const l = pred.cutoffs.length;\n    const result = new Array(l);\n    for (var i = 0; i < l; i++) {\n        result[i] = (pred.tn[i] + pred.tp[i]) / (l - 1);\n    }\n    return result;\n};\n\n// Error rate\nexports.err = pred => {\n    const l = pred.cutoffs.length;\n    const result = new Array(l);\n    for (var i = 0; i < l; i++) {\n        result[i] = (pred.fn[i] + pred.fp[i] / (l - 1));\n    }\n    return result;\n};\n\n// False positive rate\nexports.fpr = pred => {\n    const l = pred.cutoffs.length;\n    const result = new Array(l);\n    for (var i = 0; i < l; i++) {\n        result[i] = pred.fp[i] / pred.nNeg;\n    }\n    return result;\n};\n\n// True positive rate\nexports.tpr = pred => {\n    const l = pred.cutoffs.length;\n    const result = new Array(l);\n    for (var i = 0; i < l; i++) {\n        result[i] = pred.tp[i] / pred.nPos;\n    }\n    return result;\n};\n\n// False negative rate\nexports.fnr = pred => {\n    const l = pred.cutoffs.length;\n    const result = new Array(l);\n    for (var i = 0; i < l; i++) {\n        result[i] = pred.fn[i] / pred.nPos;\n    }\n    return result;\n};\n\n// True negative rate\nexports.tnr = pred => {\n    const l = pred.cutoffs.length;\n    const result = new Array(l);\n    for (var i = 0; i < l; i++) {\n        result[i] = pred.tn[i] / pred.nNeg;\n    }\n    return result;\n};\n\n// Positive predictive value\nexports.ppv = pred => {\n    const l = pred.cutoffs.length;\n    const result = new Array(l);\n    for (var i = 0; i < l; i++) {\n        result[i] = (pred.fp[i] + pred.tp[i] !== 0) ? (pred.tp[i] / (pred.fp[i] + pred.tp[i])) : 0;\n    }\n    return result;\n};\n\n// Negative predictive value\nexports.npv = pred => {\n    const l = pred.cutoffs.length;\n    const result = new Array(l);\n    for (var i = 0; i < l; i++) {\n        result[i] = (pred.fn[i] + pred.tn[i] !== 0) ? (pred.tn[i] / (pred.fn[i] + pred.tn[i])) : 0;\n    }\n    return result;\n};\n\n// Prediction conditioned fallout\nexports.pcfall = pred => {\n    const l = pred.cutoffs.length;\n    const result = new Array(l);\n    for (var i = 0; i < l; i++) {\n        result[i] = (pred.fp[i] + pred.tp[i] !== 0) ? 1 - (pred.tp[i] / (pred.fp[i] + pred.tp[i])) : 1;\n    }\n    return result;\n};\n\n// Prediction conditioned miss\nexports.pcmiss = pred => {\n    const l = pred.cutoffs.length;\n    const result = new Array(l);\n    for (var i = 0; i < l; i++) {\n        result[i] = (pred.fn[i] + pred.tn[i] !== 0) ? 1 - (pred.tn[i] / (pred.fn[i] + pred.tn[i])) : 1;\n    }\n    return result;\n};\n\n// Lift value\nexports.lift = pred => {\n    const l = pred.cutoffs.length;\n    const result = new Array(l);\n    for (var i = 0; i < l; i++) {\n        result[i] = (pred.nPosPred[i] !== 0) ? ((pred.tp[i] / pred.nPos) / (pred.nPosPred[i] / pred.nSamples)) : 0;\n    }\n    return result;\n};\n\n// Rate of positive predictions\nexports.rpp = pred => {\n    const l = pred.cutoffs.length;\n    const result = new Array(l);\n    for (var i = 0; i < l; i++) {\n        result[i] = pred.nPosPred[i] / pred.nSamples;\n    }\n    return result;\n};\n\n// Rate of negative predictions\nexports.rnp = pred => {\n    const l = pred.cutoffs.length;\n    const result = new Array(l);\n    for (var i = 0; i < l; i++) {\n        result[i] = pred.nNegPred[i] / pred.nSamples;\n    }\n    return result;\n};\n\n// Threshold\nexports.threshold = pred => {\n    const clone = pred.cutoffs.slice();\n    clone[0] = clone[1]; // Remove the infinite value\n    return clone;\n};\n","'use strict';\n\nvar matrixLib = require('ml-matrix');\nvar Matrix = matrixLib.Matrix;\nvar inverse = matrixLib.inverse;\nvar padArray = require('ml-pad-array');\nvar extend = require('extend');\n\nvar defaultOptions = {\n    windowSize: 5,\n    derivative: 1,\n    polynomial: 2,\n    pad: 'none',\n    padValue: 'replicate'\n};\n\n/**\n * Savitzky-Golay filter\n * @param {Array <number>} data\n * @param {number} h\n * @param {Object} options\n * @returns {Array}\n */\nfunction SavitzkyGolay (data, h, options) {\n    options = extend({}, defaultOptions, options);\n    if ((options.windowSize % 2 === 0) || (options.windowSize < 5) || !(Number.isInteger(options.windowSize)))\n        throw new RangeError('Invalid window size (should be odd and at least 5 integer number)');\n    if ((options.derivative < 0) || !(Number.isInteger(options.derivative)))\n        throw new RangeError('Derivative should be a positive integer');\n    if ((options.polynomial < 1) || !(Number.isInteger(options.polynomial)))\n        throw new RangeError('Polynomial should be a positive integer');\n\n    var C, norm;\n    var step = Math.floor(options.windowSize / 2);\n\n    if (options.pad === 'pre') {\n        data = padArray(data, {size: step, value: options.padValue});\n    }\n\n    var ans =  new Array(data.length - 2*step);\n\n    if ((options.windowSize === 5) && (options.polynomial === 2) && ((options.derivative === 1) || (options.derivative === 2))) {\n        if (options.derivative === 1) {\n            C = [-2,-1,0,1,2];\n            norm = 10;\n        }\n        else {\n            C = [2, -1, -2, -1, 2];\n            norm = 7;\n        }\n    }\n    else {\n        var J = Matrix.ones(options.windowSize, options.polynomial + 1);\n        var inic = -(options.windowSize - 1) / 2;\n        for (var i = 0; i < J.length; i++) {\n            for (var j = 0; j < J[i].length; j++) {\n                if ((inic + 1 !== 0) || (j !== 0))\n                    J[i][j] = Math.pow((inic + i), j);\n            }\n        }\n        var Jtranspose = J.transposeView();\n        var Jinv = inverse(Jtranspose.mmul(J));\n        C = Jinv.mmul(Jtranspose);\n        C = C[options.derivative];\n        norm = 1;\n    }\n    var det = norm * Math.pow(h, options.derivative);\n    for (var k = step; k < (data.length - step); k++) {\n        var d = 0;\n        for (var l = 0; l < C.length; l++)\n            d += C[l] * data[l + k - step] / det;\n        ans[k - step] = d;\n    }\n\n    if (options.pad === 'post') {\n        ans = padArray(ans, {size: step, value: options.padValue});\n    }\n\n    return ans;\n}\n\nmodule.exports = SavitzkyGolay;\n","//Code translate from Pascal source in http://pubs.acs.org/doi/pdf/10.1021/ac00205a007\nvar extend = require('extend');\nvar stat = require('ml-stat');\n\nvar defaultOptions = {\n    windowSize: 9,\n    derivative: 0,\n    polynomial: 3,\n};\n\n\nfunction SavitzkyGolay(data, h, options) {\n    options = extend({}, defaultOptions, options);\n\n    if ((options.windowSize % 2 === 0) || (options.windowSize < 5) || !(Number.isInteger(options.windowSize)))\n            throw new RangeError('Invalid window size (should be odd and at least 5 integer number)')\n\n\n    if (options.windowSize>data.length)\n        throw new RangeError('Window size is higher than the data length '+options.windowSize+\">\"+data.length);\n    if ((options.derivative < 0) || !(Number.isInteger(options.derivative)))\n        throw new RangeError('Derivative should be a positive integer');\n    if ((options.polynomial < 1) || !(Number.isInteger(options.polynomial)))\n        throw new RangeError('Polynomial should be a positive integer');\n    if (options.polynomial >= 6)\n        console.warn('You should not use polynomial grade higher than 5 if you are' +\n            ' not sure that your data arises from such a model. Possible polynomial oscillation problems');\n\n    var windowSize = options.windowSize;\n\n    var half = Math.floor(windowSize/2);\n    var np = data.length;\n    var ans = new Array(np);\n    var weights = fullWeights(windowSize,options.polynomial,options.derivative);\n    var hs = 0;\n    var constantH = true;\n    if( Object.prototype.toString.call( h ) === '[object Array]' ) {\n        constantH = false;\n    }\n    else{\n        hs = Math.pow(h, options.derivative);\n    }\n    //console.log(\"Constant h: \"+constantH);\n    //For the borders\n    for(var i=0;i<half;i++){\n        var wg1=weights[half-i-1];\n        var wg2=weights[half+i+1];\n        var d1 = 0,d2=0;\n        for (var l = 0; l < windowSize; l++){\n            d1 += wg1[l] * data[l];\n            d2 += wg2[l] * data[np-windowSize+l-1];\n        }\n        if(constantH){\n            ans[half-i-1] = d1/hs;\n            ans[np-half+i] = d2/hs;\n        }\n        else{\n            hs = getHs(h,half-i-1,half, options.derivative);\n            ans[half-i-1] = d1/hs;\n            hs = getHs(h,np-half+i,half, options.derivative);\n            ans[np-half+i] = d2/hs;\n        }\n    }\n    //For the internal points\n    var wg = weights[half];\n    for(var i=windowSize;i<np+1;i++){\n        var d = 0;\n        for (var l = 0; l < windowSize; l++)\n            d += wg[l] * data[l+i-windowSize];\n        if(!constantH)\n            hs = getHs(h,i-half-1,half, options.derivative);\n        ans[i-half-1] = d/hs;\n    }\n    return ans;\n}\n\nfunction getHs(h,center,half,derivative){\n    var hs = 0;\n    var count = 0;\n    for(var i=center-half;i<center+half;i++){\n        if(i>=0 && i < h.length-1){\n            hs+= (h[i+1]-h[i]);\n            count++;\n        }\n    }\n    return Math.pow(hs/count,derivative);\n}\n\nfunction GramPoly(i,m,k,s){\n    var Grampoly = 0;\n    if(k>0){\n        Grampoly = (4*k-2)/(k*(2*m-k+1))*(i*GramPoly(i,m,k-1,s) +\n            s*GramPoly(i,m,k-1,s-1)) - ((k-1)*(2*m+k))/(k*(2*m-k+1))*GramPoly(i,m,k-2,s);\n    }\n    else{\n        if(k==0&&s==0){\n            Grampoly=1;\n        }\n        else{\n            Grampoly=0;\n        }\n    }\n    //console.log(Grampoly);\n    return Grampoly;\n}\n\nfunction GenFact(a,b){\n    var gf=1;\n    if(a>=b){\n        for(var j=a-b+1;j<=a;j++){\n            gf*=j;\n        }\n    }\n    return gf;\n}\n\nfunction Weight(i,t,m,n,s){\n    var sum=0;\n    for(var k=0;k<=n;k++){\n        //console.log(k);\n        sum+=(2*k+1)*(GenFact(2*m,k)/GenFact(2*m+k+1,k+1))*GramPoly(i,m,k,0)*GramPoly(t,m,k,s)\n    }\n    return sum;\n}\n\n/**\n *\n * @param m  Number of points\n * @param n  Polynomial grade\n * @param s  Derivative\n */\nfunction fullWeights(m,n,s){\n    var weights = new Array(m);\n    var np = Math.floor(m/2);\n    for(var t=-np;t<=np;t++){\n        weights[t+np] = new Array(m);\n        for(var j=-np;j<=np;j++){\n            weights[t+np][j+np]=Weight(j,t,np,n,s);\n        }\n    }\n    return weights;\n}\n\n/*function entropy(data,h,options){\n    var trend = SavitzkyGolay(data,h,trendOptions);\n    var copy = new Array(data.length);\n    var sum = 0;\n    var max = 0;\n    for(var i=0;i<data.length;i++){\n        copy[i] = data[i]-trend[i];\n    }\n\n    sum/=data.length;\n    console.log(sum+\" \"+max);\n    console.log(stat.array.standardDeviation(copy));\n    console.log(Math.abs(stat.array.mean(copy))/stat.array.standardDeviation(copy));\n    return sum;\n\n}\n\n\n\nfunction guessWindowSize(data, h){\n    console.log(\"entropy \"+entropy(data,h,trendOptions));\n    return 5;\n}\n*/\nmodule.exports = SavitzkyGolay;\n \n","'use strict';\n\nvar eightBits = require('./creator');\n\n/**\n * Count the number of true values in an array\n * @param {Array} arr\n * @return {number}\n */\nfunction count(arr) {\n    var c = 0;\n    for (var i = 0; i < arr.length; i++) {\n        c += eightBits[arr[i] & 0xff] + eightBits[(arr[i] >> 8) & 0xff] + eightBits[(arr[i] >> 16) & 0xff] + eightBits[(arr[i] >> 24) & 0xff];\n    }\n    return c;\n}\n\n/**\n * Logical AND operation\n * @param {Array} arr1\n * @param {Array} arr2\n * @return {Array}\n */\nfunction and(arr1, arr2) {\n    var ans = new Array(arr1.length);\n    for (var i = 0; i < arr1.length; i++)\n        ans[i] = arr1[i] & arr2[i];\n    return ans;\n}\n\n/**\n * Logical OR operation\n * @param {Array} arr1\n * @param {Array} arr2\n * @return {Array}\n */\nfunction or(arr1, arr2) {\n    var ans = new Array(arr1.length);\n    for (var i = 0; i < arr1.length; i++)\n        ans[i] = arr1[i] | arr2[i];\n    return ans;\n}\n\n/**\n * Logical XOR operation\n * @param {Array} arr1\n * @param {Array} arr2\n * @return {Array}\n */\nfunction xor(arr1, arr2) {\n    var ans = new Array(arr1.length);\n    for (var i = 0; i < arr1.length; i++)\n        ans[i] = arr1[i] ^ arr2[i];\n    return ans;\n}\n\n/**\n * Logical NOT operation\n * @param {Array} arr\n * @return {Array}\n */\nfunction not(arr) {\n    var ans = new Array(arr.length);\n    for (var i = 0; i < ans.length; i++)\n        ans[i] = ~arr[i];\n    return ans;\n}\n\n/**\n * Gets the n value of array arr\n * @param {Array} arr\n * @param {number} n\n * @return {boolean}\n */\nfunction getBit(arr, n) {\n    var index = n >> 5; // Same as Math.floor(n/32)\n    var mask = 1 << (31 - n % 32);\n    return Boolean(arr[index] & mask);\n}\n\n/**\n * Sets the n value of array arr to the value val\n * @param {Array} arr\n * @param {number} n\n * @param {boolean} val\n * @return {Array}\n */\nfunction setBit(arr, n, val) {\n    var index = n >> 5; // Same as Math.floor(n/32)\n    var mask = 1 << (31 - n % 32);\n    if (val)\n        arr[index] = mask | arr[index];\n    else\n        arr[index] = ~mask & arr[index];\n    return arr;\n}\n\n/**\n * Translates an array of numbers to a string of bits\n * @param {Array} arr\n * @returns {string}\n */\nfunction toBinaryString(arr) {\n    var str = '';\n    for (var i = 0; i < arr.length; i++) {\n        var obj = (arr[i] >>> 0).toString(2);\n        str += '00000000000000000000000000000000'.substr(obj.length) + obj;\n    }\n    return str;\n}\n\n/**\n * Creates an array of numbers based on a string of bits\n * @param {string} str\n * @returns {Array}\n */\nfunction parseBinaryString(str) {\n    var len = str.length / 32;\n    var ans = new Array(len);\n    for (var i = 0; i < len; i++) {\n        ans[i] = parseInt(str.substr(i*32, 32), 2) | 0;\n    }\n    return ans;\n}\n\n/**\n * Translates an array of numbers to a hex string\n * @param {Array} arr\n * @returns {string}\n */\nfunction toHexString(arr) {\n    var str = '';\n    for (var i = 0; i < arr.length; i++) {\n        var obj = (arr[i] >>> 0).toString(16);\n        str += '00000000'.substr(obj.length) + obj;\n    }\n    return str;\n}\n\n/**\n * Creates an array of numbers based on a hex string\n * @param {string} str\n * @returns {Array}\n */\nfunction parseHexString(str) {\n    var len = str.length / 8;\n    var ans = new Array(len);\n    for (var i = 0; i < len; i++) {\n        ans[i] = parseInt(str.substr(i*8, 8), 16) | 0;\n    }\n    return ans;\n}\n\n/**\n * Creates a human readable string of the array\n * @param {Array} arr\n * @returns {string}\n */\nfunction toDebug(arr) {\n    var binary = toBinaryString(arr);\n    var str = '';\n    for (var i = 0; i < arr.length; i++) {\n        str += '0000'.substr((i * 32).toString(16).length) + (i * 32).toString(16) + ':';\n        for (var j = 0; j < 32; j += 4) {\n            str += ' ' + binary.substr(i * 32 + j, 4);\n        }\n        if (i < arr.length - 1) str += '\\n';\n    }\n    return str\n}\n\nmodule.exports = {\n    count: count,\n    and: and,\n    or: or,\n    xor: xor,\n    not: not,\n    getBit: getBit,\n    setBit: setBit,\n    toBinaryString: toBinaryString,\n    parseBinaryString: parseBinaryString,\n    toHexString: toHexString,\n    parseHexString: parseHexString,\n    toDebug: toDebug\n};\n","// auxiliary file to create the 256 look at table elements\n\nvar ans = new Array(256);\nfor (var i = 0; i < 256; i++) {\n    var num = i;\n    var c = 0;\n    while (num) {\n        num = num & (num - 1);\n        c++;\n    }\n    ans[i] = c;\n}\n\nmodule.exports = ans;","'use strict';\n\nmodule.exports = exports = require('./ArrayUtils');\n\nexports.getEquallySpacedData = require('./getEquallySpaced').getEquallySpacedData;\nexports.SNV = require('./snv').SNV;\n","'use strict';\n\nconst Stat = require('ml-stat').array;\n/**\n * Function that returns an array of points given 1D array as follows:\n *\n * [x1, y1, .. , x2, y2, ..]\n *\n * And receive the number of dimensions of each point.\n * @param array\n * @param dimensions\n * @returns {Array} - Array of points.\n */\nfunction coordArrayToPoints(array, dimensions) {\n    if (array.length % dimensions !== 0) {\n        throw new RangeError('Dimensions number must be accordance with the size of the array.');\n    }\n\n    var length = array.length / dimensions;\n    var pointsArr = new Array(length);\n\n    var k = 0;\n    for (var i = 0; i < array.length; i += dimensions) {\n        var point = new Array(dimensions);\n        for (var j = 0; j < dimensions; ++j) {\n            point[j] = array[i + j];\n        }\n\n        pointsArr[k] = point;\n        k++;\n    }\n\n    return pointsArr;\n}\n\n\n/**\n * Function that given an array as follows:\n * [x1, y1, .. , x2, y2, ..]\n *\n * Returns an array as follows:\n * [[x1, x2, ..], [y1, y2, ..], [ .. ]]\n *\n * And receives the number of dimensions of each coordinate.\n * @param array\n * @param dimensions\n * @returns {Array} - Matrix of coordinates\n */\nfunction coordArrayToCoordMatrix(array, dimensions) {\n    if (array.length % dimensions !== 0) {\n        throw new RangeError('Dimensions number must be accordance with the size of the array.');\n    }\n\n    var coordinatesArray = new Array(dimensions);\n    var points = array.length / dimensions;\n    for (var i = 0; i < coordinatesArray.length; i++) {\n        coordinatesArray[i] = new Array(points);\n    }\n\n    for (i = 0; i < array.length; i += dimensions) {\n        for (var j = 0; j < dimensions; ++j) {\n            var currentPoint = Math.floor(i / dimensions);\n            coordinatesArray[j][currentPoint] = array[i + j];\n        }\n    }\n\n    return coordinatesArray;\n}\n\n/**\n * Function that receives a coordinate matrix as follows:\n * [[x1, x2, ..], [y1, y2, ..], [ .. ]]\n *\n * Returns an array of coordinates as follows:\n * [x1, y1, .. , x2, y2, ..]\n *\n * @param coordMatrix\n * @returns {Array}\n */\nfunction coordMatrixToCoordArray(coordMatrix) {\n    var coodinatesArray = new Array(coordMatrix.length * coordMatrix[0].length);\n    var k = 0;\n    for (var i = 0; i < coordMatrix[0].length; ++i) {\n        for (var j = 0; j < coordMatrix.length; ++j) {\n            coodinatesArray[k] = coordMatrix[j][i];\n            ++k;\n        }\n    }\n\n    return coodinatesArray;\n}\n\n/**\n * Tranpose a matrix, this method is for coordMatrixToPoints and\n * pointsToCoordMatrix, that because only transposing the matrix\n * you can change your representation.\n *\n * @param matrix\n * @returns {Array}\n */\nfunction transpose(matrix) {\n    var resultMatrix = new Array(matrix[0].length);\n    for (var i = 0; i < resultMatrix.length; ++i) {\n        resultMatrix[i] = new Array(matrix.length);\n    }\n\n    for (i = 0; i < matrix.length; ++i) {\n        for (var j = 0; j < matrix[0].length; ++j) {\n            resultMatrix[j][i] = matrix[i][j];\n        }\n    }\n\n    return resultMatrix;\n}\n\n/**\n * Function that transform an array of points into a coordinates array\n * as follows:\n * [x1, y1, .. , x2, y2, ..]\n *\n * @param points\n * @returns {Array}\n */\nfunction pointsToCoordArray(points) {\n    var coodinatesArray = new Array(points.length * points[0].length);\n    var k = 0;\n    for (var i = 0; i < points.length; ++i) {\n        for (var j = 0; j < points[0].length; ++j) {\n            coodinatesArray[k] = points[i][j];\n            ++k;\n        }\n    }\n\n    return coodinatesArray;\n}\n\n/**\n * Apply the dot product between the smaller vector and a subsets of the\n * largest one.\n *\n * @param firstVector\n * @param secondVector\n * @returns {Array} each dot product of size of the difference between the\n *                  larger and the smallest one.\n */\nfunction applyDotProduct(firstVector, secondVector) {\n    var largestVector, smallestVector;\n    if (firstVector.length <= secondVector.length) {\n        smallestVector = firstVector;\n        largestVector = secondVector;\n    } else {\n        smallestVector = secondVector;\n        largestVector = firstVector;\n    }\n\n    var difference = largestVector.length - smallestVector.length + 1;\n    var dotProductApplied = new Array(difference);\n\n    for (var i = 0; i < difference; ++i) {\n        var sum = 0;\n        for (var j = 0; j < smallestVector.length; ++j) {\n            sum += smallestVector[j] * largestVector[i + j];\n        }\n        dotProductApplied[i] = sum;\n    }\n\n    return dotProductApplied;\n}\n/**\n * To scale the input array between the specified min and max values. The operation is performed inplace\n * if the options.inplace is specified. If only one of the min or max parameters is specified, then the scaling\n * will multiply the input array by min/min(input) or max/max(input)\n * @param input\n * @param options\n * @returns {*}\n */\nfunction scale(input, options = {}) {\n    const {\n        min,\n        max\n    } = options;\n\n    var y = options.inPlace ? input : (new Array(input.length));\n    var minMax = Stat.minMax(input);\n\n    if (typeof max === 'number') {\n        if (typeof min === 'number') {\n            let factor = (max - min) / (minMax.max - minMax.min);\n            for (let i = 0; i < y.length; i++) {\n                y[i] = (input[i] - minMax.min) * factor + min;\n            }\n        } else if (minMax.max !== 0) {\n            let factor = max / minMax.max;\n            for (let i = 0; i < y.length; i++) {\n                y[i] = input[i] * factor;\n            }\n        } else {\n            options.min = minMax.min;\n            y = scale(input, options);\n        }\n    } else if (typeof min === 'number') {\n        if (minMax.min !== 0) {\n            let factor = min / minMax.min;\n            for (let i = 0; i < y.length; i++) {\n                y[i] = input[i] * factor;\n            }\n\n        } else {\n            options.max = minMax.max;\n            y = scale(input, options);\n        }\n    }\n    return y;\n}\n\nmodule.exports = {\n    coordArrayToPoints: coordArrayToPoints,\n    coordArrayToCoordMatrix: coordArrayToCoordMatrix,\n    coordMatrixToCoordArray: coordMatrixToCoordArray,\n    coordMatrixToPoints: transpose,\n    pointsToCoordArray: pointsToCoordArray,\n    pointsToCoordMatrix: transpose,\n    applyDotProduct: applyDotProduct,\n    scale: scale\n};\n\n","'use strict';\n\n/**\n *\n * Function that returns a Number array of equally spaced numberOfPoints\n * containing a representation of intensities of the spectra arguments x\n * and y.\n *\n * The options parameter contains an object in the following form:\n * from: starting point\n * to: last point\n * numberOfPoints: number of points between from and to\n * variant: \"slot\" or \"smooth\" - smooth is the default option\n *\n * The slot variant consist that each point in the new array is calculated\n * averaging the existing points between the slot that belongs to the current\n * value. The smooth variant is the same but takes the integral of the range\n * of the slot and divide by the step size between two points in the new array.\n *\n * @param x - sorted increasing x values\n * @param y\n * @param options\n * @returns {Array} new array with the equally spaced data.\n *\n */\nfunction getEquallySpacedData(x, y, options = {}) {\n    var xLength = x.length;\n    if (x.length > 1 && x[0] > x[1]) {\n        x = x.slice().reverse();\n        y = y.slice().reverse();\n    }\n\n    var {\n        from = x[0],\n        to = x[xLength - 1],\n        variant = 'smooth',\n        numberOfPoints = 100\n    } = options;\n\n    if (xLength !== y.length) {\n        throw new RangeError(\"the x and y vector doesn't have the same size.\");\n    }\n\n    if (typeof from !== 'number' || isNaN(from)) {\n        throw new RangeError(\"'from' option must be a number\");\n    }\n\n    if (typeof to !== 'number' || isNaN(to)) {\n        throw new RangeError(\"'to' option must be a number\");\n    }\n\n    var reverse = from > to;\n    if (reverse) {\n        [from, to] = [to, from];\n    }\n\n    if (typeof numberOfPoints !== 'number' || isNaN(numberOfPoints)) {\n        throw new RangeError(\"'numberOfPoints' option must be a number\");\n    }\n    if (numberOfPoints < 1) {\n        throw new RangeError('the number of points must be at least 1');\n    }\n\n    var output = variant === 'slot' ? getEquallySpacedSlot(x, y, from, to, numberOfPoints) : getEquallySpacedSmooth(x, y, from, to, numberOfPoints);\n\n    return reverse ? output.reverse() : output;\n}\n\n/**\n * function that retrieves the getEquallySpacedData with the variant \"smooth\"\n *\n * @param x\n * @param y\n * @param from - Initial point\n * @param to - Final point\n * @param numberOfPoints\n * @returns {Array} - Array of y's equally spaced with the variant \"smooth\"\n */\nfunction getEquallySpacedSmooth(x, y, from, to, numberOfPoints) {\n    var xLength = x.length;\n\n    var step = (to - from) / (numberOfPoints - 1);\n    var halfStep = step / 2;\n\n    var output = new Array(numberOfPoints);\n\n    var initialOriginalStep = x[1] - x[0];\n    var lastOriginalStep = x[xLength - 1] - x[xLength - 2];\n\n    // Init main variables\n    var min = from - halfStep;\n    var max = from + halfStep;\n\n    var previousX = Number.MIN_VALUE;\n    var previousY = 0;\n    var nextX = x[0] - initialOriginalStep;\n    var nextY = 0;\n\n    var currentValue = 0;\n    var slope = 0;\n    var intercept = 0;\n    var sumAtMin = 0;\n    var sumAtMax = 0;\n\n    var i = 0; // index of input\n    var j = 0; // index of output\n\n    function getSlope(x0, y0, x1, y1) {\n        return (y1 - y0) / (x1 - x0);\n    }\n\n    main: while (true) {\n\n        if (previousX <= min && min <= nextX) {\n            add = integral(0, min - previousX, slope, previousY);\n            sumAtMin = currentValue + add;\n        }\n\n        while (nextX - max >= 0) {\n            // no overlap with original point, just consume current value\n            var add = integral(0, max - previousX, slope, previousY);\n            sumAtMax = currentValue + add;\n\n            output[j++] = (sumAtMax - sumAtMin) / step;\n\n            if (j === numberOfPoints) {\n                break main;\n            }\n\n            min = max;\n            max += step;\n            sumAtMin = sumAtMax;\n        }\n\n        currentValue += integral(previousX, nextX, slope, intercept);\n\n        previousX = nextX;\n        previousY = nextY;\n\n        if (i < xLength) {\n            nextX = x[i];\n            nextY = y[i];\n            i++;\n        } else if (i === xLength) {\n            nextX += lastOriginalStep;\n            nextY = 0;\n        }\n\n        slope = getSlope(previousX, previousY, nextX, nextY);\n        intercept = -slope * previousX + previousY;\n    }\n\n    return output;\n}\n\n/**\n * function that retrieves the getEquallySpacedData with the variant \"slot\"\n *\n * @param x\n * @param y\n * @param from - Initial point\n * @param to - Final point\n * @param numberOfPoints\n * @returns {Array} - Array of y's equally spaced with the variant \"slot\"\n */\nfunction getEquallySpacedSlot(x, y, from, to, numberOfPoints) {\n    var xLength = x.length;\n\n    var step = (to - from) / (numberOfPoints - 1);\n    var halfStep = step / 2;\n    var lastStep = x[x.length - 1] - x[x.length - 2];\n\n    var start = from - halfStep;\n    var output = new Array(numberOfPoints);\n\n    // Init main variables\n    var min = start;\n    var max = start + step;\n\n    var previousX = -Number.MAX_VALUE;\n    var previousY = 0;\n    var nextX = x[0];\n    var nextY = y[0];\n    var frontOutsideSpectra = 0;\n    var backOutsideSpectra = true;\n\n    var currentValue = 0;\n\n    // for slot algorithm\n    var currentPoints = 0;\n\n    var i = 1; // index of input\n    var j = 0; // index of output\n\n    main: while (true) {\n        if (previousX >= nextX) throw (new Error('x must be an increasing serie'));\n        while (previousX - max > 0) {\n            // no overlap with original point, just consume current value\n            if (backOutsideSpectra) {\n                currentPoints++;\n                backOutsideSpectra = false;\n            }\n\n            output[j] = currentPoints <= 0 ? 0 : currentValue / currentPoints;\n            j++;\n\n            if (j === numberOfPoints) {\n                break main;\n            }\n\n            min = max;\n            max += step;\n            currentValue = 0;\n            currentPoints = 0;\n        }\n\n        if (previousX > min) {\n            currentValue += previousY;\n            currentPoints++;\n        }\n\n        if (previousX === -Number.MAX_VALUE || frontOutsideSpectra > 1) {\n            currentPoints--;\n        }\n\n        previousX = nextX;\n        previousY = nextY;\n\n        if (i < xLength) {\n            nextX = x[i];\n            nextY = y[i];\n            i++;\n        } else {\n            nextX += lastStep;\n            nextY = 0;\n            frontOutsideSpectra++;\n        }\n    }\n\n    return output;\n}\n/**\n * Function that calculates the integral of the line between two\n * x-coordinates, given the slope and intercept of the line.\n * @param x0\n * @param x1\n * @param slope\n * @param intercept\n * @returns {number} integral value.\n */\nfunction integral(x0, x1, slope, intercept) {\n    return (0.5 * slope * x1 * x1 + intercept * x1) - (0.5 * slope * x0 * x0 + intercept * x0);\n}\n\nexports.getEquallySpacedData = getEquallySpacedData;\nexports.integral = integral;\n","'use strict';\n\nexports.SNV = SNV;\nvar Stat = require('ml-stat').array;\n\n/**\n * Function that applies the standard normal variate (SNV) to an array of values.\n *\n * @param data - Array of values.\n * @returns {Array} - applied the SNV.\n */\nfunction SNV(data) {\n    var mean = Stat.mean(data);\n    var std = Stat.standardDeviation(data);\n    var result = data.slice();\n    for (var i = 0; i < data.length; i++) {\n        result[i] = (result[i] - mean) / std;\n    }\n    return result;\n}\n","import isArray from 'is-any-array';\n\n/**\n * Computes the mode of the given values\n * @param {Array<number>} input\n * @return {number}\n */\n\nfunction mode(input) {\n  if (!isArray(input)) {\n    throw new TypeError('input must be an array');\n  }\n\n  if (input.length === 0) {\n    throw new TypeError('input must not be empty');\n  }\n\n  var maxValue = 0;\n  var maxCount = 0;\n  var count = 0;\n  var counts = {};\n\n  for (var i = 0; i < input.length; ++i) {\n    var element = input[i];\n    count = counts[element];\n\n    if (count) {\n      counts[element]++;\n      count++;\n    } else {\n      counts[element] = count = 1;\n    }\n\n    if (count > maxCount) {\n      maxCount = count;\n      maxValue = input[i];\n    }\n  }\n\n  return maxValue;\n}\n\nexport default mode;\n","/**\n * Computes the norm of the given values\n * @param {Array<number>} input\n * @param {object} [options={}]\n * @param {string} [algorithm='absolute']\n * @return {number}\n */\nfunction norm(input) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var _options$algorithm = options.algorithm,\n      algorithm = _options$algorithm === void 0 ? 'absolute' : _options$algorithm;\n\n  if (!Array.isArray(input)) {\n    throw new Error('input must be an array');\n  }\n\n  if (input.length === 0) {\n    throw new Error('input must not be empty');\n  }\n\n  switch (algorithm.toLowerCase()) {\n    case 'absolute':\n      var sum = absoluteSum(input);\n      if (sum === 0) return input.slice(0);\n      return input.map(function (element) {\n        return element / sum;\n      });\n\n    default:\n      throw new Error(\"norm: unknown algorithm: \".concat(algorithm));\n  }\n}\n\nfunction absoluteSum(input) {\n  var sum = 0;\n\n  for (var i = 0; i < input.length; i++) {\n    sum += Math.abs(input[i]);\n  }\n\n  return sum;\n}\n\nexport default norm;\n","import variance from 'ml-array-variance';\n\n/**\n * Computes the standard deviation of the given values\n * @param {Array} values\n * @param {object} [options]\n * @param {boolean} [options.unbiased = true] - if true, divide by (n-1); if false, divide by n.\n * @param {number} [options.mean = arrayMean] - precalculated mean, if any.\n * @return {number}\n */\n\nfunction standardDeviation(values) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return Math.sqrt(variance(values, options));\n}\n\nexport default standardDeviation;\n","/**\n * Merge abscissa values if the ordinate value is in a list of centroids\n * @param {object} originalPoints\n * @param {Array<number>} originalPoints.x\n * @param {Array<number>} originalPoints.y\n * @param {Array<number>} centroids\n * @param {object} [options]\n * @param {number} [options.window = 0.01] - has to be a positive number\n * @return {{x: Array<number>, y: Array<number>}}\n */\nexport default function mergeByCentroids(\n  originalPoints,\n  centroids,\n  options = {}\n) {\n  const { window = 0.01 } = options;\n\n  var mergedPoints = {\n    x: centroids.slice(),\n    y: new Array(centroids.length).fill(0)\n  };\n\n  var originalIndex = 0;\n  var mergedIndex = 0;\n  while (\n    originalIndex < originalPoints.x.length &&\n    mergedIndex < centroids.length\n  ) {\n    var diff = originalPoints.x[originalIndex] - centroids[mergedIndex];\n    if (Math.abs(diff) < window) {\n      mergedPoints.y[mergedIndex] += originalPoints.y[originalIndex++];\n    } else if (diff < 0) {\n      originalIndex++;\n    } else {\n      mergedIndex++;\n    }\n  }\n\n  return mergedPoints;\n}\n","import binarySearch from 'binary-search';\nimport { asc, desc } from 'num-sort';\n\n/**\n *\n * @param {object} points\n * @param {Array<number>} originalPoints.x\n * @param {Array<number>} originalPoints.y\n * @param {*} options\n * @return {{x: Array<number>, y: Array<number>}}\n */\nexport default function closestX(points, options) {\n  const { x, y } = points;\n  const { target = x[0], reverse = false } = options;\n\n  let index;\n  if (reverse) {\n    index = binarySearch(x, target, desc);\n  } else {\n    index = binarySearch(x, target, asc);\n  }\n\n  if (index >= 0) {\n    return {\n      x: x[index],\n      y: y[index]\n    };\n  } else {\n    index = ~index;\n    if (\n      (index !== 0 && Math.abs(x[index] - target) > 0.5) ||\n      index === x.length\n    ) {\n      return {\n        x: x[index - 1],\n        y: y[index - 1]\n      };\n    } else {\n      return {\n        x: x[index],\n        y: y[index]\n      };\n    }\n  }\n}\n","/**\n * Merge abscissas values on similar ordinates and weight the group of abscissas\n * @param {object} points\n * @param {Array<number>} points.x - sorted abscissas values\n * @param {Array<number>} points.y - ordinates values\n * @param {object} [options]\n * @param {number} [options.groupWidth = 0.001] - window for abscissas to merge\n * @return {{x: Array<number>, y: Array<number>}}\n */\nexport default function maxMerge(points, options = {}) {\n  const { x, y } = points;\n  const { groupWidth = 0.001 } = options;\n\n  var merged = { x: [], y: [] };\n  var maxAbscissa = { x: [], y: [] };\n  var size = 0;\n  var index = 0;\n\n  while (index < x.length) {\n    if (size === 0 || x[index] - merged.x[size - 1] > groupWidth) {\n      maxAbscissa.x.push(x[index]);\n      maxAbscissa.y.push(y[index]);\n      merged.x.push(x[index]);\n      merged.y.push(y[index]);\n      index++;\n      size++;\n    } else {\n      if (y[index] > maxAbscissa.y[size - 1]) {\n        maxAbscissa.x[size - 1] = x[index];\n        maxAbscissa.y[size - 1] = y[index];\n      }\n      merged.x[size - 1] = x[index];\n      merged.y[size - 1] += y[index];\n      index++;\n    }\n  }\n\n  merged.x = maxAbscissa.x.slice();\n\n  return merged;\n}\n","import binarySearch from 'binary-search';\nimport { asc, desc } from 'num-sort';\n\n/**\n * @param {object} points\n * @param {Array<number>} points.x - sorted abscissas values\n * @param {Array<number>} points.y - ordinates values\n * @param {object} [options]\n * @param {object} [options.from = {index: 0}]\n * @param {object} [options.to = {index: x.length-1}]\n * @param {boolean} [options.reverse = false]\n * @return {{index: number, value: number}}\n */\nexport default function maxY(points, options = {}) {\n  const { x, y } = points;\n  let {\n    from = { index: 0 },\n    to = { index: x.length },\n    reverse = false\n  } = options;\n\n  if (from.value !== undefined && from.index === undefined) {\n    from.index = calculateIndex(from.value, x, reverse);\n  }\n\n  if (to.value !== undefined && to.index === undefined) {\n    to.index = calculateIndex(to.value, x, reverse);\n  }\n\n  var currentMax = Number.MIN_VALUE;\n  var currentIndex;\n  for (var i = from.index; i < to.index; i++) {\n    if (currentMax < y[i]) {\n      currentMax = y[i];\n      currentIndex = i;\n    }\n  }\n\n  return {\n    index: currentIndex,\n    value: currentMax\n  };\n}\n\n/**\n * @param {number} value\n * @param {Array<number>} x\n * @param {boolean} reverse\n * @return {number} index of the value in the array\n */\nfunction calculateIndex(value, x, reverse) {\n  let index;\n  if (reverse) {\n    index = binarySearch(x, value, desc);\n  } else {\n    index = binarySearch(x, value, asc);\n  }\n\n  if (index < 0) {\n    throw new Error(`the value ${value} doesn't belongs to the abscissa value`);\n  }\n\n  return index;\n}\n","export default function sortX(points, options = {}) {\n  const { x, y } = points;\n  const { reverse = false } = options;\n\n  var sortFunc;\n  if (!reverse) {\n    sortFunc = (a, b) => a.x - b.x;\n  } else {\n    sortFunc = (a, b) => b.x - a.x;\n  }\n\n  var grouped = x\n    .map((val, index) => ({\n      x: val,\n      y: y[index]\n    }))\n    .sort(sortFunc);\n\n  var response = { x: x.slice(), y: y.slice() };\n  for (var i = 0; i < x.length; i++) {\n    response.x[i] = grouped[i].x;\n    response.y[i] = grouped[i].y;\n  }\n\n  return response;\n}\n","\n/**\n * In place modification of the 2 arrays to make X unique and sum the Y if X has the same value\n * @param {object} [points={}] : Object of points contains property x (an array) and y (an array)\n * @return points\n */\n\nexport default function uniqueX(points = {}) {\n  const { x, y } = points;\n  if (x.length < 2) return;\n  if (x.length !== y.length) {\n    throw new Error('The X and Y arrays mush have the same length');\n  }\n\n  let current = x[0];\n  let counter = 0;\n\n  for (let i = 1; i < x.length; i++) {\n    if (current !== x[i]) {\n      counter++;\n      current = x[i];\n      x[counter] = x[i];\n      if (i !== counter) {\n        y[counter] = 0;\n      }\n    }\n    if (i !== counter) {\n      y[counter] += y[i];\n    }\n  }\n\n  x.length = counter + 1;\n  y.length = counter + 1;\n}\n","/**\n * Merge abscissas values on similar ordinates and weight the group of abscissas\n * @param {object} points\n * @param {Array<number>} points.x - sorted abscissas values\n * @param {Array<number>} points.y - ordinates values\n * @param {object} [options]\n * @param {number} [options.groupWidth = 0.001] - window for abscissas to merge\n * @return {{x: Array<number>, y: Array<number>}}\n */\nexport default function weightedMerge(points, options = {}) {\n  const { x, y } = points;\n  const { groupWidth = 0.001 } = options;\n\n  var merged = { x: [], y: [] };\n  var weightedAbscissa = { x: [], y: [] };\n  var size = 0;\n  var index = 0;\n\n  while (index < x.length) {\n    if (size === 0 || x[index] - merged.x[size - 1] > groupWidth) {\n      weightedAbscissa.x.push(x[index] * y[index]);\n      weightedAbscissa.y.push(y[index]);\n      merged.x.push(x[index]);\n      merged.y.push(y[index]);\n      index++;\n      size++;\n    } else {\n      weightedAbscissa.x[size - 1] += x[index] * y[index];\n      weightedAbscissa.y[size - 1] += y[index];\n      merged.x[size - 1] = x[index];\n      merged.y[size - 1] += y[index];\n      index++;\n    }\n  }\n\n  for (var i = 0; i < merged.x.length; i++) {\n    merged.x[i] = weightedAbscissa.x[i] / weightedAbscissa.y[i];\n  }\n\n  return merged;\n}\n","export function squaredEuclidean(p, q) {\r\n    let d = 0;\r\n    for (let i = 0; i < p.length; i++) {\r\n        d += (p[i] - q[i]) * (p[i] - q[i]);\r\n    }\r\n    return d;\r\n}\r\nexport function euclidean(p, q) {\r\n    return Math.sqrt(squaredEuclidean(p, q));\r\n}\r\n","export function squaredEuclidean(p, q) {\r\n    let d = 0;\r\n    for (let i = 0; i < p.length; i++) {\r\n        d += (p[i] - q[i]) * (p[i] - q[i]);\r\n    }\r\n    return d;\r\n}\r\nexport function euclidean(p, q) {\r\n    return Math.sqrt(squaredEuclidean(p, q));\r\n}\r\n","'use strict';\nimport { squaredEuclidean } from 'ml-distance-euclidean';\nconst defaultOptions = {\n    distanceFunction: squaredEuclidean\n};\nexport default function nearestVector(listVectors, vector, options = defaultOptions) {\n    const distanceFunction = options.distanceFunction || defaultOptions.distanceFunction;\n    const similarityFunction = options.similarityFunction || defaultOptions.similarityFunction;\n    let vectorIndex = -1;\n    if (typeof similarityFunction === 'function') {\n        // maximum similarity\n        let maxSim = Number.MIN_VALUE;\n        for (let j = 0; j < listVectors.length; j++) {\n            const sim = similarityFunction(vector, listVectors[j]);\n            if (sim > maxSim) {\n                maxSim = sim;\n                vectorIndex = j;\n            }\n        }\n    }\n    else if (typeof distanceFunction === 'function') {\n        // minimum distance\n        let minDist = Number.MAX_VALUE;\n        for (let i = 0; i < listVectors.length; i++) {\n            const dist = distanceFunction(vector, listVectors[i]);\n            if (dist < minDist) {\n                minDist = dist;\n                vectorIndex = i;\n            }\n        }\n    }\n    else {\n        throw new Error(\"A similarity or distance function it's required\");\n    }\n    return vectorIndex;\n}\nexport function findNearestVector(vectorList, vector, options = defaultOptions) {\n    const index = nearestVector(vectorList, vector, options);\n    return vectorList[index];\n}\n","import nearestVector from 'ml-nearest-vector';\n\n/**\n * Calculates the distance matrix for a given array of points\n * @ignore\n * @param {Array<Array<number>>} data - the [x,y,z,...] points to cluster\n * @param {function} distance - Distance function to use between the points\n * @return {Array<Array<number>>} - matrix with the distance values\n */\nexport function calculateDistanceMatrix(data, distance) {\n  var distanceMatrix = new Array(data.length);\n  for (var i = 0; i < data.length; ++i) {\n    for (var j = i; j < data.length; ++j) {\n      if (!distanceMatrix[i]) {\n        distanceMatrix[i] = new Array(data.length);\n      }\n      if (!distanceMatrix[j]) {\n        distanceMatrix[j] = new Array(data.length);\n      }\n      const dist = distance(data[i], data[j]);\n      distanceMatrix[i][j] = dist;\n      distanceMatrix[j][i] = dist;\n    }\n  }\n  return distanceMatrix;\n}\n\n/**\n * Updates the cluster identifier based in the new data\n * @ignore\n * @param {Array<Array<number>>} data - the [x,y,z,...] points to cluster\n * @param {Array<Array<number>>} centers - the K centers in format [x,y,z,...]\n * @param {Array <number>} clusterID - the cluster identifier for each data dot\n * @param {function} distance - Distance function to use between the points\n * @return {Array} the cluster identifier for each data dot\n */\nexport function updateClusterID(data, centers, clusterID, distance) {\n  for (var i = 0; i < data.length; i++) {\n    clusterID[i] = nearestVector(centers, data[i], {\n      distanceFunction: distance\n    });\n  }\n  return clusterID;\n}\n\n/**\n * Update the center values based in the new configurations of the clusters\n * @ignore\n * @param {Array<Array<number>>} prevCenters - Centroids from the previous iteration\n * @param {Array <Array <number>>} data - the [x,y,z,...] points to cluster\n * @param {Array <number>} clusterID - the cluster identifier for each data dot\n * @param {number} K - Number of clusters\n * @return {Array} he K centers in format [x,y,z,...]\n */\nexport function updateCenters(prevCenters, data, clusterID, K) {\n  const nDim = data[0].length;\n\n  // copy previous centers\n  var centers = new Array(K);\n  var centersLen = new Array(K);\n  for (var i = 0; i < K; i++) {\n    centers[i] = new Array(nDim);\n    centersLen[i] = 0;\n    for (var j = 0; j < nDim; j++) {\n      centers[i][j] = 0;\n    }\n  }\n\n  // add the value for all dimensions of the point\n  for (var l = 0; l < data.length; l++) {\n    centersLen[clusterID[l]]++;\n    for (var dim = 0; dim < nDim; dim++) {\n      centers[clusterID[l]][dim] += data[l][dim];\n    }\n  }\n\n  // divides by length\n  for (var id = 0; id < K; id++) {\n    for (var d = 0; d < nDim; d++) {\n      if (centersLen[id]) {\n        centers[id][d] /= centersLen[id];\n      } else {\n        centers[id][d] = prevCenters[id][d];\n      }\n    }\n  }\n  return centers;\n}\n\n/**\n * The centers have moved more than the tolerance value?\n * @ignore\n * @param {Array<Array<number>>} centers - the K centers in format [x,y,z,...]\n * @param {Array<Array<number>>} oldCenters - the K old centers in format [x,y,z,...]\n * @param {function} distanceFunction - Distance function to use between the points\n * @param {number} tolerance - Allowed distance for the centroids to move\n * @return {boolean}\n */\nexport function hasConverged(centers, oldCenters, distanceFunction, tolerance) {\n  for (var i = 0; i < centers.length; i++) {\n    if (distanceFunction(centers[i], oldCenters[i]) > tolerance) {\n      return false;\n    }\n  }\n  return true;\n}\n","import Random from 'ml-random';\nimport { squaredEuclidean } from 'ml-distance-euclidean';\nimport { Matrix } from 'ml-matrix';\n\n/**\n * Choose K different random points from the original data\n * @ignore\n * @param {Array<Array<number>>} data - Points in the format to cluster [x,y,z,...]\n * @param {number} K - number of clusters\n * @param {number} seed - seed for random number generation\n * @return {Array<Array<number>>} - Initial random points\n */\nexport function random(data, K, seed) {\n  const random = new Random(seed);\n  return random.choice(data, { size: K });\n}\n\n/**\n * Chooses the most distant points to a first random pick\n * @ignore\n * @param {Array<Array<number>>} data - Points in the format to cluster [x,y,z,...]\n * @param {number} K - number of clusters\n * @param {Array<Array<number>>} distanceMatrix - matrix with the distance values\n * @param {number} seed - seed for random number generation\n * @return {Array<Array<number>>} - Initial random points\n */\nexport function mostDistant(data, K, distanceMatrix, seed) {\n  const random = new Random(seed);\n  var ans = new Array(K);\n  // chooses a random point as initial cluster\n  ans[0] = Math.floor(random.random() * data.length);\n\n  if (K > 1) {\n    // chooses the more distant point\n    var maxDist = { dist: -1, index: -1 };\n    for (var l = 0; l < data.length; ++l) {\n      if (distanceMatrix[ans[0]][l] > maxDist.dist) {\n        maxDist.dist = distanceMatrix[ans[0]][l];\n        maxDist.index = l;\n      }\n    }\n    ans[1] = maxDist.index;\n\n    if (K > 2) {\n      // chooses the set of points that maximises the min distance\n      for (var k = 2; k < K; ++k) {\n        var center = { dist: -1, index: -1 };\n        for (var m = 0; m < data.length; ++m) {\n          // minimum distance to centers\n          var minDistCent = { dist: Number.MAX_VALUE, index: -1 };\n          for (var n = 0; n < k; ++n) {\n            if (\n              distanceMatrix[n][m] < minDistCent.dist &&\n              ans.indexOf(m) === -1\n            ) {\n              minDistCent = {\n                dist: distanceMatrix[n][m],\n                index: m\n              };\n            }\n          }\n\n          if (\n            minDistCent.dist !== Number.MAX_VALUE &&\n            minDistCent.dist > center.dist\n          ) {\n            center = Object.assign({}, minDistCent);\n          }\n        }\n\n        ans[k] = center.index;\n      }\n    }\n  }\n\n  return ans.map((index) => data[index]);\n}\n\n// Implementation inspired from scikit\nexport function kmeanspp(X, K, options = {}) {\n  X = new Matrix(X);\n  const nSamples = X.length;\n  const random = new Random(options.seed);\n  // Set the number of trials\n  const centers = [];\n  const localTrials = options.localTrials || 2 + Math.floor(Math.log(K));\n\n  // Pick the first center at random from the dataset\n  const firstCenterIdx = random.randInt(nSamples);\n  centers.push(X[firstCenterIdx].slice());\n\n  // Init closest distances\n  let closestDistSquared = [X.map((x) => squaredEuclidean(x, centers[0]))];\n  let cumSumClosestDistSquared = [cumSum(closestDistSquared[0])];\n  const factor = 1 / cumSumClosestDistSquared[0][nSamples - 1];\n  let probabilities = Matrix.mul(closestDistSquared, factor);\n\n  // Iterate over the remaining centers\n  for (let i = 1; i < K; i++) {\n    const candidateIdx = random.choice(nSamples, {\n      replace: true,\n      size: localTrials,\n      probabilities: probabilities[0]\n    });\n\n    const candidates = X.selection(candidateIdx, range(X[0].length));\n    const distanceToCandidates = euclidianDistances(candidates, X);\n\n    let bestCandidate;\n    let bestPot;\n    let bestDistSquared;\n\n    for (let j = 0; j < localTrials; j++) {\n      const newDistSquared = Matrix.min(closestDistSquared, [distanceToCandidates[j]]);\n      const newPot = newDistSquared.sum();\n      if (bestCandidate === undefined || newPot < bestPot) {\n        bestCandidate = candidateIdx[j];\n        bestPot = newPot;\n        bestDistSquared = newDistSquared;\n      }\n    }\n    centers[i] = X[bestCandidate].slice();\n    closestDistSquared = bestDistSquared;\n    cumSumClosestDistSquared = [cumSum(closestDistSquared[0])];\n    probabilities = Matrix.mul(\n      closestDistSquared,\n      1 / cumSumClosestDistSquared[0][nSamples - 1]\n    );\n  }\n  return centers;\n}\n\nfunction euclidianDistances(A, B) {\n  const result = new Matrix(A.length, B.length);\n  for (let i = 0; i < A.length; i++) {\n    for (let j = 0; j < B.length; j++) {\n      result.set(i, j, squaredEuclidean(A.getRow(i), B.getRow(j)));\n    }\n  }\n  return result;\n}\n\nfunction range(l) {\n  let r = [];\n  for (let i = 0; i < l; i++) {\n    r.push(i);\n  }\n  return r;\n}\n\nfunction cumSum(arr) {\n  let cumSum = [arr[0]];\n  for (let i = 1; i < arr.length; i++) {\n    cumSum[i] = cumSum[i - 1] + arr[i];\n  }\n  return cumSum;\n}\n","import { updateClusterID } from './utils';\n\nconst distanceSymbol = Symbol('distance');\n\nexport default class KMeansResult {\n  /**\n   * Result of the kmeans algorithm\n   * @param {Array<number>} clusters - the cluster identifier for each data dot\n   * @param {Array<Array<object>>} centroids - the K centers in format [x,y,z,...], the error and size of the cluster\n   * @param {boolean} converged - Converge criteria satisfied\n   * @param {number} iterations - Current number of iterations\n   * @param {function} distance - (*Private*) Distance function to use between the points\n   * @constructor\n   */\n  constructor(clusters, centroids, converged, iterations, distance) {\n    this.clusters = clusters;\n    this.centroids = centroids;\n    this.converged = converged;\n    this.iterations = iterations;\n    this[distanceSymbol] = distance;\n  }\n\n  /**\n   * Allows to compute for a new array of points their cluster id\n   * @param {Array<Array<number>>} data - the [x,y,z,...] points to cluster\n   * @return {Array<number>} - cluster id for each point\n   */\n  nearest(data) {\n    const clusterID = new Array(data.length);\n    const centroids = this.centroids.map(function (centroid) {\n      return centroid.centroid;\n    });\n    return updateClusterID(data, centroids, clusterID, this[distanceSymbol]);\n  }\n\n  /**\n   * Returns a KMeansResult with the error and size of the cluster\n   * @ignore\n   * @param {Array<Array<number>>} data - the [x,y,z,...] points to cluster\n   * @return {KMeansResult}\n   */\n  computeInformation(data) {\n    var enrichedCentroids = this.centroids.map(function (centroid) {\n      return {\n        centroid: centroid,\n        error: 0,\n        size: 0\n      };\n    });\n\n    for (var i = 0; i < data.length; i++) {\n      enrichedCentroids[this.clusters[i]].error += this[distanceSymbol](\n        data[i],\n        this.centroids[this.clusters[i]]\n      );\n      enrichedCentroids[this.clusters[i]].size++;\n    }\n\n    for (var j = 0; j < this.centroids.length; j++) {\n      if (enrichedCentroids[j].size) {\n        enrichedCentroids[j].error /= enrichedCentroids[j].size;\n      } else {\n        enrichedCentroids[j].error = null;\n      }\n    }\n\n    return new KMeansResult(\n      this.clusters,\n      enrichedCentroids,\n      this.converged,\n      this.iterations,\n      this[distanceSymbol]\n    );\n  }\n}\n","import { squaredEuclidean } from 'ml-distance-euclidean';\n\nimport {\n  updateClusterID,\n  updateCenters,\n  hasConverged,\n  calculateDistanceMatrix\n} from './utils';\nimport { mostDistant, random, kmeanspp } from './initialization';\nimport KMeansResult from './KMeansResult';\n\nconst defaultOptions = {\n  maxIterations: 100,\n  tolerance: 1e-6,\n  withIterations: false,\n  initialization: 'kmeans++',\n  distanceFunction: squaredEuclidean\n};\n\n/**\n * Each step operation for kmeans\n * @ignore\n * @param {Array<Array<number>>} centers - K centers in format [x,y,z,...]\n * @param {Array<Array<number>>} data - Points [x,y,z,...] to cluster\n * @param {Array<number>} clusterID - Cluster identifier for each data dot\n * @param {number} K - Number of clusters\n * @param {object} [options] - Option object\n * @param {number} iterations - Current number of iterations\n * @return {KMeansResult}\n */\nfunction step(centers, data, clusterID, K, options, iterations) {\n  clusterID = updateClusterID(\n    data,\n    centers,\n    clusterID,\n    options.distanceFunction\n  );\n  var newCenters = updateCenters(centers, data, clusterID, K);\n  var converged = hasConverged(\n    newCenters,\n    centers,\n    options.distanceFunction,\n    options.tolerance\n  );\n  return new KMeansResult(\n    clusterID,\n    newCenters,\n    converged,\n    iterations,\n    options.distanceFunction\n  );\n}\n\n/**\n * Generator version for the algorithm\n * @ignore\n * @param {Array<Array<number>>} centers - K centers in format [x,y,z,...]\n * @param {Array<Array<number>>} data - Points [x,y,z,...] to cluster\n * @param {Array<number>} clusterID - Cluster identifier for each data dot\n * @param {number} K - Number of clusters\n * @param {object} [options] - Option object\n */\nfunction* kmeansGenerator(centers, data, clusterID, K, options) {\n  var converged = false;\n  var stepNumber = 0;\n  var stepResult;\n  while (!converged && stepNumber < options.maxIterations) {\n    stepResult = step(centers, data, clusterID, K, options, ++stepNumber);\n    yield stepResult.computeInformation(data);\n    converged = stepResult.converged;\n    centers = stepResult.centroids;\n  }\n}\n\n/**\n * K-means algorithm\n * @param {Array<Array<number>>} data - Points in the format to cluster [x,y,z,...]\n * @param {number} K - Number of clusters\n * @param {object} [options] - Option object\n * @param {number} [options.maxIterations = 100] - Maximum of iterations allowed\n * @param {number} [options.tolerance = 1e-6] - Error tolerance\n * @param {boolean} [options.withIterations = false] - Store clusters and centroids for each iteration\n * @param {function} [options.distanceFunction = squaredDistance] - Distance function to use between the points\n * @param {number} [options.seed] - Seed for random initialization.\n * @param {string|Array<Array<number>>} [options.initialization = 'kmeans++'] - K centers in format [x,y,z,...] or a method for initialize the data:\n *  * You can either specify your custom start centroids, or select one of the following initialization method:\n *  * `'kmeans++'` will use the kmeans++ method as described by http://ilpubs.stanford.edu:8090/778/1/2006-13.pdf\n *  * `'random'` will choose K random different values.\n *  * `'mostDistant'` will choose the more distant points to a first random pick\n * @return {KMeansResult} - Cluster identifier for each data dot and centroids with the following fields:\n *  * `'clusters'`: Array of indexes for the clusters.\n *  * `'centroids'`: Array with the resulting centroids.\n *  * `'iterations'`: Number of iterations that took to converge\n */\nexport default function kmeans(data, K, options) {\n  options = Object.assign({}, defaultOptions, options);\n\n  if (K <= 0 || K > data.length || !Number.isInteger(K)) {\n    throw new Error(\n      'K should be a positive integer smaller than the number of points'\n    );\n  }\n\n  var centers;\n  if (Array.isArray(options.initialization)) {\n    if (options.initialization.length !== K) {\n      throw new Error('The initial centers should have the same length as K');\n    } else {\n      centers = options.initialization;\n    }\n  } else {\n    switch (options.initialization) {\n      case 'kmeans++':\n        centers = kmeanspp(data, K, options);\n        break;\n      case 'random':\n        centers = random(data, K, options.seed);\n        break;\n      case 'mostDistant':\n        centers = mostDistant(\n          data,\n          K,\n          calculateDistanceMatrix(data, options.distanceFunction),\n          options.seed\n        );\n        break;\n      default:\n        throw new Error(\n          `Unknown initialization method: \"${options.initialization}\"`\n        );\n    }\n  }\n\n  // infinite loop until convergence\n  if (options.maxIterations === 0) {\n    options.maxIterations = Number.MAX_VALUE;\n  }\n\n  var clusterID = new Array(data.length);\n  if (options.withIterations) {\n    return kmeansGenerator(centers, data, clusterID, K, options);\n  } else {\n    var converged = false;\n    var stepNumber = 0;\n    var stepResult;\n    while (!converged && stepNumber < options.maxIterations) {\n      stepResult = step(centers, data, clusterID, K, options, ++stepNumber);\n      converged = stepResult.converged;\n      centers = stepResult.centroids;\n    }\n    return stepResult.computeInformation(data);\n  }\n}\n","import Random from 'random-js';\nimport Matrix from 'ml-matrix';\n\nexport function checkFloat(n) {\n  return n > 0.0 && n <= 1.0;\n}\n\n/**\n * Select n with replacement elements on the training set and values, where n is the size of the training set.\n * @ignore\n * @param {Matrix} trainingSet\n * @param {Array} trainingValue\n * @param {number} seed - seed for the random selection, must be a 32-bit integer.\n * @return {object} with new X and y.\n */\nexport function examplesBaggingWithReplacement(trainingSet, trainingValue, seed) {\n  var engine = Random.engines.mt19937();\n  var distribution = Random.integer(0, trainingSet.rows - 1);\n  if (seed === undefined) {\n    engine = engine.autoSeed();\n  } else if (Number.isInteger(seed)) {\n    engine = engine.seed(seed);\n  } else {\n    throw new RangeError(`Expected seed must be undefined or integer not ${seed}`);\n  }\n\n  var Xr = new Array(trainingSet.rows);\n  var yr = new Array(trainingSet.rows);\n\n  for (var i = 0; i < trainingSet.rows; ++i) {\n    var index = distribution(engine);\n    Xr[i] = trainingSet[index];\n    yr[i] = trainingValue[index];\n  }\n\n  return {\n    X: new Matrix(Xr),\n    y: yr\n  };\n}\n\n/**\n * selects n features from the training set with or without replacement, returns the new training set and the indexes used.\n * @ignore\n * @param {Matrix} trainingSet\n * @param {number} n - features.\n * @param {boolean} replacement\n * @param {number} seed - seed for the random selection, must be a 32-bit integer.\n * @return {object}\n */\nexport function featureBagging(trainingSet, n, replacement, seed) {\n  if (trainingSet.columns < n) {\n    throw new RangeError('N should be less or equal to the number of columns of X');\n  }\n\n  var distribution = Random.integer(0, trainingSet.columns - 1);\n  var engine = Random.engines.mt19937();\n  if (seed === undefined) {\n    engine = engine.autoSeed();\n  } else if (Number.isInteger(seed)) {\n    engine = engine.seed(seed);\n  } else {\n    throw new RangeError(`Expected seed must be undefined or integer not ${seed}`);\n  }\n\n  var toRet = new Matrix(trainingSet.rows, n);\n\n  if (replacement) {\n    var usedIndex = new Array(n);\n    for (var i = 0; i < n; ++i) {\n      var index = distribution(engine);\n      usedIndex[i] = index;\n      toRet.setColumn(i, trainingSet.getColumn(index));\n    }\n  } else {\n    usedIndex = new Set();\n    index = distribution(engine);\n    for (i = 0; i < n; ++i) {\n      while (usedIndex.has(index)) {\n        index = distribution(engine);\n      }\n      toRet.setColumn(i, trainingSet.getColumn(index));\n      usedIndex.add(index);\n    }\n    usedIndex = Array.from(usedIndex);\n  }\n\n  return {\n    X: toRet,\n    usedIndex: usedIndex\n  };\n}\n","import {\n  DecisionTreeClassifier as DTClassifier,\n  DecisionTreeRegression as DTRegression\n} from 'ml-cart';\nimport { Matrix, WrapperMatrix2D } from 'ml-matrix';\n\nimport * as Utils from './utils';\n\n/**\n * @class RandomForestBase\n */\nexport class RandomForestBase {\n  /**\n   * Create a new base random forest for a classifier or regression model.\n   * @constructor\n   * @param {object} options\n   * @param {number|String} [options.maxFeatures] - the number of features used on each estimator.\n   *        * if is an integer it selects maxFeatures elements over the sample features.\n   *        * if is a float between (0, 1), it takes the percentage of features.\n   * @param {boolean} [options.replacement] - use replacement over the sample features.\n   * @param {number} [options.seed] - seed for feature and samples selection, must be a 32-bit integer.\n   * @param {number} [options.nEstimators] - number of estimator to use.\n   * @param {object} [options.treeOptions] - options for the tree classifier, see [ml-cart]{@link https://mljs.github.io/decision-tree-cart/}\n   * @param {boolean} [options.isClassifier] - boolean to check if is a classifier or regression model (used by subclasses).\n   * @param {boolean} [options.useSampleBagging] - use bagging over training samples.\n   * @param {object} model - for load purposes.\n   */\n  constructor(options, model) {\n    if (options === true) {\n      this.replacement = model.replacement;\n      this.maxFeatures = model.maxFeatures;\n      this.nEstimators = model.nEstimators;\n      this.treeOptions = model.treeOptions;\n      this.isClassifier = model.isClassifier;\n      this.seed = model.seed;\n      this.n = model.n;\n      this.indexes = model.indexes;\n      this.useSampleBagging = model.useSampleBagging;\n\n      var Estimator = this.isClassifier ? DTClassifier : DTRegression;\n      this.estimators = model.estimators.map((est) => Estimator.load(est));\n    } else {\n      this.replacement = options.replacement;\n      this.maxFeatures = options.maxFeatures;\n      this.nEstimators = options.nEstimators;\n      this.treeOptions = options.treeOptions;\n      this.isClassifier = options.isClassifier;\n      this.seed = options.seed;\n      this.useSampleBagging = options.useSampleBagging;\n    }\n  }\n\n  /**\n   * Train the decision tree with the given training set and labels.\n   * @param {Matrix|Array} trainingSet\n   * @param {Array} trainingValues\n   */\n  train(trainingSet, trainingValues) {\n    trainingSet = Matrix.checkMatrix(trainingSet);\n\n    this.maxFeatures = this.maxFeatures || trainingSet.columns;\n\n    if (Utils.checkFloat(this.maxFeatures)) {\n      this.n = Math.floor(trainingSet.columns * this.maxFeatures);\n    } else if (Number.isInteger(this.maxFeatures)) {\n      if (this.maxFeatures > trainingSet.columns) {\n        throw new RangeError(`The maxFeatures parameter should be less than ${trainingSet.columns}`);\n      } else {\n        this.n = this.maxFeatures;\n      }\n    } else {\n      throw new RangeError(`Cannot process the maxFeatures parameter ${this.maxFeatures}`);\n    }\n\n\n    if (this.isClassifier) {\n      var Estimator = DTClassifier;\n    } else {\n      Estimator = DTRegression;\n    }\n\n    this.estimators = new Array(this.nEstimators);\n    this.indexes = new Array(this.nEstimators);\n\n    for (var i = 0; i < this.nEstimators; ++i) {\n      var res = this.useSampleBagging ? Utils.examplesBaggingWithReplacement(trainingSet, trainingValues, this.seed) : { X: trainingSet, y: trainingValues };\n      var X = res.X;\n      var y = res.y;\n\n      res = Utils.featureBagging(X, this.n, this.replacement, this.seed);\n      X = res.X;\n\n      this.indexes[i] = res.usedIndex;\n      this.estimators[i] = new Estimator(this.treeOptions);\n      this.estimators[i].train(X, y);\n    }\n  }\n\n  /**\n   * Method that returns the way the algorithm generates the predictions, for example, in classification\n   * you can return the mode of all predictions retrieved by the trees, or in case of regression you can\n   * use the mean or the median.\n   * @abstract\n   * @param {Array} values - predictions of the estimators.\n   * @return {number} prediction.\n   */\n  // eslint-disable-next-line no-unused-vars\n  selection(values) {\n    throw new Error('Abstract method \\'selection\\' not implemented!');\n  }\n\n  /**\n   * Predicts the output given the matrix to predict.\n   * @param {Matrix|Array} toPredict\n   * @return {Array} predictions\n   */\n  predict(toPredict) {\n    var predictionValues = new Array(this.nEstimators);\n    toPredict = Matrix.checkMatrix(toPredict);\n    for (var i = 0; i < this.nEstimators; ++i) {\n      var X = toPredict.columnSelectionView(this.indexes[i]); // get features for estimator\n      predictionValues[i] = this.estimators[i].predict(X);\n    }\n\n    predictionValues = new WrapperMatrix2D(predictionValues).transposeView();\n    var predictions = new Array(predictionValues.rows);\n    for (i = 0; i < predictionValues.rows; ++i) {\n      predictions[i] = this.selection(predictionValues.getRow(i));\n    }\n\n    return predictions;\n  }\n\n  /**\n   * Export the current model to JSON.\n   * @return {object} - Current model.\n   */\n  toJSON() {\n    return {\n      indexes: this.indexes,\n      n: this.n,\n      replacement: this.replacement,\n      maxFeatures: this.maxFeatures,\n      nEstimators: this.nEstimators,\n      treeOptions: this.treeOptions,\n      isClassifier: this.isClassifier,\n      seed: this.seed,\n      estimators: this.estimators.map((est) => est.toJSON()),\n      useSampleBagging: this.useSampleBagging\n    };\n  }\n}\n","import { RandomForestBase } from './RandomForestBase';\n\nconst defaultOptions = {\n  maxFeatures: 1.0,\n  replacement: true,\n  nEstimators: 10,\n  seed: 42,\n  useSampleBagging: false\n};\n\n/**\n * @class RandomForestClassifier\n * @augments RandomForestBase\n */\nexport class RandomForestClassifier extends RandomForestBase {\n  /**\n     * Create a new base random forest for a classifier or regression model.\n     * @constructor\n     * @param {object} options\n     * @param {number} [options.maxFeatures=1.0] - the number of features used on each estimator.\n     *        * if is an integer it selects maxFeatures elements over the sample features.\n     *        * if is a float between (0, 1), it takes the percentage of features.\n     * @param {boolean} [options.replacement=true] - use replacement over the sample features.\n     * @param {number} [options.seed=42] - seed for feature and samples selection, must be a 32-bit integer.\n     * @param {number} [options.nEstimators=10] - number of estimator to use.\n     * @param {object} [options.treeOptions={}] - options for the tree classifier, see [ml-cart]{@link https://mljs.github.io/decision-tree-cart/}\n     * @param {boolean} [options.useSampleBagging=false] - use bagging over training samples.\n     * @param {object} model - for load purposes.\n     */\n  constructor(options, model) {\n    if (options === true) {\n      super(true, model.baseModel);\n    } else {\n      options = Object.assign({}, defaultOptions, options);\n      options.isClassifier = true;\n      super(options);\n    }\n  }\n\n  /**\n     * retrieve the prediction given the selection method.\n     * @param {Array} values - predictions of the estimators.\n     * @return {number} prediction\n     */\n  selection(values) {\n    return mode(values);\n  }\n\n  /**\n     * Export the current model to JSON.\n     * @return {object} - Current model.\n     */\n  toJSON() {\n    var baseModel = super.toJSON();\n    return {\n      baseModel: baseModel,\n      name: 'RFClassifier'\n    };\n  }\n\n  /**\n     * Load a Decision tree classifier with the given model.\n     * @param {object} model\n     * @return {RandomForestClassifier}\n     */\n  static load(model) {\n    if (model.name !== 'RFClassifier') {\n      throw new RangeError(`Invalid model: ${model.name}`);\n    }\n\n    return new RandomForestClassifier(true, model);\n  }\n}\n\n/**\n * Return the most repeated element on the array.\n * @param {Array} arr\n * @return {number} mode\n */\nfunction mode(arr) {\n  return arr.sort((a, b) =>\n    arr.filter((v) => v === a).length\n        - arr.filter((v) => v === b).length\n  ).pop();\n}\n","import arrayMean from 'ml-array-mean';\nimport arrayMedian from 'ml-array-median';\n\nimport { RandomForestBase } from './RandomForestBase';\n\nconst selectionMethods = {\n  mean: arrayMean,\n  median: arrayMedian\n};\n\nconst defaultOptions = {\n  maxFeatures: 1.0,\n  replacement: false,\n  nEstimators: 10,\n  treeOptions: {},\n  selectionMethod: 'mean',\n  seed: 42,\n  useSampleBagging: false\n};\n\n/**\n * @class RandomForestRegression\n * @augments RandomForestBase\n */\nexport class RandomForestRegression extends RandomForestBase {\n  /**\n     * Create a new base random forest for a classifier or regression model.\n     * @constructor\n     * @param {object} options\n     * @param {number} [options.maxFeatures=1.0] - the number of features used on each estimator.\n     *        * if is an integer it selects maxFeatures elements over the sample features.\n     *        * if is a float between (0, 1), it takes the percentage of features.\n     * @param {boolean} [options.replacement=true] - use replacement over the sample features.\n     * @param {number} [options.seed=42] - seed for feature and samples selection, must be a 32-bit integer.\n     * @param {number} [options.nEstimators=10] - number of estimator to use.\n     * @param {object} [options.treeOptions={}] - options for the tree classifier, see [ml-cart]{@link https://mljs.github.io/decision-tree-cart/}\n     * @param {string} [options.selectionMethod=\"mean\"] - the way to calculate the prediction from estimators, \"mean\" and \"median\" are supported.\n     * @param {boolean} [options.useSampleBagging=false] - use bagging over training samples.\n     * @param {object} model - for load purposes.\n     */\n  constructor(options, model) {\n    if (options === true) {\n      super(true, model.baseModel);\n      this.selectionMethod = model.selectionMethod;\n    } else {\n      options = Object.assign({}, defaultOptions, options);\n\n      if (!(options.selectionMethod === 'mean' || options.selectionMethod === 'median')) {\n        throw new RangeError(`Unsupported selection method ${options.selectionMethod}`);\n      }\n\n      options.isClassifier = false;\n\n      super(options);\n      this.selectionMethod = options.selectionMethod;\n    }\n  }\n\n  /**\n     * retrieve the prediction given the selection method.\n     * @param {Array} values - predictions of the estimators.\n     * @return {number} prediction\n     */\n  selection(values) {\n    return selectionMethods[this.selectionMethod](values);\n  }\n\n  /**\n     * Export the current model to JSON.\n     * @return {object} - Current model.\n     */\n  toJSON() {\n    var baseModel = super.toJSON();\n    return {\n      baseModel: baseModel,\n      selectionMethod: this.selectionMethod,\n      name: 'RFRegression'\n    };\n  }\n\n  /**\n     * Load a Decision tree classifier with the given model.\n     * @param {object} model\n     * @return {RandomForestRegression}\n     */\n  static load(model) {\n    if (model.name !== 'RFRegression') {\n      throw new RangeError(`Invalid model: ${model.name}`);\n    }\n\n    return new RandomForestRegression(true, model);\n  }\n}\n","export { RandomForestClassifier } from './RandomForestClassifier';\nexport { RandomForestRegression } from './RandomForestRegression';\n","/**\n * Function that calculates the integral of the line between two\n * x-coordinates, given the slope and intercept of the line.\n * @param {number} x0\n * @param {number} x1\n * @param {number} slope\n * @param {number} intercept\n * @return {number} integral value.\n */\nexport default function integral(x0, x1, slope, intercept) {\n  return (\n    0.5 * slope * x1 * x1 +\n    intercept * x1 -\n    (0.5 * slope * x0 * x0 + intercept * x0)\n  );\n}\n","import integral from './integral';\n\n/**\n * function that retrieves the getEquallySpacedData with the variant \"smooth\"\n *\n * @param {Array<number>} x\n * @param {Array<number>} y\n * @param {number} from - Initial point\n * @param {number} to - Final point\n * @param {number} numberOfPoints\n * @return {Array} - Array of y's equally spaced with the variant \"smooth\"\n */\nexport default function equallySpacedSmooth(x, y, from, to, numberOfPoints) {\n  var xLength = x.length;\n\n  var step = (to - from) / (numberOfPoints - 1);\n  var halfStep = step / 2;\n\n  var output = new Array(numberOfPoints);\n\n  var initialOriginalStep = x[1] - x[0];\n  var lastOriginalStep = x[xLength - 1] - x[xLength - 2];\n\n  // Init main variables\n  var min = from - halfStep;\n  var max = from + halfStep;\n\n  var previousX = Number.MIN_VALUE;\n  var previousY = 0;\n  var nextX = x[0] - initialOriginalStep;\n  var nextY = 0;\n\n  var currentValue = 0;\n  var slope = 0;\n  var intercept = 0;\n  var sumAtMin = 0;\n  var sumAtMax = 0;\n\n  var i = 0; // index of input\n  var j = 0; // index of output\n\n  function getSlope(x0, y0, x1, y1) {\n    return (y1 - y0) / (x1 - x0);\n  }\n\n  main: while (true) {\n    if (previousX <= min && min <= nextX) {\n      add = integral(0, min - previousX, slope, previousY);\n      sumAtMin = currentValue + add;\n    }\n\n    while (nextX - max >= 0) {\n      // no overlap with original point, just consume current value\n      var add = integral(0, max - previousX, slope, previousY);\n      sumAtMax = currentValue + add;\n\n      output[j++] = (sumAtMax - sumAtMin) / step;\n\n      if (j === numberOfPoints) {\n        break main;\n      }\n\n      min = max;\n      max += step;\n      sumAtMin = sumAtMax;\n    }\n\n    currentValue += integral(previousX, nextX, slope, intercept);\n\n    previousX = nextX;\n    previousY = nextY;\n\n    if (i < xLength) {\n      nextX = x[i];\n      nextY = y[i];\n      i++;\n    } else if (i === xLength) {\n      nextX += lastOriginalStep;\n      nextY = 0;\n    }\n\n    slope = getSlope(previousX, previousY, nextX, nextY);\n    intercept = -slope * previousX + previousY;\n  }\n\n  return output;\n}\n","/**\n * function that retrieves the getEquallySpacedData with the variant \"slot\"\n *\n * @param {Array<number>} x\n * @param {Array<number>} y\n * @param {number} from - Initial point\n * @param {number} to - Final point\n * @param {number} numberOfPoints\n * @return {Array} - Array of y's equally spaced with the variant \"slot\"\n */\nexport default function equallySpacedSlot(x, y, from, to, numberOfPoints) {\n  var xLength = x.length;\n\n  var step = (to - from) / (numberOfPoints - 1);\n  var halfStep = step / 2;\n  var lastStep = x[x.length - 1] - x[x.length - 2];\n\n  var start = from - halfStep;\n  var output = new Array(numberOfPoints);\n\n  // Init main variables\n  var min = start;\n  var max = start + step;\n\n  var previousX = -Number.MAX_VALUE;\n  var previousY = 0;\n  var nextX = x[0];\n  var nextY = y[0];\n  var frontOutsideSpectra = 0;\n  var backOutsideSpectra = true;\n\n  var currentValue = 0;\n\n  // for slot algorithm\n  var currentPoints = 0;\n\n  var i = 1; // index of input\n  var j = 0; // index of output\n\n  main: while (true) {\n    if (previousX >= nextX) throw new Error('x must be an increasing serie');\n    while (previousX - max > 0) {\n      // no overlap with original point, just consume current value\n      if (backOutsideSpectra) {\n        currentPoints++;\n        backOutsideSpectra = false;\n      }\n\n      output[j] = currentPoints <= 0 ? 0 : currentValue / currentPoints;\n      j++;\n\n      if (j === numberOfPoints) {\n        break main;\n      }\n\n      min = max;\n      max += step;\n      currentValue = 0;\n      currentPoints = 0;\n    }\n\n    if (previousX > min) {\n      currentValue += previousY;\n      currentPoints++;\n    }\n\n    if (previousX === -Number.MAX_VALUE || frontOutsideSpectra > 1) {\n      currentPoints--;\n    }\n\n    previousX = nextX;\n    previousY = nextY;\n\n    if (i < xLength) {\n      nextX = x[i];\n      nextY = y[i];\n      i++;\n    } else {\n      nextX += lastStep;\n      nextY = 0;\n      frontOutsideSpectra++;\n    }\n  }\n\n  return output;\n}\n","export default function getZones(from, to, numberOfPoints, exclusions = []) {\n  if (from > to) {\n    [from, to] = [to, from];\n  }\n\n  // in exclusions from and to have to be defined\n  exclusions = exclusions.filter(\n    (exclusion) => exclusion.from !== undefined && exclusion.to !== undefined\n  );\n\n  exclusions = JSON.parse(JSON.stringify(exclusions));\n  // we ensure that from before to\n  exclusions.forEach((exclusion) => {\n    if (exclusion.from > exclusion.to) {\n      [exclusion.to, exclusion.from] = [exclusion.from, exclusion.to];\n    }\n  });\n\n  exclusions.sort((a, b) => a.from - b.from);\n\n  // we will rework the exclusions in order to remove overlap and outside range (from / to)\n  exclusions.forEach((exclusion) => {\n    if (exclusion.from < from) exclusion.from = from;\n    if (exclusion.to > to) exclusion.to = to;\n  });\n  for (let i = 0; i < exclusions.length - 1; i++) {\n    if (exclusions[i].to > exclusions[i + 1].from) {\n      exclusions[i].to = exclusions[i + 1].from;\n    }\n  }\n  exclusions = exclusions.filter((exclusion) => exclusion.from < exclusion.to);\n\n  if (!exclusions || exclusions.length === 0) {\n    return [{ from, to, numberOfPoints }];\n  }\n\n  // need to deal with overlapping exclusions and out of bound exclusions\n\n  let toRemove = exclusions.reduce(\n    (previous, exclusion) => (previous += exclusion.to - exclusion.from),\n    0\n  );\n  let total = to - from;\n  let unitsPerPoint = (total - toRemove) / numberOfPoints;\n  let zones = [];\n  let currentFrom = from;\n  let totalPoints = 0;\n  for (let exclusion of exclusions) {\n    let currentNbPoints = Math.round(\n      (exclusion.from - currentFrom) / unitsPerPoint\n    );\n    totalPoints += currentNbPoints;\n    if (currentNbPoints > 0) {\n      zones.push({\n        from: currentFrom,\n        to: exclusion.from,\n        numberOfPoints: currentNbPoints\n      });\n    }\n\n    currentFrom = exclusion.to;\n  }\n  if (numberOfPoints - totalPoints > 0) {\n    zones.push({\n      from: currentFrom,\n      to: to,\n      numberOfPoints: numberOfPoints - totalPoints\n    });\n  }\n\n  return zones;\n}\n","import sequentialFill from 'ml-array-sequential-fill';\n\nimport equallySpacedSmooth from './equallySpacedSmooth';\nimport equallySpacedSlot from './equallySpacedSlot';\nimport getZones from './getZones';\n\n/**\n * Function that returns a Number array of equally spaced numberOfPoints\n * containing a representation of intensities of the spectra arguments x\n * and y.\n *\n * The options parameter contains an object in the following form:\n * from: starting point\n * to: last point\n * numberOfPoints: number of points between from and to\n * variant: \"slot\" or \"smooth\" - smooth is the default option\n *\n * The slot variant consist that each point in the new array is calculated\n * averaging the existing points between the slot that belongs to the current\n * value. The smooth variant is the same but takes the integral of the range\n * of the slot and divide by the step size between two points in the new array.\n *\n * @param {object} [arrayXY={}] - object containing 2 properties x and y (both an array)\n * @param {object} [options={}]\n * @param {number} [options.from=x[0]]\n * @param {number} [options.to=x[x.length-1]]\n * @param {string} [options.variant='smooth']\n * @param {number} [options.numberOfPoints=100]\n * @param {Array} [options.exclusions=[]] array of from / to that should be skipped for the generation of the points\n * @return {object<x: Array, y:Array>} new object with x / y array with the equally spaced data.\n */\n\nexport default function equallySpaced(arrayXY = {}, options = {}) {\n  let { x, y } = arrayXY;\n  let xLength = x.length;\n  let reverse = false;\n  if (x.length > 1 && x[0] > x[1]) {\n    x = x.slice().reverse();\n    y = y.slice().reverse();\n    reverse = true;\n  }\n\n  let {\n    from = x[0],\n    to = x[xLength - 1],\n    variant = 'smooth',\n    numberOfPoints = 100,\n    exclusions = []\n  } = options;\n\n  if (xLength !== y.length) {\n    throw new RangeError(\"the x and y vector doesn't have the same size.\");\n  }\n\n  if (typeof from !== 'number' || isNaN(from)) {\n    throw new RangeError(\"'from' option must be a number\");\n  }\n\n  if (typeof to !== 'number' || isNaN(to)) {\n    throw new RangeError(\"'to' option must be a number\");\n  }\n\n  if (typeof numberOfPoints !== 'number' || isNaN(numberOfPoints)) {\n    throw new RangeError(\"'numberOfPoints' option must be a number\");\n  }\n\n  let zones = getZones(from, to, numberOfPoints, exclusions);\n\n  let xResult = [];\n  let yResult = [];\n  for (let zone of zones) {\n    let zoneResult = processZone(\n      x,\n      y,\n      zone.from,\n      zone.to,\n      zone.numberOfPoints,\n      variant,\n      reverse\n    );\n    xResult.push(...zoneResult.x);\n    yResult.push(...zoneResult.y);\n  }\n\n  if (reverse) {\n    if (from < to) {\n      return { x: xResult.reverse(), y: yResult.reverse() };\n    } else {\n      return { x: xResult, y: yResult };\n    }\n  } else {\n    if (from < to) {\n      return { x: xResult, y: yResult };\n    } else {\n      return { x: xResult.reverse(), y: yResult.reverse() };\n    }\n  }\n}\n\nfunction processZone(x, y, from, to, numberOfPoints, variant) {\n  if (numberOfPoints < 1) {\n    throw new RangeError('the number of points must be at least 1');\n  }\n\n  var output =\n    variant === 'slot'\n      ? equallySpacedSlot(x, y, from, to, numberOfPoints)\n      : equallySpacedSmooth(x, y, from, to, numberOfPoints);\n\n  return {\n    x: sequentialFill({\n      from,\n      to,\n      size: numberOfPoints\n    }),\n    y: output\n  };\n}\n","import Matrix from 'ml-matrix';\n\n/**\n * @private\n * Function that retuns an array of matrices of the cases that belong to each class.\n * @param {Matrix} X - dataset\n * @param {Array} y - predictions\n * @return {Array}\n */\nexport function separateClasses(X, y) {\n    var features = X.columns;\n\n    var classes = 0;\n    var totalPerClasses = new Array(10000); // max upperbound of classes\n    for (var i = 0; i < y.length; i++) {\n        if (totalPerClasses[y[i]] === undefined) {\n            totalPerClasses[y[i]] = 0;\n            classes++;\n        }\n        totalPerClasses[y[i]]++;\n    }\n    var separatedClasses = new Array(classes);\n    var currentIndex = new Array(classes);\n    for (i = 0; i < classes; ++i) {\n        separatedClasses[i] = new Matrix(totalPerClasses[i], features);\n        currentIndex[i] = 0;\n    }\n    for (i = 0; i < X.rows; ++i) {\n        separatedClasses[y[i]].setRow(currentIndex[y[i]], X.getRow(i));\n        currentIndex[y[i]]++;\n    }\n    return separatedClasses;\n}\n","import Matrix from 'ml-matrix';\nimport Stat from 'ml-stat';\nimport {separateClasses} from './utils';\n\n/**\n * @class GaussianNB\n */\nexport class GaussianNB {\n\n    /**\n     * @constructor\n     * Constructor for the Gaussian Naive Bayes classifier, the parameters here is just for loading purposes.\n     *\n     * @param {boolean} reload\n     * @param {object} model\n     */\n    constructor(reload, model) {\n        if (reload) {\n            this.means = model.means;\n            this.calculateProbabilities = model.calculateProbabilities;\n        }\n    }\n\n    /**\n     * Function that trains the classifier with a matrix that represents the training set and an array that\n     * represents the label of each row in the training set. the labels must be numbers between 0 to n-1 where\n     * n represents the number of classes.\n     *\n     * WARNING: in the case that one class, all the cases in one or more features have the same value, the\n     * Naive Bayes classifier will not work well.\n     * @param {Matrix|Array} trainingSet\n     * @param {Matrix|Array} trainingLabels\n     */\n    train(trainingSet, trainingLabels) {\n        var C1 = Math.sqrt(2 * Math.PI); // constant to precalculate the squared root\n        trainingSet = Matrix.checkMatrix(trainingSet);//if (!Matrix.isMatrix(trainingSet)) trainingSet = new Matrix(trainingSet);\n\n        if (trainingSet.rows !== trainingLabels.length) {\n            throw new RangeError('the size of the training set and the training labels must be the same.');\n        }\n\n        var separatedClasses = separateClasses(trainingSet, trainingLabels);\n        var calculateProbabilities = new Array(separatedClasses.length);\n        this.means = new Array(separatedClasses.length);\n        for (var i = 0; i < separatedClasses.length; ++i) {\n            var means = Stat.matrix.mean(separatedClasses[i]);\n            var std = Stat.matrix.standardDeviation(separatedClasses[i], means);\n\n            var logPriorProbability = Math.log(separatedClasses[i].rows / trainingSet.rows);\n            calculateProbabilities[i] = new Array(means.length + 1);\n\n            calculateProbabilities[i][0] = logPriorProbability;\n            for (var j = 1; j < means.length + 1; ++j) {\n                var currentStd = std[j - 1];\n                calculateProbabilities[i][j] = [(1 / (C1 * currentStd)), -2 * currentStd * currentStd];\n            }\n\n            this.means[i] = means;\n        }\n\n        this.calculateProbabilities = calculateProbabilities;\n    }\n\n    /**\n     * function that predicts each row of the dataset (must be a matrix).\n     *\n     * @param {Matrix|Array} dataset\n     * @return {Array}\n     */\n    predict(dataset) {\n        if (dataset[0].length === this.calculateProbabilities[0].length) {\n            throw new RangeError('the dataset must have the same features as the training set');\n        }\n\n        var predictions = new Array(dataset.length);\n\n        for (var i = 0; i < predictions.length; ++i) {\n            predictions[i] = getCurrentClass(dataset[i], this.means, this.calculateProbabilities);\n        }\n\n        return predictions;\n    }\n\n    /**\n     * Function that export the NaiveBayes model.\n     * @return {object}\n     */\n    toJSON() {\n        return {\n            modelName: 'NaiveBayes',\n            means: this.means,\n            calculateProbabilities: this.calculateProbabilities\n        };\n    }\n\n    /**\n     * Function that create a GaussianNB classifier with the given model.\n     * @param {object} model\n     * @return {GaussianNB}\n     */\n    static load(model) {\n        if (model.modelName !== 'NaiveBayes') {\n            throw new RangeError('The current model is not a Multinomial Naive Bayes, current model:', model.name);\n        }\n\n        return new GaussianNB(true, model);\n    }\n}\n\n/**\n * @private\n * Function the retrieves a prediction with one case.\n *\n * @param {Array} currentCase\n * @param {Array} mean - Precalculated means of each class trained\n * @param {Array} classes - Precalculated value of each class (Prior probability and probability function of each feature)\n * @return {number}\n */\nfunction getCurrentClass(currentCase, mean, classes) {\n    var maxProbability = 0;\n    var predictedClass = -1;\n\n    // going through all precalculated values for the classes\n    for (var i = 0; i < classes.length; ++i) {\n        var currentProbability = classes[i][0]; // initialize with the prior probability\n        for (var j = 1; j < classes[0][1].length + 1; ++j) {\n            currentProbability += calculateLogProbability(currentCase[j - 1], mean[i][j - 1], classes[i][j][0], classes[i][j][1]);\n        }\n\n        currentProbability = Math.exp(currentProbability);\n        if (currentProbability > maxProbability) {\n            maxProbability = currentProbability;\n            predictedClass = i;\n        }\n    }\n\n    return predictedClass;\n}\n\n/**\n * @private\n * function that retrieves the probability of the feature given the class.\n * @param {number} value - value of the feature.\n * @param {number} mean - mean of the feature for the given class.\n * @param {number} C1 - precalculated value of (1 / (sqrt(2*pi) * std)).\n * @param {number} C2 - precalculated value of (2 * std^2) for the denominator of the exponential.\n * @return {number}\n */\nfunction calculateLogProbability(value, mean, C1, C2) {\n    value = value - mean;\n    return Math.log(C1 * Math.exp((value * value) / C2));\n}\n","import Matrix from 'ml-matrix';\nimport {separateClasses} from './utils';\n\n/**\n * @class MultinomialNB\n */\nexport class MultinomialNB {\n\n    /**\n     * @constructor\n     * Constructor for Multinomial Naive Bayes, the model parameter is for load purposes.\n     *\n     * @param {object} model - for load purposes.\n     */\n    constructor(model) {\n        if (model) {\n            this.conditionalProbability = Matrix.checkMatrix(model.conditionalProbability);\n            this.priorProbability = Matrix.checkMatrix(model.priorProbability);\n        }\n    }\n\n    /**\n     * Train the classifier with the current training set and labels, the labels must be numbers between 0 and n.\n     * @param {Matrix|Array} trainingSet\n     * @param {Array} trainingLabels\n     */\n    train(trainingSet, trainingLabels) {\n        trainingSet = Matrix.checkMatrix(trainingSet);\n\n        if (trainingSet.rows !== trainingLabels.length) {\n            throw new RangeError('the size of the training set and the training labels must be the same.');\n        }\n\n        var separateClass = separateClasses(trainingSet, trainingLabels);\n        this.priorProbability = new Matrix(separateClass.length, 1);\n\n        for (var i = 0; i < separateClass.length; ++i) {\n            this.priorProbability[i][0] = Math.log(separateClass[i].length / trainingSet.rows);\n        }\n\n        var features = trainingSet.columns;\n        this.conditionalProbability = new Matrix(separateClass.length, features);\n        for (i = 0; i < separateClass.length; ++i) {\n            var classValues = Matrix.checkMatrix(separateClass[i]);\n            var total = classValues.sum();\n            var divisor = total + features;\n            this.conditionalProbability.setRow(i, classValues.sum('column').add(1).div(divisor).apply(matrixLog));\n        }\n    }\n\n    /**\n     * Retrieves the predictions for the dataset with the current model.\n     * @param {Matrix|Array} dataset\n     * @return {Array} - predictions from the dataset.\n     */\n    predict(dataset) {\n        dataset = Matrix.checkMatrix(dataset);\n        var predictions = new Array(dataset.rows);\n        for (var i = 0; i < dataset.rows; ++i) {\n            var currentElement = dataset.getRowVector(i);\n            predictions[i] = this.conditionalProbability.clone().mulRowVector(currentElement).sum('row')\n                .add(this.priorProbability).maxIndex()[0];\n        }\n\n        return predictions;\n    }\n\n    /**\n     * Function that saves the current model.\n     * @return {object} - model in JSON format.\n     */\n    toJSON() {\n        return {\n            name: 'MultinomialNB',\n            priorProbability: this.priorProbability,\n            conditionalProbability: this.conditionalProbability\n        };\n    }\n\n    /**\n     * Creates a new MultinomialNB from the given model\n     * @param {object} model\n     * @return {MultinomialNB}\n     */\n    static load(model) {\n        if (model.name !== 'MultinomialNB') {\n            throw new RangeError(`${model.name} is not a Multinomial Naive Bayes`);\n        }\n\n        return new MultinomialNB(model);\n    }\n}\n\nfunction matrixLog(i, j) {\n    this[i][j] = Math.log(this[i][j]);\n}\n","export {GaussianNB} from './GaussianNB';\nexport {MultinomialNB} from './MultinomialNB';\n","import Matrix from 'ml-matrix';\nimport Stat from 'ml-stat/matrix';\n\n/**\n * @private\n * Function that given vector, returns his norm\n * @param {Vector} X\n * @return {number} Norm of the vector\n */\nexport function norm(X) {\n    return Math.sqrt(X.clone().apply(pow2array).sum());\n}\n\n/**\n * @private\n * Function that pow 2 each element of a Matrix or a Vector,\n * used in the apply method of the Matrix object\n * @param {number} i - index i.\n * @param {number} j - index j.\n * @return {Matrix} The Matrix object modified at the index i, j.\n * */\nexport function pow2array(i, j) {\n    this[i][j] = this[i][j] * this[i][j];\n    return this;\n}\n\n/**\n * @private\n * Function that normalize the dataset and return the means and\n * standard deviation of each feature.\n * @param {Matrix} dataset\n * @return {object} dataset normalized, means and standard deviations\n */\nexport function featureNormalize(dataset) {\n    var means = Stat.mean(dataset);\n    var std = Stat.standardDeviation(dataset, means, true);\n    var result = Matrix.checkMatrix(dataset).subRowVector(means);\n    return {result: result.divRowVector(std), means: means, std: std};\n}\n\n/**\n * @private\n * Function that initialize an array of matrices.\n * @param {Array} array\n * @param {boolean} isMatrix\n * @return {Array} array with the matrices initialized.\n */\nexport function initializeMatrices(array, isMatrix) {\n    if (isMatrix) {\n        for (var i = 0; i < array.length; ++i) {\n            for (var j = 0; j < array[i].length; ++j) {\n                var elem = array[i][j];\n                array[i][j] = elem !== null ? new Matrix(array[i][j]) : undefined;\n            }\n        }\n    } else {\n        for (i = 0; i < array.length; ++i) {\n            array[i] = new Matrix(array[i]);\n        }\n    }\n\n    return array;\n}\n","import Matrix from 'ml-matrix';\nimport Stat from 'ml-stat/matrix';\nimport * as Utils from './utils';\n\n/**\n * @class PLS\n */\nexport class PLS {\n\n    /**\n     * Constructor for Partial Least Squares (PLS)\n     * @param {object} options\n     * @param {number} [options.latentVectors] - Number of latent vector to get (if the algorithm doesn't find a good model below the tolerance)\n     * @param {number} [options.tolerance=1e-5]\n     * @param {boolean} [options.scale=true] - rescale dataset using mean.\n     * @param {object} model - for load purposes.\n     */\n    constructor(options, model) {\n        if (options === true) {\n            this.meanX = model.meanX;\n            this.stdDevX = model.stdDevX;\n            this.meanY = model.meanY;\n            this.stdDevY = model.stdDevY;\n            this.PBQ = Matrix.checkMatrix(model.PBQ);\n            this.R2X = model.R2X;\n            this.scale = model.scale;\n            this.scaleMethod = model.scaleMethod;\n            this.tolerance = model.tolerance;\n        } else {\n            var {\n                tolerance = 1e-5,\n                scale = true,\n            } = options;\n            this.tolerance = tolerance;\n            this.scale = scale;\n            this.latentVectors = options.latentVectors;\n        }\n    }\n\n    /**\n     * Fits the model with the given data and predictions, in this function is calculated the\n     * following outputs:\n     *\n     * T - Score matrix of X\n     * P - Loading matrix of X\n     * U - Score matrix of Y\n     * Q - Loading matrix of Y\n     * B - Matrix of regression coefficient\n     * W - Weight matrix of X\n     *\n     * @param {Matrix|Array} trainingSet\n     * @param {Matrix|Array} trainingValues\n     */\n    train(trainingSet, trainingValues) {\n        trainingSet = Matrix.checkMatrix(trainingSet);\n        trainingValues = Matrix.checkMatrix(trainingValues);\n\n        if (trainingSet.length !== trainingValues.length) {\n            throw new RangeError('The number of X rows must be equal to the number of Y rows');\n        }\n\n        this.meanX = Stat.mean(trainingSet);\n        this.stdDevX = Stat.standardDeviation(trainingSet, this.meanX, true);\n        this.meanY = Stat.mean(trainingValues);\n        this.stdDevY = Stat.standardDeviation(trainingValues, this.meanY, true);\n\n        if (this.scale) { // here should be the ml-preprocess project\n            trainingSet = trainingSet.clone().subRowVector(this.meanX).divRowVector(this.stdDevX);\n            trainingValues = trainingValues.clone().subRowVector(this.meanY).divRowVector(this.stdDevY);\n        }\n\n        if (this.latentVectors === undefined) {\n            this.latentVectors = Math.min(trainingSet.length - 1, trainingSet[0].length);\n        }\n\n        var rx = trainingSet.rows;\n        var cx = trainingSet.columns;\n        var ry = trainingValues.rows;\n        var cy = trainingValues.columns;\n\n        var ssqXcal = trainingSet.clone().mul(trainingSet).sum(); // for the r²\n        var sumOfSquaresY = trainingValues.clone().mul(trainingValues).sum();\n\n        var tolerance = this.tolerance;\n        var n = this.latentVectors;\n        var T = Matrix.zeros(rx, n);\n        var P = Matrix.zeros(cx, n);\n        var U = Matrix.zeros(ry, n);\n        var Q = Matrix.zeros(cy, n);\n        var B = Matrix.zeros(n, n);\n        var W = P.clone();\n        var k = 0;\n\n        while (Utils.norm(trainingValues) > tolerance && k < n) {\n            var transposeX = trainingSet.transpose();\n            var transposeY = trainingValues.transpose();\n\n            var tIndex = maxSumColIndex(trainingSet.clone().mulM(trainingSet));\n            var uIndex = maxSumColIndex(trainingValues.clone().mulM(trainingValues));\n\n            var t1 = trainingSet.getColumnVector(tIndex);\n            var u = trainingValues.getColumnVector(uIndex);\n            var t = Matrix.zeros(rx, 1);\n\n            while (Utils.norm(t1.clone().sub(t)) > tolerance) {\n                var w = transposeX.mmul(u);\n                w.div(Utils.norm(w));\n                t = t1;\n                t1 = trainingSet.mmul(w);\n                var q = transposeY.mmul(t1);\n                q.div(Utils.norm(q));\n                u = trainingValues.mmul(q);\n            }\n\n            t = t1;\n            var num = transposeX.mmul(t);\n            var den = (t.transpose().mmul(t))[0][0];\n            var p = num.div(den);\n            var pnorm = Utils.norm(p);\n            p.div(pnorm);\n            t.mul(pnorm);\n            w.mul(pnorm);\n\n            num = u.transpose().mmul(t);\n            den = (t.transpose().mmul(t))[0][0];\n            var b = (num.div(den))[0][0];\n            trainingSet.sub(t.mmul(p.transpose()));\n            trainingValues.sub(t.clone().mul(b).mmul(q.transpose()));\n\n            T.setColumn(k, t);\n            P.setColumn(k, p);\n            U.setColumn(k, u);\n            Q.setColumn(k, q);\n            W.setColumn(k, w);\n\n            B[k][k] = b;\n            k++;\n        }\n\n        k--;\n        T = T.subMatrix(0, T.rows - 1, 0, k);\n        P = P.subMatrix(0, P.rows - 1, 0, k);\n        U = U.subMatrix(0, U.rows - 1, 0, k);\n        Q = Q.subMatrix(0, Q.rows - 1, 0, k);\n        W = W.subMatrix(0, W.rows - 1, 0, k);\n        B = B.subMatrix(0, k, 0, k);\n\n        // TODO: review of R2Y\n        //this.R2Y = t.transpose().mmul(t).mul(q[k][0]*q[k][0]).divS(ssqYcal)[0][0];\n        //\n        this.ssqYcal = sumOfSquaresY;\n        this.E = trainingSet;\n        this.F = trainingValues;\n        this.T = T;\n        this.P = P;\n        this.U = U;\n        this.Q = Q;\n        this.W = W;\n        this.B = B;\n        this.PBQ = P.mmul(B).mmul(Q.transpose());\n        this.R2X = t.transpose().mmul(t).mmul(p.transpose().mmul(p)).div(ssqXcal)[0][0];\n    }\n\n    /**\n     * Predicts the behavior of the given dataset.\n     * @param {Matrix|Array} dataset - data to be predicted.\n     * @return {Matrix} - predictions of each element of the dataset.\n     */\n    predict(dataset) {\n        var X = Matrix.checkMatrix(dataset);\n        if (this.scale) {\n            X = X.subRowVector(this.meanX).divRowVector(this.stdDevX);\n        }\n        var Y = X.mmul(this.PBQ);\n        Y = Y.mulRowVector(this.stdDevY).addRowVector(this.meanY);\n        return Y;\n    }\n\n    /**\n     * Returns the explained variance on training of the PLS model\n     * @return {number}\n     */\n    getExplainedVariance() {\n        return this.R2X;\n    }\n\n    /**\n     * Export the current model to JSON.\n     * @return {object} - Current model.\n     */\n    toJSON() {\n        return {\n            name: 'PLS',\n            R2X: this.R2X,\n            meanX: this.meanX,\n            stdDevX: this.stdDevX,\n            meanY: this.meanY,\n            stdDevY: this.stdDevY,\n            PBQ: this.PBQ,\n            tolerance: this.tolerance,\n            scale: this.scale,\n        };\n    }\n\n    /**\n     * Load a PLS model from a JSON Object\n     * @param {object} model\n     * @return {PLS} - PLS object from the given model\n     */\n    static load(model) {\n        if (model.name !== 'PLS') {\n            throw new RangeError('Invalid model: ' + model.name);\n        }\n        return new PLS(true, model);\n    }\n}\n\n/**\n * @private\n * Function that returns the index where the sum of each\n * column vector is maximum.\n * @param {Matrix} data\n * @return {number} index of the maximum\n */\nfunction maxSumColIndex(data) {\n    return data.sum('column').maxIndex()[0];\n}\n","import {Matrix, SingularValueDecomposition, inverse} from 'ml-matrix';\nimport {initializeMatrices} from './utils';\n\n/**\n * @class KOPLS\n */\nexport class KOPLS {\n\n    /**\n     * Constructor for Kernel-based Orthogonal Projections to Latent Structures (K-OPLS)\n     * @param {object} options\n     * @param {number} [options.predictiveComponents] - Number of predictive components to use.\n     * @param {number} [options.orthogonalComponents] - Number of Y-Orthogonal components.\n     * @param {Kernel} [options.kernel] - Kernel object to apply, see [ml-kernel](https://github.com/mljs/kernel).\n     * @param {object} model - for load purposes.\n     */\n    constructor(options, model) {\n        if (options === true) {\n            this.trainingSet = new Matrix(model.trainingSet);\n            this.YLoadingMat = new Matrix(model.YLoadingMat);\n            this.SigmaPow = new Matrix(model.SigmaPow);\n            this.YScoreMat = new Matrix(model.YScoreMat);\n            this.predScoreMat = initializeMatrices(model.predScoreMat, false);\n            this.YOrthLoadingVec = initializeMatrices(model.YOrthLoadingVec, false);\n            this.YOrthEigen = model.YOrthEigen;\n            this.YOrthScoreMat = initializeMatrices(model.YOrthScoreMat, false);\n            this.toNorm = initializeMatrices(model.toNorm, false);\n            this.TURegressionCoeff = initializeMatrices(model.TURegressionCoeff, false);\n            this.kernelX = initializeMatrices(model.kernelX, true);\n            this.kernel = model.kernel;\n            this.orthogonalComp = model.orthogonalComp;\n            this.predictiveComp = model.predictiveComp;\n        } else {\n            if (options.predictiveComponents === undefined) {\n                throw new RangeError('no predictive components found!');\n            }\n            if (options.orthogonalComponents === undefined) {\n                throw new RangeError('no orthogonal components found!');\n            }\n            if (options.kernel === undefined) {\n                throw new RangeError('no kernel found!');\n            }\n\n            this.orthogonalComp = options.orthogonalComponents;\n            this.predictiveComp = options.predictiveComponents;\n            this.kernel = options.kernel;\n        }\n    }\n\n    /**\n     * Train the K-OPLS model with the given training set and labels.\n     * @param {Matrix|Array} trainingSet\n     * @param {Matrix|Array} trainingValues\n     */\n    train(trainingSet, trainingValues) {\n        trainingSet = Matrix.checkMatrix(trainingSet);\n        trainingValues = Matrix.checkMatrix(trainingValues);\n\n        // to save and compute kernel with the prediction dataset.\n        this.trainingSet = trainingSet.clone();\n\n        var kernelX = this.kernel.compute(trainingSet);\n\n        var Identity = Matrix.eye(kernelX.rows, kernelX.rows, 1);\n        var temp = kernelX;\n        kernelX = new Matrix(this.orthogonalComp + 1, this.orthogonalComp + 1);\n        kernelX[0][0] = temp;\n\n        var result = new SingularValueDecomposition(trainingValues.transpose().mmul(kernelX[0][0]).mmul(trainingValues), {\n            computeLeftSingularVectors: true,\n            computeRightSingularVectors: false\n        });\n        var YLoadingMat = result.leftSingularVectors;\n        var Sigma = result.diagonalMatrix;\n\n        YLoadingMat = YLoadingMat.subMatrix(0, YLoadingMat.rows - 1, 0, this.predictiveComp - 1);\n        Sigma = Sigma.subMatrix(0, this.predictiveComp - 1, 0, this.predictiveComp - 1);\n\n        var YScoreMat = trainingValues.mmul(YLoadingMat);\n\n        var predScoreMat = new Array(this.orthogonalComp + 1);\n        var TURegressionCoeff = new Array(this.orthogonalComp + 1);\n        var YOrthScoreMat = new Array(this.orthogonalComp);\n        var YOrthLoadingVec = new Array(this.orthogonalComp);\n        var YOrthEigen = new Array(this.orthogonalComp);\n        var YOrthScoreNorm = new Array(this.orthogonalComp);\n\n        var SigmaPow = Matrix.pow(Sigma, -0.5);\n        // to avoid errors, check infinity\n        SigmaPow.apply(function (i, j) {\n            if (this[i][j] === Infinity) {\n                this[i][j] = 0.0;\n            }\n        });\n\n        for (var i = 0; i < this.orthogonalComp; ++i) {\n            predScoreMat[i] = kernelX[0][i].transpose().mmul(YScoreMat).mmul(SigmaPow);\n\n            var TpiPrime = predScoreMat[i].transpose();\n            TURegressionCoeff[i] = inverse(TpiPrime.mmul(predScoreMat[i])).mmul(TpiPrime).mmul(YScoreMat);\n\n            result = new SingularValueDecomposition(TpiPrime.mmul(Matrix.sub(kernelX[i][i], predScoreMat[i].mmul(TpiPrime))).mmul(predScoreMat[i]), {\n                computeLeftSingularVectors: true,\n                computeRightSingularVectors: false\n            });\n            var CoTemp = result.leftSingularVectors;\n            var SoTemp = result.diagonalMatrix;\n\n            YOrthLoadingVec[i] = CoTemp.subMatrix(0, CoTemp.rows - 1, 0, 0);\n            YOrthEigen[i] = SoTemp[0][0];\n\n            YOrthScoreMat[i] = Matrix.sub(kernelX[i][i], predScoreMat[i].mmul(TpiPrime)).mmul(predScoreMat[i]).mmul(YOrthLoadingVec[i]).mul(Math.pow(YOrthEigen[i], -0.5));\n\n            var toiPrime = YOrthScoreMat[i].transpose();\n            YOrthScoreNorm[i] = Matrix.sqrt(toiPrime.mmul(YOrthScoreMat[i]));\n\n            YOrthScoreMat[i] = YOrthScoreMat[i].divRowVector(YOrthScoreNorm[i]);\n\n            var ITo = Matrix.sub(Identity, YOrthScoreMat[i].mmul(YOrthScoreMat[i].transpose()));\n\n            kernelX[0][i + 1] = kernelX[0][i].mmul(ITo);\n            kernelX[i + 1][i + 1] = ITo.mmul(kernelX[i][i]).mmul(ITo);\n        }\n\n        var lastScoreMat = predScoreMat[this.orthogonalComp] = kernelX[0][this.orthogonalComp].transpose().mmul(YScoreMat).mmul(SigmaPow);\n\n        var lastTpPrime = lastScoreMat.transpose();\n        TURegressionCoeff[this.orthogonalComp] = inverse(lastTpPrime.mmul(lastScoreMat)).mmul(lastTpPrime).mmul(YScoreMat);\n\n        this.YLoadingMat = YLoadingMat;\n        this.SigmaPow = SigmaPow;\n        this.YScoreMat = YScoreMat;\n        this.predScoreMat = predScoreMat;\n        this.YOrthLoadingVec = YOrthLoadingVec;\n        this.YOrthEigen = YOrthEigen;\n        this.YOrthScoreMat = YOrthScoreMat;\n        this.toNorm = YOrthScoreNorm;\n        this.TURegressionCoeff = TURegressionCoeff;\n        this.kernelX = kernelX;\n    }\n\n    /**\n     * Predicts the output given the matrix to predict.\n     * @param {Matrix|Array} toPredict\n     * @return {{y: Matrix, predScoreMat: Array<Matrix>, predYOrthVectors: Array<Matrix>}} predictions\n     */\n    predict(toPredict) {\n\n        var KTestTrain = this.kernel.compute(toPredict, this.trainingSet);\n\n        var temp = KTestTrain;\n        KTestTrain = new Matrix(this.orthogonalComp + 1, this.orthogonalComp + 1);\n        KTestTrain[0][0] = temp;\n\n        var YOrthScoreVector = new Array(this.orthogonalComp);\n        var predScoreMat = new Array(this.orthogonalComp);\n\n        var i;\n        for (i = 0; i < this.orthogonalComp; ++i) {\n            predScoreMat[i] = KTestTrain[i][0].mmul(this.YScoreMat).mmul(this.SigmaPow);\n\n            YOrthScoreVector[i] = Matrix.sub(KTestTrain[i][i], predScoreMat[i].mmul(this.predScoreMat[i].transpose())).mmul(this.predScoreMat[i]).mmul(this.YOrthLoadingVec[i]).mul(Math.pow(this.YOrthEigen[i], -0.5));\n\n            YOrthScoreVector[i] = YOrthScoreVector[i].divRowVector(this.toNorm[i]);\n\n            var scoreMatPrime = this.YOrthScoreMat[i].transpose();\n            KTestTrain[i + 1][0] = Matrix.sub(KTestTrain[i][0], YOrthScoreVector[i].mmul(scoreMatPrime).mmul(this.kernelX[0][i].transpose()));\n\n            var p1 = Matrix.sub(KTestTrain[i][0], KTestTrain[i][i].mmul(this.YOrthScoreMat[i]).mmul(scoreMatPrime));\n            var p2 = YOrthScoreVector[i].mmul(scoreMatPrime).mmul(this.kernelX[i][i]);\n            var p3 = p2.mmul(this.YOrthScoreMat[i]).mmul(scoreMatPrime);\n\n            KTestTrain[i + 1][i + 1] = p1.sub(p2).add(p3);\n        }\n\n        predScoreMat[i] = KTestTrain[i][0].mmul(this.YScoreMat).mmul(this.SigmaPow);\n        var prediction = predScoreMat[i].mmul(this.TURegressionCoeff[i]).mmul(this.YLoadingMat.transpose());\n\n        return {\n            prediction: prediction,\n            predScoreMat: predScoreMat,\n            predYOrthVectors: YOrthScoreVector\n        };\n    }\n\n    /**\n     * Export the current model to JSON.\n     * @return {object} - Current model.\n     */\n    toJSON() {\n        return {\n            name: 'K-OPLS',\n            YLoadingMat: this.YLoadingMat,\n            SigmaPow: this.SigmaPow,\n            YScoreMat: this.YScoreMat,\n            predScoreMat: this.predScoreMat,\n            YOrthLoadingVec: this.YOrthLoadingVec,\n            YOrthEigen: this.YOrthEigen,\n            YOrthScoreMat: this.YOrthScoreMat,\n            toNorm: this.toNorm,\n            TURegressionCoeff: this.TURegressionCoeff,\n            kernelX: this.kernelX,\n            trainingSet: this.trainingSet,\n            orthogonalComp: this.orthogonalComp,\n            predictiveComp: this.predictiveComp\n        };\n    }\n\n    /**\n     * Load a K-OPLS with the given model.\n     * @param {object} model\n     * @param {Kernel} kernel - kernel used on the model, see [ml-kernel](https://github.com/mljs/kernel).\n     * @return {KOPLS}\n     */\n    static load(model, kernel) {\n        if (model.name !== 'K-OPLS') {\n            throw new RangeError('Invalid model: ' + model.name);\n        }\n\n        if (!kernel) {\n            throw new RangeError('You must provide a kernel for the model!');\n        }\n\n        model.kernel = kernel;\n        return new KOPLS(true, model);\n    }\n}\n","export {PLS} from './pls';\nexport {KOPLS} from './kopls';\n","/**\n * Calculate current error\n * @ignore\n * @param {{x:Array<number>, y:Array<number>}} data - Array of points to fit in the format [x1, x2, ... ], [y1, y2, ... ]\n * @param {Array<number>} parameters - Array of current parameter values\n * @param {function} parameterizedFunction - The parameters and returns a function with the independent variable as a parameter\n * @return {number}\n */\nexport default function errorCalculation(\n  data,\n  parameters,\n  parameterizedFunction\n) {\n  var error = 0;\n  const func = parameterizedFunction(parameters);\n\n  for (var i = 0; i < data.x.length; i++) {\n    error += Math.abs(data.y[i] - func(data.x[i]));\n  }\n\n  return error;\n}\n","import { inverse, Matrix } from 'ml-matrix';\n\n/**\n * Difference of the matrix function over the parameters\n * @ignore\n * @param {{x:Array<number>, y:Array<number>}} data - Array of points to fit in the format [x1, x2, ... ], [y1, y2, ... ]\n * @param {Array<number>} evaluatedData - Array of previous evaluated function values\n * @param {Array<number>} params - Array of previous parameter values\n * @param {number} gradientDifference - Adjustment for decrease the damping parameter\n * @param {function} paramFunction - The parameters and returns a function with the independent variable as a parameter\n * @return {Matrix}\n */\nfunction gradientFunction(\n  data,\n  evaluatedData,\n  params,\n  gradientDifference,\n  paramFunction\n) {\n  const n = params.length;\n  const m = data.x.length;\n\n  var ans = new Array(n);\n\n  for (var param = 0; param < n; param++) {\n    ans[param] = new Array(m);\n    var auxParams = params.concat();\n    auxParams[param] += gradientDifference;\n    var funcParam = paramFunction(auxParams);\n\n    for (var point = 0; point < m; point++) {\n      ans[param][point] = evaluatedData[point] - funcParam(data.x[point]);\n    }\n  }\n  return new Matrix(ans);\n}\n\n/**\n * Matrix function over the samples\n * @ignore\n * @param {{x:Array<number>, y:Array<number>}} data - Array of points to fit in the format [x1, x2, ... ], [y1, y2, ... ]\n * @param {Array<number>} evaluatedData - Array of previous evaluated function values\n * @return {Matrix}\n */\nfunction matrixFunction(data, evaluatedData) {\n  const m = data.x.length;\n\n  var ans = new Array(m);\n\n  for (var point = 0; point < m; point++) {\n    ans[point] = [data.y[point] - evaluatedData[point]];\n  }\n\n  return new Matrix(ans);\n}\n\n/**\n * Iteration for Levenberg-Marquardt\n * @ignore\n * @param {{x:Array<number>, y:Array<number>}} data - Array of points to fit in the format [x1, x2, ... ], [y1, y2, ... ]\n * @param {Array<number>} params - Array of previous parameter values\n * @param {number} damping - Levenberg-Marquardt parameter\n * @param {number} gradientDifference - Adjustment for decrease the damping parameter\n * @param {function} parameterizedFunction - The parameters and returns a function with the independent variable as a parameter\n * @return {Array<number>}\n */\nexport default function step(\n  data,\n  params,\n  damping,\n  gradientDifference,\n  parameterizedFunction\n) {\n  var value = damping * gradientDifference * gradientDifference;\n  var identity = Matrix.eye(params.length, params.length, value);\n\n  const func = parameterizedFunction(params);\n  var evaluatedData = data.x.map((e) => func(e));\n\n  var gradientFunc = gradientFunction(\n    data,\n    evaluatedData,\n    params,\n    gradientDifference,\n    parameterizedFunction\n  );\n  var matrixFunc = matrixFunction(data, evaluatedData);\n  var inverseMatrix = inverse(\n    identity.add(gradientFunc.mmul(gradientFunc.transpose()))\n  );\n\n  params = new Matrix([params]);\n  params = params.sub(\n    inverseMatrix\n      .mmul(gradientFunc)\n      .mmul(matrixFunc)\n      .mul(gradientDifference)\n      .transpose()\n  );\n\n  return params.to1DArray();\n}\n","import errorCalculation from './errorCalculation';\nimport step from './step';\n\n/**\n * Curve fitting algorithm\n * @param {{x:Array<number>, y:Array<number>}} data - Array of points to fit in the format [x1, x2, ... ], [y1, y2, ... ]\n * @param {function} parameterizedFunction - The parameters and returns a function with the independent variable as a parameter\n * @param {object} [options] - Options object\n * @param {number} [options.damping] - Levenberg-Marquardt parameter\n * @param {number} [options.gradientDifference = 10e-2] - Adjustment for decrease the damping parameter\n * @param {Array<number>} [options.minValues] - Minimum allowed values for parameters\n * @param {Array<number>} [options.maxValues] - Maximum allowed values for parameters\n * @param {Array<number>} [options.initialValues] - Array of initial parameter values\n * @param {number} [options.maxIterations = 100] - Maximum of allowed iterations\n * @param {number} [options.errorTolerance = 10e-3] - Minimum uncertainty allowed for each point\n * @return {{parameterValues: Array<number>, parameterError: number, iterations: number}}\n */\nexport default function levenbergMarquardt(\n  data,\n  parameterizedFunction,\n  options = {}\n) {\n  let {\n    maxIterations = 100,\n    gradientDifference = 10e-2,\n    damping = 0,\n    errorTolerance = 10e-3,\n    minValues,\n    maxValues,\n    initialValues\n  } = options;\n\n  if (damping <= 0) {\n    throw new Error('The damping option must be a positive number');\n  } else if (!data.x || !data.y) {\n    throw new Error('The data parameter must have x and y elements');\n  } else if (\n    !Array.isArray(data.x) ||\n    data.x.length < 2 ||\n    !Array.isArray(data.y) ||\n    data.y.length < 2\n  ) {\n    throw new Error(\n      'The data parameter elements must be an array with more than 2 points'\n    );\n  } else if (data.x.length !== data.y.length) {\n    throw new Error('The data parameter elements must have the same size');\n  }\n\n  var parameters =\n    initialValues || new Array(parameterizedFunction.length).fill(1);\n  let parLen = parameters.length;\n  maxValues = maxValues || new Array(parLen).fill(Number.MAX_SAFE_INTEGER);\n  minValues = minValues || new Array(parLen).fill(Number.MIN_SAFE_INTEGER);\n\n  if (maxValues.length !== minValues.length) {\n    throw new Error('minValues and maxValues must be the same size');\n  }\n\n  if (!Array.isArray(parameters)) {\n    throw new Error('initialValues must be an array');\n  }\n\n  var error = errorCalculation(data, parameters, parameterizedFunction);\n\n  var converged = error <= errorTolerance;\n\n  for (\n    var iteration = 0;\n    iteration < maxIterations && !converged;\n    iteration++\n  ) {\n    parameters = step(\n      data,\n      parameters,\n      damping,\n      gradientDifference,\n      parameterizedFunction\n    );\n\n    for (let k = 0; k < parLen; k++) {\n      parameters[k] = Math.min(\n        Math.max(minValues[k], parameters[k]),\n        maxValues[k]\n      );\n    }\n\n    error = errorCalculation(data, parameters, parameterizedFunction);\n    if (isNaN(error)) break;\n    converged = error <= errorTolerance;\n  }\n\n  return {\n    parameterValues: parameters,\n    parameterError: error,\n    iterations: iteration\n  };\n}\n","export default function getZones(from, to, exclusions = []) {\n  if (from > to) {\n    [from, to] = [to, from];\n  }\n\n  // in exclusions from and to have to be defined\n  exclusions = exclusions.filter(\n    (exclusion) => exclusion.from !== undefined && exclusion.to !== undefined\n  );\n\n  exclusions = JSON.parse(JSON.stringify(exclusions));\n  // we ensure that from before to\n  exclusions.forEach((exclusion) => {\n    if (exclusion.from > exclusion.to) {\n      [exclusion.to, exclusion.from] = [exclusion.from, exclusion.to];\n    }\n  });\n\n  exclusions.sort((a, b) => a.from - b.from);\n\n  // we will rework the exclusions in order to remove overlap and outside range (from / to)\n  exclusions.forEach((exclusion) => {\n    if (exclusion.from < from) exclusion.from = from;\n    if (exclusion.to > to) exclusion.to = to;\n  });\n  for (let i = 0; i < exclusions.length - 1; i++) {\n    if (exclusions[i].to > exclusions[i + 1].from) {\n      exclusions[i].to = exclusions[i + 1].from;\n    }\n  }\n  exclusions = exclusions.filter((exclusion) => exclusion.from < exclusion.to);\n\n  if (!exclusions || exclusions.length === 0) {\n    return [{ from, to }];\n  }\n\n  let zones = [];\n  let currentFrom = from;\n  for (let exclusion of exclusions) {\n    if (currentFrom < exclusion.from) {\n      zones.push({\n        from: currentFrom,\n        to: exclusion.from\n      });\n    }\n\n    currentFrom = exclusion.to;\n  }\n  if (currentFrom < to) {\n    zones.push({\n      from: currentFrom,\n      to: to\n    });\n  }\n\n  return zones;\n}\n","import getZones from './getZones';\n\n/**\n * Filter an array x/y based on various criteria\n * x points are expected to be sorted\n *\n * @param {object} points\n * @param {object} [options={}]\n * @param {array} [options.from]\n * @param {array} [options.to]\n * @param {array} [options.exclusions=[]]\n * @return {{x: Array<number>, y: Array<number>}}\n */\n\nexport default function filterX(points, options = {}) {\n  const { x, y } = points;\n  const { from = x[0], to = x[x.length - 1], exclusions = [] } = options;\n\n  let zones = getZones(from, to, exclusions);\n\n\n  let currentZoneIndex = 0;\n  let newX = [];\n  let newY = [];\n  let position = 0;\n  while (position < x.length) {\n    if (\n      x[position] <= zones[currentZoneIndex].to &&\n      x[position] >= zones[currentZoneIndex].from\n    ) {\n      newX.push(x[position]);\n      newY.push(y[position]);\n    } else {\n      if (x[position] > zones[currentZoneIndex].to) {\n        currentZoneIndex++;\n        if (!zones[currentZoneIndex]) break;\n      }\n    }\n    position++;\n  }\n\n  return {\n    x: newX,\n    y: newY\n  };\n}\n","/*\n * Original code from:\n *\n * k-d Tree JavaScript - V 1.01\n *\n * https://github.com/ubilabs/kd-tree-javascript\n *\n * @author Mircea Pricop <pricop@ubilabs.net>, 2012\n * @author Martin Kleppe <kleppe@ubilabs.net>, 2012\n * @author Ubilabs http://ubilabs.net, 2012\n * @license MIT License <http://www.opensource.org/licenses/mit-license.php>\n */\n\nfunction Node(obj, dimension, parent) {\n    this.obj = obj;\n    this.left = null;\n    this.right = null;\n    this.parent = parent;\n    this.dimension = dimension;\n}\n\nexport default class KDTree {\n    constructor(points, metric) {\n        // If points is not an array, assume we're loading a pre-built tree\n        if (!Array.isArray(points)) {\n            this.dimensions = points.dimensions;\n            this.root = points;\n            restoreParent(this.root);\n        } else {\n            this.dimensions = new Array(points[0].length);\n            for (var i = 0; i < this.dimensions.length; i++) {\n                this.dimensions[i] = i;\n            }\n            this.root = buildTree(points, 0, null, this.dimensions);\n        }\n        this.metric = metric;\n    }\n\n    // Convert to a JSON serializable structure; this just requires removing\n    // the `parent` property\n    toJSON() {\n        const result = toJSONImpl(this.root, true);\n        result.dimensions = this.dimensions;\n        return result;\n    }\n\n    nearest(point, maxNodes, maxDistance) {\n        const metric = this.metric;\n        const dimensions = this.dimensions;\n        var i;\n\n        const bestNodes = new BinaryHeap(\n            function (e) {\n                return -e[1];\n            }\n        );\n\n        function nearestSearch(node) {\n            const dimension = dimensions[node.dimension];\n            const ownDistance = metric(point, node.obj);\n            const linearPoint = {};\n            var bestChild,\n                linearDistance,\n                otherChild,\n                i;\n\n            function saveNode(node, distance) {\n                bestNodes.push([node, distance]);\n                if (bestNodes.size() > maxNodes) {\n                    bestNodes.pop();\n                }\n            }\n\n            for (i = 0; i < dimensions.length; i += 1) {\n                if (i === node.dimension) {\n                    linearPoint[dimensions[i]] = point[dimensions[i]];\n                } else {\n                    linearPoint[dimensions[i]] = node.obj[dimensions[i]];\n                }\n            }\n\n            linearDistance = metric(linearPoint, node.obj);\n\n            if (node.right === null && node.left === null) {\n                if (bestNodes.size() < maxNodes || ownDistance < bestNodes.peek()[1]) {\n                    saveNode(node, ownDistance);\n                }\n                return;\n            }\n\n            if (node.right === null) {\n                bestChild = node.left;\n            } else if (node.left === null) {\n                bestChild = node.right;\n            } else {\n                if (point[dimension] < node.obj[dimension]) {\n                    bestChild = node.left;\n                } else {\n                    bestChild = node.right;\n                }\n            }\n\n            nearestSearch(bestChild);\n\n            if (bestNodes.size() < maxNodes || ownDistance < bestNodes.peek()[1]) {\n                saveNode(node, ownDistance);\n            }\n\n            if (bestNodes.size() < maxNodes || Math.abs(linearDistance) < bestNodes.peek()[1]) {\n                if (bestChild === node.left) {\n                    otherChild = node.right;\n                } else {\n                    otherChild = node.left;\n                }\n                if (otherChild !== null) {\n                    nearestSearch(otherChild);\n                }\n            }\n        }\n\n        if (maxDistance) {\n            for (i = 0; i < maxNodes; i += 1) {\n                bestNodes.push([null, maxDistance]);\n            }\n        }\n\n        if (this.root) {\n            nearestSearch(this.root);\n        }\n\n        const result = [];\n        for (i = 0; i < Math.min(maxNodes, bestNodes.content.length); i += 1) {\n            if (bestNodes.content[i][0]) {\n                result.push([bestNodes.content[i][0].obj, bestNodes.content[i][1]]);\n            }\n        }\n        return result;\n    }\n}\n\nfunction toJSONImpl(src) {\n    const dest = new Node(src.obj, src.dimension, null);\n    if (src.left) dest.left = toJSONImpl(src.left);\n    if (src.right) dest.right = toJSONImpl(src.right);\n    return dest;\n}\n\nfunction buildTree(points, depth, parent, dimensions) {\n    const dim = depth % dimensions.length;\n\n    if (points.length === 0) {\n        return null;\n    }\n    if (points.length === 1) {\n        return new Node(points[0], dim, parent);\n    }\n\n    points.sort((a, b) => a[dimensions[dim]] - b[dimensions[dim]]);\n\n    const median = Math.floor(points.length / 2);\n    const node = new Node(points[median], dim, parent);\n    node.left = buildTree(points.slice(0, median), depth + 1, node, dimensions);\n    node.right = buildTree(points.slice(median + 1), depth + 1, node, dimensions);\n\n    return node;\n}\n\nfunction restoreParent(root) {\n    if (root.left) {\n        root.left.parent = root;\n        restoreParent(root.left);\n    }\n\n    if (root.right) {\n        root.right.parent = root;\n        restoreParent(root.right);\n    }\n}\n\n// Binary heap implementation from:\n// http://eloquentjavascript.net/appendix2.html\nclass BinaryHeap {\n    constructor(scoreFunction) {\n        this.content = [];\n        this.scoreFunction = scoreFunction;\n    }\n\n    push(element) {\n        // Add the new element to the end of the array.\n        this.content.push(element);\n        // Allow it to bubble up.\n        this.bubbleUp(this.content.length - 1);\n    }\n\n    pop() {\n        // Store the first element so we can return it later.\n        var result = this.content[0];\n        // Get the element at the end of the array.\n        var end = this.content.pop();\n        // If there are any elements left, put the end element at the\n        // start, and let it sink down.\n        if (this.content.length > 0) {\n            this.content[0] = end;\n            this.sinkDown(0);\n        }\n        return result;\n    }\n\n    peek() {\n        return this.content[0];\n    }\n\n    size() {\n        return this.content.length;\n    }\n\n    bubbleUp(n) {\n        // Fetch the element that has to be moved.\n        var element = this.content[n];\n        // When at 0, an element can not go up any further.\n        while (n > 0) {\n            // Compute the parent element's index, and fetch it.\n            const parentN = Math.floor((n + 1) / 2) - 1;\n            const parent = this.content[parentN];\n            // Swap the elements if the parent is greater.\n            if (this.scoreFunction(element) < this.scoreFunction(parent)) {\n                this.content[parentN] = element;\n                this.content[n] = parent;\n                // Update 'n' to continue at the new position.\n                n = parentN;\n            } else { // Found a parent that is less, no need to move it further.\n                break;\n            }\n        }\n    }\n\n    sinkDown(n) {\n        // Look up the target element and its score.\n        var length = this.content.length;\n        var element = this.content[n];\n        var elemScore = this.scoreFunction(element);\n\n        while (true) {\n            // Compute the indices of the child elements.\n            var child2N = (n + 1) * 2;\n            var child1N = child2N - 1;\n            // This is used to store the new position of the element,\n            // if any.\n            var swap = null;\n            // If the first child exists (is inside the array)...\n            if (child1N < length) {\n                // Look it up and compute its score.\n                var child1 = this.content[child1N];\n                var child1Score = this.scoreFunction(child1);\n                // If the score is less than our element's, we need to swap.\n                if (child1Score < elemScore) {\n                    swap = child1N;\n                }\n            }\n            // Do the same checks for the other child.\n            if (child2N < length) {\n                var child2 = this.content[child2N];\n                var child2Score = this.scoreFunction(child2);\n                if (child2Score < (swap === null ? elemScore : child1Score)) {\n                    swap = child2N;\n                }\n            }\n\n            // If the element needs to be moved, swap it, and continue.\n            if (swap !== null) {\n                this.content[n] = this.content[swap];\n                this.content[swap] = element;\n                n = swap;\n            } else {\n                // Otherwise, we are done.\n                break;\n            }\n        }\n    }\n}\n","import KDTree from './KDTree';\nimport euclideanDistance from 'ml-distance-euclidean';\n\nexport default class KNN {\n\n    /**\n     * @param {Array} dataset\n     * @param {Array} labels\n     * @param {object} options\n     * @param {number} [options.k=numberOfClasses + 1] - Number of neighbors to classify.\n     * @param {function} [options.distance=euclideanDistance] - Distance function that takes two parameters.\n     */\n    constructor(dataset, labels, options = {}) {\n        if (dataset === true) {\n            const model = labels;\n            this.kdTree = new KDTree(model.kdTree, options);\n            this.k = model.k;\n            this.classes = new Set(model.classes);\n            this.isEuclidean = model.isEuclidean;\n            return;\n        }\n\n        const classes = new Set(labels);\n\n        const {\n            distance = euclideanDistance,\n            k = classes.size + 1\n        } = options;\n\n        const points = new Array(dataset.length);\n        for (var i = 0; i < points.length; ++i) {\n            points[i] = dataset[i].slice();\n        }\n\n        for (i = 0; i < labels.length; ++i) {\n            points[i].push(labels[i]);\n        }\n\n        this.kdTree = new KDTree(points, distance);\n        this.k = k;\n        this.classes = classes;\n        this.isEuclidean = distance === euclideanDistance;\n    }\n\n    /**\n     * Create a new KNN instance with the given model.\n     * @param {object} model\n     * @param {function} distance=euclideanDistance - distance function must be provided if the model wasn't trained with euclidean distance.\n     * @return {KNN}\n     */\n    static load(model, distance = euclideanDistance) {\n        if (model.name !== 'KNN') {\n            throw new Error('invalid model: ' + model.name);\n        }\n        if (!model.isEuclidean && distance === euclideanDistance) {\n            throw new Error('a custom distance function was used to create the model. Please provide it again');\n        }\n        if (model.isEuclidean && distance !== euclideanDistance) {\n            throw new Error('the model was created with the default distance function. Do not load it with another one');\n        }\n        return new KNN(true, model, distance);\n    }\n\n    /**\n     * Return a JSON containing the kd-tree model.\n     * @return {object} JSON KNN model.\n     */\n    toJSON() {\n        return {\n            name: 'KNN',\n            kdTree: this.kdTree,\n            k: this.k,\n            classes: Array.from(this.classes),\n            isEuclidean: this.isEuclidean\n        };\n    }\n\n    /**\n     * Predicts the output given the matrix to predict.\n     * @param {Array} dataset\n     * @return {Array} predictions\n     */\n    predict(dataset) {\n        if (Array.isArray(dataset)) {\n            if (typeof dataset[0] === 'number') {\n                return getSinglePrediction(this, dataset);\n            } else if (Array.isArray(dataset[0]) && typeof dataset[0][0] === 'number') {\n                const predictions = new Array(dataset.length);\n                for (var i = 0; i < dataset.length; i++) {\n                    predictions[i] = getSinglePrediction(this, dataset[i]);\n                }\n                return predictions;\n            }\n        }\n        throw new TypeError('dataset to predict must be an array or a matrix');\n    }\n}\n\nfunction getSinglePrediction(knn, currentCase) {\n    var nearestPoints = knn.kdTree.nearest(currentCase, knn.k);\n    var pointsPerClass = {};\n    var predictedClass = -1;\n    var maxPoints = -1;\n    var lastElement = nearestPoints[0][0].length - 1;\n\n    for (var element of knn.classes) {\n        pointsPerClass[element] = 0;\n    }\n\n    for (var i = 0; i < nearestPoints.length; ++i) {\n        var currentClass = nearestPoints[i][0][lastElement];\n        var currentPoints = ++pointsPerClass[currentClass];\n        if (currentPoints > maxPoints) {\n            predictedClass = currentClass;\n            maxPoints = currentPoints;\n        }\n    }\n\n    return predictedClass;\n}\n"],"sourceRoot":""}
{"version":3,"file":"ml.js","sources":["../node_modules/is-any-array/src/index.js","../node_modules/ml-array-max/lib-es6/index.js","../node_modules/ml-array-min/lib-es6/index.js","../node_modules/ml-array-rescale/lib-es6/index.js","../node_modules/ml-matrix/src/util.js","../node_modules/ml-matrix/src/stat.js","../node_modules/ml-matrix/src/inspect.js","../node_modules/ml-matrix/src/mathOperations.js","../node_modules/ml-matrix/src/matrix.js","../node_modules/ml-matrix/src/views/base.js","../node_modules/ml-matrix/src/views/column.js","../node_modules/ml-matrix/src/views/columnSelection.js","../node_modules/ml-matrix/src/views/flipColumn.js","../node_modules/ml-matrix/src/views/flipRow.js","../node_modules/ml-matrix/src/views/row.js","../node_modules/ml-matrix/src/views/rowSelection.js","../node_modules/ml-matrix/src/views/selection.js","../node_modules/ml-matrix/src/views/sub.js","../node_modules/ml-matrix/src/views/transpose.js","../node_modules/ml-matrix/src/wrap/WrapperMatrix1D.js","../node_modules/ml-matrix/src/wrap/WrapperMatrix2D.js","../node_modules/ml-matrix/src/wrap/wrap.js","../node_modules/ml-matrix/src/dc/lu.js","../node_modules/ml-matrix/src/dc/util.js","../node_modules/ml-matrix/src/dc/qr.js","../node_modules/ml-matrix/src/dc/svd.js","../node_modules/ml-matrix/src/decompositions.js","../node_modules/ml-matrix/src/determinant.js","../node_modules/ml-matrix/src/linearDependencies.js","../node_modules/ml-matrix/src/pseudoInverse.js","../node_modules/ml-matrix/src/covariance.js","../node_modules/ml-matrix/src/correlation.js","../node_modules/ml-matrix/src/dc/evd.js","../node_modules/ml-matrix/src/dc/cholesky.js","../node_modules/ml-array-mean/lib-es6/index.js","../node_modules/ml-cart/src/utils.js","../node_modules/ml-cart/src/TreeNode.js","../node_modules/ml-cart/src/DecisionTreeClassifier.js","../node_modules/ml-cart/src/DecisionTreeRegression.js","../node_modules/random-js/dist/random-js.esm.js","../node_modules/ml-random-forest/src/utils.js","../node_modules/ml-random-forest/src/RandomForestBase.js","../node_modules/ml-random-forest/src/RandomForestClassifier.js","../node_modules/median-quickselect/lib/median-quickselect.min.js","../node_modules/ml-array-median/lib-es6/index.js","../node_modules/ml-random-forest/src/RandomForestRegression.js","../node_modules/ml-pca/src/pca.js","../node_modules/ml-distance-euclidean/lib-es6/euclidean.js","../node_modules/ml-distance-matrix/src/index.js","../node_modules/heap/lib/heap.js","../node_modules/heap/index.js","../node_modules/ml-hclust/src/Cluster.js","../node_modules/ml-hclust/src/ClusterLeaf.js","../node_modules/ml-hclust/src/agnes.js","../node_modules/ml-hclust/src/diana.js","../node_modules/ml-hclust/src/index.js","../node_modules/ml-nearest-vector/lib-es6/index.js","../node_modules/ml-kmeans/src/utils.js","../node_modules/ml-xsadd/lib-es6/xsadd.js","../node_modules/ml-random/lib-es6/choice.js","../node_modules/ml-random/lib-es6/index.js","../node_modules/ml-kmeans/src/initialization.js","../node_modules/ml-kmeans/src/KMeansResult.js","../node_modules/ml-kmeans/src/kmeans.js","../node_modules/ml-naivebayes/src/utils.js","../node_modules/ml-naivebayes/src/GaussianNB.js","../node_modules/ml-naivebayes/src/MultinomialNB.js","../node_modules/ml-knn/src/KDTree.js","../node_modules/ml-knn/src/index.js","../node_modules/ml-pls/src/utils.js","../node_modules/ml-pls/src/pls.js","../node_modules/ml-pls/src/kopls.js","../node_modules/ml-confusion-matrix/src/index.js","../node_modules/ml-combinations/src/index.js","../node_modules/ml-cross-validation/src/index.js","../node_modules/ml-fnn/FeedForwardNeuralNetwork.js","../node_modules/ml-som/src/node-square.js","../node_modules/ml-som/src/node-hexagonal.js","../node_modules/ml-som/src/index.js","../node_modules/ml-regression-base/src/maybeToPrecision.js","../node_modules/ml-regression-base/src/checkArrayLength.js","../node_modules/ml-regression-base/src/index.js","../node_modules/ml-regression-polynomial/src/index.js","../node_modules/ml-regression-simple-linear/src/index.js","../node_modules/ml-regression-exponential/src/index.js","../node_modules/ml-regression-power/src/index.js","../node_modules/ml-regression-multivariate-linear/src/index.js","../node_modules/ml-kernel-gaussian/gaussian-kernel.js","../node_modules/ml-kernel-polynomial/polynomial-kernel.js","../node_modules/ml-kernel-sigmoid/sigmoid-kernel.js","../node_modules/ml-kernel/src/kernels/anova-kernel.js","../node_modules/ml-kernel/src/kernels/cauchy-kernel.js","../node_modules/ml-kernel/src/kernels/exponential-kernel.js","../node_modules/ml-kernel/src/kernels/histogram-intersection-kernel.js","../node_modules/ml-kernel/src/kernels/laplacian-kernel.js","../node_modules/ml-kernel/src/kernels/multiquadratic-kernel.js","../node_modules/ml-kernel/src/kernels/rational-quadratic-kernel.js","../node_modules/ml-kernel/src/kernel.js","../node_modules/ml-regression-theil-sen/src/index.js","../node_modules/ml-regression-robust-polynomial/src/index.js","../node_modules/ml-levenberg-marquardt/src/errorCalculation.js","../node_modules/ml-levenberg-marquardt/src/step.js","../node_modules/ml-levenberg-marquardt/src/index.js","../node_modules/binary-search/index.js","../node_modules/num-sort/index.js","../node_modules/ml-hash-table/src/primeFinder.js","../node_modules/ml-hash-table/src/HashTable.js","../node_modules/ml-sparse-matrix/src/index.js","../node_modules/ml-distance/src/distances/additiveSymmetric.js","../node_modules/ml-distance/src/distances/avg.js","../node_modules/ml-distance/src/distances/bhattacharyya.js","../node_modules/ml-distance/src/distances/canberra.js","../node_modules/ml-distance/src/distances/chebyshev.js","../node_modules/ml-distance/src/distances/clark.js","../node_modules/ml-distance/src/similarities/czekanowski.js","../node_modules/ml-distance/src/distances/czekanowski.js","../node_modules/ml-distance/src/distances/dice.js","../node_modules/ml-distance/src/distances/divergence.js","../node_modules/ml-distance/src/distances/fidelity.js","../node_modules/ml-distance/src/distances/gower.js","../node_modules/ml-distance/src/distances/harmonicMean.js","../node_modules/ml-distance/src/distances/hellinger.js","../node_modules/ml-distance/src/distances/innerProduct.js","../node_modules/ml-distance/src/distances/intersection.js","../node_modules/ml-distance/src/distances/jaccard.js","../node_modules/ml-distance/src/distances/jeffreys.js","../node_modules/ml-distance/src/distances/jensenDifference.js","../node_modules/ml-distance/src/distances/jensenShannon.js","../node_modules/ml-distance/src/distances/kdivergence.js","../node_modules/ml-distance/src/distances/kulczynski.js","../node_modules/ml-distance/src/distances/kullbackLeibler.js","../node_modules/ml-distance/src/distances/kumarHassebrook.js","../node_modules/ml-distance/src/distances/kumarJohnson.js","../node_modules/ml-distance/src/distances/lorentzian.js","../node_modules/ml-distance/src/distances/manhattan.js","../node_modules/ml-distance/src/distances/matusita.js","../node_modules/ml-distance/src/distances/minkowski.js","../node_modules/ml-distance/src/distances/motyka.js","../node_modules/ml-distance/src/distances/neyman.js","../node_modules/ml-distance/src/distances/pearson.js","../node_modules/ml-distance/src/distances/probabilisticSymmetric.js","../node_modules/ml-distance/src/distances/ruzicka.js","../node_modules/ml-distance/src/distances/soergel.js","../node_modules/ml-distance/src/distances/sorensen.js","../node_modules/ml-distance/src/distances/squared.js","../node_modules/ml-distance/src/distances/squaredChord.js","../node_modules/ml-distance/src/distances/taneja.js","../node_modules/ml-distance/src/similarities/tanimoto.js","../node_modules/ml-distance/src/distances/tanimoto.js","../node_modules/ml-distance/src/distances/topsoe.js","../node_modules/ml-distance/src/distances/waveHedges.js","../node_modules/ml-tree-similarity/src/createTree.js","../node_modules/ml-tree-similarity/src/getSimilarity.js","../node_modules/ml-tree-similarity/src/index.js","../node_modules/ml-distance/src/similarities/cosine.js","../node_modules/ml-distance/src/similarities/dice.js","../node_modules/ml-distance/src/similarities/intersection.js","../node_modules/ml-distance/src/similarities/jaccard.js","../node_modules/ml-distance/src/similarities/kulczynski.js","../node_modules/ml-distance/src/similarities/motyka.js","../node_modules/ml-distance/src/similarities/pearson.js","../node_modules/ml-distance/src/similarities/squaredChord.js","../node_modules/ml-performance/src/measures.js","../node_modules/ml-performance/src/index.js","../node_modules/ml-pad-array/src/index.js","../node_modules/ml-savitzky-golay/src/index.js","../node_modules/ml-bit-array/src/creator.js","../node_modules/ml-bit-array/src/index.js","../node_modules/ml-array-mode/lib-es6/index.js","../node_modules/ml-array-normed/lib-es6/index.js","../node_modules/ml-array-sequential-fill/lib-es6/index.js","../node_modules/ml-array-variance/lib-es6/index.js","../node_modules/ml-array-standard-deviation/lib-es6/index.js","../node_modules/ml-array-xy-centroids-merge/src/index.js","../node_modules/ml-arrayxy-closestx/src/index.js","../node_modules/ml-array-xy-max-merge/src/index.js","../node_modules/ml-array-xy-max-y/src/index.js","../node_modules/ml-array-xy-sort-x/src/index.js","../node_modules/ml-arrayxy-uniquex/src/index.js","../node_modules/ml-array-xy-weighted-merge/src/index.js","../node_modules/ml-array-xy-equally-spaced/src/integral.js","../node_modules/ml-array-xy-equally-spaced/src/equallySpacedSmooth.js","../node_modules/ml-array-xy-equally-spaced/src/equallySpacedSlot.js","../node_modules/ml-array-xy-equally-spaced/src/getZones.js","../node_modules/ml-array-xy-equally-spaced/src/index.js","../node_modules/ml-array-xy-filter-x/src/getZones.js","../node_modules/ml-array-xy-filter-x/src/index.js","../src/index.js"],"sourcesContent":["'use strict';\n\nconst toString = Object.prototype.toString;\n\nfunction isAnyArray(object) {\n  return toString.call(object).endsWith('Array]');\n}\n\nmodule.exports = isAnyArray;\n","import isArray from 'is-any-array';\n\n/**\n * Computes the maximum of the given values\n * @param {Array<number>} input\n * @return {number}\n */\n\nfunction max(input) {\n  if (!isArray(input)) {\n    throw new TypeError('input must be an array');\n  }\n\n  if (input.length === 0) {\n    throw new TypeError('input must not be empty');\n  }\n\n  var max = input[0];\n\n  for (var i = 1; i < input.length; i++) {\n    if (input[i] > max) max = input[i];\n  }\n\n  return max;\n}\n\nexport default max;\n","import isArray from 'is-any-array';\n\n/**\n * Computes the minimum of the given values\n * @param {Array<number>} input\n * @return {number}\n */\n\nfunction min(input) {\n  if (!isArray(input)) {\n    throw new TypeError('input must be an array');\n  }\n\n  if (input.length === 0) {\n    throw new TypeError('input must not be empty');\n  }\n\n  var min = input[0];\n\n  for (var i = 1; i < input.length; i++) {\n    if (input[i] < min) min = input[i];\n  }\n\n  return min;\n}\n\nexport default min;\n","import max from 'ml-array-max';\nimport min from 'ml-array-min';\nimport isArray from 'is-any-array';\n\nfunction rescale(input) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!isArray(input)) {\n    throw new TypeError('input must be an array');\n  } else if (input.length === 0) {\n    throw new TypeError('input must not be empty');\n  }\n\n  var output;\n\n  if (options.output !== undefined) {\n    if (!isArray(options.output)) {\n      throw new TypeError('output option must be an array if specified');\n    }\n\n    output = options.output;\n  } else {\n    output = new Array(input.length);\n  }\n\n  var currentMin = min(input);\n  var currentMax = max(input);\n\n  if (currentMin === currentMax) {\n    throw new RangeError('minimum and maximum input values are equal. Cannot rescale a constant array');\n  }\n\n  var _options$min = options.min,\n      minValue = _options$min === void 0 ? options.autoMinMax ? currentMin : 0 : _options$min,\n      _options$max = options.max,\n      maxValue = _options$max === void 0 ? options.autoMinMax ? currentMax : 1 : _options$max;\n\n  if (minValue >= maxValue) {\n    throw new RangeError('min option must be smaller than max option');\n  }\n\n  var factor = (maxValue - minValue) / (currentMax - currentMin);\n\n  for (var i = 0; i < input.length; i++) {\n    output[i] = (input[i] - currentMin) * factor + minValue;\n  }\n\n  return output;\n}\n\nexport default rescale;\n","/**\n * @private\n * Check that a row index is not out of bounds\n * @param {Matrix} matrix\n * @param {number} index\n * @param {boolean} [outer]\n */\nexport function checkRowIndex(matrix, index, outer) {\n  var max = outer ? matrix.rows : matrix.rows - 1;\n  if (index < 0 || index > max) {\n    throw new RangeError('Row index out of range');\n  }\n}\n\n/**\n * @private\n * Check that a column index is not out of bounds\n * @param {Matrix} matrix\n * @param {number} index\n * @param {boolean} [outer]\n */\nexport function checkColumnIndex(matrix, index, outer) {\n  var max = outer ? matrix.columns : matrix.columns - 1;\n  if (index < 0 || index > max) {\n    throw new RangeError('Column index out of range');\n  }\n}\n\n/**\n * @private\n * Check that the provided vector is an array with the right length\n * @param {Matrix} matrix\n * @param {Array|Matrix} vector\n * @return {Array}\n * @throws {RangeError}\n */\nexport function checkRowVector(matrix, vector) {\n  if (vector.to1DArray) {\n    vector = vector.to1DArray();\n  }\n  if (vector.length !== matrix.columns) {\n    throw new RangeError(\n      'vector size must be the same as the number of columns'\n    );\n  }\n  return vector;\n}\n\n/**\n * @private\n * Check that the provided vector is an array with the right length\n * @param {Matrix} matrix\n * @param {Array|Matrix} vector\n * @return {Array}\n * @throws {RangeError}\n */\nexport function checkColumnVector(matrix, vector) {\n  if (vector.to1DArray) {\n    vector = vector.to1DArray();\n  }\n  if (vector.length !== matrix.rows) {\n    throw new RangeError('vector size must be the same as the number of rows');\n  }\n  return vector;\n}\n\nexport function checkIndices(matrix, rowIndices, columnIndices) {\n  return {\n    row: checkRowIndices(matrix, rowIndices),\n    column: checkColumnIndices(matrix, columnIndices)\n  };\n}\n\nexport function checkRowIndices(matrix, rowIndices) {\n  if (typeof rowIndices !== 'object') {\n    throw new TypeError('unexpected type for row indices');\n  }\n\n  var rowOut = rowIndices.some((r) => {\n    return r < 0 || r >= matrix.rows;\n  });\n\n  if (rowOut) {\n    throw new RangeError('row indices are out of range');\n  }\n\n  if (!Array.isArray(rowIndices)) rowIndices = Array.from(rowIndices);\n\n  return rowIndices;\n}\n\nexport function checkColumnIndices(matrix, columnIndices) {\n  if (typeof columnIndices !== 'object') {\n    throw new TypeError('unexpected type for column indices');\n  }\n\n  var columnOut = columnIndices.some((c) => {\n    return c < 0 || c >= matrix.columns;\n  });\n\n  if (columnOut) {\n    throw new RangeError('column indices are out of range');\n  }\n  if (!Array.isArray(columnIndices)) columnIndices = Array.from(columnIndices);\n\n  return columnIndices;\n}\n\nexport function checkRange(matrix, startRow, endRow, startColumn, endColumn) {\n  if (arguments.length !== 5) {\n    throw new RangeError('expected 4 arguments');\n  }\n  checkNumber('startRow', startRow);\n  checkNumber('endRow', endRow);\n  checkNumber('startColumn', startColumn);\n  checkNumber('endColumn', endColumn);\n  if (\n    startRow > endRow ||\n    startColumn > endColumn ||\n    startRow < 0 ||\n    startRow >= matrix.rows ||\n    endRow < 0 ||\n    endRow >= matrix.rows ||\n    startColumn < 0 ||\n    startColumn >= matrix.columns ||\n    endColumn < 0 ||\n    endColumn >= matrix.columns\n  ) {\n    throw new RangeError('Submatrix indices are out of range');\n  }\n}\n\nexport function newArray(length, value = 0) {\n  var array = [];\n  for (var i = 0; i < length; i++) {\n    array.push(value);\n  }\n  return array;\n}\n\nfunction checkNumber(name, value) {\n  if (typeof value !== 'number') {\n    throw new TypeError(`${name} must be a number`);\n  }\n}\n","import { newArray } from './util';\n\nexport function sumByRow(matrix) {\n  var sum = newArray(matrix.rows);\n  for (var i = 0; i < matrix.rows; ++i) {\n    for (var j = 0; j < matrix.columns; ++j) {\n      sum[i] += matrix.get(i, j);\n    }\n  }\n  return sum;\n}\n\nexport function sumByColumn(matrix) {\n  var sum = newArray(matrix.columns);\n  for (var i = 0; i < matrix.rows; ++i) {\n    for (var j = 0; j < matrix.columns; ++j) {\n      sum[j] += matrix.get(i, j);\n    }\n  }\n  return sum;\n}\n\nexport function sumAll(matrix) {\n  var v = 0;\n  for (var i = 0; i < matrix.rows; i++) {\n    for (var j = 0; j < matrix.columns; j++) {\n      v += matrix.get(i, j);\n    }\n  }\n  return v;\n}\n\nexport function productByRow(matrix) {\n  var sum = newArray(matrix.rows, 1);\n  for (var i = 0; i < matrix.rows; ++i) {\n    for (var j = 0; j < matrix.columns; ++j) {\n      sum[i] *= matrix.get(i, j);\n    }\n  }\n  return sum;\n}\n\nexport function productByColumn(matrix) {\n  var sum = newArray(matrix.columns, 1);\n  for (var i = 0; i < matrix.rows; ++i) {\n    for (var j = 0; j < matrix.columns; ++j) {\n      sum[j] *= matrix.get(i, j);\n    }\n  }\n  return sum;\n}\n\nexport function productAll(matrix) {\n  var v = 1;\n  for (var i = 0; i < matrix.rows; i++) {\n    for (var j = 0; j < matrix.columns; j++) {\n      v *= matrix.get(i, j);\n    }\n  }\n  return v;\n}\n\nexport function varianceByRow(matrix, unbiased, mean) {\n  const rows = matrix.rows;\n  const cols = matrix.columns;\n  const variance = [];\n\n  for (var i = 0; i < rows; i++) {\n    var sum1 = 0;\n    var sum2 = 0;\n    var x = 0;\n    for (var j = 0; j < cols; j++) {\n      x = matrix.get(i, j) - mean[i];\n      sum1 += x;\n      sum2 += x * x;\n    }\n    if (unbiased) {\n      variance.push((sum2 - (sum1 * sum1) / cols) / (cols - 1));\n    } else {\n      variance.push((sum2 - (sum1 * sum1) / cols) / cols);\n    }\n  }\n  return variance;\n}\n\nexport function varianceByColumn(matrix, unbiased, mean) {\n  const rows = matrix.rows;\n  const cols = matrix.columns;\n  const variance = [];\n\n  for (var j = 0; j < cols; j++) {\n    var sum1 = 0;\n    var sum2 = 0;\n    var x = 0;\n    for (var i = 0; i < rows; i++) {\n      x = matrix.get(i, j) - mean[j];\n      sum1 += x;\n      sum2 += x * x;\n    }\n    if (unbiased) {\n      variance.push((sum2 - (sum1 * sum1) / rows) / (rows - 1));\n    } else {\n      variance.push((sum2 - (sum1 * sum1) / rows) / rows);\n    }\n  }\n  return variance;\n}\n\nexport function varianceAll(matrix, unbiased, mean) {\n  const rows = matrix.rows;\n  const cols = matrix.columns;\n  const size = rows * cols;\n\n  var sum1 = 0;\n  var sum2 = 0;\n  var x = 0;\n  for (var i = 0; i < rows; i++) {\n    for (var j = 0; j < cols; j++) {\n      x = matrix.get(i, j) - mean;\n      sum1 += x;\n      sum2 += x * x;\n    }\n  }\n  if (unbiased) {\n    return (sum2 - (sum1 * sum1) / size) / (size - 1);\n  } else {\n    return (sum2 - (sum1 * sum1) / size) / size;\n  }\n}\n\nexport function centerByRow(matrix, mean) {\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      matrix.set(i, j, matrix.get(i, j) - mean[i]);\n    }\n  }\n}\n\nexport function centerByColumn(matrix, mean) {\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      matrix.set(i, j, matrix.get(i, j) - mean[j]);\n    }\n  }\n}\n\nexport function centerAll(matrix, mean) {\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      matrix.set(i, j, matrix.get(i, j) - mean);\n    }\n  }\n}\n\nexport function getScaleByRow(matrix) {\n  const scale = [];\n  for (let i = 0; i < matrix.rows; i++) {\n    let sum = 0;\n    for (let j = 0; j < matrix.columns; j++) {\n      sum += Math.pow(matrix.get(i, j), 2) / (matrix.columns - 1);\n    }\n    scale.push(Math.sqrt(sum));\n  }\n  return scale;\n}\n\nexport function scaleByRow(matrix, scale) {\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      matrix.set(i, j, matrix.get(i, j) / scale[i]);\n    }\n  }\n}\n\nexport function getScaleByColumn(matrix) {\n  const scale = [];\n  for (let j = 0; j < matrix.columns; j++) {\n    let sum = 0;\n    for (let i = 0; i < matrix.rows; i++) {\n      sum += Math.pow(matrix.get(i, j), 2) / (matrix.rows - 1);\n    }\n    scale.push(Math.sqrt(sum));\n  }\n  return scale;\n}\n\nexport function scaleByColumn(matrix, scale) {\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      matrix.set(i, j, matrix.get(i, j) / scale[j]);\n    }\n  }\n}\n\nexport function getScaleAll(matrix) {\n  const divider = matrix.size - 1;\n  let sum = 0;\n  for (let j = 0; j < matrix.columns; j++) {\n    for (let i = 0; i < matrix.rows; i++) {\n      sum += Math.pow(matrix.get(i, j), 2) / divider;\n    }\n  }\n  return Math.sqrt(sum);\n}\n\nexport function scaleAll(matrix, scale) {\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      matrix.set(i, j, matrix.get(i, j) / scale);\n    }\n  }\n}\n","export function inspectMatrix() {\n  const indent = ' '.repeat(2);\n  const indentData = ' '.repeat(4);\n  return `${this.constructor.name} {\n${indent}[\n${indentData}${inspectData(this, indentData)}\n${indent}]\n${indent}rows: ${this.rows}\n${indent}columns: ${this.columns}\n}`;\n}\n\nconst maxRows = 15;\nconst maxColumns = 10;\nconst maxNumSize = 8;\n\nfunction inspectData(matrix, indent) {\n  const { rows, columns } = matrix;\n  const maxI = Math.min(rows, maxRows);\n  const maxJ = Math.min(columns, maxColumns);\n  const result = [];\n  for (var i = 0; i < maxI; i++) {\n    let line = [];\n    for (var j = 0; j < maxJ; j++) {\n      line.push(formatNumber(matrix.get(i, j)));\n    }\n    result.push(`${line.join(' ')}`);\n  }\n  if (maxJ !== columns) {\n    result[result.length - 1] += ` ... ${columns - maxColumns} more columns`;\n  }\n  if (maxI !== rows) {\n    result.push(`... ${rows - maxRows} more rows`);\n  }\n  return result.join(`\\n${indent}`);\n}\n\nfunction formatNumber(num) {\n  const numStr = String(num);\n  if (numStr.length <= maxNumSize) {\n    return numStr.padEnd(maxNumSize, ' ');\n  }\n  const precise = num.toPrecision(maxNumSize - 2);\n  if (precise.length <= maxNumSize) {\n    return precise;\n  }\n  const exponential = num.toExponential(maxNumSize - 2);\n  const eIndex = exponential.indexOf('e');\n  const e = exponential.substring(eIndex);\n  return exponential.substring(0, maxNumSize - e.length) + e;\n}\n","export function installMathOperations(AbstractMatrix, Matrix) {\n  AbstractMatrix.prototype.add = function add(value) {\n    if (typeof value === 'number') return this.addS(value);\n    return this.addM(value);\n  };\n\n  AbstractMatrix.prototype.addS = function addS(value) {\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) + value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.addM = function addM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) + matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.add = function add(matrix, value) {\n    var newMatrix = new Matrix(matrix);\n    return newMatrix.add(value);\n  };\n\n  AbstractMatrix.prototype.sub = function sub(value) {\n    if (typeof value === 'number') return this.subS(value);\n    return this.subM(value);\n  };\n\n  AbstractMatrix.prototype.subS = function subS(value) {\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) - value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.subM = function subM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) - matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.sub = function sub(matrix, value) {\n    var newMatrix = new Matrix(matrix);\n    return newMatrix.sub(value);\n  };\n  AbstractMatrix.prototype.subtract = AbstractMatrix.prototype.sub;\n  AbstractMatrix.prototype.subtractS = AbstractMatrix.prototype.subS;\n  AbstractMatrix.prototype.subtractM = AbstractMatrix.prototype.subM;\n  AbstractMatrix.subtract = AbstractMatrix.sub;\n\n  AbstractMatrix.prototype.mul = function mul(value) {\n    if (typeof value === 'number') return this.mulS(value);\n    return this.mulM(value);\n  };\n\n  AbstractMatrix.prototype.mulS = function mulS(value) {\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) * value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.mulM = function mulM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) * matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.mul = function mul(matrix, value) {\n    var newMatrix = new Matrix(matrix);\n    return newMatrix.mul(value);\n  };\n  AbstractMatrix.prototype.multiply = AbstractMatrix.prototype.mul;\n  AbstractMatrix.prototype.multiplyS = AbstractMatrix.prototype.mulS;\n  AbstractMatrix.prototype.multiplyM = AbstractMatrix.prototype.mulM;\n  AbstractMatrix.multiply = AbstractMatrix.mul;\n\n  AbstractMatrix.prototype.div = function div(value) {\n    if (typeof value === 'number') return this.divS(value);\n    return this.divM(value);\n  };\n\n  AbstractMatrix.prototype.divS = function divS(value) {\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) / value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.divM = function divM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) / matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.div = function div(matrix, value) {\n    var newMatrix = new Matrix(matrix);\n    return newMatrix.div(value);\n  };\n  AbstractMatrix.prototype.divide = AbstractMatrix.prototype.div;\n  AbstractMatrix.prototype.divideS = AbstractMatrix.prototype.divS;\n  AbstractMatrix.prototype.divideM = AbstractMatrix.prototype.divM;\n  AbstractMatrix.divide = AbstractMatrix.div;\n\n  AbstractMatrix.prototype.mod = function mod(value) {\n    if (typeof value === 'number') return this.modS(value);\n    return this.modM(value);\n  };\n\n  AbstractMatrix.prototype.modS = function modS(value) {\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) % value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.modM = function modM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) % matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.mod = function mod(matrix, value) {\n    var newMatrix = new Matrix(matrix);\n    return newMatrix.mod(value);\n  };\n  AbstractMatrix.prototype.modulus = AbstractMatrix.prototype.mod;\n  AbstractMatrix.prototype.modulusS = AbstractMatrix.prototype.modS;\n  AbstractMatrix.prototype.modulusM = AbstractMatrix.prototype.modM;\n  AbstractMatrix.modulus = AbstractMatrix.mod;\n\n  AbstractMatrix.prototype.and = function and(value) {\n    if (typeof value === 'number') return this.andS(value);\n    return this.andM(value);\n  };\n\n  AbstractMatrix.prototype.andS = function andS(value) {\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) & value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.andM = function andM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) & matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.and = function and(matrix, value) {\n    var newMatrix = new Matrix(matrix);\n    return newMatrix.and(value);\n  };\n\n  AbstractMatrix.prototype.or = function or(value) {\n    if (typeof value === 'number') return this.orS(value);\n    return this.orM(value);\n  };\n\n  AbstractMatrix.prototype.orS = function orS(value) {\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) | value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.orM = function orM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) | matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.or = function or(matrix, value) {\n    var newMatrix = new Matrix(matrix);\n    return newMatrix.or(value);\n  };\n\n  AbstractMatrix.prototype.xor = function xor(value) {\n    if (typeof value === 'number') return this.xorS(value);\n    return this.xorM(value);\n  };\n\n  AbstractMatrix.prototype.xorS = function xorS(value) {\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) ^ value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.xorM = function xorM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) ^ matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.xor = function xor(matrix, value) {\n    var newMatrix = new Matrix(matrix);\n    return newMatrix.xor(value);\n  };\n\n  AbstractMatrix.prototype.leftShift = function leftShift(value) {\n    if (typeof value === 'number') return this.leftShiftS(value);\n    return this.leftShiftM(value);\n  };\n\n  AbstractMatrix.prototype.leftShiftS = function leftShiftS(value) {\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) << value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.leftShiftM = function leftShiftM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) << matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.leftShift = function leftShift(matrix, value) {\n    var newMatrix = new Matrix(matrix);\n    return newMatrix.leftShift(value);\n  };\n\n  AbstractMatrix.prototype.signPropagatingRightShift = function signPropagatingRightShift(value) {\n    if (typeof value === 'number') return this.signPropagatingRightShiftS(value);\n    return this.signPropagatingRightShiftM(value);\n  };\n\n  AbstractMatrix.prototype.signPropagatingRightShiftS = function signPropagatingRightShiftS(value) {\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) >> value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.signPropagatingRightShiftM = function signPropagatingRightShiftM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) >> matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.signPropagatingRightShift = function signPropagatingRightShift(matrix, value) {\n    var newMatrix = new Matrix(matrix);\n    return newMatrix.signPropagatingRightShift(value);\n  };\n\n  AbstractMatrix.prototype.rightShift = function rightShift(value) {\n    if (typeof value === 'number') return this.rightShiftS(value);\n    return this.rightShiftM(value);\n  };\n\n  AbstractMatrix.prototype.rightShiftS = function rightShiftS(value) {\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) >>> value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.rightShiftM = function rightShiftM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) >>> matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.rightShift = function rightShift(matrix, value) {\n    var newMatrix = new Matrix(matrix);\n    return newMatrix.rightShift(value);\n  };\n  AbstractMatrix.prototype.zeroFillRightShift = AbstractMatrix.prototype.rightShift;\n  AbstractMatrix.prototype.zeroFillRightShiftS = AbstractMatrix.prototype.rightShiftS;\n  AbstractMatrix.prototype.zeroFillRightShiftM = AbstractMatrix.prototype.rightShiftM;\n  AbstractMatrix.zeroFillRightShift = AbstractMatrix.rightShift;\n\n  AbstractMatrix.prototype.not = function not() {\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, ~(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.not = function not(matrix) {\n    var newMatrix = new Matrix(matrix);\n    return newMatrix.not();\n  };\n\n  AbstractMatrix.prototype.abs = function abs() {\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.abs(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.abs = function abs(matrix) {\n    var newMatrix = new Matrix(matrix);\n    return newMatrix.abs();\n  };\n\n  AbstractMatrix.prototype.acos = function acos() {\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.acos(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.acos = function acos(matrix) {\n    var newMatrix = new Matrix(matrix);\n    return newMatrix.acos();\n  };\n\n  AbstractMatrix.prototype.acosh = function acosh() {\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.acosh(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.acosh = function acosh(matrix) {\n    var newMatrix = new Matrix(matrix);\n    return newMatrix.acosh();\n  };\n\n  AbstractMatrix.prototype.asin = function asin() {\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.asin(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.asin = function asin(matrix) {\n    var newMatrix = new Matrix(matrix);\n    return newMatrix.asin();\n  };\n\n  AbstractMatrix.prototype.asinh = function asinh() {\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.asinh(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.asinh = function asinh(matrix) {\n    var newMatrix = new Matrix(matrix);\n    return newMatrix.asinh();\n  };\n\n  AbstractMatrix.prototype.atan = function atan() {\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.atan(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.atan = function atan(matrix) {\n    var newMatrix = new Matrix(matrix);\n    return newMatrix.atan();\n  };\n\n  AbstractMatrix.prototype.atanh = function atanh() {\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.atanh(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.atanh = function atanh(matrix) {\n    var newMatrix = new Matrix(matrix);\n    return newMatrix.atanh();\n  };\n\n  AbstractMatrix.prototype.cbrt = function cbrt() {\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.cbrt(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.cbrt = function cbrt(matrix) {\n    var newMatrix = new Matrix(matrix);\n    return newMatrix.cbrt();\n  };\n\n  AbstractMatrix.prototype.ceil = function ceil() {\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.ceil(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.ceil = function ceil(matrix) {\n    var newMatrix = new Matrix(matrix);\n    return newMatrix.ceil();\n  };\n\n  AbstractMatrix.prototype.clz32 = function clz32() {\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.clz32(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.clz32 = function clz32(matrix) {\n    var newMatrix = new Matrix(matrix);\n    return newMatrix.clz32();\n  };\n\n  AbstractMatrix.prototype.cos = function cos() {\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.cos(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.cos = function cos(matrix) {\n    var newMatrix = new Matrix(matrix);\n    return newMatrix.cos();\n  };\n\n  AbstractMatrix.prototype.cosh = function cosh() {\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.cosh(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.cosh = function cosh(matrix) {\n    var newMatrix = new Matrix(matrix);\n    return newMatrix.cosh();\n  };\n\n  AbstractMatrix.prototype.exp = function exp() {\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.exp(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.exp = function exp(matrix) {\n    var newMatrix = new Matrix(matrix);\n    return newMatrix.exp();\n  };\n\n  AbstractMatrix.prototype.expm1 = function expm1() {\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.expm1(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.expm1 = function expm1(matrix) {\n    var newMatrix = new Matrix(matrix);\n    return newMatrix.expm1();\n  };\n\n  AbstractMatrix.prototype.floor = function floor() {\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.floor(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.floor = function floor(matrix) {\n    var newMatrix = new Matrix(matrix);\n    return newMatrix.floor();\n  };\n\n  AbstractMatrix.prototype.fround = function fround() {\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.fround(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.fround = function fround(matrix) {\n    var newMatrix = new Matrix(matrix);\n    return newMatrix.fround();\n  };\n\n  AbstractMatrix.prototype.log = function log() {\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.log(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.log = function log(matrix) {\n    var newMatrix = new Matrix(matrix);\n    return newMatrix.log();\n  };\n\n  AbstractMatrix.prototype.log1p = function log1p() {\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.log1p(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.log1p = function log1p(matrix) {\n    var newMatrix = new Matrix(matrix);\n    return newMatrix.log1p();\n  };\n\n  AbstractMatrix.prototype.log10 = function log10() {\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.log10(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.log10 = function log10(matrix) {\n    var newMatrix = new Matrix(matrix);\n    return newMatrix.log10();\n  };\n\n  AbstractMatrix.prototype.log2 = function log2() {\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.log2(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.log2 = function log2(matrix) {\n    var newMatrix = new Matrix(matrix);\n    return newMatrix.log2();\n  };\n\n  AbstractMatrix.prototype.round = function round() {\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.round(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.round = function round(matrix) {\n    var newMatrix = new Matrix(matrix);\n    return newMatrix.round();\n  };\n\n  AbstractMatrix.prototype.sign = function sign() {\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.sign(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.sign = function sign(matrix) {\n    var newMatrix = new Matrix(matrix);\n    return newMatrix.sign();\n  };\n\n  AbstractMatrix.prototype.sin = function sin() {\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.sin(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.sin = function sin(matrix) {\n    var newMatrix = new Matrix(matrix);\n    return newMatrix.sin();\n  };\n\n  AbstractMatrix.prototype.sinh = function sinh() {\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.sinh(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.sinh = function sinh(matrix) {\n    var newMatrix = new Matrix(matrix);\n    return newMatrix.sinh();\n  };\n\n  AbstractMatrix.prototype.sqrt = function sqrt() {\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.sqrt(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.sqrt = function sqrt(matrix) {\n    var newMatrix = new Matrix(matrix);\n    return newMatrix.sqrt();\n  };\n\n  AbstractMatrix.prototype.tan = function tan() {\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.tan(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.tan = function tan(matrix) {\n    var newMatrix = new Matrix(matrix);\n    return newMatrix.tan();\n  };\n\n  AbstractMatrix.prototype.tanh = function tanh() {\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.tanh(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.tanh = function tanh(matrix) {\n    var newMatrix = new Matrix(matrix);\n    return newMatrix.tanh();\n  };\n\n  AbstractMatrix.prototype.trunc = function trunc() {\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.trunc(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.trunc = function trunc(matrix) {\n    var newMatrix = new Matrix(matrix);\n    return newMatrix.trunc();\n  };\n\n  AbstractMatrix.pow = function pow(matrix, arg0) {\n    var newMatrix = new Matrix(matrix);\n    return newMatrix.pow(arg0);\n  };\n\n  AbstractMatrix.prototype.pow = function pow(value) {\n    if (typeof value === 'number') return this.powS(value);\n    return this.powM(value);\n  };\n\n  AbstractMatrix.prototype.powS = function powS(value) {\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.pow(this.get(i, j), value));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.powM = function powM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.pow(this.get(i, j), matrix.get(i, j)));\n      }\n    }\n    return this;\n  };\n}\n","import rescale from 'ml-array-rescale';\n\nimport {\n  checkRowVector,\n  checkRowIndex,\n  checkColumnIndex,\n  checkColumnVector,\n  checkRange,\n  checkIndices\n} from './util';\nimport {\n  sumByRow,\n  sumByColumn,\n  sumAll,\n  productByRow,\n  productByColumn,\n  productAll,\n  varianceByRow,\n  varianceByColumn,\n  varianceAll,\n  centerByRow,\n  centerByColumn,\n  centerAll,\n  scaleByRow,\n  scaleByColumn,\n  scaleAll,\n  getScaleByRow,\n  getScaleByColumn,\n  getScaleAll\n} from './stat';\nimport { inspectMatrix } from './inspect';\nimport { installMathOperations } from './mathOperations';\n\nexport class AbstractMatrix {\n  static from1DArray(newRows, newColumns, newData) {\n    var length = newRows * newColumns;\n    if (length !== newData.length) {\n      throw new RangeError('data length does not match given dimensions');\n    }\n    var newMatrix = new Matrix(newRows, newColumns);\n    for (var row = 0; row < newRows; row++) {\n      for (var column = 0; column < newColumns; column++) {\n        newMatrix.set(row, column, newData[row * newColumns + column]);\n      }\n    }\n    return newMatrix;\n  }\n\n  static rowVector(newData) {\n    var vector = new Matrix(1, newData.length);\n    for (var i = 0; i < newData.length; i++) {\n      vector.set(0, i, newData[i]);\n    }\n    return vector;\n  }\n\n  static columnVector(newData) {\n    var vector = new Matrix(newData.length, 1);\n    for (var i = 0; i < newData.length; i++) {\n      vector.set(i, 0, newData[i]);\n    }\n    return vector;\n  }\n\n  static zeros(rows, columns) {\n    return new Matrix(rows, columns);\n  }\n\n  static ones(rows, columns) {\n    return new Matrix(rows, columns).fill(1);\n  }\n\n  static rand(rows, columns, options = {}) {\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { random = Math.random } = options;\n    var matrix = new Matrix(rows, columns);\n    for (var i = 0; i < rows; i++) {\n      for (var j = 0; j < columns; j++) {\n        matrix.set(i, j, random());\n      }\n    }\n    return matrix;\n  }\n\n  static randInt(rows, columns, options = {}) {\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { min = 0, max = 1000, random = Math.random } = options;\n    if (!Number.isInteger(min)) throw new TypeError('min must be an integer');\n    if (!Number.isInteger(max)) throw new TypeError('max must be an integer');\n    if (min >= max) throw new RangeError('min must be smaller than max');\n    var interval = max - min;\n    var matrix = new Matrix(rows, columns);\n    for (var i = 0; i < rows; i++) {\n      for (var j = 0; j < columns; j++) {\n        var value = min + Math.round(random() * interval);\n        matrix.set(i, j, value);\n      }\n    }\n    return matrix;\n  }\n\n  static eye(rows, columns, value) {\n    if (columns === undefined) columns = rows;\n    if (value === undefined) value = 1;\n    var min = Math.min(rows, columns);\n    var matrix = this.zeros(rows, columns);\n    for (var i = 0; i < min; i++) {\n      matrix.set(i, i, value);\n    }\n    return matrix;\n  }\n\n  static diag(data, rows, columns) {\n    var l = data.length;\n    if (rows === undefined) rows = l;\n    if (columns === undefined) columns = rows;\n    var min = Math.min(l, rows, columns);\n    var matrix = this.zeros(rows, columns);\n    for (var i = 0; i < min; i++) {\n      matrix.set(i, i, data[i]);\n    }\n    return matrix;\n  }\n\n  static min(matrix1, matrix2) {\n    matrix1 = this.checkMatrix(matrix1);\n    matrix2 = this.checkMatrix(matrix2);\n    var rows = matrix1.rows;\n    var columns = matrix1.columns;\n    var result = new Matrix(rows, columns);\n    for (var i = 0; i < rows; i++) {\n      for (var j = 0; j < columns; j++) {\n        result.set(i, j, Math.min(matrix1.get(i, j), matrix2.get(i, j)));\n      }\n    }\n    return result;\n  }\n\n  static max(matrix1, matrix2) {\n    matrix1 = this.checkMatrix(matrix1);\n    matrix2 = this.checkMatrix(matrix2);\n    var rows = matrix1.rows;\n    var columns = matrix1.columns;\n    var result = new this(rows, columns);\n    for (var i = 0; i < rows; i++) {\n      for (var j = 0; j < columns; j++) {\n        result.set(i, j, Math.max(matrix1.get(i, j), matrix2.get(i, j)));\n      }\n    }\n    return result;\n  }\n\n  static checkMatrix(value) {\n    return AbstractMatrix.isMatrix(value) ? value : new Matrix(value);\n  }\n\n  static isMatrix(value) {\n    return value != null && value.klass === 'Matrix';\n  }\n\n  get size() {\n    return this.rows * this.columns;\n  }\n\n  apply(callback) {\n    if (typeof callback !== 'function') {\n      throw new TypeError('callback must be a function');\n    }\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        callback.call(this, i, j);\n      }\n    }\n    return this;\n  }\n\n  to1DArray() {\n    var array = [];\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        array.push(this.get(i, j));\n      }\n    }\n    return array;\n  }\n\n  to2DArray() {\n    var copy = [];\n    for (var i = 0; i < this.rows; i++) {\n      copy.push([]);\n      for (var j = 0; j < this.columns; j++) {\n        copy[i].push(this.get(i, j));\n      }\n    }\n    return copy;\n  }\n\n  toJSON() {\n    return this.to2DArray();\n  }\n\n  isRowVector() {\n    return this.rows === 1;\n  }\n\n  isColumnVector() {\n    return this.columns === 1;\n  }\n\n  isVector() {\n    return this.rows === 1 || this.columns === 1;\n  }\n\n  isSquare() {\n    return this.rows === this.columns;\n  }\n\n  isSymmetric() {\n    if (this.isSquare()) {\n      for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j <= i; j++) {\n          if (this.get(i, j) !== this.get(j, i)) {\n            return false;\n          }\n        }\n      }\n      return true;\n    }\n    return false;\n  }\n\n  isEchelonForm() {\n    let i = 0;\n    let j = 0;\n    let previousColumn = -1;\n    let isEchelonForm = true;\n    let checked = false;\n    while (i < this.rows && isEchelonForm) {\n      j = 0;\n      checked = false;\n      while (j < this.columns && checked === false) {\n        if (this.get(i, j) === 0) {\n          j++;\n        } else if (this.get(i, j) === 1 && j > previousColumn) {\n          checked = true;\n          previousColumn = j;\n        } else {\n          isEchelonForm = false;\n          checked = true;\n        }\n      }\n      i++;\n    }\n    return isEchelonForm;\n  }\n\n  isReducedEchelonForm() {\n    let i = 0;\n    let j = 0;\n    let previousColumn = -1;\n    let isReducedEchelonForm = true;\n    let checked = false;\n    while (i < this.rows && isReducedEchelonForm) {\n      j = 0;\n      checked = false;\n      while (j < this.columns && checked === false) {\n        if (this.get(i, j) === 0) {\n          j++;\n        } else if (this.get(i, j) === 1 && j > previousColumn) {\n          checked = true;\n          previousColumn = j;\n        } else {\n          isReducedEchelonForm = false;\n          checked = true;\n        }\n      }\n      for (let k = j + 1; k < this.rows; k++) {\n        if (this.get(i, k) !== 0) {\n          isReducedEchelonForm = false;\n        }\n      }\n      i++;\n    }\n    return isReducedEchelonForm;\n  }\n\n  echelonForm() {\n    let result = this.clone();\n    let h = 0;\n    let k = 0;\n    while ((h < result.rows) && (k < result.columns)) {\n      let iMax = h;\n      for (let i = h; i < result.rows; i++) {\n        if (result.get(i, k) > result.get(iMax, k)) {\n          iMax = i;\n        }\n      }\n      if (result.get(iMax, k) === 0) {\n        k++;\n      } else {\n        result.swapRows(h, iMax);\n        let tmp = result.get(h, k);\n        for (let j = k; j < result.columns; j++) {\n          result.set(h, j, result.get(h, j) / tmp);\n        }\n        for (let i = h + 1; i < result.rows; i++) {\n          let factor = result.get(i, k) / result.get(h, k);\n          result.set(i, k, 0);\n          for (let j = k + 1; j < result.columns; j++) {\n            result.set(i, j, result.get(i, j) - result.get(h, j) * factor);\n          }\n        }\n        h++;\n        k++;\n      }\n    }\n    return result;\n  }\n\n  reducedEchelonForm() {\n    let result = this.echelonForm();\n    let m = result.columns;\n    let n = result.rows;\n    let h = n - 1;\n    while (h >= 0) {\n      if (result.maxRow(h) === 0) {\n        h--;\n      } else {\n        let p = 0;\n        let pivot = false;\n        while ((p < n) && (pivot === false)) {\n          if (result.get(h, p) === 1) {\n            pivot = true;\n          } else {\n            p++;\n          }\n        }\n        for (let i = 0; i < h; i++) {\n          let factor = result.get(i, p);\n          for (let j = p; j < m; j++) {\n            let tmp = result.get(i, j) - factor * result.get(h, j);\n            result.set(i, j, tmp);\n          }\n        }\n        h--;\n      }\n    }\n    return result;\n  }\n\n  set() {\n    throw new Error('set method is unimplemented');\n  }\n\n  get() {\n    throw new Error('get method is unimplemented');\n  }\n\n  repeat(options = {}) {\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { rows = 1, columns = 1 } = options;\n    if (!Number.isInteger(rows) || rows <= 0) {\n      throw new TypeError('rows must be a positive integer');\n    }\n    if (!Number.isInteger(columns) || columns <= 0) {\n      throw new TypeError('columns must be a positive integer');\n    }\n    var matrix = new Matrix(this.rows * rows, this.columns * columns);\n    for (var i = 0; i < rows; i++) {\n      for (var j = 0; j < columns; j++) {\n        matrix.setSubMatrix(this, this.rows * i, this.columns * j);\n      }\n    }\n    return matrix;\n  }\n\n  fill(value) {\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, value);\n      }\n    }\n    return this;\n  }\n\n  neg() {\n    return this.mulS(-1);\n  }\n\n  getRow(index) {\n    checkRowIndex(this, index);\n    var row = [];\n    for (var i = 0; i < this.columns; i++) {\n      row.push(this.get(index, i));\n    }\n    return row;\n  }\n\n  getRowVector(index) {\n    return Matrix.rowVector(this.getRow(index));\n  }\n\n  setRow(index, array) {\n    checkRowIndex(this, index);\n    array = checkRowVector(this, array);\n    for (var i = 0; i < this.columns; i++) {\n      this.set(index, i, array[i]);\n    }\n    return this;\n  }\n\n  swapRows(row1, row2) {\n    checkRowIndex(this, row1);\n    checkRowIndex(this, row2);\n    for (var i = 0; i < this.columns; i++) {\n      var temp = this.get(row1, i);\n      this.set(row1, i, this.get(row2, i));\n      this.set(row2, i, temp);\n    }\n    return this;\n  }\n\n  getColumn(index) {\n    checkColumnIndex(this, index);\n    var column = [];\n    for (var i = 0; i < this.rows; i++) {\n      column.push(this.get(i, index));\n    }\n    return column;\n  }\n\n  getColumnVector(index) {\n    return Matrix.columnVector(this.getColumn(index));\n  }\n\n  setColumn(index, array) {\n    checkColumnIndex(this, index);\n    array = checkColumnVector(this, array);\n    for (var i = 0; i < this.rows; i++) {\n      this.set(i, index, array[i]);\n    }\n    return this;\n  }\n\n  swapColumns(column1, column2) {\n    checkColumnIndex(this, column1);\n    checkColumnIndex(this, column2);\n    for (var i = 0; i < this.rows; i++) {\n      var temp = this.get(i, column1);\n      this.set(i, column1, this.get(i, column2));\n      this.set(i, column2, temp);\n    }\n    return this;\n  }\n\n  addRowVector(vector) {\n    vector = checkRowVector(this, vector);\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) + vector[j]);\n      }\n    }\n    return this;\n  }\n\n  subRowVector(vector) {\n    vector = checkRowVector(this, vector);\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) - vector[j]);\n      }\n    }\n    return this;\n  }\n\n  mulRowVector(vector) {\n    vector = checkRowVector(this, vector);\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) * vector[j]);\n      }\n    }\n    return this;\n  }\n\n  divRowVector(vector) {\n    vector = checkRowVector(this, vector);\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) / vector[j]);\n      }\n    }\n    return this;\n  }\n\n  addColumnVector(vector) {\n    vector = checkColumnVector(this, vector);\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) + vector[i]);\n      }\n    }\n    return this;\n  }\n\n  subColumnVector(vector) {\n    vector = checkColumnVector(this, vector);\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) - vector[i]);\n      }\n    }\n    return this;\n  }\n\n  mulColumnVector(vector) {\n    vector = checkColumnVector(this, vector);\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) * vector[i]);\n      }\n    }\n    return this;\n  }\n\n  divColumnVector(vector) {\n    vector = checkColumnVector(this, vector);\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) / vector[i]);\n      }\n    }\n    return this;\n  }\n\n  mulRow(index, value) {\n    checkRowIndex(this, index);\n    for (var i = 0; i < this.columns; i++) {\n      this.set(index, i, this.get(index, i) * value);\n    }\n    return this;\n  }\n\n  mulColumn(index, value) {\n    checkColumnIndex(this, index);\n    for (var i = 0; i < this.rows; i++) {\n      this.set(i, index, this.get(i, index) * value);\n    }\n    return this;\n  }\n\n  max() {\n    var v = this.get(0, 0);\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        if (this.get(i, j) > v) {\n          v = this.get(i, j);\n        }\n      }\n    }\n    return v;\n  }\n\n  maxIndex() {\n    var v = this.get(0, 0);\n    var idx = [0, 0];\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        if (this.get(i, j) > v) {\n          v = this.get(i, j);\n          idx[0] = i;\n          idx[1] = j;\n        }\n      }\n    }\n    return idx;\n  }\n\n  min() {\n    var v = this.get(0, 0);\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        if (this.get(i, j) < v) {\n          v = this.get(i, j);\n        }\n      }\n    }\n    return v;\n  }\n\n  minIndex() {\n    var v = this.get(0, 0);\n    var idx = [0, 0];\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        if (this.get(i, j) < v) {\n          v = this.get(i, j);\n          idx[0] = i;\n          idx[1] = j;\n        }\n      }\n    }\n    return idx;\n  }\n\n  maxRow(row) {\n    checkRowIndex(this, row);\n    var v = this.get(row, 0);\n    for (var i = 1; i < this.columns; i++) {\n      if (this.get(row, i) > v) {\n        v = this.get(row, i);\n      }\n    }\n    return v;\n  }\n\n  maxRowIndex(row) {\n    checkRowIndex(this, row);\n    var v = this.get(row, 0);\n    var idx = [row, 0];\n    for (var i = 1; i < this.columns; i++) {\n      if (this.get(row, i) > v) {\n        v = this.get(row, i);\n        idx[1] = i;\n      }\n    }\n    return idx;\n  }\n\n  minRow(row) {\n    checkRowIndex(this, row);\n    var v = this.get(row, 0);\n    for (var i = 1; i < this.columns; i++) {\n      if (this.get(row, i) < v) {\n        v = this.get(row, i);\n      }\n    }\n    return v;\n  }\n\n  minRowIndex(row) {\n    checkRowIndex(this, row);\n    var v = this.get(row, 0);\n    var idx = [row, 0];\n    for (var i = 1; i < this.columns; i++) {\n      if (this.get(row, i) < v) {\n        v = this.get(row, i);\n        idx[1] = i;\n      }\n    }\n    return idx;\n  }\n\n  maxColumn(column) {\n    checkColumnIndex(this, column);\n    var v = this.get(0, column);\n    for (var i = 1; i < this.rows; i++) {\n      if (this.get(i, column) > v) {\n        v = this.get(i, column);\n      }\n    }\n    return v;\n  }\n\n  maxColumnIndex(column) {\n    checkColumnIndex(this, column);\n    var v = this.get(0, column);\n    var idx = [0, column];\n    for (var i = 1; i < this.rows; i++) {\n      if (this.get(i, column) > v) {\n        v = this.get(i, column);\n        idx[0] = i;\n      }\n    }\n    return idx;\n  }\n\n  minColumn(column) {\n    checkColumnIndex(this, column);\n    var v = this.get(0, column);\n    for (var i = 1; i < this.rows; i++) {\n      if (this.get(i, column) < v) {\n        v = this.get(i, column);\n      }\n    }\n    return v;\n  }\n\n  minColumnIndex(column) {\n    checkColumnIndex(this, column);\n    var v = this.get(0, column);\n    var idx = [0, column];\n    for (var i = 1; i < this.rows; i++) {\n      if (this.get(i, column) < v) {\n        v = this.get(i, column);\n        idx[0] = i;\n      }\n    }\n    return idx;\n  }\n\n  diag() {\n    var min = Math.min(this.rows, this.columns);\n    var diag = [];\n    for (var i = 0; i < min; i++) {\n      diag.push(this.get(i, i));\n    }\n    return diag;\n  }\n\n  norm(type = 'frobenius') {\n    var result = 0;\n    if (type === 'max') {\n      return this.max();\n    } else if (type === 'frobenius') {\n      for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n          result = result + this.get(i, j) * this.get(i, j);\n        }\n      }\n      return Math.sqrt(result);\n    } else {\n      throw new RangeError(`unknown norm type: ${type}`);\n    }\n  }\n\n  cumulativeSum() {\n    var sum = 0;\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        sum += this.get(i, j);\n        this.set(i, j, sum);\n      }\n    }\n    return this;\n  }\n\n  dot(vector2) {\n    if (AbstractMatrix.isMatrix(vector2)) vector2 = vector2.to1DArray();\n    var vector1 = this.to1DArray();\n    if (vector1.length !== vector2.length) {\n      throw new RangeError('vectors do not have the same size');\n    }\n    var dot = 0;\n    for (var i = 0; i < vector1.length; i++) {\n      dot += vector1[i] * vector2[i];\n    }\n    return dot;\n  }\n\n  mmul(other) {\n    other = Matrix.checkMatrix(other);\n\n    var m = this.rows;\n    var n = this.columns;\n    var p = other.columns;\n\n    var result = new Matrix(m, p);\n\n    var Bcolj = new Float64Array(n);\n    for (var j = 0; j < p; j++) {\n      for (var k = 0; k < n; k++) {\n        Bcolj[k] = other.get(k, j);\n      }\n\n      for (var i = 0; i < m; i++) {\n        var s = 0;\n        for (k = 0; k < n; k++) {\n          s += this.get(i, k) * Bcolj[k];\n        }\n\n        result.set(i, j, s);\n      }\n    }\n    return result;\n  }\n\n  strassen2x2(other) {\n    other = Matrix.checkMatrix(other);\n    var result = new Matrix(2, 2);\n    const a11 = this.get(0, 0);\n    const b11 = other.get(0, 0);\n    const a12 = this.get(0, 1);\n    const b12 = other.get(0, 1);\n    const a21 = this.get(1, 0);\n    const b21 = other.get(1, 0);\n    const a22 = this.get(1, 1);\n    const b22 = other.get(1, 1);\n\n    // Compute intermediate values.\n    const m1 = (a11 + a22) * (b11 + b22);\n    const m2 = (a21 + a22) * b11;\n    const m3 = a11 * (b12 - b22);\n    const m4 = a22 * (b21 - b11);\n    const m5 = (a11 + a12) * b22;\n    const m6 = (a21 - a11) * (b11 + b12);\n    const m7 = (a12 - a22) * (b21 + b22);\n\n    // Combine intermediate values into the output.\n    const c00 = m1 + m4 - m5 + m7;\n    const c01 = m3 + m5;\n    const c10 = m2 + m4;\n    const c11 = m1 - m2 + m3 + m6;\n\n    result.set(0, 0, c00);\n    result.set(0, 1, c01);\n    result.set(1, 0, c10);\n    result.set(1, 1, c11);\n    return result;\n  }\n\n  strassen3x3(other) {\n    other = Matrix.checkMatrix(other);\n    var result = new Matrix(3, 3);\n\n    const a00 = this.get(0, 0);\n    const a01 = this.get(0, 1);\n    const a02 = this.get(0, 2);\n    const a10 = this.get(1, 0);\n    const a11 = this.get(1, 1);\n    const a12 = this.get(1, 2);\n    const a20 = this.get(2, 0);\n    const a21 = this.get(2, 1);\n    const a22 = this.get(2, 2);\n\n    const b00 = other.get(0, 0);\n    const b01 = other.get(0, 1);\n    const b02 = other.get(0, 2);\n    const b10 = other.get(1, 0);\n    const b11 = other.get(1, 1);\n    const b12 = other.get(1, 2);\n    const b20 = other.get(2, 0);\n    const b21 = other.get(2, 1);\n    const b22 = other.get(2, 2);\n\n    const m1 = (a00 + a01 + a02 - a10 - a11 - a21 - a22) * b11;\n    const m2 = (a00 - a10) * (-b01 + b11);\n    const m3 = a11 * (-b00 + b01 + b10 - b11 - b12 - b20 + b22);\n    const m4 = (-a00 + a10 + a11) * (b00 - b01 + b11);\n    const m5 = (a10 + a11) * (-b00 + b01);\n    const m6 = a00 * b00;\n    const m7 = (-a00 + a20 + a21) * (b00 - b02 + b12);\n    const m8 = (-a00 + a20) * (b02 - b12);\n    const m9 = (a20 + a21) * (-b00 + b02);\n    const m10 = (a00 + a01 + a02 - a11 - a12 - a20 - a21) * b12;\n    const m11 = a21 * (-b00 + b02 + b10 - b11 - b12 - b20 + b21);\n    const m12 = (-a02 + a21 + a22) * (b11 + b20 - b21);\n    const m13 = (a02 - a22) * (b11 - b21);\n    const m14 = a02 * b20;\n    const m15 = (a21 + a22) * (-b20 + b21);\n    const m16 = (-a02 + a11 + a12) * (b12 + b20 - b22);\n    const m17 = (a02 - a12) * (b12 - b22);\n    const m18 = (a11 + a12) * (-b20 + b22);\n    const m19 = a01 * b10;\n    const m20 = a12 * b21;\n    const m21 = a10 * b02;\n    const m22 = a20 * b01;\n    const m23 = a22 * b22;\n\n    const c00 = m6 + m14 + m19;\n    const c01 = m1 + m4 + m5 + m6 + m12 + m14 + m15;\n    const c02 = m6 + m7 + m9 + m10 + m14 + m16 + m18;\n    const c10 = m2 + m3 + m4 + m6 + m14 + m16 + m17;\n    const c11 = m2 + m4 + m5 + m6 + m20;\n    const c12 = m14 + m16 + m17 + m18 + m21;\n    const c20 = m6 + m7 + m8 + m11 + m12 + m13 + m14;\n    const c21 = m12 + m13 + m14 + m15 + m22;\n    const c22 = m6 + m7 + m8 + m9 + m23;\n\n    result.set(0, 0, c00);\n    result.set(0, 1, c01);\n    result.set(0, 2, c02);\n    result.set(1, 0, c10);\n    result.set(1, 1, c11);\n    result.set(1, 2, c12);\n    result.set(2, 0, c20);\n    result.set(2, 1, c21);\n    result.set(2, 2, c22);\n    return result;\n  }\n\n  mmulStrassen(y) {\n    y = Matrix.checkMatrix(y);\n    var x = this.clone();\n    var r1 = x.rows;\n    var c1 = x.columns;\n    var r2 = y.rows;\n    var c2 = y.columns;\n    if (c1 !== r2) {\n      // eslint-disable-next-line no-console\n      console.warn(\n        `Multiplying ${r1} x ${c1} and ${r2} x ${c2} matrix: dimensions do not match.`\n      );\n    }\n\n    // Put a matrix into the top left of a matrix of zeros.\n    // `rows` and `cols` are the dimensions of the output matrix.\n    function embed(mat, rows, cols) {\n      var r = mat.rows;\n      var c = mat.columns;\n      if (r === rows && c === cols) {\n        return mat;\n      } else {\n        var resultat = AbstractMatrix.zeros(rows, cols);\n        resultat = resultat.setSubMatrix(mat, 0, 0);\n        return resultat;\n      }\n    }\n\n    // Make sure both matrices are the same size.\n    // This is exclusively for simplicity:\n    // this algorithm can be implemented with matrices of different sizes.\n\n    var r = Math.max(r1, r2);\n    var c = Math.max(c1, c2);\n    x = embed(x, r, c);\n    y = embed(y, r, c);\n\n    // Our recursive multiplication function.\n    function blockMult(a, b, rows, cols) {\n      // For small matrices, resort to naive multiplication.\n      if (rows <= 512 || cols <= 512) {\n        return a.mmul(b); // a is equivalent to this\n      }\n\n      // Apply dynamic padding.\n      if (rows % 2 === 1 && cols % 2 === 1) {\n        a = embed(a, rows + 1, cols + 1);\n        b = embed(b, rows + 1, cols + 1);\n      } else if (rows % 2 === 1) {\n        a = embed(a, rows + 1, cols);\n        b = embed(b, rows + 1, cols);\n      } else if (cols % 2 === 1) {\n        a = embed(a, rows, cols + 1);\n        b = embed(b, rows, cols + 1);\n      }\n\n      var halfRows = parseInt(a.rows / 2, 10);\n      var halfCols = parseInt(a.columns / 2, 10);\n      // Subdivide input matrices.\n      var a11 = a.subMatrix(0, halfRows - 1, 0, halfCols - 1);\n      var b11 = b.subMatrix(0, halfRows - 1, 0, halfCols - 1);\n\n      var a12 = a.subMatrix(0, halfRows - 1, halfCols, a.columns - 1);\n      var b12 = b.subMatrix(0, halfRows - 1, halfCols, b.columns - 1);\n\n      var a21 = a.subMatrix(halfRows, a.rows - 1, 0, halfCols - 1);\n      var b21 = b.subMatrix(halfRows, b.rows - 1, 0, halfCols - 1);\n\n      var a22 = a.subMatrix(halfRows, a.rows - 1, halfCols, a.columns - 1);\n      var b22 = b.subMatrix(halfRows, b.rows - 1, halfCols, b.columns - 1);\n\n      // Compute intermediate values.\n      var m1 = blockMult(\n        AbstractMatrix.add(a11, a22),\n        AbstractMatrix.add(b11, b22),\n        halfRows,\n        halfCols\n      );\n      var m2 = blockMult(AbstractMatrix.add(a21, a22), b11, halfRows, halfCols);\n      var m3 = blockMult(a11, AbstractMatrix.sub(b12, b22), halfRows, halfCols);\n      var m4 = blockMult(a22, AbstractMatrix.sub(b21, b11), halfRows, halfCols);\n      var m5 = blockMult(AbstractMatrix.add(a11, a12), b22, halfRows, halfCols);\n      var m6 = blockMult(\n        AbstractMatrix.sub(a21, a11),\n        AbstractMatrix.add(b11, b12),\n        halfRows,\n        halfCols\n      );\n      var m7 = blockMult(\n        AbstractMatrix.sub(a12, a22),\n        AbstractMatrix.add(b21, b22),\n        halfRows,\n        halfCols\n      );\n\n      // Combine intermediate values into the output.\n      var c11 = AbstractMatrix.add(m1, m4);\n      c11.sub(m5);\n      c11.add(m7);\n      var c12 = AbstractMatrix.add(m3, m5);\n      var c21 = AbstractMatrix.add(m2, m4);\n      var c22 = AbstractMatrix.sub(m1, m2);\n      c22.add(m3);\n      c22.add(m6);\n\n      // Crop output to the desired size (undo dynamic padding).\n      var resultat = AbstractMatrix.zeros(2 * c11.rows, 2 * c11.columns);\n      resultat = resultat.setSubMatrix(c11, 0, 0);\n      resultat = resultat.setSubMatrix(c12, c11.rows, 0);\n      resultat = resultat.setSubMatrix(c21, 0, c11.columns);\n      resultat = resultat.setSubMatrix(c22, c11.rows, c11.columns);\n      return resultat.subMatrix(0, rows - 1, 0, cols - 1);\n    }\n    return blockMult(x, y, r, c);\n  }\n\n  scaleRows(options = {}) {\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { min = 0, max = 1 } = options;\n    if (!Number.isFinite(min)) throw new TypeError('min must be a number');\n    if (!Number.isFinite(max)) throw new TypeError('max must be a number');\n    if (min >= max) throw new RangeError('min must be smaller than max');\n    var newMatrix = new Matrix(this.rows, this.columns);\n    for (var i = 0; i < this.rows; i++) {\n      const row = this.getRow(i);\n      rescale(row, { min, max, output: row });\n      newMatrix.setRow(i, row);\n    }\n    return newMatrix;\n  }\n\n  scaleColumns(options = {}) {\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { min = 0, max = 1 } = options;\n    if (!Number.isFinite(min)) throw new TypeError('min must be a number');\n    if (!Number.isFinite(max)) throw new TypeError('max must be a number');\n    if (min >= max) throw new RangeError('min must be smaller than max');\n    var newMatrix = new Matrix(this.rows, this.columns);\n    for (var i = 0; i < this.columns; i++) {\n      const column = this.getColumn(i);\n      rescale(column, {\n        min: min,\n        max: max,\n        output: column\n      });\n      newMatrix.setColumn(i, column);\n    }\n    return newMatrix;\n  }\n\n  flipRows() {\n    const middle = Math.ceil(this.columns / 2);\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < middle; j++) {\n        var first = this.get(i, j);\n        var last = this.get(i, this.columns - 1 - j);\n        this.set(i, j, last);\n        this.set(i, this.columns - 1 - j, first);\n      }\n    }\n    return this;\n  }\n\n  flipColumns() {\n    const middle = Math.ceil(this.rows / 2);\n    for (var j = 0; j < this.columns; j++) {\n      for (var i = 0; i < middle; i++) {\n        var first = this.get(i, j);\n        var last = this.get(this.rows - 1 - i, j);\n        this.set(i, j, last);\n        this.set(this.rows - 1 - i, j, first);\n      }\n    }\n    return this;\n  }\n\n  kroneckerProduct(other) {\n    other = Matrix.checkMatrix(other);\n\n    var m = this.rows;\n    var n = this.columns;\n    var p = other.rows;\n    var q = other.columns;\n\n    var result = new Matrix(m * p, n * q);\n    for (var i = 0; i < m; i++) {\n      for (var j = 0; j < n; j++) {\n        for (var k = 0; k < p; k++) {\n          for (var l = 0; l < q; l++) {\n            result.set(p * i + k, q * j + l, this.get(i, j) * other.get(k, l));\n          }\n        }\n      }\n    }\n    return result;\n  }\n\n  transpose() {\n    var result = new Matrix(this.columns, this.rows);\n    for (var i = 0; i < this.rows; i++) {\n      for (var j = 0; j < this.columns; j++) {\n        result.set(j, i, this.get(i, j));\n      }\n    }\n    return result;\n  }\n\n  sortRows(compareFunction = compareNumbers) {\n    for (var i = 0; i < this.rows; i++) {\n      this.setRow(i, this.getRow(i).sort(compareFunction));\n    }\n    return this;\n  }\n\n  sortColumns(compareFunction = compareNumbers) {\n    for (var i = 0; i < this.columns; i++) {\n      this.setColumn(i, this.getColumn(i).sort(compareFunction));\n    }\n    return this;\n  }\n\n  subMatrix(startRow, endRow, startColumn, endColumn) {\n    checkRange(this, startRow, endRow, startColumn, endColumn);\n    var newMatrix = new Matrix(\n      endRow - startRow + 1,\n      endColumn - startColumn + 1\n    );\n    for (var i = startRow; i <= endRow; i++) {\n      for (var j = startColumn; j <= endColumn; j++) {\n        newMatrix.set(i - startRow, j - startColumn, this.get(i, j));\n      }\n    }\n    return newMatrix;\n  }\n\n  subMatrixRow(indices, startColumn, endColumn) {\n    if (startColumn === undefined) startColumn = 0;\n    if (endColumn === undefined) endColumn = this.columns - 1;\n    if (\n      startColumn > endColumn ||\n      startColumn < 0 ||\n      startColumn >= this.columns ||\n      endColumn < 0 ||\n      endColumn >= this.columns\n    ) {\n      throw new RangeError('Argument out of range');\n    }\n\n    var newMatrix = new Matrix(indices.length, endColumn - startColumn + 1);\n    for (var i = 0; i < indices.length; i++) {\n      for (var j = startColumn; j <= endColumn; j++) {\n        if (indices[i] < 0 || indices[i] >= this.rows) {\n          throw new RangeError(`Row index out of range: ${indices[i]}`);\n        }\n        newMatrix.set(i, j - startColumn, this.get(indices[i], j));\n      }\n    }\n    return newMatrix;\n  }\n\n  subMatrixColumn(indices, startRow, endRow) {\n    if (startRow === undefined) startRow = 0;\n    if (endRow === undefined) endRow = this.rows - 1;\n    if (\n      startRow > endRow ||\n      startRow < 0 ||\n      startRow >= this.rows ||\n      endRow < 0 ||\n      endRow >= this.rows\n    ) {\n      throw new RangeError('Argument out of range');\n    }\n\n    var newMatrix = new Matrix(endRow - startRow + 1, indices.length);\n    for (var i = 0; i < indices.length; i++) {\n      for (var j = startRow; j <= endRow; j++) {\n        if (indices[i] < 0 || indices[i] >= this.columns) {\n          throw new RangeError(`Column index out of range: ${indices[i]}`);\n        }\n        newMatrix.set(j - startRow, i, this.get(j, indices[i]));\n      }\n    }\n    return newMatrix;\n  }\n\n  setSubMatrix(matrix, startRow, startColumn) {\n    matrix = Matrix.checkMatrix(matrix);\n    var endRow = startRow + matrix.rows - 1;\n    var endColumn = startColumn + matrix.columns - 1;\n    checkRange(this, startRow, endRow, startColumn, endColumn);\n    for (var i = 0; i < matrix.rows; i++) {\n      for (var j = 0; j < matrix.columns; j++) {\n        this.set(startRow + i, startColumn + j, matrix.get(i, j));\n      }\n    }\n    return this;\n  }\n\n  selection(rowIndices, columnIndices) {\n    var indices = checkIndices(this, rowIndices, columnIndices);\n    var newMatrix = new Matrix(rowIndices.length, columnIndices.length);\n    for (var i = 0; i < indices.row.length; i++) {\n      var rowIndex = indices.row[i];\n      for (var j = 0; j < indices.column.length; j++) {\n        var columnIndex = indices.column[j];\n        newMatrix.set(i, j, this.get(rowIndex, columnIndex));\n      }\n    }\n    return newMatrix;\n  }\n\n  trace() {\n    var min = Math.min(this.rows, this.columns);\n    var trace = 0;\n    for (var i = 0; i < min; i++) {\n      trace += this.get(i, i);\n    }\n    return trace;\n  }\n\n  clone() {\n    var newMatrix = new Matrix(this.rows, this.columns);\n    for (var row = 0; row < this.rows; row++) {\n      for (var column = 0; column < this.columns; column++) {\n        newMatrix.set(row, column, this.get(row, column));\n      }\n    }\n    return newMatrix;\n  }\n\n  sum(by) {\n    switch (by) {\n      case 'row':\n        return sumByRow(this);\n      case 'column':\n        return sumByColumn(this);\n      case undefined:\n        return sumAll(this);\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  product(by) {\n    switch (by) {\n      case 'row':\n        return productByRow(this);\n      case 'column':\n        return productByColumn(this);\n      case undefined:\n        return productAll(this);\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  mean(by) {\n    const sum = this.sum(by);\n    switch (by) {\n      case 'row': {\n        for (let i = 0; i < this.rows; i++) {\n          sum[i] /= this.columns;\n        }\n        return sum;\n      }\n      case 'column': {\n        for (let i = 0; i < this.columns; i++) {\n          sum[i] /= this.rows;\n        }\n        return sum;\n      }\n      case undefined:\n        return sum / this.size;\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  variance(by, options = {}) {\n    if (typeof by === 'object') {\n      options = by;\n      by = undefined;\n    }\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { unbiased = true, mean = this.mean(by) } = options;\n    if (typeof unbiased !== 'boolean') {\n      throw new TypeError('unbiased must be a boolean');\n    }\n    switch (by) {\n      case 'row': {\n        if (!Array.isArray(mean)) {\n          throw new TypeError('mean must be an array');\n        }\n        return varianceByRow(this, unbiased, mean);\n      }\n      case 'column': {\n        if (!Array.isArray(mean)) {\n          throw new TypeError('mean must be an array');\n        }\n        return varianceByColumn(this, unbiased, mean);\n      }\n      case undefined: {\n        if (typeof mean !== 'number') {\n          throw new TypeError('mean must be a number');\n        }\n        return varianceAll(this, unbiased, mean);\n      }\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  standardDeviation(by, options) {\n    if (typeof by === 'object') {\n      options = by;\n      by = undefined;\n    }\n    const variance = this.variance(by, options);\n    if (by === undefined) {\n      return Math.sqrt(variance);\n    } else {\n      for (var i = 0; i < variance.length; i++) {\n        variance[i] = Math.sqrt(variance[i]);\n      }\n      return variance;\n    }\n  }\n\n  center(by, options = {}) {\n    if (typeof by === 'object') {\n      options = by;\n      by = undefined;\n    }\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { center = this.mean(by) } = options;\n    switch (by) {\n      case 'row': {\n        if (!Array.isArray(center)) {\n          throw new TypeError('center must be an array');\n        }\n        centerByRow(this, center);\n        return this;\n      }\n      case 'column': {\n        if (!Array.isArray(center)) {\n          throw new TypeError('center must be an array');\n        }\n        centerByColumn(this, center);\n        return this;\n      } case undefined: {\n        if (typeof center !== 'number') {\n          throw new TypeError('center must be a number');\n        }\n        centerAll(this, center);\n        return this;\n      }\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  scale(by, options = {}) {\n    if (typeof by === 'object') {\n      options = by;\n      by = undefined;\n    }\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    let scale = options.scale;\n    switch (by) {\n      case 'row': {\n        if (scale === undefined) {\n          scale = getScaleByRow(this);\n        } else if (!Array.isArray(scale)) {\n          throw new TypeError('scale must be an array');\n        }\n        scaleByRow(this, scale);\n        return this;\n      }\n      case 'column': {\n        if (scale === undefined) {\n          scale = getScaleByColumn(this);\n        } else if (!Array.isArray(scale)) {\n          throw new TypeError('scale must be an array');\n        }\n        scaleByColumn(this, scale);\n        return this;\n      }\n      case undefined: {\n        if (scale === undefined) {\n          scale = getScaleAll(this);\n        } else if (typeof scale !== 'number') {\n          throw new TypeError('scale must be a number');\n        }\n        scaleAll(this, scale);\n        return this;\n      }\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n}\n\nAbstractMatrix.prototype.klass = 'Matrix';\nif (typeof Symbol !== 'undefined') {\n  AbstractMatrix.prototype[\n    Symbol.for('nodejs.util.inspect.custom')\n  ] = inspectMatrix;\n}\n\nfunction compareNumbers(a, b) {\n  return a - b;\n}\n\n// Synonyms\nAbstractMatrix.random = AbstractMatrix.rand;\nAbstractMatrix.randomInt = AbstractMatrix.randInt;\nAbstractMatrix.diagonal = AbstractMatrix.diag;\nAbstractMatrix.prototype.diagonal = AbstractMatrix.prototype.diag;\nAbstractMatrix.identity = AbstractMatrix.eye;\nAbstractMatrix.prototype.negate = AbstractMatrix.prototype.neg;\nAbstractMatrix.prototype.tensorProduct =\n  AbstractMatrix.prototype.kroneckerProduct;\n\nexport default class Matrix extends AbstractMatrix {\n  constructor(nRows, nColumns) {\n    super();\n    if (Matrix.isMatrix(nRows)) {\n      return nRows.clone();\n    } else if (Number.isInteger(nRows) && nRows > 0) {\n      // Create an empty matrix\n      this.data = [];\n      if (Number.isInteger(nColumns) && nColumns > 0) {\n        for (let i = 0; i < nRows; i++) {\n          this.data.push(new Float64Array(nColumns));\n        }\n      } else {\n        throw new TypeError('nColumns must be a positive integer');\n      }\n    } else if (Array.isArray(nRows)) {\n      // Copy the values from the 2D array\n      const arrayData = nRows;\n      nRows = arrayData.length;\n      nColumns = arrayData[0].length;\n      if (typeof nColumns !== 'number' || nColumns === 0) {\n        throw new TypeError(\n          'Data must be a 2D array with at least one element'\n        );\n      }\n      this.data = [];\n      for (let i = 0; i < nRows; i++) {\n        if (arrayData[i].length !== nColumns) {\n          throw new RangeError('Inconsistent array dimensions');\n        }\n        this.data.push(Float64Array.from(arrayData[i]));\n      }\n    } else {\n      throw new TypeError(\n        'First argument must be a positive number or an array'\n      );\n    }\n    this.rows = nRows;\n    this.columns = nColumns;\n    return this;\n  }\n\n  set(rowIndex, columnIndex, value) {\n    this.data[rowIndex][columnIndex] = value;\n    return this;\n  }\n\n  get(rowIndex, columnIndex) {\n    return this.data[rowIndex][columnIndex];\n  }\n\n  removeRow(index) {\n    checkRowIndex(this, index);\n    if (this.rows === 1) {\n      throw new RangeError('A matrix cannot have less than one row');\n    }\n    this.data.splice(index, 1);\n    this.rows -= 1;\n    return this;\n  }\n\n  addRow(index, array) {\n    if (array === undefined) {\n      array = index;\n      index = this.rows;\n    }\n    checkRowIndex(this, index, true);\n    array = Float64Array.from(checkRowVector(this, array, true));\n    this.data.splice(index, 0, array);\n    this.rows += 1;\n    return this;\n  }\n\n  removeColumn(index) {\n    checkColumnIndex(this, index);\n    if (this.columns === 1) {\n      throw new RangeError('A matrix cannot have less than one column');\n    }\n    for (var i = 0; i < this.rows; i++) {\n      const newRow = new Float64Array(this.columns - 1);\n      for (let j = 0; j < index; j++) {\n        newRow[j] = this.data[i][j];\n      }\n      for (let j = index + 1; j < this.columns; j++) {\n        newRow[j - 1] = this.data[i][j];\n      }\n      this.data[i] = newRow;\n    }\n    this.columns -= 1;\n    return this;\n  }\n\n  addColumn(index, array) {\n    if (typeof array === 'undefined') {\n      array = index;\n      index = this.columns;\n    }\n    checkColumnIndex(this, index, true);\n    array = checkColumnVector(this, array);\n    for (var i = 0; i < this.rows; i++) {\n      const newRow = new Float64Array(this.columns + 1);\n      let j = 0;\n      for (; j < index; j++) {\n        newRow[j] = this.data[i][j];\n      }\n      newRow[j++] = array[i];\n      for (; j < this.columns + 1; j++) {\n        newRow[j] = this.data[i][j - 1];\n      }\n      this.data[i] = newRow;\n    }\n    this.columns += 1;\n    return this;\n  }\n}\n\ninstallMathOperations(AbstractMatrix, Matrix);\n","import { AbstractMatrix } from '../matrix';\n\nexport default class BaseView extends AbstractMatrix {\n  constructor(matrix, rows, columns) {\n    super();\n    this.matrix = matrix;\n    this.rows = rows;\n    this.columns = columns;\n  }\n}\n","import { checkColumnIndex } from '../util';\n\nimport BaseView from './base';\n\nexport default class MatrixColumnView extends BaseView {\n  constructor(matrix, column) {\n    checkColumnIndex(matrix, column);\n    super(matrix, matrix.rows, 1);\n    this.column = column;\n  }\n\n  set(rowIndex, columnIndex, value) {\n    this.matrix.set(rowIndex, this.column, value);\n    return this;\n  }\n\n  get(rowIndex) {\n    return this.matrix.get(rowIndex, this.column);\n  }\n}\n","import { checkColumnIndices } from '../util';\r\n\r\nimport BaseView from './base';\r\n\r\nexport default class MatrixColumnSelectionView extends BaseView {\r\n  constructor(matrix, columnIndices) {\r\n    columnIndices = checkColumnIndices(matrix, columnIndices);\r\n    super(matrix, matrix.rows, columnIndices.length);\r\n    this.columnIndices = columnIndices;\r\n  }\r\n\r\n  set(rowIndex, columnIndex, value) {\r\n    this.matrix.set(rowIndex, this.columnIndices[columnIndex], value);\r\n    return this;\r\n  }\r\n\r\n  get(rowIndex, columnIndex) {\r\n    return this.matrix.get(rowIndex, this.columnIndices[columnIndex]);\r\n  }\r\n}\r\n","import BaseView from './base';\r\n\r\nexport default class MatrixFlipColumnView extends BaseView {\r\n  constructor(matrix) {\r\n    super(matrix, matrix.rows, matrix.columns);\r\n  }\r\n\r\n  set(rowIndex, columnIndex, value) {\r\n    this.matrix.set(rowIndex, this.columns - columnIndex - 1, value);\r\n    return this;\r\n  }\r\n\r\n  get(rowIndex, columnIndex) {\r\n    return this.matrix.get(rowIndex, this.columns - columnIndex - 1);\r\n  }\r\n}\r\n","import BaseView from './base';\r\n\r\nexport default class MatrixFlipRowView extends BaseView {\r\n  constructor(matrix) {\r\n    super(matrix, matrix.rows, matrix.columns);\r\n  }\r\n\r\n  set(rowIndex, columnIndex, value) {\r\n    this.matrix.set(this.rows - rowIndex - 1, columnIndex, value);\r\n    return this;\r\n  }\r\n\r\n  get(rowIndex, columnIndex) {\r\n    return this.matrix.get(this.rows - rowIndex - 1, columnIndex);\r\n  }\r\n}\r\n","import { checkRowIndex } from '../util';\n\nimport BaseView from './base';\n\nexport default class MatrixRowView extends BaseView {\n  constructor(matrix, row) {\n    checkRowIndex(matrix, row);\n    super(matrix, 1, matrix.columns);\n    this.row = row;\n  }\n\n  set(rowIndex, columnIndex, value) {\n    this.matrix.set(this.row, columnIndex, value);\n    return this;\n  }\n\n  get(rowIndex, columnIndex) {\n    return this.matrix.get(this.row, columnIndex);\n  }\n}\n","import { checkRowIndices } from '../util';\r\n\r\nimport BaseView from './base';\r\n\r\nexport default class MatrixRowSelectionView extends BaseView {\r\n  constructor(matrix, rowIndices) {\r\n    rowIndices = checkRowIndices(matrix, rowIndices);\r\n    super(matrix, rowIndices.length, matrix.columns);\r\n    this.rowIndices = rowIndices;\r\n  }\r\n\r\n  set(rowIndex, columnIndex, value) {\r\n    this.matrix.set(this.rowIndices[rowIndex], columnIndex, value);\r\n    return this;\r\n  }\r\n\r\n  get(rowIndex, columnIndex) {\r\n    return this.matrix.get(this.rowIndices[rowIndex], columnIndex);\r\n  }\r\n}\r\n","import { checkIndices } from '../util';\r\n\r\nimport BaseView from './base';\r\n\r\nexport default class MatrixSelectionView extends BaseView {\r\n  constructor(matrix, rowIndices, columnIndices) {\r\n    var indices = checkIndices(matrix, rowIndices, columnIndices);\r\n    super(matrix, indices.row.length, indices.column.length);\r\n    this.rowIndices = indices.row;\r\n    this.columnIndices = indices.column;\r\n  }\r\n\r\n  set(rowIndex, columnIndex, value) {\r\n    this.matrix.set(\r\n      this.rowIndices[rowIndex],\r\n      this.columnIndices[columnIndex],\r\n      value\r\n    );\r\n    return this;\r\n  }\r\n\r\n  get(rowIndex, columnIndex) {\r\n    return this.matrix.get(\r\n      this.rowIndices[rowIndex],\r\n      this.columnIndices[columnIndex]\r\n    );\r\n  }\r\n}\r\n","import { checkRange } from '../util';\r\n\r\nimport BaseView from './base';\r\n\r\nexport default class MatrixSubView extends BaseView {\r\n  constructor(matrix, startRow, endRow, startColumn, endColumn) {\r\n    checkRange(matrix, startRow, endRow, startColumn, endColumn);\r\n    super(matrix, endRow - startRow + 1, endColumn - startColumn + 1);\r\n    this.startRow = startRow;\r\n    this.startColumn = startColumn;\r\n  }\r\n\r\n  set(rowIndex, columnIndex, value) {\r\n    this.matrix.set(\r\n      this.startRow + rowIndex,\r\n      this.startColumn + columnIndex,\r\n      value\r\n    );\r\n    return this;\r\n  }\r\n\r\n  get(rowIndex, columnIndex) {\r\n    return this.matrix.get(\r\n      this.startRow + rowIndex,\r\n      this.startColumn + columnIndex\r\n    );\r\n  }\r\n}\r\n","import BaseView from './base';\r\n\r\nexport default class MatrixTransposeView extends BaseView {\r\n  constructor(matrix) {\r\n    super(matrix, matrix.columns, matrix.rows);\r\n  }\r\n\r\n  set(rowIndex, columnIndex, value) {\r\n    this.matrix.set(columnIndex, rowIndex, value);\r\n    return this;\r\n  }\r\n\r\n  get(rowIndex, columnIndex) {\r\n    return this.matrix.get(columnIndex, rowIndex);\r\n  }\r\n}\r\n","import { AbstractMatrix } from '../matrix';\n\nexport default class WrapperMatrix1D extends AbstractMatrix {\n  constructor(data, options = {}) {\n    const { rows = 1 } = options;\n\n    if (data.length % rows !== 0) {\n      throw new Error('the data length is not divisible by the number of rows');\n    }\n    super();\n    this.rows = rows;\n    this.columns = data.length / rows;\n    this.data = data;\n  }\n\n  set(rowIndex, columnIndex, value) {\n    var index = this._calculateIndex(rowIndex, columnIndex);\n    this.data[index] = value;\n    return this;\n  }\n\n  get(rowIndex, columnIndex) {\n    var index = this._calculateIndex(rowIndex, columnIndex);\n    return this.data[index];\n  }\n\n  _calculateIndex(row, column) {\n    return row * this.columns + column;\n  }\n}\n","import { AbstractMatrix } from '../matrix';\n\nexport default class WrapperMatrix2D extends AbstractMatrix {\n  constructor(data) {\n    super();\n    this.data = data;\n    this.rows = data.length;\n    this.columns = data[0].length;\n  }\n\n  set(rowIndex, columnIndex, value) {\n    this.data[rowIndex][columnIndex] = value;\n    return this;\n  }\n\n  get(rowIndex, columnIndex) {\n    return this.data[rowIndex][columnIndex];\n  }\n}\n","import WrapperMatrix1D from './WrapperMatrix1D';\nimport WrapperMatrix2D from './WrapperMatrix2D';\n\nexport function wrap(array, options) {\n  if (Array.isArray(array)) {\n    if (array[0] && Array.isArray(array[0])) {\n      return new WrapperMatrix2D(array);\n    } else {\n      return new WrapperMatrix1D(array, options);\n    }\n  } else {\n    throw new Error('the argument is not an array');\n  }\n}\n","import Matrix from '../matrix';\nimport WrapperMatrix2D from '../wrap/WrapperMatrix2D';\n\nexport default class LuDecomposition {\n  constructor(matrix) {\n    matrix = WrapperMatrix2D.checkMatrix(matrix);\n\n    var lu = matrix.clone();\n    var rows = lu.rows;\n    var columns = lu.columns;\n    var pivotVector = new Float64Array(rows);\n    var pivotSign = 1;\n    var i, j, k, p, s, t, v;\n    var LUcolj, kmax;\n\n    for (i = 0; i < rows; i++) {\n      pivotVector[i] = i;\n    }\n\n    LUcolj = new Float64Array(rows);\n\n    for (j = 0; j < columns; j++) {\n      for (i = 0; i < rows; i++) {\n        LUcolj[i] = lu.get(i, j);\n      }\n\n      for (i = 0; i < rows; i++) {\n        kmax = Math.min(i, j);\n        s = 0;\n        for (k = 0; k < kmax; k++) {\n          s += lu.get(i, k) * LUcolj[k];\n        }\n        LUcolj[i] -= s;\n        lu.set(i, j, LUcolj[i]);\n      }\n\n      p = j;\n      for (i = j + 1; i < rows; i++) {\n        if (Math.abs(LUcolj[i]) > Math.abs(LUcolj[p])) {\n          p = i;\n        }\n      }\n\n      if (p !== j) {\n        for (k = 0; k < columns; k++) {\n          t = lu.get(p, k);\n          lu.set(p, k, lu.get(j, k));\n          lu.set(j, k, t);\n        }\n\n        v = pivotVector[p];\n        pivotVector[p] = pivotVector[j];\n        pivotVector[j] = v;\n\n        pivotSign = -pivotSign;\n      }\n\n      if (j < rows && lu.get(j, j) !== 0) {\n        for (i = j + 1; i < rows; i++) {\n          lu.set(i, j, lu.get(i, j) / lu.get(j, j));\n        }\n      }\n    }\n\n    this.LU = lu;\n    this.pivotVector = pivotVector;\n    this.pivotSign = pivotSign;\n  }\n\n  isSingular() {\n    var data = this.LU;\n    var col = data.columns;\n    for (var j = 0; j < col; j++) {\n      if (data.get(j, j) === 0) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  solve(value) {\n    value = Matrix.checkMatrix(value);\n\n    var lu = this.LU;\n    var rows = lu.rows;\n\n    if (rows !== value.rows) {\n      throw new Error('Invalid matrix dimensions');\n    }\n    if (this.isSingular()) {\n      throw new Error('LU matrix is singular');\n    }\n\n    var count = value.columns;\n    var X = value.subMatrixRow(this.pivotVector, 0, count - 1);\n    var columns = lu.columns;\n    var i, j, k;\n\n    for (k = 0; k < columns; k++) {\n      for (i = k + 1; i < columns; i++) {\n        for (j = 0; j < count; j++) {\n          X.set(i, j, X.get(i, j) - X.get(k, j) * lu.get(i, k));\n        }\n      }\n    }\n    for (k = columns - 1; k >= 0; k--) {\n      for (j = 0; j < count; j++) {\n        X.set(k, j, X.get(k, j) / lu.get(k, k));\n      }\n      for (i = 0; i < k; i++) {\n        for (j = 0; j < count; j++) {\n          X.set(i, j, X.get(i, j) - X.get(k, j) * lu.get(i, k));\n        }\n      }\n    }\n    return X;\n  }\n\n  get determinant() {\n    var data = this.LU;\n    if (!data.isSquare()) {\n      throw new Error('Matrix must be square');\n    }\n    var determinant = this.pivotSign;\n    var col = data.columns;\n    for (var j = 0; j < col; j++) {\n      determinant *= data.get(j, j);\n    }\n    return determinant;\n  }\n\n  get lowerTriangularMatrix() {\n    var data = this.LU;\n    var rows = data.rows;\n    var columns = data.columns;\n    var X = new Matrix(rows, columns);\n    for (var i = 0; i < rows; i++) {\n      for (var j = 0; j < columns; j++) {\n        if (i > j) {\n          X.set(i, j, data.get(i, j));\n        } else if (i === j) {\n          X.set(i, j, 1);\n        } else {\n          X.set(i, j, 0);\n        }\n      }\n    }\n    return X;\n  }\n\n  get upperTriangularMatrix() {\n    var data = this.LU;\n    var rows = data.rows;\n    var columns = data.columns;\n    var X = new Matrix(rows, columns);\n    for (var i = 0; i < rows; i++) {\n      for (var j = 0; j < columns; j++) {\n        if (i <= j) {\n          X.set(i, j, data.get(i, j));\n        } else {\n          X.set(i, j, 0);\n        }\n      }\n    }\n    return X;\n  }\n\n  get pivotPermutationVector() {\n    return Array.from(this.pivotVector);\n  }\n}\n","export function hypotenuse(a, b) {\n  var r = 0;\n  if (Math.abs(a) > Math.abs(b)) {\n    r = b / a;\n    return Math.abs(a) * Math.sqrt(1 + r * r);\n  }\n  if (b !== 0) {\n    r = a / b;\n    return Math.abs(b) * Math.sqrt(1 + r * r);\n  }\n  return 0;\n}\n","import Matrix from '../matrix';\nimport WrapperMatrix2D from '../wrap/WrapperMatrix2D';\n\nimport { hypotenuse } from './util';\n\nexport default class QrDecomposition {\n  constructor(value) {\n    value = WrapperMatrix2D.checkMatrix(value);\n\n    var qr = value.clone();\n    var m = value.rows;\n    var n = value.columns;\n    var rdiag = new Float64Array(n);\n    var i, j, k, s;\n\n    for (k = 0; k < n; k++) {\n      var nrm = 0;\n      for (i = k; i < m; i++) {\n        nrm = hypotenuse(nrm, qr.get(i, k));\n      }\n      if (nrm !== 0) {\n        if (qr.get(k, k) < 0) {\n          nrm = -nrm;\n        }\n        for (i = k; i < m; i++) {\n          qr.set(i, k, qr.get(i, k) / nrm);\n        }\n        qr.set(k, k, qr.get(k, k) + 1);\n        for (j = k + 1; j < n; j++) {\n          s = 0;\n          for (i = k; i < m; i++) {\n            s += qr.get(i, k) * qr.get(i, j);\n          }\n          s = -s / qr.get(k, k);\n          for (i = k; i < m; i++) {\n            qr.set(i, j, qr.get(i, j) + s * qr.get(i, k));\n          }\n        }\n      }\n      rdiag[k] = -nrm;\n    }\n\n    this.QR = qr;\n    this.Rdiag = rdiag;\n  }\n\n  solve(value) {\n    value = Matrix.checkMatrix(value);\n\n    var qr = this.QR;\n    var m = qr.rows;\n\n    if (value.rows !== m) {\n      throw new Error('Matrix row dimensions must agree');\n    }\n    if (!this.isFullRank()) {\n      throw new Error('Matrix is rank deficient');\n    }\n\n    var count = value.columns;\n    var X = value.clone();\n    var n = qr.columns;\n    var i, j, k, s;\n\n    for (k = 0; k < n; k++) {\n      for (j = 0; j < count; j++) {\n        s = 0;\n        for (i = k; i < m; i++) {\n          s += qr.get(i, k) * X.get(i, j);\n        }\n        s = -s / qr.get(k, k);\n        for (i = k; i < m; i++) {\n          X.set(i, j, X.get(i, j) + s * qr.get(i, k));\n        }\n      }\n    }\n    for (k = n - 1; k >= 0; k--) {\n      for (j = 0; j < count; j++) {\n        X.set(k, j, X.get(k, j) / this.Rdiag[k]);\n      }\n      for (i = 0; i < k; i++) {\n        for (j = 0; j < count; j++) {\n          X.set(i, j, X.get(i, j) - X.get(k, j) * qr.get(i, k));\n        }\n      }\n    }\n\n    return X.subMatrix(0, n - 1, 0, count - 1);\n  }\n\n  isFullRank() {\n    var columns = this.QR.columns;\n    for (var i = 0; i < columns; i++) {\n      if (this.Rdiag[i] === 0) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  get upperTriangularMatrix() {\n    var qr = this.QR;\n    var n = qr.columns;\n    var X = new Matrix(n, n);\n    var i, j;\n    for (i = 0; i < n; i++) {\n      for (j = 0; j < n; j++) {\n        if (i < j) {\n          X.set(i, j, qr.get(i, j));\n        } else if (i === j) {\n          X.set(i, j, this.Rdiag[i]);\n        } else {\n          X.set(i, j, 0);\n        }\n      }\n    }\n    return X;\n  }\n\n  get orthogonalMatrix() {\n    var qr = this.QR;\n    var rows = qr.rows;\n    var columns = qr.columns;\n    var X = new Matrix(rows, columns);\n    var i, j, k, s;\n\n    for (k = columns - 1; k >= 0; k--) {\n      for (i = 0; i < rows; i++) {\n        X.set(i, k, 0);\n      }\n      X.set(k, k, 1);\n      for (j = k; j < columns; j++) {\n        if (qr.get(k, k) !== 0) {\n          s = 0;\n          for (i = k; i < rows; i++) {\n            s += qr.get(i, k) * X.get(i, j);\n          }\n\n          s = -s / qr[k][k];\n\n          for (i = k; i < rows; i++) {\n            X.set(i, j, X.get(i, j) + s * qr.get(i, k));\n          }\n        }\n      }\n    }\n    return X;\n  }\n}\n","import Matrix from '../matrix';\nimport WrapperMatrix2D from '../wrap/WrapperMatrix2D';\n\nimport { hypotenuse } from './util';\n\nexport default class SingularValueDecomposition {\n  constructor(value, options = {}) {\n    value = WrapperMatrix2D.checkMatrix(value);\n\n    var m = value.rows;\n    var n = value.columns;\n\n    const {\n      computeLeftSingularVectors = true,\n      computeRightSingularVectors = true,\n      autoTranspose = false\n    } = options;\n\n    var wantu = Boolean(computeLeftSingularVectors);\n    var wantv = Boolean(computeRightSingularVectors);\n\n    var swapped = false;\n    var a;\n    if (m < n) {\n      if (!autoTranspose) {\n        a = value.clone();\n        // eslint-disable-next-line no-console\n        console.warn(\n          'Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose'\n        );\n      } else {\n        a = value.transpose();\n        m = a.rows;\n        n = a.columns;\n        swapped = true;\n        var aux = wantu;\n        wantu = wantv;\n        wantv = aux;\n      }\n    } else {\n      a = value.clone();\n    }\n\n    var nu = Math.min(m, n);\n    var ni = Math.min(m + 1, n);\n    var s = new Float64Array(ni);\n    var U = new Matrix(m, nu);\n    var V = new Matrix(n, n);\n\n    var e = new Float64Array(n);\n    var work = new Float64Array(m);\n\n    var si = new Float64Array(ni);\n    for (let i = 0; i < ni; i++) si[i] = i;\n\n    var nct = Math.min(m - 1, n);\n    var nrt = Math.max(0, Math.min(n - 2, m));\n    var mrc = Math.max(nct, nrt);\n\n    for (let k = 0; k < mrc; k++) {\n      if (k < nct) {\n        s[k] = 0;\n        for (let i = k; i < m; i++) {\n          s[k] = hypotenuse(s[k], a.get(i, k));\n        }\n        if (s[k] !== 0) {\n          if (a.get(k, k) < 0) {\n            s[k] = -s[k];\n          }\n          for (let i = k; i < m; i++) {\n            a.set(i, k, a.get(i, k) / s[k]);\n          }\n          a.set(k, k, a.get(k, k) + 1);\n        }\n        s[k] = -s[k];\n      }\n\n      for (let j = k + 1; j < n; j++) {\n        if (k < nct && s[k] !== 0) {\n          let t = 0;\n          for (let i = k; i < m; i++) {\n            t += a.get(i, k) * a.get(i, j);\n          }\n          t = -t / a.get(k, k);\n          for (let i = k; i < m; i++) {\n            a.set(i, j, a.get(i, j) + t * a.get(i, k));\n          }\n        }\n        e[j] = a.get(k, j);\n      }\n\n      if (wantu && k < nct) {\n        for (let i = k; i < m; i++) {\n          U.set(i, k, a.get(i, k));\n        }\n      }\n\n      if (k < nrt) {\n        e[k] = 0;\n        for (let i = k + 1; i < n; i++) {\n          e[k] = hypotenuse(e[k], e[i]);\n        }\n        if (e[k] !== 0) {\n          if (e[k + 1] < 0) {\n            e[k] = 0 - e[k];\n          }\n          for (let i = k + 1; i < n; i++) {\n            e[i] /= e[k];\n          }\n          e[k + 1] += 1;\n        }\n        e[k] = -e[k];\n        if (k + 1 < m && e[k] !== 0) {\n          for (let i = k + 1; i < m; i++) {\n            work[i] = 0;\n          }\n          for (let i = k + 1; i < m; i++) {\n            for (let j = k + 1; j < n; j++) {\n              work[i] += e[j] * a.get(i, j);\n            }\n          }\n          for (let j = k + 1; j < n; j++) {\n            let t = -e[j] / e[k + 1];\n            for (let i = k + 1; i < m; i++) {\n              a.set(i, j, a.get(i, j) + t * work[i]);\n            }\n          }\n        }\n        if (wantv) {\n          for (let i = k + 1; i < n; i++) {\n            V.set(i, k, e[i]);\n          }\n        }\n      }\n    }\n\n    let p = Math.min(n, m + 1);\n    if (nct < n) {\n      s[nct] = a.get(nct, nct);\n    }\n    if (m < p) {\n      s[p - 1] = 0;\n    }\n    if (nrt + 1 < p) {\n      e[nrt] = a.get(nrt, p - 1);\n    }\n    e[p - 1] = 0;\n\n    if (wantu) {\n      for (let j = nct; j < nu; j++) {\n        for (let i = 0; i < m; i++) {\n          U.set(i, j, 0);\n        }\n        U.set(j, j, 1);\n      }\n      for (let k = nct - 1; k >= 0; k--) {\n        if (s[k] !== 0) {\n          for (let j = k + 1; j < nu; j++) {\n            let t = 0;\n            for (let i = k; i < m; i++) {\n              t += U.get(i, k) * U.get(i, j);\n            }\n            t = -t / U.get(k, k);\n            for (let i = k; i < m; i++) {\n              U.set(i, j, U.get(i, j) + t * U.get(i, k));\n            }\n          }\n          for (let i = k; i < m; i++) {\n            U.set(i, k, -U.get(i, k));\n          }\n          U.set(k, k, 1 + U.get(k, k));\n          for (let i = 0; i < k - 1; i++) {\n            U.set(i, k, 0);\n          }\n        } else {\n          for (let i = 0; i < m; i++) {\n            U.set(i, k, 0);\n          }\n          U.set(k, k, 1);\n        }\n      }\n    }\n\n    if (wantv) {\n      for (let k = n - 1; k >= 0; k--) {\n        if (k < nrt && e[k] !== 0) {\n          for (let j = k + 1; j < n; j++) {\n            let t = 0;\n            for (let i = k + 1; i < n; i++) {\n              t += V.get(i, k) * V.get(i, j);\n            }\n            t = -t / V.get(k + 1, k);\n            for (let i = k + 1; i < n; i++) {\n              V.set(i, j, V.get(i, j) + t * V.get(i, k));\n            }\n          }\n        }\n        for (let i = 0; i < n; i++) {\n          V.set(i, k, 0);\n        }\n        V.set(k, k, 1);\n      }\n    }\n\n    var pp = p - 1;\n    var iter = 0;\n    var eps = Number.EPSILON;\n    while (p > 0) {\n      let k, kase;\n      for (k = p - 2; k >= -1; k--) {\n        if (k === -1) {\n          break;\n        }\n        const alpha =\n          Number.MIN_VALUE + eps * Math.abs(s[k] + Math.abs(s[k + 1]));\n        if (Math.abs(e[k]) <= alpha || Number.isNaN(e[k])) {\n          e[k] = 0;\n          break;\n        }\n      }\n      if (k === p - 2) {\n        kase = 4;\n      } else {\n        let ks;\n        for (ks = p - 1; ks >= k; ks--) {\n          if (ks === k) {\n            break;\n          }\n          let t =\n            (ks !== p ? Math.abs(e[ks]) : 0) +\n            (ks !== k + 1 ? Math.abs(e[ks - 1]) : 0);\n          if (Math.abs(s[ks]) <= eps * t) {\n            s[ks] = 0;\n            break;\n          }\n        }\n        if (ks === k) {\n          kase = 3;\n        } else if (ks === p - 1) {\n          kase = 1;\n        } else {\n          kase = 2;\n          k = ks;\n        }\n      }\n\n      k++;\n\n      switch (kase) {\n        case 1: {\n          let f = e[p - 2];\n          e[p - 2] = 0;\n          for (let j = p - 2; j >= k; j--) {\n            let t = hypotenuse(s[j], f);\n            let cs = s[j] / t;\n            let sn = f / t;\n            s[j] = t;\n            if (j !== k) {\n              f = -sn * e[j - 1];\n              e[j - 1] = cs * e[j - 1];\n            }\n            if (wantv) {\n              for (let i = 0; i < n; i++) {\n                t = cs * V.get(i, j) + sn * V.get(i, p - 1);\n                V.set(i, p - 1, -sn * V.get(i, j) + cs * V.get(i, p - 1));\n                V.set(i, j, t);\n              }\n            }\n          }\n          break;\n        }\n        case 2: {\n          let f = e[k - 1];\n          e[k - 1] = 0;\n          for (let j = k; j < p; j++) {\n            let t = hypotenuse(s[j], f);\n            let cs = s[j] / t;\n            let sn = f / t;\n            s[j] = t;\n            f = -sn * e[j];\n            e[j] = cs * e[j];\n            if (wantu) {\n              for (let i = 0; i < m; i++) {\n                t = cs * U.get(i, j) + sn * U.get(i, k - 1);\n                U.set(i, k - 1, -sn * U.get(i, j) + cs * U.get(i, k - 1));\n                U.set(i, j, t);\n              }\n            }\n          }\n          break;\n        }\n        case 3: {\n          const scale = Math.max(\n            Math.abs(s[p - 1]),\n            Math.abs(s[p - 2]),\n            Math.abs(e[p - 2]),\n            Math.abs(s[k]),\n            Math.abs(e[k])\n          );\n          const sp = s[p - 1] / scale;\n          const spm1 = s[p - 2] / scale;\n          const epm1 = e[p - 2] / scale;\n          const sk = s[k] / scale;\n          const ek = e[k] / scale;\n          const b = ((spm1 + sp) * (spm1 - sp) + epm1 * epm1) / 2;\n          const c = sp * epm1 * (sp * epm1);\n          let shift = 0;\n          if (b !== 0 || c !== 0) {\n            if (b < 0) {\n              shift = 0 - Math.sqrt(b * b + c);\n            } else {\n              shift = Math.sqrt(b * b + c);\n            }\n            shift = c / (b + shift);\n          }\n          let f = (sk + sp) * (sk - sp) + shift;\n          let g = sk * ek;\n          for (let j = k; j < p - 1; j++) {\n            let t = hypotenuse(f, g);\n            if (t === 0) t = Number.MIN_VALUE;\n            let cs = f / t;\n            let sn = g / t;\n            if (j !== k) {\n              e[j - 1] = t;\n            }\n            f = cs * s[j] + sn * e[j];\n            e[j] = cs * e[j] - sn * s[j];\n            g = sn * s[j + 1];\n            s[j + 1] = cs * s[j + 1];\n            if (wantv) {\n              for (let i = 0; i < n; i++) {\n                t = cs * V.get(i, j) + sn * V.get(i, j + 1);\n                V.set(i, j + 1, -sn * V.get(i, j) + cs * V.get(i, j + 1));\n                V.set(i, j, t);\n              }\n            }\n            t = hypotenuse(f, g);\n            if (t === 0) t = Number.MIN_VALUE;\n            cs = f / t;\n            sn = g / t;\n            s[j] = t;\n            f = cs * e[j] + sn * s[j + 1];\n            s[j + 1] = -sn * e[j] + cs * s[j + 1];\n            g = sn * e[j + 1];\n            e[j + 1] = cs * e[j + 1];\n            if (wantu && j < m - 1) {\n              for (let i = 0; i < m; i++) {\n                t = cs * U.get(i, j) + sn * U.get(i, j + 1);\n                U.set(i, j + 1, -sn * U.get(i, j) + cs * U.get(i, j + 1));\n                U.set(i, j, t);\n              }\n            }\n          }\n          e[p - 2] = f;\n          iter = iter + 1;\n          break;\n        }\n        case 4: {\n          if (s[k] <= 0) {\n            s[k] = s[k] < 0 ? -s[k] : 0;\n            if (wantv) {\n              for (let i = 0; i <= pp; i++) {\n                V.set(i, k, -V.get(i, k));\n              }\n            }\n          }\n          while (k < pp) {\n            if (s[k] >= s[k + 1]) {\n              break;\n            }\n            let t = s[k];\n            s[k] = s[k + 1];\n            s[k + 1] = t;\n            if (wantv && k < n - 1) {\n              for (let i = 0; i < n; i++) {\n                t = V.get(i, k + 1);\n                V.set(i, k + 1, V.get(i, k));\n                V.set(i, k, t);\n              }\n            }\n            if (wantu && k < m - 1) {\n              for (let i = 0; i < m; i++) {\n                t = U.get(i, k + 1);\n                U.set(i, k + 1, U.get(i, k));\n                U.set(i, k, t);\n              }\n            }\n            k++;\n          }\n          iter = 0;\n          p--;\n          break;\n        }\n        // no default\n      }\n    }\n\n    if (swapped) {\n      var tmp = V;\n      V = U;\n      U = tmp;\n    }\n\n    this.m = m;\n    this.n = n;\n    this.s = s;\n    this.U = U;\n    this.V = V;\n  }\n\n  solve(value) {\n    var Y = value;\n    var e = this.threshold;\n    var scols = this.s.length;\n    var Ls = Matrix.zeros(scols, scols);\n\n    for (let i = 0; i < scols; i++) {\n      if (Math.abs(this.s[i]) <= e) {\n        Ls.set(i, i, 0);\n      } else {\n        Ls.set(i, i, 1 / this.s[i]);\n      }\n    }\n\n    var U = this.U;\n    var V = this.rightSingularVectors;\n\n    var VL = V.mmul(Ls);\n    var vrows = V.rows;\n    var urows = U.rows;\n    var VLU = Matrix.zeros(vrows, urows);\n\n    for (let i = 0; i < vrows; i++) {\n      for (let j = 0; j < urows; j++) {\n        let sum = 0;\n        for (let k = 0; k < scols; k++) {\n          sum += VL.get(i, k) * U.get(j, k);\n        }\n        VLU.set(i, j, sum);\n      }\n    }\n\n    return VLU.mmul(Y);\n  }\n\n  solveForDiagonal(value) {\n    return this.solve(Matrix.diag(value));\n  }\n\n  inverse() {\n    var V = this.V;\n    var e = this.threshold;\n    var vrows = V.rows;\n    var vcols = V.columns;\n    var X = new Matrix(vrows, this.s.length);\n\n    for (let i = 0; i < vrows; i++) {\n      for (let j = 0; j < vcols; j++) {\n        if (Math.abs(this.s[j]) > e) {\n          X.set(i, j, V.get(i, j) / this.s[j]);\n        }\n      }\n    }\n\n    var U = this.U;\n\n    var urows = U.rows;\n    var ucols = U.columns;\n    var Y = new Matrix(vrows, urows);\n\n    for (let i = 0; i < vrows; i++) {\n      for (let j = 0; j < urows; j++) {\n        let sum = 0;\n        for (let k = 0; k < ucols; k++) {\n          sum += X.get(i, k) * U.get(j, k);\n        }\n        Y.set(i, j, sum);\n      }\n    }\n\n    return Y;\n  }\n\n  get condition() {\n    return this.s[0] / this.s[Math.min(this.m, this.n) - 1];\n  }\n\n  get norm2() {\n    return this.s[0];\n  }\n\n  get rank() {\n    var tol = Math.max(this.m, this.n) * this.s[0] * Number.EPSILON;\n    var r = 0;\n    var s = this.s;\n    for (var i = 0, ii = s.length; i < ii; i++) {\n      if (s[i] > tol) {\n        r++;\n      }\n    }\n    return r;\n  }\n\n  get diagonal() {\n    return Array.from(this.s);\n  }\n\n  get threshold() {\n    return (Number.EPSILON / 2) * Math.max(this.m, this.n) * this.s[0];\n  }\n\n  get leftSingularVectors() {\n    return this.U;\n  }\n\n  get rightSingularVectors() {\n    return this.V;\n  }\n\n  get diagonalMatrix() {\n    return Matrix.diag(this.s);\n  }\n}\n","import LuDecomposition from './dc/lu';\nimport QrDecomposition from './dc/qr';\nimport SingularValueDecomposition from './dc/svd';\nimport Matrix from './matrix';\nimport WrapperMatrix2D from './wrap/WrapperMatrix2D';\n\nexport function inverse(matrix, useSVD = false) {\n  matrix = WrapperMatrix2D.checkMatrix(matrix);\n  if (useSVD) {\n    return new SingularValueDecomposition(matrix).inverse();\n  } else {\n    return solve(matrix, Matrix.eye(matrix.rows));\n  }\n}\n\nexport function solve(leftHandSide, rightHandSide, useSVD = false) {\n  leftHandSide = WrapperMatrix2D.checkMatrix(leftHandSide);\n  rightHandSide = WrapperMatrix2D.checkMatrix(rightHandSide);\n  if (useSVD) {\n    return new SingularValueDecomposition(leftHandSide).solve(rightHandSide);\n  } else {\n    return leftHandSide.isSquare()\n      ? new LuDecomposition(leftHandSide).solve(rightHandSide)\n      : new QrDecomposition(leftHandSide).solve(rightHandSide);\n  }\n}\n","import Matrix from './matrix';\nimport LuDecomposition from './dc/lu';\nimport MatrixSelectionView from './views/selection';\n\nexport function determinant(matrix) {\n  matrix = Matrix.checkMatrix(matrix);\n  if (matrix.isSquare()) {\n    var a, b, c, d;\n    if (matrix.columns === 2) {\n      // 2 x 2 matrix\n      a = matrix.get(0, 0);\n      b = matrix.get(0, 1);\n      c = matrix.get(1, 0);\n      d = matrix.get(1, 1);\n\n      return a * d - b * c;\n    } else if (matrix.columns === 3) {\n      // 3 x 3 matrix\n      var subMatrix0, subMatrix1, subMatrix2;\n      subMatrix0 = new MatrixSelectionView(matrix, [1, 2], [1, 2]);\n      subMatrix1 = new MatrixSelectionView(matrix, [1, 2], [0, 2]);\n      subMatrix2 = new MatrixSelectionView(matrix, [1, 2], [0, 1]);\n      a = matrix.get(0, 0);\n      b = matrix.get(0, 1);\n      c = matrix.get(0, 2);\n\n      return (\n        a * determinant(subMatrix0) -\n        b * determinant(subMatrix1) +\n        c * determinant(subMatrix2)\n      );\n    } else {\n      // general purpose determinant using the LU decomposition\n      return new LuDecomposition(matrix).determinant;\n    }\n  } else {\n    throw Error('determinant can only be calculated for a square matrix');\n  }\n}\n","import Matrix from './matrix';\nimport SingularValueDecomposition from './dc/svd';\n\nfunction xrange(n, exception) {\n  var range = [];\n  for (var i = 0; i < n; i++) {\n    if (i !== exception) {\n      range.push(i);\n    }\n  }\n  return range;\n}\n\nfunction dependenciesOneRow(\n  error,\n  matrix,\n  index,\n  thresholdValue = 10e-10,\n  thresholdError = 10e-10\n) {\n  if (error > thresholdError) {\n    return new Array(matrix.rows + 1).fill(0);\n  } else {\n    var returnArray = matrix.addRow(index, [0]);\n    for (var i = 0; i < returnArray.rows; i++) {\n      if (Math.abs(returnArray.get(i, 0)) < thresholdValue) {\n        returnArray.set(i, 0, 0);\n      }\n    }\n    return returnArray.to1DArray();\n  }\n}\n\nexport function linearDependencies(matrix, options = {}) {\n  const { thresholdValue = 10e-10, thresholdError = 10e-10 } = options;\n  matrix = Matrix.checkMatrix(matrix);\n\n  var n = matrix.rows;\n  var results = new Matrix(n, n);\n\n  for (var i = 0; i < n; i++) {\n    var b = Matrix.columnVector(matrix.getRow(i));\n    var Abis = matrix.subMatrixRow(xrange(n, i)).transpose();\n    var svd = new SingularValueDecomposition(Abis);\n    var x = svd.solve(b);\n    var error = Matrix.sub(b, Abis.mmul(x))\n      .abs()\n      .max();\n    results.setRow(\n      i,\n      dependenciesOneRow(error, x, i, thresholdValue, thresholdError)\n    );\n  }\n  return results;\n}\n","import SVD from './dc/svd';\nimport Matrix from './matrix';\n\nexport function pseudoInverse(matrix, threshold = Number.EPSILON) {\n  matrix = Matrix.checkMatrix(matrix);\n  var svdSolution = new SVD(matrix, { autoTranspose: true });\n\n  var U = svdSolution.leftSingularVectors;\n  var V = svdSolution.rightSingularVectors;\n  var s = svdSolution.diagonal;\n\n  for (var i = 0; i < s.length; i++) {\n    if (Math.abs(s[i]) > threshold) {\n      s[i] = 1.0 / s[i];\n    } else {\n      s[i] = 0.0;\n    }\n  }\n\n  return V.mmul(Matrix.diag(s).mmul(U.transpose()));\n}\n","import Matrix from './matrix';\n\nexport function covariance(xMatrix, yMatrix = xMatrix, options = {}) {\n  xMatrix = Matrix.checkMatrix(xMatrix);\n  let yIsSame = false;\n  if (typeof yMatrix === 'object' && !Matrix.isMatrix(yMatrix) && !Array.isArray(yMatrix)) {\n    options = yMatrix;\n    yMatrix = xMatrix;\n    yIsSame = true;\n  } else {\n    yMatrix = Matrix.checkMatrix(yMatrix);\n  }\n  if (xMatrix.rows !== yMatrix.rows) {\n    throw new TypeError('Both matrices must have the same number of rows');\n  }\n  const { center = true } = options;\n  if (center) {\n    xMatrix = xMatrix.center('column');\n    if (!yIsSame) {\n      yMatrix = yMatrix.center('column');\n    }\n  }\n  const covariance = xMatrix.transpose().mmul(yMatrix);\n  for (let i = 0; i < covariance.rows; i++) {\n    for (let j = 0; j < covariance.columns; j++) {\n      covariance.set(i, j, covariance.get(i, j) * (1 / (xMatrix.rows - 1)));\n    }\n  }\n  return covariance;\n}\n","import Matrix from './matrix';\n\nexport function correlation(xMatrix, yMatrix = xMatrix, options = {}) {\n  xMatrix = Matrix.checkMatrix(xMatrix);\n  let yIsSame = false;\n  if (typeof yMatrix === 'object' && !Matrix.isMatrix(yMatrix) && !Array.isArray(yMatrix)) {\n    options = yMatrix;\n    yMatrix = xMatrix;\n    yIsSame = true;\n  } else {\n    yMatrix = Matrix.checkMatrix(yMatrix);\n  }\n  if (xMatrix.rows !== yMatrix.rows) {\n    throw new TypeError('Both matrices must have the same number of rows');\n  }\n\n  const { center = true, scale = true } = options;\n  if (center) {\n    xMatrix.center('column');\n    if (!yIsSame) {\n      yMatrix.center('column');\n    }\n  }\n  if (scale) {\n    xMatrix.scale('column');\n    if (!yIsSame) {\n      yMatrix.scale('column');\n    }\n  }\n\n  const sdx = xMatrix.standardDeviation('column', { unbiased: true });\n  const sdy = yIsSame ? sdx : yMatrix.standardDeviation('column', { unbiased: true });\n\n  const correlation = xMatrix.transpose().mmul(yMatrix);\n  for (let i = 0; i < correlation.rows; i++) {\n    for (let j = 0; j < correlation.columns; j++) {\n      correlation.set(i, j, correlation.get(i, j) * (1 / (sdx[i] * sdy[j])) * (1 / (xMatrix.rows - 1)));\n    }\n  }\n  return correlation;\n}\n","import Matrix from '../matrix';\nimport WrapperMatrix2D from '../wrap/WrapperMatrix2D';\n\nimport { hypotenuse } from './util';\n\nexport default class EigenvalueDecomposition {\n  constructor(matrix, options = {}) {\n    const { assumeSymmetric = false } = options;\n\n    matrix = WrapperMatrix2D.checkMatrix(matrix);\n    if (!matrix.isSquare()) {\n      throw new Error('Matrix is not a square matrix');\n    }\n\n    var n = matrix.columns;\n    var V = new Matrix(n, n);\n    var d = new Float64Array(n);\n    var e = new Float64Array(n);\n    var value = matrix;\n    var i, j;\n\n    var isSymmetric = false;\n    if (assumeSymmetric) {\n      isSymmetric = true;\n    } else {\n      isSymmetric = matrix.isSymmetric();\n    }\n\n    if (isSymmetric) {\n      for (i = 0; i < n; i++) {\n        for (j = 0; j < n; j++) {\n          V.set(i, j, value.get(i, j));\n        }\n      }\n      tred2(n, e, d, V);\n      tql2(n, e, d, V);\n    } else {\n      var H = new Matrix(n, n);\n      var ort = new Float64Array(n);\n      for (j = 0; j < n; j++) {\n        for (i = 0; i < n; i++) {\n          H.set(i, j, value.get(i, j));\n        }\n      }\n      orthes(n, H, ort, V);\n      hqr2(n, e, d, V, H);\n    }\n\n    this.n = n;\n    this.e = e;\n    this.d = d;\n    this.V = V;\n  }\n\n  get realEigenvalues() {\n    return Array.from(this.d);\n  }\n\n  get imaginaryEigenvalues() {\n    return Array.from(this.e);\n  }\n\n  get eigenvectorMatrix() {\n    return this.V;\n  }\n\n  get diagonalMatrix() {\n    var n = this.n;\n    var e = this.e;\n    var d = this.d;\n    var X = new Matrix(n, n);\n    var i, j;\n    for (i = 0; i < n; i++) {\n      for (j = 0; j < n; j++) {\n        X.set(i, j, 0);\n      }\n      X.set(i, i, d[i]);\n      if (e[i] > 0) {\n        X.set(i, i + 1, e[i]);\n      } else if (e[i] < 0) {\n        X.set(i, i - 1, e[i]);\n      }\n    }\n    return X;\n  }\n}\n\nfunction tred2(n, e, d, V) {\n  var f, g, h, i, j, k, hh, scale;\n\n  for (j = 0; j < n; j++) {\n    d[j] = V.get(n - 1, j);\n  }\n\n  for (i = n - 1; i > 0; i--) {\n    scale = 0;\n    h = 0;\n    for (k = 0; k < i; k++) {\n      scale = scale + Math.abs(d[k]);\n    }\n\n    if (scale === 0) {\n      e[i] = d[i - 1];\n      for (j = 0; j < i; j++) {\n        d[j] = V.get(i - 1, j);\n        V.set(i, j, 0);\n        V.set(j, i, 0);\n      }\n    } else {\n      for (k = 0; k < i; k++) {\n        d[k] /= scale;\n        h += d[k] * d[k];\n      }\n\n      f = d[i - 1];\n      g = Math.sqrt(h);\n      if (f > 0) {\n        g = -g;\n      }\n\n      e[i] = scale * g;\n      h = h - f * g;\n      d[i - 1] = f - g;\n      for (j = 0; j < i; j++) {\n        e[j] = 0;\n      }\n\n      for (j = 0; j < i; j++) {\n        f = d[j];\n        V.set(j, i, f);\n        g = e[j] + V.get(j, j) * f;\n        for (k = j + 1; k <= i - 1; k++) {\n          g += V.get(k, j) * d[k];\n          e[k] += V.get(k, j) * f;\n        }\n        e[j] = g;\n      }\n\n      f = 0;\n      for (j = 0; j < i; j++) {\n        e[j] /= h;\n        f += e[j] * d[j];\n      }\n\n      hh = f / (h + h);\n      for (j = 0; j < i; j++) {\n        e[j] -= hh * d[j];\n      }\n\n      for (j = 0; j < i; j++) {\n        f = d[j];\n        g = e[j];\n        for (k = j; k <= i - 1; k++) {\n          V.set(k, j, V.get(k, j) - (f * e[k] + g * d[k]));\n        }\n        d[j] = V.get(i - 1, j);\n        V.set(i, j, 0);\n      }\n    }\n    d[i] = h;\n  }\n\n  for (i = 0; i < n - 1; i++) {\n    V.set(n - 1, i, V.get(i, i));\n    V.set(i, i, 1);\n    h = d[i + 1];\n    if (h !== 0) {\n      for (k = 0; k <= i; k++) {\n        d[k] = V.get(k, i + 1) / h;\n      }\n\n      for (j = 0; j <= i; j++) {\n        g = 0;\n        for (k = 0; k <= i; k++) {\n          g += V.get(k, i + 1) * V.get(k, j);\n        }\n        for (k = 0; k <= i; k++) {\n          V.set(k, j, V.get(k, j) - g * d[k]);\n        }\n      }\n    }\n\n    for (k = 0; k <= i; k++) {\n      V.set(k, i + 1, 0);\n    }\n  }\n\n  for (j = 0; j < n; j++) {\n    d[j] = V.get(n - 1, j);\n    V.set(n - 1, j, 0);\n  }\n\n  V.set(n - 1, n - 1, 1);\n  e[0] = 0;\n}\n\nfunction tql2(n, e, d, V) {\n  var g, h, i, j, k, l, m, p, r, dl1, c, c2, c3, el1, s, s2, iter;\n\n  for (i = 1; i < n; i++) {\n    e[i - 1] = e[i];\n  }\n\n  e[n - 1] = 0;\n\n  var f = 0;\n  var tst1 = 0;\n  var eps = Number.EPSILON;\n\n  for (l = 0; l < n; l++) {\n    tst1 = Math.max(tst1, Math.abs(d[l]) + Math.abs(e[l]));\n    m = l;\n    while (m < n) {\n      if (Math.abs(e[m]) <= eps * tst1) {\n        break;\n      }\n      m++;\n    }\n\n    if (m > l) {\n      iter = 0;\n      do {\n        iter = iter + 1;\n\n        g = d[l];\n        p = (d[l + 1] - g) / (2 * e[l]);\n        r = hypotenuse(p, 1);\n        if (p < 0) {\n          r = -r;\n        }\n\n        d[l] = e[l] / (p + r);\n        d[l + 1] = e[l] * (p + r);\n        dl1 = d[l + 1];\n        h = g - d[l];\n        for (i = l + 2; i < n; i++) {\n          d[i] -= h;\n        }\n\n        f = f + h;\n\n        p = d[m];\n        c = 1;\n        c2 = c;\n        c3 = c;\n        el1 = e[l + 1];\n        s = 0;\n        s2 = 0;\n        for (i = m - 1; i >= l; i--) {\n          c3 = c2;\n          c2 = c;\n          s2 = s;\n          g = c * e[i];\n          h = c * p;\n          r = hypotenuse(p, e[i]);\n          e[i + 1] = s * r;\n          s = e[i] / r;\n          c = p / r;\n          p = c * d[i] - s * g;\n          d[i + 1] = h + s * (c * g + s * d[i]);\n\n          for (k = 0; k < n; k++) {\n            h = V.get(k, i + 1);\n            V.set(k, i + 1, s * V.get(k, i) + c * h);\n            V.set(k, i, c * V.get(k, i) - s * h);\n          }\n        }\n\n        p = (-s * s2 * c3 * el1 * e[l]) / dl1;\n        e[l] = s * p;\n        d[l] = c * p;\n      } while (Math.abs(e[l]) > eps * tst1);\n    }\n    d[l] = d[l] + f;\n    e[l] = 0;\n  }\n\n  for (i = 0; i < n - 1; i++) {\n    k = i;\n    p = d[i];\n    for (j = i + 1; j < n; j++) {\n      if (d[j] < p) {\n        k = j;\n        p = d[j];\n      }\n    }\n\n    if (k !== i) {\n      d[k] = d[i];\n      d[i] = p;\n      for (j = 0; j < n; j++) {\n        p = V.get(j, i);\n        V.set(j, i, V.get(j, k));\n        V.set(j, k, p);\n      }\n    }\n  }\n}\n\nfunction orthes(n, H, ort, V) {\n  var low = 0;\n  var high = n - 1;\n  var f, g, h, i, j, m;\n  var scale;\n\n  for (m = low + 1; m <= high - 1; m++) {\n    scale = 0;\n    for (i = m; i <= high; i++) {\n      scale = scale + Math.abs(H.get(i, m - 1));\n    }\n\n    if (scale !== 0) {\n      h = 0;\n      for (i = high; i >= m; i--) {\n        ort[i] = H.get(i, m - 1) / scale;\n        h += ort[i] * ort[i];\n      }\n\n      g = Math.sqrt(h);\n      if (ort[m] > 0) {\n        g = -g;\n      }\n\n      h = h - ort[m] * g;\n      ort[m] = ort[m] - g;\n\n      for (j = m; j < n; j++) {\n        f = 0;\n        for (i = high; i >= m; i--) {\n          f += ort[i] * H.get(i, j);\n        }\n\n        f = f / h;\n        for (i = m; i <= high; i++) {\n          H.set(i, j, H.get(i, j) - f * ort[i]);\n        }\n      }\n\n      for (i = 0; i <= high; i++) {\n        f = 0;\n        for (j = high; j >= m; j--) {\n          f += ort[j] * H.get(i, j);\n        }\n\n        f = f / h;\n        for (j = m; j <= high; j++) {\n          H.set(i, j, H.get(i, j) - f * ort[j]);\n        }\n      }\n\n      ort[m] = scale * ort[m];\n      H.set(m, m - 1, scale * g);\n    }\n  }\n\n  for (i = 0; i < n; i++) {\n    for (j = 0; j < n; j++) {\n      V.set(i, j, i === j ? 1 : 0);\n    }\n  }\n\n  for (m = high - 1; m >= low + 1; m--) {\n    if (H.get(m, m - 1) !== 0) {\n      for (i = m + 1; i <= high; i++) {\n        ort[i] = H.get(i, m - 1);\n      }\n\n      for (j = m; j <= high; j++) {\n        g = 0;\n        for (i = m; i <= high; i++) {\n          g += ort[i] * V.get(i, j);\n        }\n\n        g = g / ort[m] / H.get(m, m - 1);\n        for (i = m; i <= high; i++) {\n          V.set(i, j, V.get(i, j) + g * ort[i]);\n        }\n      }\n    }\n  }\n}\n\nfunction hqr2(nn, e, d, V, H) {\n  var n = nn - 1;\n  var low = 0;\n  var high = nn - 1;\n  var eps = Number.EPSILON;\n  var exshift = 0;\n  var norm = 0;\n  var p = 0;\n  var q = 0;\n  var r = 0;\n  var s = 0;\n  var z = 0;\n  var iter = 0;\n  var i, j, k, l, m, t, w, x, y;\n  var ra, sa, vr, vi;\n  var notlast, cdivres;\n\n  for (i = 0; i < nn; i++) {\n    if (i < low || i > high) {\n      d[i] = H.get(i, i);\n      e[i] = 0;\n    }\n\n    for (j = Math.max(i - 1, 0); j < nn; j++) {\n      norm = norm + Math.abs(H.get(i, j));\n    }\n  }\n\n  while (n >= low) {\n    l = n;\n    while (l > low) {\n      s = Math.abs(H.get(l - 1, l - 1)) + Math.abs(H.get(l, l));\n      if (s === 0) {\n        s = norm;\n      }\n      if (Math.abs(H.get(l, l - 1)) < eps * s) {\n        break;\n      }\n      l--;\n    }\n\n    if (l === n) {\n      H.set(n, n, H.get(n, n) + exshift);\n      d[n] = H.get(n, n);\n      e[n] = 0;\n      n--;\n      iter = 0;\n    } else if (l === n - 1) {\n      w = H.get(n, n - 1) * H.get(n - 1, n);\n      p = (H.get(n - 1, n - 1) - H.get(n, n)) / 2;\n      q = p * p + w;\n      z = Math.sqrt(Math.abs(q));\n      H.set(n, n, H.get(n, n) + exshift);\n      H.set(n - 1, n - 1, H.get(n - 1, n - 1) + exshift);\n      x = H.get(n, n);\n\n      if (q >= 0) {\n        z = p >= 0 ? p + z : p - z;\n        d[n - 1] = x + z;\n        d[n] = d[n - 1];\n        if (z !== 0) {\n          d[n] = x - w / z;\n        }\n        e[n - 1] = 0;\n        e[n] = 0;\n        x = H.get(n, n - 1);\n        s = Math.abs(x) + Math.abs(z);\n        p = x / s;\n        q = z / s;\n        r = Math.sqrt(p * p + q * q);\n        p = p / r;\n        q = q / r;\n\n        for (j = n - 1; j < nn; j++) {\n          z = H.get(n - 1, j);\n          H.set(n - 1, j, q * z + p * H.get(n, j));\n          H.set(n, j, q * H.get(n, j) - p * z);\n        }\n\n        for (i = 0; i <= n; i++) {\n          z = H.get(i, n - 1);\n          H.set(i, n - 1, q * z + p * H.get(i, n));\n          H.set(i, n, q * H.get(i, n) - p * z);\n        }\n\n        for (i = low; i <= high; i++) {\n          z = V.get(i, n - 1);\n          V.set(i, n - 1, q * z + p * V.get(i, n));\n          V.set(i, n, q * V.get(i, n) - p * z);\n        }\n      } else {\n        d[n - 1] = x + p;\n        d[n] = x + p;\n        e[n - 1] = z;\n        e[n] = -z;\n      }\n\n      n = n - 2;\n      iter = 0;\n    } else {\n      x = H.get(n, n);\n      y = 0;\n      w = 0;\n      if (l < n) {\n        y = H.get(n - 1, n - 1);\n        w = H.get(n, n - 1) * H.get(n - 1, n);\n      }\n\n      if (iter === 10) {\n        exshift += x;\n        for (i = low; i <= n; i++) {\n          H.set(i, i, H.get(i, i) - x);\n        }\n        s = Math.abs(H.get(n, n - 1)) + Math.abs(H.get(n - 1, n - 2));\n        x = y = 0.75 * s;\n        w = -0.4375 * s * s;\n      }\n\n      if (iter === 30) {\n        s = (y - x) / 2;\n        s = s * s + w;\n        if (s > 0) {\n          s = Math.sqrt(s);\n          if (y < x) {\n            s = -s;\n          }\n          s = x - w / ((y - x) / 2 + s);\n          for (i = low; i <= n; i++) {\n            H.set(i, i, H.get(i, i) - s);\n          }\n          exshift += s;\n          x = y = w = 0.964;\n        }\n      }\n\n      iter = iter + 1;\n\n      m = n - 2;\n      while (m >= l) {\n        z = H.get(m, m);\n        r = x - z;\n        s = y - z;\n        p = (r * s - w) / H.get(m + 1, m) + H.get(m, m + 1);\n        q = H.get(m + 1, m + 1) - z - r - s;\n        r = H.get(m + 2, m + 1);\n        s = Math.abs(p) + Math.abs(q) + Math.abs(r);\n        p = p / s;\n        q = q / s;\n        r = r / s;\n        if (m === l) {\n          break;\n        }\n        if (\n          Math.abs(H.get(m, m - 1)) * (Math.abs(q) + Math.abs(r)) <\n          eps *\n            (Math.abs(p) *\n              (Math.abs(H.get(m - 1, m - 1)) +\n                Math.abs(z) +\n                Math.abs(H.get(m + 1, m + 1))))\n        ) {\n          break;\n        }\n        m--;\n      }\n\n      for (i = m + 2; i <= n; i++) {\n        H.set(i, i - 2, 0);\n        if (i > m + 2) {\n          H.set(i, i - 3, 0);\n        }\n      }\n\n      for (k = m; k <= n - 1; k++) {\n        notlast = k !== n - 1;\n        if (k !== m) {\n          p = H.get(k, k - 1);\n          q = H.get(k + 1, k - 1);\n          r = notlast ? H.get(k + 2, k - 1) : 0;\n          x = Math.abs(p) + Math.abs(q) + Math.abs(r);\n          if (x !== 0) {\n            p = p / x;\n            q = q / x;\n            r = r / x;\n          }\n        }\n\n        if (x === 0) {\n          break;\n        }\n\n        s = Math.sqrt(p * p + q * q + r * r);\n        if (p < 0) {\n          s = -s;\n        }\n\n        if (s !== 0) {\n          if (k !== m) {\n            H.set(k, k - 1, -s * x);\n          } else if (l !== m) {\n            H.set(k, k - 1, -H.get(k, k - 1));\n          }\n\n          p = p + s;\n          x = p / s;\n          y = q / s;\n          z = r / s;\n          q = q / p;\n          r = r / p;\n\n          for (j = k; j < nn; j++) {\n            p = H.get(k, j) + q * H.get(k + 1, j);\n            if (notlast) {\n              p = p + r * H.get(k + 2, j);\n              H.set(k + 2, j, H.get(k + 2, j) - p * z);\n            }\n\n            H.set(k, j, H.get(k, j) - p * x);\n            H.set(k + 1, j, H.get(k + 1, j) - p * y);\n          }\n\n          for (i = 0; i <= Math.min(n, k + 3); i++) {\n            p = x * H.get(i, k) + y * H.get(i, k + 1);\n            if (notlast) {\n              p = p + z * H.get(i, k + 2);\n              H.set(i, k + 2, H.get(i, k + 2) - p * r);\n            }\n\n            H.set(i, k, H.get(i, k) - p);\n            H.set(i, k + 1, H.get(i, k + 1) - p * q);\n          }\n\n          for (i = low; i <= high; i++) {\n            p = x * V.get(i, k) + y * V.get(i, k + 1);\n            if (notlast) {\n              p = p + z * V.get(i, k + 2);\n              V.set(i, k + 2, V.get(i, k + 2) - p * r);\n            }\n\n            V.set(i, k, V.get(i, k) - p);\n            V.set(i, k + 1, V.get(i, k + 1) - p * q);\n          }\n        }\n      }\n    }\n  }\n\n  if (norm === 0) {\n    return;\n  }\n\n  for (n = nn - 1; n >= 0; n--) {\n    p = d[n];\n    q = e[n];\n\n    if (q === 0) {\n      l = n;\n      H.set(n, n, 1);\n      for (i = n - 1; i >= 0; i--) {\n        w = H.get(i, i) - p;\n        r = 0;\n        for (j = l; j <= n; j++) {\n          r = r + H.get(i, j) * H.get(j, n);\n        }\n\n        if (e[i] < 0) {\n          z = w;\n          s = r;\n        } else {\n          l = i;\n          if (e[i] === 0) {\n            H.set(i, n, w !== 0 ? -r / w : -r / (eps * norm));\n          } else {\n            x = H.get(i, i + 1);\n            y = H.get(i + 1, i);\n            q = (d[i] - p) * (d[i] - p) + e[i] * e[i];\n            t = (x * s - z * r) / q;\n            H.set(i, n, t);\n            H.set(\n              i + 1,\n              n,\n              Math.abs(x) > Math.abs(z) ? (-r - w * t) / x : (-s - y * t) / z\n            );\n          }\n\n          t = Math.abs(H.get(i, n));\n          if (eps * t * t > 1) {\n            for (j = i; j <= n; j++) {\n              H.set(j, n, H.get(j, n) / t);\n            }\n          }\n        }\n      }\n    } else if (q < 0) {\n      l = n - 1;\n\n      if (Math.abs(H.get(n, n - 1)) > Math.abs(H.get(n - 1, n))) {\n        H.set(n - 1, n - 1, q / H.get(n, n - 1));\n        H.set(n - 1, n, -(H.get(n, n) - p) / H.get(n, n - 1));\n      } else {\n        cdivres = cdiv(0, -H.get(n - 1, n), H.get(n - 1, n - 1) - p, q);\n        H.set(n - 1, n - 1, cdivres[0]);\n        H.set(n - 1, n, cdivres[1]);\n      }\n\n      H.set(n, n - 1, 0);\n      H.set(n, n, 1);\n      for (i = n - 2; i >= 0; i--) {\n        ra = 0;\n        sa = 0;\n        for (j = l; j <= n; j++) {\n          ra = ra + H.get(i, j) * H.get(j, n - 1);\n          sa = sa + H.get(i, j) * H.get(j, n);\n        }\n\n        w = H.get(i, i) - p;\n\n        if (e[i] < 0) {\n          z = w;\n          r = ra;\n          s = sa;\n        } else {\n          l = i;\n          if (e[i] === 0) {\n            cdivres = cdiv(-ra, -sa, w, q);\n            H.set(i, n - 1, cdivres[0]);\n            H.set(i, n, cdivres[1]);\n          } else {\n            x = H.get(i, i + 1);\n            y = H.get(i + 1, i);\n            vr = (d[i] - p) * (d[i] - p) + e[i] * e[i] - q * q;\n            vi = (d[i] - p) * 2 * q;\n            if (vr === 0 && vi === 0) {\n              vr =\n                eps *\n                norm *\n                (Math.abs(w) +\n                  Math.abs(q) +\n                  Math.abs(x) +\n                  Math.abs(y) +\n                  Math.abs(z));\n            }\n            cdivres = cdiv(\n              x * r - z * ra + q * sa,\n              x * s - z * sa - q * ra,\n              vr,\n              vi\n            );\n            H.set(i, n - 1, cdivres[0]);\n            H.set(i, n, cdivres[1]);\n            if (Math.abs(x) > Math.abs(z) + Math.abs(q)) {\n              H.set(\n                i + 1,\n                n - 1,\n                (-ra - w * H.get(i, n - 1) + q * H.get(i, n)) / x\n              );\n              H.set(\n                i + 1,\n                n,\n                (-sa - w * H.get(i, n) - q * H.get(i, n - 1)) / x\n              );\n            } else {\n              cdivres = cdiv(\n                -r - y * H.get(i, n - 1),\n                -s - y * H.get(i, n),\n                z,\n                q\n              );\n              H.set(i + 1, n - 1, cdivres[0]);\n              H.set(i + 1, n, cdivres[1]);\n            }\n          }\n\n          t = Math.max(Math.abs(H.get(i, n - 1)), Math.abs(H.get(i, n)));\n          if (eps * t * t > 1) {\n            for (j = i; j <= n; j++) {\n              H.set(j, n - 1, H.get(j, n - 1) / t);\n              H.set(j, n, H.get(j, n) / t);\n            }\n          }\n        }\n      }\n    }\n  }\n\n  for (i = 0; i < nn; i++) {\n    if (i < low || i > high) {\n      for (j = i; j < nn; j++) {\n        V.set(i, j, H.get(i, j));\n      }\n    }\n  }\n\n  for (j = nn - 1; j >= low; j--) {\n    for (i = low; i <= high; i++) {\n      z = 0;\n      for (k = low; k <= Math.min(j, high); k++) {\n        z = z + V.get(i, k) * H.get(k, j);\n      }\n      V.set(i, j, z);\n    }\n  }\n}\n\nfunction cdiv(xr, xi, yr, yi) {\n  var r, d;\n  if (Math.abs(yr) > Math.abs(yi)) {\n    r = yi / yr;\n    d = yr + r * yi;\n    return [(xr + r * xi) / d, (xi - r * xr) / d];\n  } else {\n    r = yr / yi;\n    d = yi + r * yr;\n    return [(r * xr + xi) / d, (r * xi - xr) / d];\n  }\n}\n","import Matrix from '../matrix';\nimport WrapperMatrix2D from '../wrap/WrapperMatrix2D';\n\nexport default class CholeskyDecomposition {\n  constructor(value) {\n    value = WrapperMatrix2D.checkMatrix(value);\n    if (!value.isSymmetric()) {\n      throw new Error('Matrix is not symmetric');\n    }\n\n    var a = value;\n    var dimension = a.rows;\n    var l = new Matrix(dimension, dimension);\n    var positiveDefinite = true;\n    var i, j, k;\n\n    for (j = 0; j < dimension; j++) {\n      var d = 0;\n      for (k = 0; k < j; k++) {\n        var s = 0;\n        for (i = 0; i < k; i++) {\n          s += l.get(k, i) * l.get(j, i);\n        }\n        s = (a.get(j, k) - s) / l.get(k, k);\n        l.set(j, k, s);\n        d = d + s * s;\n      }\n\n      d = a.get(j, j) - d;\n\n      positiveDefinite &= d > 0;\n      l.set(j, j, Math.sqrt(Math.max(d, 0)));\n      for (k = j + 1; k < dimension; k++) {\n        l.set(j, k, 0);\n      }\n    }\n\n    if (!positiveDefinite) {\n      throw new Error('Matrix is not positive definite');\n    }\n\n    this.L = l;\n  }\n\n  solve(value) {\n    value = WrapperMatrix2D.checkMatrix(value);\n\n    var l = this.L;\n    var dimension = l.rows;\n\n    if (value.rows !== dimension) {\n      throw new Error('Matrix dimensions do not match');\n    }\n\n    var count = value.columns;\n    var B = value.clone();\n    var i, j, k;\n\n    for (k = 0; k < dimension; k++) {\n      for (j = 0; j < count; j++) {\n        for (i = 0; i < k; i++) {\n          B.set(k, j, B.get(k, j) - B.get(i, j) * l.get(k, i));\n        }\n        B.set(k, j, B.get(k, j) / l.get(k, k));\n      }\n    }\n\n    for (k = dimension - 1; k >= 0; k--) {\n      for (j = 0; j < count; j++) {\n        for (i = k + 1; i < dimension; i++) {\n          B.set(k, j, B.get(k, j) - B.get(i, j) * l.get(i, k));\n        }\n        B.set(k, j, B.get(k, j) / l.get(k, k));\n      }\n    }\n\n    return B;\n  }\n\n  get lowerTriangularMatrix() {\n    return this.L;\n  }\n}\n","import isArray from 'is-any-array';\n\n/**\n * Computes the mean of the given values\n * @param {Array<number>} input\n * @return {number}\n */\n\nfunction mean(input) {\n  if (!isArray(input)) {\n    throw new TypeError('input must be an array');\n  }\n\n  if (input.length === 0) {\n    throw new TypeError('input must not be empty');\n  }\n\n  var sum = 0;\n\n  for (var i = 0; i < input.length; i++) {\n    sum += input[i];\n  }\n\n  return sum / input.length;\n}\n\nexport default mean;\n","import Matrix from 'ml-matrix';\nimport meanArray from 'ml-array-mean';\n\n/**\n * @private\n * return an array of probabilities of each class\n * @param {Array} array - contains the classes\n * @param {number} numberOfClasses\n * @return {Matrix} - rowVector of probabilities.\n */\nexport function toDiscreteDistribution(array, numberOfClasses) {\n  var counts = new Array(numberOfClasses).fill(0);\n  for (var i = 0; i < array.length; ++i) {\n    counts[array[i]] += 1 / array.length;\n  }\n\n  return Matrix.rowVector(counts);\n}\n\n/**\n * @private\n * Retrieves the impurity of array of predictions\n * @param {Array} array - predictions.\n * @return {number} Gini impurity\n */\nexport function giniImpurity(array) {\n  if (array.length === 0) {\n    return 0;\n  }\n\n  var probabilities = toDiscreteDistribution(\n    array,\n    getNumberOfClasses(array)\n  ).getRow(0);\n\n  var sum = 0.0;\n  for (var i = 0; i < probabilities.length; ++i) {\n    sum += probabilities[i] * probabilities[i];\n  }\n\n  return 1 - sum;\n}\n\n/**\n * @private\n * Return the number of classes given the array of predictions.\n * @param {Array} array - predictions.\n * @return {number} Number of classes.\n */\nexport function getNumberOfClasses(array) {\n  return array.filter(function (val, i, arr) {\n    return arr.indexOf(val) === i;\n  }).length;\n}\n\n/**\n * @private\n * Calculates the Gini Gain of an array of predictions and those predictions splitted by a feature.\n * @para {Array} array - Predictions\n * @param {object} splitted - Object with elements \"greater\" and \"lesser\" that contains an array of predictions splitted.\n * @return {number} - Gini Gain.\n */\n\nexport function giniGain(array, splitted) {\n  var splitsImpurity = 0.0;\n  var splits = ['greater', 'lesser'];\n\n  for (var i = 0; i < splits.length; ++i) {\n    var currentSplit = splitted[splits[i]];\n    splitsImpurity +=\n      (giniImpurity(currentSplit) * currentSplit.length) / array.length;\n  }\n\n  return giniImpurity(array) - splitsImpurity;\n}\n\n/**\n * @private\n * Calculates the squared error of a predictions values.\n * @param {Array} array - predictions values\n * @return {number} squared error.\n */\nexport function squaredError(array) {\n  var l = array.length;\n\n  var m = meanArray(array);\n  var squaredError = 0.0;\n\n  for (var i = 0; i < l; ++i) {\n    var currentElement = array[i];\n    squaredError += (currentElement - m) * (currentElement - m);\n  }\n\n  return squaredError;\n}\n\n/**\n * @private\n * Calculates the sum of squared error of the two arrays that contains the splitted values.\n * @param {Array} array - this argument is no necessary but is used to fit with the main interface.\n * @param {object} splitted - Object with elements \"greater\" and \"lesser\" that contains an array of predictions splitted.\n * @return {number} - sum of squared errors.\n */\nexport function regressionError(array, splitted) {\n  var error = 0.0;\n  var splits = ['greater', 'lesser'];\n\n  for (var i = 0; i < splits.length; ++i) {\n    var currentSplit = splitted[splits[i]];\n    error += squaredError(currentSplit);\n  }\n  return error;\n}\n\n/**\n * @private\n * Split the training set and values from a given column of the training set if is less than a value\n * @param {Matrix} X - Training set.\n * @param {Array} y - Training values.\n * @param {number} column - Column to split.\n * @param {number} value - value to split the Training set and values.\n * @return {object} - Object that contains the splitted values.\n */\nexport function matrixSplitter(X, y, column, value) {\n  var lesserX = [];\n  var greaterX = [];\n  var lesserY = [];\n  var greaterY = [];\n\n  for (var i = 0; i < X.rows; ++i) {\n    if (X.get(i, column) < value) {\n      lesserX.push(X.getRow(i));\n      lesserY.push(y[i]);\n    } else {\n      greaterX.push(X.getRow(i));\n      greaterY.push(y[i]);\n    }\n  }\n\n  return {\n    greaterX: greaterX,\n    greaterY: greaterY,\n    lesserX: lesserX,\n    lesserY: lesserY\n  };\n}\n\n/**\n * @private\n * Calculates the mean between two values\n * @param {number} a\n * @param {number} b\n * @return {number}\n */\nexport function mean(a, b) {\n  return (a + b) / 2;\n}\n\n/**\n * @private\n * Returns a list of tuples that contains the i-th element of each array.\n * @param {Array} a\n * @param {Array} b\n * @return {Array} list of tuples.\n */\nexport function zip(a, b) {\n  if (a.length !== b.length) {\n    throw new TypeError(\n      `Error on zip: the size of a: ${a.length} is different from b: ${\n        b.length\n      }`\n    );\n  }\n\n  var ret = new Array(a.length);\n  for (var i = 0; i < a.length; ++i) {\n    ret[i] = [a[i], b[i]];\n  }\n\n  return ret;\n}\n","import Matrix from 'ml-matrix';\nimport mean from 'ml-array-mean';\n\nimport * as Utils from './utils';\n\nconst gainFunctions = {\n  gini: Utils.giniGain,\n  regression: Utils.regressionError\n};\n\nconst splitFunctions = {\n  mean: Utils.mean\n};\n\nexport default class TreeNode {\n  /**\n   * @private\n   * Constructor for a tree node given the options received on the main classes (DecisionTreeClassifier, DecisionTreeRegression)\n   * @param {object|TreeNode} options for loading\n   * @constructor\n   */\n  constructor(options) {\n    // options parameters\n    this.kind = options.kind;\n    this.gainFunction = options.gainFunction;\n    this.splitFunction = options.splitFunction;\n    this.minNumSamples = options.minNumSamples;\n    this.maxDepth = options.maxDepth;\n  }\n\n  /**\n   * @private\n   * Function that retrieve the best feature to make the split.\n   * @param {Matrix} XTranspose - Training set transposed\n   * @param {Array} y - labels or values (depending of the decision tree)\n   * @return {object} - return tree values, the best gain, column and the split value.\n   */\n  bestSplit(XTranspose, y) {\n    // Depending in the node tree class, we set the variables to check information gain (to classify)\n    // or error (for regression)\n\n    var bestGain = this.kind === 'classifier' ? -Infinity : Infinity;\n    var check = this.kind === 'classifier' ? (a, b) => a > b : (a, b) => a < b;\n\n    var maxColumn;\n    var maxValue;\n\n    for (var i = 0; i < XTranspose.rows; ++i) {\n      var currentFeature = XTranspose.getRow(i);\n      var splitValues = this.featureSplit(currentFeature, y);\n      for (var j = 0; j < splitValues.length; ++j) {\n        var currentSplitVal = splitValues[j];\n        var splitted = this.split(currentFeature, y, currentSplitVal);\n\n        var gain = gainFunctions[this.gainFunction](y, splitted);\n        if (check(gain, bestGain)) {\n          maxColumn = i;\n          maxValue = currentSplitVal;\n          bestGain = gain;\n        }\n      }\n    }\n\n    return {\n      maxGain: bestGain,\n      maxColumn: maxColumn,\n      maxValue: maxValue\n    };\n  }\n\n  /**\n   * @private\n   * Makes the split of the training labels or values from the training set feature given a split value.\n   * @param {Array} x - Training set feature\n   * @param {Array} y - Training set value or label\n   * @param {number} splitValue\n   * @return {object}\n   */\n  split(x, y, splitValue) {\n    var lesser = [];\n    var greater = [];\n\n    for (var i = 0; i < x.length; ++i) {\n      if (x[i] < splitValue) {\n        lesser.push(y[i]);\n      } else {\n        greater.push(y[i]);\n      }\n    }\n\n    return {\n      greater: greater,\n      lesser: lesser\n    };\n  }\n\n  /**\n   * @private\n   * Calculates the possible points to split over the tree given a training set feature and corresponding labels or values.\n   * @param {Array} x - Training set feature\n   * @param {Array} y - Training set value or label\n   * @return {Array} possible split values.\n   */\n  featureSplit(x, y) {\n    var splitValues = [];\n    var arr = Utils.zip(x, y);\n    arr.sort(function (a, b) {\n      return a[0] - b[0];\n    });\n\n    for (var i = 1; i < arr.length; ++i) {\n      if (arr[i - 1][1] !== arr[i][1]) {\n        splitValues.push(\n          splitFunctions[this.splitFunction](arr[i - 1][0], arr[i][0])\n        );\n      }\n    }\n\n    return splitValues;\n  }\n\n  /**\n   * @private\n   * Calculate the predictions of a leaf tree node given the training labels or values\n   * @param {Array} y\n   */\n  calculatePrediction(y) {\n    if (this.kind === 'classifier') {\n      this.distribution = Utils.toDiscreteDistribution(\n        y,\n        Utils.getNumberOfClasses(y)\n      );\n      if (this.distribution.columns === 0) {\n        throw new TypeError('Error on calculate the prediction');\n      }\n    } else {\n      this.distribution = mean(y);\n    }\n  }\n\n  /**\n   * @private\n   * Train a node given the training set and labels, because it trains recursively, it also receive\n   * the current depth of the node, parent gain to avoid infinite recursion and boolean value to check if\n   * the training set is transposed.\n   * @param {Matrix} X - Training set (could be transposed or not given transposed).\n   * @param {Array} y - Training labels or values.\n   * @param {number} currentDepth - Current depth of the node.\n   * @param {number} parentGain - parent node gain or error.\n   */\n  train(X, y, currentDepth, parentGain) {\n    if (X.rows <= this.minNumSamples) {\n      this.calculatePrediction(y);\n      return;\n    }\n    if (parentGain === undefined) parentGain = 0.0;\n\n    var XTranspose = X.transpose();\n    var split = this.bestSplit(XTranspose, y);\n\n    this.splitValue = split.maxValue;\n    this.splitColumn = split.maxColumn;\n    this.gain = split.maxGain;\n\n    var splittedMatrix = Utils.matrixSplitter(\n      X,\n      y,\n      this.splitColumn,\n      this.splitValue\n    );\n\n    if (\n      currentDepth < this.maxDepth &&\n      (this.gain > 0.01 && this.gain !== parentGain) &&\n      (splittedMatrix.lesserX.length > 0 && splittedMatrix.greaterX.length > 0)\n    ) {\n      this.left = new TreeNode(this);\n      this.right = new TreeNode(this);\n\n      var lesserX = new Matrix(splittedMatrix.lesserX);\n      var greaterX = new Matrix(splittedMatrix.greaterX);\n\n      this.left.train(\n        lesserX,\n        splittedMatrix.lesserY,\n        currentDepth + 1,\n        this.gain\n      );\n      this.right.train(\n        greaterX,\n        splittedMatrix.greaterY,\n        currentDepth + 1,\n        this.gain\n      );\n    } else {\n      this.calculatePrediction(y);\n    }\n  }\n\n  /**\n   * @private\n   * Calculates the prediction of a given element.\n   * @param {Array} row\n   * @return {number|Array} prediction\n   *          * if a node is a classifier returns an array of probabilities of each class.\n   *          * if a node is for regression returns a number with the prediction.\n   */\n  classify(row) {\n    if (this.right && this.left) {\n      if (row[this.splitColumn] < this.splitValue) {\n        return this.left.classify(row);\n      } else {\n        return this.right.classify(row);\n      }\n    }\n\n    return this.distribution;\n  }\n\n  /**\n   * @private\n   * Set the parameter of the current node and their children.\n   * @param {object} node - parameters of the current node and the children.\n   */\n  setNodeParameters(node) {\n    if (node.distribution !== undefined) {\n      this.distribution =\n        node.distribution.constructor === Array\n          ? new Matrix(node.distribution)\n          : node.distribution;\n    } else {\n      this.distribution = undefined;\n      this.splitValue = node.splitValue;\n      this.splitColumn = node.splitColumn;\n      this.gain = node.gain;\n\n      this.left = new TreeNode(this);\n      this.right = new TreeNode(this);\n\n      if (node.left !== {}) {\n        this.left.setNodeParameters(node.left);\n      }\n      if (node.right !== {}) {\n        this.right.setNodeParameters(node.right);\n      }\n    }\n  }\n}\n","import Matrix from 'ml-matrix';\n\nimport Tree from './TreeNode';\n\nconst defaultOptions = {\n  gainFunction: 'gini',\n  splitFunction: 'mean',\n  minNumSamples: 3,\n  maxDepth: Infinity\n};\n\nexport class DecisionTreeClassifier {\n  /**\n   * Create new Decision Tree Classifier with CART implementation with the given options\n   * @param {object} options\n   * @param {string} [options.gainFunction=\"gini\"] - gain function to get the best split, \"gini\" the only one supported.\n   * @param {string} [options.splitFunction=\"mean\"] - given two integers from a split feature, get the value to split, \"mean\" the only one supported.\n   * @param {number} [options.minNumSamples=3] - minimum number of samples to create a leaf node to decide a class.\n   * @param {number} [options.maxDepth=Infinity] - Max depth of the tree.\n   * @param {object} model - for load purposes.\n   * @constructor\n   */\n  constructor(options, model) {\n    if (options === true) {\n      this.options = model.options;\n      this.root = new Tree(model.options);\n      this.root.setNodeParameters(model.root);\n    } else {\n      this.options = Object.assign({}, defaultOptions, options);\n      this.options.kind = 'classifier';\n    }\n  }\n\n  /**\n   * Train the decision tree with the given training set and labels.\n   * @param {Matrix|MatrixTransposeView|Array} trainingSet\n   * @param {Array} trainingLabels\n   */\n  train(trainingSet, trainingLabels) {\n    this.root = new Tree(this.options);\n    trainingSet = Matrix.checkMatrix(trainingSet);\n    this.root.train(trainingSet, trainingLabels, 0, null);\n  }\n\n  /**\n   * Predicts the output given the matrix to predict.\n   * @param {Matrix|MatrixTransposeView|Array} toPredict\n   * @return {Array} predictions\n   */\n  predict(toPredict) {\n    toPredict = Matrix.checkMatrix(toPredict);\n    var predictions = new Array(toPredict.rows);\n\n    for (var i = 0; i < toPredict.rows; ++i) {\n      predictions[i] = this.root\n        .classify(toPredict.getRow(i))\n        .maxRowIndex(0)[1];\n    }\n\n    return predictions;\n  }\n\n  /**\n   * Export the current model to JSON.\n   * @return {object} - Current model.\n   */\n  toJSON() {\n    return {\n      options: this.options,\n      root: this.root,\n      name: 'DTClassifier'\n    };\n  }\n\n  /**\n   * Load a Decision tree classifier with the given model.\n   * @param {object} model\n   * @return {DecisionTreeClassifier}\n   */\n  static load(model) {\n    if (model.name !== 'DTClassifier') {\n      throw new RangeError(`Invalid model: ${model.name}`);\n    }\n\n    return new DecisionTreeClassifier(true, model);\n  }\n}\n","import Matrix from 'ml-matrix';\n\nimport Tree from './TreeNode';\n\nconst defaultOptions = {\n  gainFunction: 'regression',\n  splitFunction: 'mean',\n  minNumSamples: 3,\n  maxDepth: Infinity\n};\n\nexport class DecisionTreeRegression {\n  /**\n   * Create new Decision Tree Regression with CART implementation with the given options.\n   * @param {object} options\n   * @param {string} [options.gainFunction=\"regression\"] - gain function to get the best split, \"regression\" the only one supported.\n   * @param {string} [options.splitFunction=\"mean\"] - given two integers from a split feature, get the value to split, \"mean\" the only one supported.\n   * @param {number} [options.minNumSamples=3] - minimum number of samples to create a leaf node to decide a class.\n   * @param {number} [options.maxDepth=Infinity] - Max depth of the tree.\n   * @param {object} model - for load purposes.\n   */\n  constructor(options, model) {\n    if (options === true) {\n      this.options = model.options;\n      this.root = new Tree(model.options);\n      this.root.setNodeParameters(model.root);\n    } else {\n      this.options = Object.assign({}, defaultOptions, options);\n      this.options.kind = 'regression';\n    }\n  }\n\n  /**\n   * Train the decision tree with the given training set and values.\n   * @param {Matrix|MatrixTransposeView|Array} trainingSet\n   * @param {Array} trainingValues\n   */\n  train(trainingSet, trainingValues) {\n    this.root = new Tree(this.options);\n\n    if (typeof trainingSet[0] !== 'undefined' && trainingSet[0].length === undefined) {\n      trainingSet = Matrix.columnVector(trainingSet);\n    } else {\n      trainingSet = Matrix.checkMatrix(trainingSet);\n    }\n    this.root.train(trainingSet, trainingValues, 0);\n  }\n\n  /**\n   * Predicts the values given the matrix to predict.\n   * @param {Matrix|MatrixTransposeView|Array} toPredict\n   * @return {Array} predictions\n   */\n  predict(toPredict) {\n    if (typeof toPredict[0] !== 'undefined' && toPredict[0].length === undefined) {\n      toPredict = Matrix.columnVector(toPredict);\n    }\n    toPredict = Matrix.checkMatrix(toPredict);\n\n    var predictions = new Array(toPredict.rows);\n    for (var i = 0; i < toPredict.rows; ++i) {\n      predictions[i] = this.root.classify(toPredict.getRow(i));\n    }\n\n    return predictions;\n  }\n\n  /**\n   * Export the current model to JSON.\n   * @return {object} - Current model.\n   */\n  toJSON() {\n    return {\n      options: this.options,\n      root: this.root,\n      name: 'DTRegression'\n    };\n  }\n\n  /**\n   * Load a Decision tree regression with the given model.\n   * @param {object} model\n   * @return {DecisionTreeRegression}\n   */\n  static load(model) {\n    if (model.name !== 'DTRegression') {\n      throw new RangeError(`Invalid model:${model.name}`);\n    }\n\n    return new DecisionTreeRegression(true, model);\n  }\n}\n","const SMALLEST_UNSAFE_INTEGER = 0x20000000000000;\r\nconst LARGEST_SAFE_INTEGER = SMALLEST_UNSAFE_INTEGER - 1;\r\nconst UINT32_MAX = -1 >>> 0;\r\nconst UINT32_SIZE = UINT32_MAX + 1;\r\nconst INT32_SIZE = UINT32_SIZE / 2;\r\nconst INT32_MAX = INT32_SIZE - 1;\r\nconst UINT21_SIZE = 1 << 21;\r\nconst UINT21_MAX = UINT21_SIZE - 1;\n\n/**\r\n * Returns a value within [-0x80000000, 0x7fffffff]\r\n */\r\nfunction int32(engine) {\r\n    return engine.next() | 0;\r\n}\n\nfunction add(distribution, addend) {\r\n    if (addend === 0) {\r\n        return distribution;\r\n    }\r\n    else {\r\n        return engine => distribution(engine) + addend;\r\n    }\r\n}\n\n/**\r\n * Returns a value within [-0x20000000000000, 0x1fffffffffffff]\r\n */\r\nfunction int53(engine) {\r\n    const high = engine.next() | 0;\r\n    const low = engine.next() >>> 0;\r\n    return ((high & UINT21_MAX) * UINT32_SIZE +\r\n        low +\r\n        (high & UINT21_SIZE ? -SMALLEST_UNSAFE_INTEGER : 0));\r\n}\n\n/**\r\n * Returns a value within [-0x20000000000000, 0x20000000000000]\r\n */\r\nfunction int53Full(engine) {\r\n    while (true) {\r\n        const high = engine.next() | 0;\r\n        if (high & 0x400000) {\r\n            if ((high & 0x7fffff) === 0x400000 && (engine.next() | 0) === 0) {\r\n                return SMALLEST_UNSAFE_INTEGER;\r\n            }\r\n        }\r\n        else {\r\n            const low = engine.next() >>> 0;\r\n            return ((high & UINT21_MAX) * UINT32_SIZE +\r\n                low +\r\n                (high & UINT21_SIZE ? -SMALLEST_UNSAFE_INTEGER : 0));\r\n        }\r\n    }\r\n}\n\n/**\r\n * Returns a value within [0, 0xffffffff]\r\n */\r\nfunction uint32(engine) {\r\n    return engine.next() >>> 0;\r\n}\n\n/**\r\n * Returns a value within [0, 0x1fffffffffffff]\r\n */\r\nfunction uint53(engine) {\r\n    const high = engine.next() & UINT21_MAX;\r\n    const low = engine.next() >>> 0;\r\n    return high * UINT32_SIZE + low;\r\n}\n\n/**\r\n * Returns a value within [0, 0x20000000000000]\r\n */\r\nfunction uint53Full(engine) {\r\n    while (true) {\r\n        const high = engine.next() | 0;\r\n        if (high & UINT21_SIZE) {\r\n            if ((high & UINT21_MAX) === 0 && (engine.next() | 0) === 0) {\r\n                return SMALLEST_UNSAFE_INTEGER;\r\n            }\r\n        }\r\n        else {\r\n            const low = engine.next() >>> 0;\r\n            return (high & UINT21_MAX) * UINT32_SIZE + low;\r\n        }\r\n    }\r\n}\n\nfunction isPowerOfTwoMinusOne(value) {\r\n    return ((value + 1) & value) === 0;\r\n}\r\nfunction bitmask(masking) {\r\n    return (engine) => engine.next() & masking;\r\n}\r\nfunction downscaleToLoopCheckedRange(range) {\r\n    const extendedRange = range + 1;\r\n    const maximum = extendedRange * Math.floor(UINT32_SIZE / extendedRange);\r\n    return engine => {\r\n        let value = 0;\r\n        do {\r\n            value = engine.next() >>> 0;\r\n        } while (value >= maximum);\r\n        return value % extendedRange;\r\n    };\r\n}\r\nfunction downscaleToRange(range) {\r\n    if (isPowerOfTwoMinusOne(range)) {\r\n        return bitmask(range);\r\n    }\r\n    else {\r\n        return downscaleToLoopCheckedRange(range);\r\n    }\r\n}\r\nfunction isEvenlyDivisibleByMaxInt32(value) {\r\n    return (value | 0) === 0;\r\n}\r\nfunction upscaleWithHighMasking(masking) {\r\n    return engine => {\r\n        const high = engine.next() & masking;\r\n        const low = engine.next() >>> 0;\r\n        return high * UINT32_SIZE + low;\r\n    };\r\n}\r\nfunction upscaleToLoopCheckedRange(extendedRange) {\r\n    const maximum = extendedRange * Math.floor(SMALLEST_UNSAFE_INTEGER / extendedRange);\r\n    return engine => {\r\n        let ret = 0;\r\n        do {\r\n            const high = engine.next() & UINT21_MAX;\r\n            const low = engine.next() >>> 0;\r\n            ret = high * UINT32_SIZE + low;\r\n        } while (ret >= maximum);\r\n        return ret % extendedRange;\r\n    };\r\n}\r\nfunction upscaleWithinU53(range) {\r\n    const extendedRange = range + 1;\r\n    if (isEvenlyDivisibleByMaxInt32(extendedRange)) {\r\n        const highRange = ((extendedRange / UINT32_SIZE) | 0) - 1;\r\n        if (isPowerOfTwoMinusOne(highRange)) {\r\n            return upscaleWithHighMasking(highRange);\r\n        }\r\n    }\r\n    return upscaleToLoopCheckedRange(extendedRange);\r\n}\r\nfunction upscaleWithinI53AndLoopCheck(min, max) {\r\n    return engine => {\r\n        let ret = 0;\r\n        do {\r\n            const high = engine.next() | 0;\r\n            const low = engine.next() >>> 0;\r\n            ret =\r\n                (high & UINT21_MAX) * UINT32_SIZE +\r\n                    low +\r\n                    (high & UINT21_SIZE ? -SMALLEST_UNSAFE_INTEGER : 0);\r\n        } while (ret < min || ret > max);\r\n        return ret;\r\n    };\r\n}\r\n/**\r\n * Returns a Distribution to return a value within [min, max]\r\n * @param min The minimum integer value, inclusive. No less than -0x20000000000000.\r\n * @param max The maximum integer value, inclusive. No greater than 0x20000000000000.\r\n */\r\nfunction integer(min, max) {\r\n    min = Math.floor(min);\r\n    max = Math.floor(max);\r\n    if (min < -SMALLEST_UNSAFE_INTEGER || !isFinite(min)) {\r\n        throw new RangeError(`Expected min to be at least ${-SMALLEST_UNSAFE_INTEGER}`);\r\n    }\r\n    else if (max > SMALLEST_UNSAFE_INTEGER || !isFinite(max)) {\r\n        throw new RangeError(`Expected max to be at most ${SMALLEST_UNSAFE_INTEGER}`);\r\n    }\r\n    const range = max - min;\r\n    if (range <= 0 || !isFinite(range)) {\r\n        return () => min;\r\n    }\r\n    else if (range === UINT32_MAX) {\r\n        if (min === 0) {\r\n            return uint32;\r\n        }\r\n        else {\r\n            return add(int32, min + INT32_SIZE);\r\n        }\r\n    }\r\n    else if (range < UINT32_MAX) {\r\n        return add(downscaleToRange(range), min);\r\n    }\r\n    else if (range === LARGEST_SAFE_INTEGER) {\r\n        return add(uint53, min);\r\n    }\r\n    else if (range < LARGEST_SAFE_INTEGER) {\r\n        return add(upscaleWithinU53(range), min);\r\n    }\r\n    else if (max - 1 - min === LARGEST_SAFE_INTEGER) {\r\n        return add(uint53Full, min);\r\n    }\r\n    else if (min === -SMALLEST_UNSAFE_INTEGER &&\r\n        max === SMALLEST_UNSAFE_INTEGER) {\r\n        return int53Full;\r\n    }\r\n    else if (min === -SMALLEST_UNSAFE_INTEGER && max === LARGEST_SAFE_INTEGER) {\r\n        return int53;\r\n    }\r\n    else if (min === -LARGEST_SAFE_INTEGER && max === SMALLEST_UNSAFE_INTEGER) {\r\n        return add(int53, 1);\r\n    }\r\n    else if (max === SMALLEST_UNSAFE_INTEGER) {\r\n        return add(upscaleWithinI53AndLoopCheck(min - 1, max - 1), 1);\r\n    }\r\n    else {\r\n        return upscaleWithinI53AndLoopCheck(min, max);\r\n    }\r\n}\n\nfunction isLeastBitTrue(engine) {\r\n    return (engine.next() & 1) === 1;\r\n}\r\nfunction lessThan(distribution, value) {\r\n    return engine => distribution(engine) < value;\r\n}\r\nfunction probability(percentage) {\r\n    if (percentage <= 0) {\r\n        return () => false;\r\n    }\r\n    else if (percentage >= 1) {\r\n        return () => true;\r\n    }\r\n    else {\r\n        const scaled = percentage * UINT32_SIZE;\r\n        if (scaled % 1 === 0) {\r\n            return lessThan(int32, (scaled - INT32_SIZE) | 0);\r\n        }\r\n        else {\r\n            return lessThan(uint53, Math.round(percentage * SMALLEST_UNSAFE_INTEGER));\r\n        }\r\n    }\r\n}\r\nfunction bool(numerator, denominator) {\r\n    if (denominator == null) {\r\n        if (numerator == null) {\r\n            return isLeastBitTrue;\r\n        }\r\n        return probability(numerator);\r\n    }\r\n    else {\r\n        if (numerator <= 0) {\r\n            return () => false;\r\n        }\r\n        else if (numerator >= denominator) {\r\n            return () => true;\r\n        }\r\n        return lessThan(integer(0, denominator - 1), numerator);\r\n    }\r\n}\n\n/**\r\n * Returns a Distribution that returns a random `Date` within the inclusive\r\n * range of [`start`, `end`].\r\n * @param start The minimum `Date`\r\n * @param end The maximum `Date`\r\n */\r\nfunction date(start, end) {\r\n    const distribution = integer(+start, +end);\r\n    return engine => new Date(distribution(engine));\r\n}\n\n/**\r\n * Returns a Distribution to return a value within [1, sideCount]\r\n * @param sideCount The number of sides of the die\r\n */\r\nfunction die(sideCount) {\r\n    return integer(1, sideCount);\r\n}\n\n/**\r\n * Returns a distribution that returns an array of length `dieCount` of values\r\n * within [1, `sideCount`]\r\n * @param sideCount The number of sides of each die\r\n * @param dieCount The number of dice\r\n */\r\nfunction dice(sideCount, dieCount) {\r\n    const distribution = die(sideCount);\r\n    return engine => {\r\n        const result = [];\r\n        for (let i = 0; i < dieCount; ++i) {\r\n            result.push(distribution(engine));\r\n        }\r\n        return result;\r\n    };\r\n}\n\n// tslint:disable:unified-signatures\r\n// has 2**x chars, for faster uniform distribution\r\nconst DEFAULT_STRING_POOL = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_-\";\r\nfunction string(pool = DEFAULT_STRING_POOL) {\r\n    const poolLength = pool.length;\r\n    if (!poolLength) {\r\n        throw new Error(\"Expected pool not to be an empty string\");\r\n    }\r\n    const distribution = integer(0, poolLength - 1);\r\n    return (engine, length) => {\r\n        let result = \"\";\r\n        for (let i = 0; i < length; ++i) {\r\n            const j = distribution(engine);\r\n            result += pool.charAt(j);\r\n        }\r\n        return result;\r\n    };\r\n}\n\nconst LOWER_HEX_POOL = \"0123456789abcdef\";\r\nconst lowerHex = string(LOWER_HEX_POOL);\r\nconst upperHex = string(LOWER_HEX_POOL.toUpperCase());\r\n/**\r\n * Returns a Distribution that returns a random string comprised of numbers\r\n * or the characters `abcdef` (or `ABCDEF`) of length `length`.\r\n * @param length Length of the result string\r\n * @param uppercase Whether the string should use `ABCDEF` instead of `abcdef`\r\n */\r\nfunction hex(uppercase) {\r\n    if (uppercase) {\r\n        return upperHex;\r\n    }\r\n    else {\r\n        return lowerHex;\r\n    }\r\n}\n\nfunction convertSliceArgument(value, length) {\r\n    if (value < 0) {\r\n        return Math.max(value + length, 0);\r\n    }\r\n    else {\r\n        return Math.min(value, length);\r\n    }\r\n}\n\nfunction toInteger(value) {\r\n    const num = +value;\r\n    if (num < 0) {\r\n        return Math.ceil(num);\r\n    }\r\n    else {\r\n        return Math.floor(num);\r\n    }\r\n}\n\n/**\r\n * Returns a random value within the provided `source` within the sliced\r\n * bounds of `begin` and `end`.\r\n * @param source an array of items to pick from\r\n * @param begin the beginning slice index (defaults to `0`)\r\n * @param end the ending slice index (defaults to `source.length`)\r\n */\r\nfunction pick(engine, source, begin, end) {\r\n    const length = source.length;\r\n    if (length === 0) {\r\n        throw new RangeError(\"Cannot pick from an empty array\");\r\n    }\r\n    const start = begin == null ? 0 : convertSliceArgument(toInteger(begin), length);\r\n    const finish = end === void 0 ? length : convertSliceArgument(toInteger(end), length);\r\n    if (start >= finish) {\r\n        throw new RangeError(`Cannot pick between bounds ${start} and ${finish}`);\r\n    }\r\n    const distribution = integer(start, finish - 1);\r\n    return source[distribution(engine)];\r\n}\n\nfunction multiply(distribution, multiplier) {\r\n    if (multiplier === 1) {\r\n        return distribution;\r\n    }\r\n    else if (multiplier === 0) {\r\n        return () => 0;\r\n    }\r\n    else {\r\n        return engine => distribution(engine) * multiplier;\r\n    }\r\n}\n\n/**\r\n * Returns a floating-point value within [0.0, 1.0)\r\n */\r\nfunction realZeroToOneExclusive(engine) {\r\n    return uint53(engine) / SMALLEST_UNSAFE_INTEGER;\r\n}\n\n/**\r\n * Returns a floating-point value within [0.0, 1.0]\r\n */\r\nfunction realZeroToOneInclusive(engine) {\r\n    return uint53Full(engine) / SMALLEST_UNSAFE_INTEGER;\r\n}\n\n/**\r\n * Returns a floating-point value within [min, max) or [min, max]\r\n * @param min The minimum floating-point value, inclusive.\r\n * @param max The maximum floating-point value.\r\n * @param inclusive If true, `max` will be inclusive.\r\n */\r\nfunction real(min, max, inclusive = false) {\r\n    if (!isFinite(min)) {\r\n        throw new RangeError(\"Expected min to be a finite number\");\r\n    }\r\n    else if (!isFinite(max)) {\r\n        throw new RangeError(\"Expected max to be a finite number\");\r\n    }\r\n    return add(multiply(inclusive ? realZeroToOneInclusive : realZeroToOneExclusive, max - min), min);\r\n}\n\nconst sliceArray = Array.prototype.slice;\n\n/**\r\n * Shuffles an array in-place\r\n * @param engine The Engine to use when choosing random values\r\n * @param array The array to shuffle\r\n * @param downTo minimum index to shuffle. Only used internally.\r\n */\r\nfunction shuffle(engine, array, downTo = 0) {\r\n    const length = array.length;\r\n    if (length) {\r\n        for (let i = (length - 1) >>> 0; i > downTo; --i) {\r\n            const distribution = integer(0, i);\r\n            const j = distribution(engine);\r\n            if (i !== j) {\r\n                const tmp = array[i];\r\n                array[i] = array[j];\r\n                array[j] = tmp;\r\n            }\r\n        }\r\n    }\r\n    return array;\r\n}\n\n/**\r\n * From the population array, produce an array with sampleSize elements that\r\n * are randomly chosen without repeats.\r\n * @param engine The Engine to use when choosing random values\r\n * @param population An array that has items to choose a sample from\r\n * @param sampleSize The size of the result array\r\n */\r\nfunction sample(engine, population, sampleSize) {\r\n    if (sampleSize < 0 ||\r\n        sampleSize > population.length ||\r\n        !isFinite(sampleSize)) {\r\n        throw new RangeError(\"Expected sampleSize to be within 0 and the length of the population\");\r\n    }\r\n    if (sampleSize === 0) {\r\n        return [];\r\n    }\r\n    const clone = sliceArray.call(population);\r\n    const length = clone.length;\r\n    if (length === sampleSize) {\r\n        return shuffle(engine, clone, 0);\r\n    }\r\n    const tailLength = length - sampleSize;\r\n    return shuffle(engine, clone, tailLength - 1).slice(tailLength);\r\n}\n\nconst stringRepeat = (() => {\r\n    try {\r\n        if (\"x\".repeat(3) === \"xxx\") {\r\n            return (pattern, count) => pattern.repeat(count);\r\n        }\r\n    }\r\n    catch (_) {\r\n        // nothing to do here\r\n    }\r\n    return (pattern, count) => {\r\n        let result = \"\";\r\n        while (count > 0) {\r\n            if (count & 1) {\r\n                result += pattern;\r\n            }\r\n            count >>= 1;\r\n            pattern += pattern;\r\n        }\r\n        return result;\r\n    };\r\n})();\n\nfunction zeroPad(text, zeroCount) {\r\n    return stringRepeat(\"0\", zeroCount - text.length) + text;\r\n}\r\n/**\r\n * Returns a Universally Unique Identifier Version 4.\r\n *\r\n * See http://en.wikipedia.org/wiki/Universally_unique_identifier\r\n */\r\nfunction uuid4(engine) {\r\n    const a = engine.next() >>> 0;\r\n    const b = engine.next() | 0;\r\n    const c = engine.next() | 0;\r\n    const d = engine.next() >>> 0;\r\n    return (zeroPad(a.toString(16), 8) +\r\n        \"-\" +\r\n        zeroPad((b & 0xffff).toString(16), 4) +\r\n        \"-\" +\r\n        zeroPad((((b >> 4) & 0x0fff) | 0x4000).toString(16), 4) +\r\n        \"-\" +\r\n        zeroPad(((c & 0x3fff) | 0x8000).toString(16), 4) +\r\n        \"-\" +\r\n        zeroPad(((c >> 4) & 0xffff).toString(16), 4) +\r\n        zeroPad(d.toString(16), 8));\r\n}\n\n/**\r\n * An int32-producing Engine that uses `Math.random()`\r\n */\r\nconst nativeMath = {\r\n    next() {\r\n        return (Math.random() * UINT32_SIZE) | 0;\r\n    }\r\n};\n\n// tslint:disable:unified-signatures\r\n/**\r\n * A wrapper around an Engine that provides easy-to-use methods for\r\n * producing values based on known distributions\r\n */\r\nclass Random {\r\n    /**\r\n     * Creates a new Random wrapper\r\n     * @param engine The engine to use (defaults to a `Math.random`-based implementation)\r\n     */\r\n    constructor(engine = nativeMath) {\r\n        this.engine = engine;\r\n    }\r\n    /**\r\n     * Returns a value within [-0x80000000, 0x7fffffff]\r\n     */\r\n    int32() {\r\n        return int32(this.engine);\r\n    }\r\n    /**\r\n     * Returns a value within [0, 0xffffffff]\r\n     */\r\n    uint32() {\r\n        return uint32(this.engine);\r\n    }\r\n    /**\r\n     * Returns a value within [0, 0x1fffffffffffff]\r\n     */\r\n    uint53() {\r\n        return uint53(this.engine);\r\n    }\r\n    /**\r\n     * Returns a value within [0, 0x20000000000000]\r\n     */\r\n    uint53Full() {\r\n        return uint53Full(this.engine);\r\n    }\r\n    /**\r\n     * Returns a value within [-0x20000000000000, 0x1fffffffffffff]\r\n     */\r\n    int53() {\r\n        return int53(this.engine);\r\n    }\r\n    /**\r\n     * Returns a value within [-0x20000000000000, 0x20000000000000]\r\n     */\r\n    int53Full() {\r\n        return int53Full(this.engine);\r\n    }\r\n    /**\r\n     * Returns a value within [min, max]\r\n     * @param min The minimum integer value, inclusive. No less than -0x20000000000000.\r\n     * @param max The maximum integer value, inclusive. No greater than 0x20000000000000.\r\n     */\r\n    integer(min, max) {\r\n        return integer(min, max)(this.engine);\r\n    }\r\n    /**\r\n     * Returns a floating-point value within [0.0, 1.0]\r\n     */\r\n    realZeroToOneInclusive() {\r\n        return realZeroToOneInclusive(this.engine);\r\n    }\r\n    /**\r\n     * Returns a floating-point value within [0.0, 1.0)\r\n     */\r\n    realZeroToOneExclusive() {\r\n        return realZeroToOneExclusive(this.engine);\r\n    }\r\n    /**\r\n     * Returns a floating-point value within [min, max) or [min, max]\r\n     * @param min The minimum floating-point value, inclusive.\r\n     * @param max The maximum floating-point value.\r\n     * @param inclusive If true, `max` will be inclusive.\r\n     */\r\n    real(min, max, inclusive = false) {\r\n        return real(min, max, inclusive)(this.engine);\r\n    }\r\n    bool(numerator, denominator) {\r\n        return bool(numerator, denominator)(this.engine);\r\n    }\r\n    /**\r\n     * Return a random value within the provided `source` within the sliced\r\n     * bounds of `begin` and `end`.\r\n     * @param source an array of items to pick from\r\n     * @param begin the beginning slice index (defaults to `0`)\r\n     * @param end the ending slice index (defaults to `source.length`)\r\n     */\r\n    pick(source, begin, end) {\r\n        return pick(this.engine, source, begin, end);\r\n    }\r\n    /**\r\n     * Shuffles an array in-place\r\n     * @param array The array to shuffle\r\n     */\r\n    shuffle(array) {\r\n        return shuffle(this.engine, array);\r\n    }\r\n    /**\r\n     * From the population array, returns an array with sampleSize elements that\r\n     * are randomly chosen without repeats.\r\n     * @param population An array that has items to choose a sample from\r\n     * @param sampleSize The size of the result array\r\n     */\r\n    sample(population, sampleSize) {\r\n        return sample(this.engine, population, sampleSize);\r\n    }\r\n    /**\r\n     * Returns a value within [1, sideCount]\r\n     * @param sideCount The number of sides of the die\r\n     */\r\n    die(sideCount) {\r\n        return die(sideCount)(this.engine);\r\n    }\r\n    /**\r\n     * Returns an array of length `dieCount` of values within [1, sideCount]\r\n     * @param sideCount The number of sides of each die\r\n     * @param dieCount The number of dice\r\n     */\r\n    dice(sideCount, dieCount) {\r\n        return dice(sideCount, dieCount)(this.engine);\r\n    }\r\n    /**\r\n     * Returns a Universally Unique Identifier Version 4.\r\n     *\r\n     * See http://en.wikipedia.org/wiki/Universally_unique_identifier\r\n     */\r\n    uuid4() {\r\n        return uuid4(this.engine);\r\n    }\r\n    string(length, pool) {\r\n        return string(pool)(this.engine, length);\r\n    }\r\n    /**\r\n     * Returns a random string comprised of numbers or the characters `abcdef`\r\n     * (or `ABCDEF`) of length `length`.\r\n     * @param length Length of the result string\r\n     * @param uppercase Whether the string should use `ABCDEF` instead of `abcdef`\r\n     */\r\n    hex(length, uppercase) {\r\n        return hex(uppercase)(this.engine, length);\r\n    }\r\n    /**\r\n     * Returns a random `Date` within the inclusive range of [`start`, `end`].\r\n     * @param start The minimum `Date`\r\n     * @param end The maximum `Date`\r\n     */\r\n    date(start, end) {\r\n        return date(start, end)(this.engine);\r\n    }\r\n}\n\n/**\r\n * See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int32Array\r\n */\r\nconst I32Array = (() => {\r\n    try {\r\n        const buffer = new ArrayBuffer(4);\r\n        const view = new Int32Array(buffer);\r\n        view[0] = INT32_SIZE;\r\n        if (view[0] === -INT32_SIZE) {\r\n            return Int32Array;\r\n        }\r\n    }\r\n    catch (_) {\r\n        // nothing to do here\r\n    }\r\n    return Array;\r\n})();\n\nlet data = null;\r\nconst COUNT = 128;\r\nlet index = COUNT;\r\n/**\r\n * An Engine that relies on the globally-available `crypto.getRandomValues`,\r\n * which is typically available in modern browsers.\r\n *\r\n * See https://developer.mozilla.org/en-US/docs/Web/API/Crypto/getRandomValues\r\n *\r\n * If unavailable or otherwise non-functioning, then `browserCrypto` will\r\n * likely `throw` on the first call to `next()`.\r\n */\r\nconst browserCrypto = {\r\n    next() {\r\n        if (index >= COUNT) {\r\n            if (data === null) {\r\n                data = new I32Array(COUNT);\r\n            }\r\n            crypto.getRandomValues(data);\r\n            index = 0;\r\n        }\r\n        return data[index++] | 0;\r\n    }\r\n};\n\n/**\r\n * Returns an array of random int32 values, based on current time\r\n * and a random number engine\r\n *\r\n * @param engine an Engine to pull random values from, default `nativeMath`\r\n * @param length the length of the Array, minimum 1, default 16\r\n */\r\nfunction createEntropy(engine = nativeMath, length = 16) {\r\n    const array = [];\r\n    array.push(new Date().getTime() | 0);\r\n    for (let i = 1; i < length; ++i) {\r\n        array[i] = engine.next() | 0;\r\n    }\r\n    return array;\r\n}\n\n/**\r\n * See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/imul\r\n */\r\nconst imul = (() => {\r\n    try {\r\n        if (Math.imul(UINT32_MAX, 5) === -5) {\r\n            return Math.imul;\r\n        }\r\n    }\r\n    catch (_) {\r\n        // nothing to do here\r\n    }\r\n    const UINT16_MAX = 0xffff;\r\n    return (a, b) => {\r\n        const ah = (a >>> 16) & UINT16_MAX;\r\n        const al = a & UINT16_MAX;\r\n        const bh = (b >>> 16) & UINT16_MAX;\r\n        const bl = b & UINT16_MAX;\r\n        // the shift by 0 fixes the sign on the high part\r\n        // the final |0 converts the unsigned value into a signed value\r\n        return (al * bl + (((ah * bl + al * bh) << 16) >>> 0)) | 0;\r\n    };\r\n})();\n\nconst ARRAY_SIZE = 624;\r\nconst ARRAY_MAX = ARRAY_SIZE - 1;\r\nconst M = 397;\r\nconst ARRAY_SIZE_MINUS_M = ARRAY_SIZE - M;\r\nconst A = 0x9908b0df;\r\n/**\r\n * An Engine that is a pseudorandom number generator using the Mersenne\r\n * Twister algorithm based on the prime 2**19937 − 1\r\n *\r\n * See http://en.wikipedia.org/wiki/Mersenne_twister\r\n */\r\nclass MersenneTwister19937 {\r\n    /**\r\n     * MersenneTwister19937 should not be instantiated directly.\r\n     * Instead, use the static methods `seed`, `seedWithArray`, or `autoSeed`.\r\n     */\r\n    constructor() {\r\n        this.data = new I32Array(ARRAY_SIZE);\r\n        this.index = 0; // integer within [0, 624]\r\n        this.uses = 0;\r\n    }\r\n    /**\r\n     * Returns a MersenneTwister19937 seeded with an initial int32 value\r\n     * @param initial the initial seed value\r\n     */\r\n    static seed(initial) {\r\n        return new MersenneTwister19937().seed(initial);\r\n    }\r\n    /**\r\n     * Returns a MersenneTwister19937 seeded with zero or more int32 values\r\n     * @param source A series of int32 values\r\n     */\r\n    static seedWithArray(source) {\r\n        return new MersenneTwister19937().seedWithArray(source);\r\n    }\r\n    /**\r\n     * Returns a MersenneTwister19937 seeded with the current time and\r\n     * a series of natively-generated random values\r\n     */\r\n    static autoSeed() {\r\n        return MersenneTwister19937.seedWithArray(createEntropy());\r\n    }\r\n    /**\r\n     * Returns the next int32 value of the sequence\r\n     */\r\n    next() {\r\n        if ((this.index | 0) >= ARRAY_SIZE) {\r\n            refreshData(this.data);\r\n            this.index = 0;\r\n        }\r\n        const value = this.data[this.index];\r\n        this.index = (this.index + 1) | 0;\r\n        this.uses += 1;\r\n        return temper(value) | 0;\r\n    }\r\n    /**\r\n     * Returns the number of times that the Engine has been used.\r\n     *\r\n     * This can be provided to an unused MersenneTwister19937 with the same\r\n     * seed, bringing it to the exact point that was left off.\r\n     */\r\n    getUseCount() {\r\n        return this.uses;\r\n    }\r\n    /**\r\n     * Discards one or more items from the engine\r\n     * @param count The count of items to discard\r\n     */\r\n    discard(count) {\r\n        if (count <= 0) {\r\n            return this;\r\n        }\r\n        this.uses += count;\r\n        if ((this.index | 0) >= ARRAY_SIZE) {\r\n            refreshData(this.data);\r\n            this.index = 0;\r\n        }\r\n        while (count + this.index > ARRAY_SIZE) {\r\n            count -= ARRAY_SIZE - this.index;\r\n            refreshData(this.data);\r\n            this.index = 0;\r\n        }\r\n        this.index = (this.index + count) | 0;\r\n        return this;\r\n    }\r\n    seed(initial) {\r\n        let previous = 0;\r\n        this.data[0] = previous = initial | 0;\r\n        for (let i = 1; i < ARRAY_SIZE; i = (i + 1) | 0) {\r\n            this.data[i] = previous =\r\n                (imul(previous ^ (previous >>> 30), 0x6c078965) + i) | 0;\r\n        }\r\n        this.index = ARRAY_SIZE;\r\n        this.uses = 0;\r\n        return this;\r\n    }\r\n    seedWithArray(source) {\r\n        this.seed(0x012bd6aa);\r\n        seedWithArray(this.data, source);\r\n        return this;\r\n    }\r\n}\r\nfunction refreshData(data) {\r\n    let k = 0;\r\n    let tmp = 0;\r\n    for (; (k | 0) < ARRAY_SIZE_MINUS_M; k = (k + 1) | 0) {\r\n        tmp = (data[k] & INT32_SIZE) | (data[(k + 1) | 0] & INT32_MAX);\r\n        data[k] = data[(k + M) | 0] ^ (tmp >>> 1) ^ (tmp & 0x1 ? A : 0);\r\n    }\r\n    for (; (k | 0) < ARRAY_MAX; k = (k + 1) | 0) {\r\n        tmp = (data[k] & INT32_SIZE) | (data[(k + 1) | 0] & INT32_MAX);\r\n        data[k] =\r\n            data[(k - ARRAY_SIZE_MINUS_M) | 0] ^ (tmp >>> 1) ^ (tmp & 0x1 ? A : 0);\r\n    }\r\n    tmp = (data[ARRAY_MAX] & INT32_SIZE) | (data[0] & INT32_MAX);\r\n    data[ARRAY_MAX] = data[M - 1] ^ (tmp >>> 1) ^ (tmp & 0x1 ? A : 0);\r\n}\r\nfunction temper(value) {\r\n    value ^= value >>> 11;\r\n    value ^= (value << 7) & 0x9d2c5680;\r\n    value ^= (value << 15) & 0xefc60000;\r\n    return value ^ (value >>> 18);\r\n}\r\nfunction seedWithArray(data, source) {\r\n    let i = 1;\r\n    let j = 0;\r\n    const sourceLength = source.length;\r\n    let k = Math.max(sourceLength, ARRAY_SIZE) | 0;\r\n    let previous = data[0] | 0;\r\n    for (; (k | 0) > 0; --k) {\r\n        data[i] = previous =\r\n            ((data[i] ^ imul(previous ^ (previous >>> 30), 0x0019660d)) +\r\n                (source[j] | 0) +\r\n                (j | 0)) |\r\n                0;\r\n        i = (i + 1) | 0;\r\n        ++j;\r\n        if ((i | 0) > ARRAY_MAX) {\r\n            data[0] = data[ARRAY_MAX];\r\n            i = 1;\r\n        }\r\n        if (j >= sourceLength) {\r\n            j = 0;\r\n        }\r\n    }\r\n    for (k = ARRAY_MAX; (k | 0) > 0; --k) {\r\n        data[i] = previous =\r\n            ((data[i] ^ imul(previous ^ (previous >>> 30), 0x5d588b65)) - i) | 0;\r\n        i = (i + 1) | 0;\r\n        if ((i | 0) > ARRAY_MAX) {\r\n            data[0] = data[ARRAY_MAX];\r\n            i = 1;\r\n        }\r\n    }\r\n    data[0] = INT32_SIZE;\r\n}\n\nlet data$1 = null;\r\nconst COUNT$1 = 128;\r\nlet index$1 = COUNT$1;\r\n/**\r\n * An Engine that relies on the node-available\r\n * `require('crypto').randomBytes`, which has been available since 0.58.\r\n *\r\n * See https://nodejs.org/api/crypto.html#crypto_crypto_randombytes_size_callback\r\n *\r\n * If unavailable or otherwise non-functioning, then `nodeCrypto` will\r\n * likely `throw` on the first call to `next()`.\r\n */\r\nconst nodeCrypto = {\r\n    next() {\r\n        if (index$1 >= COUNT$1) {\r\n            data$1 = new Int32Array(new Int8Array(require(\"crypto\").randomBytes(4 * COUNT$1)).buffer);\r\n            index$1 = 0;\r\n        }\r\n        return data$1[index$1++] | 0;\r\n    }\r\n};\n\n/**\r\n * Returns a Distribution to random value within the provided `source`\r\n * within the sliced bounds of `begin` and `end`.\r\n * @param source an array of items to pick from\r\n * @param begin the beginning slice index (defaults to `0`)\r\n * @param end the ending slice index (defaults to `source.length`)\r\n */\r\nfunction picker(source, begin, end) {\r\n    const clone = sliceArray.call(source, begin, end);\r\n    if (clone.length === 0) {\r\n        throw new RangeError(`Cannot pick from a source with no items`);\r\n    }\r\n    const distribution = integer(0, clone.length - 1);\r\n    return engine => clone[distribution(engine)];\r\n}\n\nexport { Random, browserCrypto, nativeMath, MersenneTwister19937, nodeCrypto, bool, date, dice, die, hex, int32, int53, int53Full, integer, pick, picker, real, realZeroToOneExclusive, realZeroToOneInclusive, sample, shuffle, string, uint32, uint53, uint53Full, uuid4, createEntropy };\n//# sourceMappingURL=random-js.esm.js.map\n","import * as Random from 'random-js';\nimport Matrix from 'ml-matrix';\n\nexport function checkFloat(n) {\n  return n > 0.0 && n <= 1.0;\n}\n\n\n/**\n * Select n with replacement elements on the training set and values, where n is the size of the training set.\n * @ignore\n * @param {Matrix} trainingSet\n * @param {Array} trainingValue\n * @param {number} seed - seed for the random selection, must be a 32-bit integer.\n * @return {object} with new X and y.\n */\nexport function examplesBaggingWithReplacement(\n  trainingSet,\n  trainingValue,\n  seed\n) {\n  var engine;\n  var distribution = Random.integer(0, trainingSet.rows - 1);\n  if (seed === undefined) {\n    engine = Random.MersenneTwister19937.autoSeed();\n  } else if (Number.isInteger(seed)) {\n    engine = Random.MersenneTwister19937.seed(seed);\n  } else {\n    throw new RangeError(\n      `Expected seed must be undefined or integer not ${seed}`\n    );\n  }\n\n  var Xr = new Array(trainingSet.rows);\n  var yr = new Array(trainingSet.rows);\n\n  for (var i = 0; i < trainingSet.rows; ++i) {\n    var index = distribution(engine);\n    Xr[i] = trainingSet.getRow(index);\n    yr[i] = trainingValue[index];\n  }\n\n  return {\n    X: new Matrix(Xr),\n    y: yr\n  };\n}\n\n/**\n * selects n features from the training set with or without replacement, returns the new training set and the indexes used.\n * @ignore\n * @param {Matrix} trainingSet\n * @param {number} n - features.\n * @param {boolean} replacement\n * @param {number} seed - seed for the random selection, must be a 32-bit integer.\n * @return {object}\n */\nexport function featureBagging(trainingSet, n, replacement, seed) {\n  if (trainingSet.columns < n) {\n    throw new RangeError(\n      'N should be less or equal to the number of columns of X'\n    );\n  }\n\n  var distribution = Random.integer(0, trainingSet.columns - 1);\n  var engine;\n  if (seed === undefined) {\n    engine = Random.MersenneTwister19937.autoSeed();\n  } else if (Number.isInteger(seed)) {\n    engine = Random.MersenneTwister19937.seed(seed);\n  } else {\n    throw new RangeError(\n      `Expected seed must be undefined or integer not ${seed}`\n    );\n  }\n\n  var toRet = new Matrix(trainingSet.rows, n);\n\n  if (replacement) {\n    var usedIndex = new Array(n);\n    for (var i = 0; i < n; ++i) {\n      var index = distribution(engine);\n      usedIndex[i] = index;\n      toRet.setColumn(i, trainingSet.getColumn(index));\n    }\n  } else {\n    usedIndex = new Set();\n    index = distribution(engine);\n    for (i = 0; i < n; ++i) {\n      while (usedIndex.has(index)) {\n        index = distribution(engine);\n      }\n      toRet.setColumn(i, trainingSet.getColumn(index));\n      usedIndex.add(index);\n    }\n    usedIndex = Array.from(usedIndex);\n  }\n\n  return {\n    X: toRet,\n    usedIndex: usedIndex\n  };\n}\n","import {\n  DecisionTreeClassifier as DTClassifier,\n  DecisionTreeRegression as DTRegression\n} from 'ml-cart';\nimport { Matrix, WrapperMatrix2D, MatrixTransposeView, MatrixColumnSelectionView } from 'ml-matrix';\n\nimport * as Utils from './utils';\n\n/**\n * @class RandomForestBase\n */\nexport class RandomForestBase {\n  /**\n   * Create a new base random forest for a classifier or regression model.\n   * @constructor\n   * @param {object} options\n   * @param {number|String} [options.maxFeatures] - the number of features used on each estimator.\n   *        * if is an integer it selects maxFeatures elements over the sample features.\n   *        * if is a float between (0, 1), it takes the percentage of features.\n   * @param {boolean} [options.replacement] - use replacement over the sample features.\n   * @param {number} [options.seed] - seed for feature and samples selection, must be a 32-bit integer.\n   * @param {number} [options.nEstimators] - number of estimator to use.\n   * @param {object} [options.treeOptions] - options for the tree classifier, see [ml-cart]{@link https://mljs.github.io/decision-tree-cart/}\n   * @param {boolean} [options.isClassifier] - boolean to check if is a classifier or regression model (used by subclasses).\n   * @param {boolean} [options.useSampleBagging] - use bagging over training samples.\n   * @param {object} model - for load purposes.\n   */\n  constructor(options, model) {\n    if (options === true) {\n      this.replacement = model.replacement;\n      this.maxFeatures = model.maxFeatures;\n      this.nEstimators = model.nEstimators;\n      this.treeOptions = model.treeOptions;\n      this.isClassifier = model.isClassifier;\n      this.seed = model.seed;\n      this.n = model.n;\n      this.indexes = model.indexes;\n      this.useSampleBagging = model.useSampleBagging;\n\n      var Estimator = this.isClassifier ? DTClassifier : DTRegression;\n      this.estimators = model.estimators.map((est) => Estimator.load(est));\n    } else {\n      this.replacement = options.replacement;\n      this.maxFeatures = options.maxFeatures;\n      this.nEstimators = options.nEstimators;\n      this.treeOptions = options.treeOptions;\n      this.isClassifier = options.isClassifier;\n      this.seed = options.seed;\n      this.useSampleBagging = options.useSampleBagging;\n    }\n  }\n\n  /**\n   * Train the decision tree with the given training set and labels.\n   * @param {Matrix|Array} trainingSet\n   * @param {Array} trainingValues\n   */\n  train(trainingSet, trainingValues) {\n    trainingSet = Matrix.checkMatrix(trainingSet);\n\n    this.maxFeatures = this.maxFeatures || trainingSet.columns;\n\n    if (Utils.checkFloat(this.maxFeatures)) {\n      this.n = Math.floor(trainingSet.columns * this.maxFeatures);\n    } else if (Number.isInteger(this.maxFeatures)) {\n      if (this.maxFeatures > trainingSet.columns) {\n        throw new RangeError(\n          `The maxFeatures parameter should be less than ${trainingSet.columns}`\n        );\n      } else {\n        this.n = this.maxFeatures;\n      }\n    } else {\n      throw new RangeError(\n        `Cannot process the maxFeatures parameter ${this.maxFeatures}`\n      );\n    }\n\n    if (this.isClassifier) {\n      var Estimator = DTClassifier;\n    } else {\n      Estimator = DTRegression;\n    }\n\n    this.estimators = new Array(this.nEstimators);\n    this.indexes = new Array(this.nEstimators);\n\n    for (var i = 0; i < this.nEstimators; ++i) {\n      var res = this.useSampleBagging\n        ? Utils.examplesBaggingWithReplacement(\n          trainingSet,\n          trainingValues,\n          this.seed\n        )\n        : { X: trainingSet, y: trainingValues };\n      var X = res.X;\n      var y = res.y;\n\n      res = Utils.featureBagging(X, this.n, this.replacement, this.seed);\n      X = res.X;\n\n      this.indexes[i] = res.usedIndex;\n      this.estimators[i] = new Estimator(this.treeOptions);\n      this.estimators[i].train(X, y);\n    }\n  }\n\n  /**\n   * Method that returns the way the algorithm generates the predictions, for example, in classification\n   * you can return the mode of all predictions retrieved by the trees, or in case of regression you can\n   * use the mean or the median.\n   * @abstract\n   * @param {Array} values - predictions of the estimators.\n   * @return {number} prediction.\n   */\n  // eslint-disable-next-line no-unused-vars\n  selection(values) {\n    throw new Error(\"Abstract method 'selection' not implemented!\");\n  }\n\n  /**\n   * Predicts the output given the matrix to predict.\n   * @param {Matrix|Array} toPredict\n   * @return {Array} predictions\n   */\n  predict(toPredict) {\n    var predictionValues = new Array(this.nEstimators);\n    toPredict = Matrix.checkMatrix(toPredict);\n    for (var i = 0; i < this.nEstimators; ++i) {\n      var X = new MatrixColumnSelectionView(toPredict, this.indexes[i]); // get features for estimator\n      predictionValues[i] = this.estimators[i].predict(X);\n    }\n\n    predictionValues = new MatrixTransposeView(new WrapperMatrix2D(predictionValues));\n    var predictions = new Array(predictionValues.rows);\n    for (i = 0; i < predictionValues.rows; ++i) {\n      predictions[i] = this.selection(predictionValues.getRow(i));\n    }\n\n    return predictions;\n  }\n\n  /**\n   * Export the current model to JSON.\n   * @return {object} - Current model.\n   */\n  toJSON() {\n    return {\n      indexes: this.indexes,\n      n: this.n,\n      replacement: this.replacement,\n      maxFeatures: this.maxFeatures,\n      nEstimators: this.nEstimators,\n      treeOptions: this.treeOptions,\n      isClassifier: this.isClassifier,\n      seed: this.seed,\n      estimators: this.estimators.map((est) => est.toJSON()),\n      useSampleBagging: this.useSampleBagging\n    };\n  }\n}\n","import { RandomForestBase } from './RandomForestBase';\n\nconst defaultOptions = {\n  maxFeatures: 1.0,\n  replacement: true,\n  nEstimators: 10,\n  seed: 42,\n  useSampleBagging: false\n};\n\n/**\n * @class RandomForestClassifier\n * @augments RandomForestBase\n */\nexport class RandomForestClassifier extends RandomForestBase {\n  /**\n   * Create a new base random forest for a classifier or regression model.\n   * @constructor\n   * @param {object} options\n   * @param {number} [options.maxFeatures=1.0] - the number of features used on each estimator.\n   *        * if is an integer it selects maxFeatures elements over the sample features.\n   *        * if is a float between (0, 1), it takes the percentage of features.\n   * @param {boolean} [options.replacement=true] - use replacement over the sample features.\n   * @param {number} [options.seed=42] - seed for feature and samples selection, must be a 32-bit integer.\n   * @param {number} [options.nEstimators=10] - number of estimator to use.\n   * @param {object} [options.treeOptions={}] - options for the tree classifier, see [ml-cart]{@link https://mljs.github.io/decision-tree-cart/}\n   * @param {boolean} [options.useSampleBagging=false] - use bagging over training samples.\n   * @param {object} model - for load purposes.\n   */\n  constructor(options, model) {\n    if (options === true) {\n      super(true, model.baseModel);\n    } else {\n      options = Object.assign({}, defaultOptions, options);\n      options.isClassifier = true;\n      super(options);\n    }\n  }\n\n  /**\n   * retrieve the prediction given the selection method.\n   * @param {Array} values - predictions of the estimators.\n   * @return {number} prediction\n   */\n  selection(values) {\n    return mode(values);\n  }\n\n  /**\n   * Export the current model to JSON.\n   * @return {object} - Current model.\n   */\n  toJSON() {\n    var baseModel = super.toJSON();\n    return {\n      baseModel: baseModel,\n      name: 'RFClassifier'\n    };\n  }\n\n  /**\n   * Load a Decision tree classifier with the given model.\n   * @param {object} model\n   * @return {RandomForestClassifier}\n   */\n  static load(model) {\n    if (model.name !== 'RFClassifier') {\n      throw new RangeError(`Invalid model: ${model.name}`);\n    }\n\n    return new RandomForestClassifier(true, model);\n  }\n}\n\n/**\n * Return the most repeated element on the array.\n * @param {Array} arr\n * @return {number} mode\n */\nfunction mode(arr) {\n  return arr\n    .sort(\n      (a, b) =>\n        arr.filter((v) => v === a).length - arr.filter((v) => v === b).length\n    )\n    .pop();\n}\n","(function(){function a(d){for(var e=0,f=d.length-1,g=void 0,h=void 0,i=void 0,j=c(e,f);!0;){if(f<=e)return d[j];if(f==e+1)return d[e]>d[f]&&b(d,e,f),d[j];for(g=c(e,f),d[g]>d[f]&&b(d,g,f),d[e]>d[f]&&b(d,e,f),d[g]>d[e]&&b(d,g,e),b(d,g,e+1),h=e+1,i=f;!0;){do h++;while(d[e]>d[h]);do i--;while(d[i]>d[e]);if(i<h)break;b(d,h,i)}b(d,e,i),i<=j&&(e=h),i>=j&&(f=i-1)}}var b=function b(d,e,f){var _ref;return _ref=[d[f],d[e]],d[e]=_ref[0],d[f]=_ref[1],_ref},c=function c(d,e){return~~((d+e)/2)};'undefined'!=typeof module&&module.exports?module.exports=a:window.median=a})();\n","import quickSelectMedian from 'median-quickselect';\nimport isArray from 'is-any-array';\n\n/**\n * Computes the median of the given values\n * @param {Array<number>} input\n * @return {number}\n */\n\nfunction median(input) {\n  if (!isArray(input)) {\n    throw new TypeError('input must be an array');\n  }\n\n  if (input.length === 0) {\n    throw new TypeError('input must not be empty');\n  }\n\n  return quickSelectMedian(input.slice());\n}\n\nexport default median;\n","import arrayMean from 'ml-array-mean';\nimport arrayMedian from 'ml-array-median';\n\nimport { RandomForestBase } from './RandomForestBase';\n\nconst selectionMethods = {\n  mean: arrayMean,\n  median: arrayMedian\n};\n\nconst defaultOptions = {\n  maxFeatures: 1.0,\n  replacement: false,\n  nEstimators: 10,\n  treeOptions: {},\n  selectionMethod: 'mean',\n  seed: 42,\n  useSampleBagging: false\n};\n\n/**\n * @class RandomForestRegression\n * @augments RandomForestBase\n */\nexport class RandomForestRegression extends RandomForestBase {\n  /**\n   * Create a new base random forest for a classifier or regression model.\n   * @constructor\n   * @param {object} options\n   * @param {number} [options.maxFeatures=1.0] - the number of features used on each estimator.\n   *        * if is an integer it selects maxFeatures elements over the sample features.\n   *        * if is a float between (0, 1), it takes the percentage of features.\n   * @param {boolean} [options.replacement=true] - use replacement over the sample features.\n   * @param {number} [options.seed=42] - seed for feature and samples selection, must be a 32-bit integer.\n   * @param {number} [options.nEstimators=10] - number of estimator to use.\n   * @param {object} [options.treeOptions={}] - options for the tree classifier, see [ml-cart]{@link https://mljs.github.io/decision-tree-cart/}\n   * @param {string} [options.selectionMethod=\"mean\"] - the way to calculate the prediction from estimators, \"mean\" and \"median\" are supported.\n   * @param {boolean} [options.useSampleBagging=false] - use bagging over training samples.\n   * @param {object} model - for load purposes.\n   */\n  constructor(options, model) {\n    if (options === true) {\n      super(true, model.baseModel);\n      this.selectionMethod = model.selectionMethod;\n    } else {\n      options = Object.assign({}, defaultOptions, options);\n\n      if (\n        !(\n          options.selectionMethod === 'mean' ||\n          options.selectionMethod === 'median'\n        )\n      ) {\n        throw new RangeError(\n          `Unsupported selection method ${options.selectionMethod}`\n        );\n      }\n\n      options.isClassifier = false;\n\n      super(options);\n      this.selectionMethod = options.selectionMethod;\n    }\n  }\n\n  /**\n   * retrieve the prediction given the selection method.\n   * @param {Array} values - predictions of the estimators.\n   * @return {number} prediction\n   */\n  selection(values) {\n    return selectionMethods[this.selectionMethod](values);\n  }\n\n  /**\n   * Export the current model to JSON.\n   * @return {object} - Current model.\n   */\n  toJSON() {\n    var baseModel = super.toJSON();\n    return {\n      baseModel: baseModel,\n      selectionMethod: this.selectionMethod,\n      name: 'RFRegression'\n    };\n  }\n\n  /**\n   * Load a Decision tree classifier with the given model.\n   * @param {object} model\n   * @return {RandomForestRegression}\n   */\n  static load(model) {\n    if (model.name !== 'RFRegression') {\n      throw new RangeError(`Invalid model: ${model.name}`);\n    }\n\n    return new RandomForestRegression(true, model);\n  }\n}\n","import { Matrix, MatrixTransposeView, EVD, SVD } from 'ml-matrix';\n\n/**\n * Creates new PCA (Principal Component Analysis) from the dataset\n * @param {Matrix} dataset - dataset or covariance matrix\n * @param {Object} [options]\n * @param {boolean} [options.isCovarianceMatrix=false] - true if the dataset is a covariance matrix\n * @param {boolean} [options.useCovarianceMatrix=false] - force the use of the covariance matrix instead of singular value decomposition.\n * @param {boolean} [options.center=true] - should the data be centered (subtract the mean)\n * @param {boolean} [options.scale=false] - should the data be scaled (divide by the standard deviation)\n * */\nexport class PCA {\n  constructor(dataset, options = {}) {\n    if (dataset === true) {\n      const model = options;\n      this.center = model.center;\n      this.scale = model.scale;\n      this.means = model.means;\n      this.stdevs = model.stdevs;\n      this.U = Matrix.checkMatrix(model.U);\n      this.S = model.S;\n      return;\n    }\n\n    dataset = new Matrix(dataset);\n\n    const {\n      isCovarianceMatrix = false,\n      center = true,\n      scale = false\n    } = options;\n\n    this.center = center;\n    this.scale = scale;\n    this.means = null;\n    this.stdevs = null;\n\n    if (isCovarianceMatrix) {\n      // user provided a covariance matrix instead of dataset\n      this._computeFromCovarianceMatrix(dataset);\n      return;\n    }\n\n    var useCovarianceMatrix;\n    if (typeof options.useCovarianceMatrix === 'boolean') {\n      useCovarianceMatrix = options.useCovarianceMatrix;\n    } else {\n      useCovarianceMatrix = dataset.rows > dataset.columns;\n    }\n\n    if (useCovarianceMatrix) {\n      // user provided a dataset but wants us to compute and use the covariance matrix\n      this._adjust(dataset);\n      const covarianceMatrix = new MatrixTransposeView(dataset)\n        .mmul(dataset)\n        .div(dataset.rows - 1);\n      this._computeFromCovarianceMatrix(covarianceMatrix);\n    } else {\n      this._adjust(dataset);\n      var svd = new SVD(dataset, {\n        computeLeftSingularVectors: false,\n        computeRightSingularVectors: true,\n        autoTranspose: true\n      });\n\n      this.U = svd.rightSingularVectors;\n\n      const singularValues = svd.diagonal;\n      const eigenvalues = [];\n      for (const singularValue of singularValues) {\n        eigenvalues.push((singularValue * singularValue) / (dataset.rows - 1));\n      }\n      this.S = eigenvalues;\n    }\n  }\n\n  /**\n   * Load a PCA model from JSON\n   * @param {Object} model\n   * @return {PCA}\n   */\n  static load(model) {\n    if (typeof model.name !== 'string') {\n      throw new TypeError('model must have a name property');\n    }\n    if (model.name !== 'PCA') {\n      throw new RangeError(`invalid model: ${model.name}`);\n    }\n    return new PCA(true, model);\n  }\n\n  /**\n   * Project the dataset into the PCA space\n   * @param {Matrix} dataset\n   * @param {Object} options\n   * @return {Matrix} dataset projected in the PCA space\n   */\n  predict(dataset, options = {}) {\n    const { nComponents = this.U.columns } = options;\n\n    dataset = new Matrix(dataset);\n    if (this.center) {\n      dataset.subRowVector(this.means);\n      if (this.scale) {\n        dataset.divRowVector(this.stdevs);\n      }\n    }\n\n    var predictions = dataset.mmul(this.U);\n    return predictions.subMatrix(0, predictions.rows - 1, 0, nComponents - 1);\n  }\n\n  /**\n   * Returns the proportion of variance for each component\n   * @return {[number]}\n   */\n  getExplainedVariance() {\n    var sum = 0;\n    for (const s of this.S) {\n      sum += s;\n    }\n    return this.S.map((value) => value / sum);\n  }\n\n  /**\n   * Returns the cumulative proportion of variance\n   * @return {[number]}\n   */\n  getCumulativeVariance() {\n    var explained = this.getExplainedVariance();\n    for (var i = 1; i < explained.length; i++) {\n      explained[i] += explained[i - 1];\n    }\n    return explained;\n  }\n\n  /**\n   * Returns the Eigenvectors of the covariance matrix\n   * @returns {Matrix}\n   */\n  getEigenvectors() {\n    return this.U;\n  }\n\n  /**\n   * Returns the Eigenvalues (on the diagonal)\n   * @returns {[number]}\n   */\n  getEigenvalues() {\n    return this.S;\n  }\n\n  /**\n   * Returns the standard deviations of the principal components\n   * @returns {[number]}\n   */\n  getStandardDeviations() {\n    return this.S.map((x) => Math.sqrt(x));\n  }\n\n  /**\n   * Returns the loadings matrix\n   * @return {Matrix}\n   */\n  getLoadings() {\n    return this.U.transpose();\n  }\n\n  /**\n   * Export the current model to a JSON object\n   * @return {Object} model\n   */\n  toJSON() {\n    return {\n      name: 'PCA',\n      center: this.center,\n      scale: this.scale,\n      means: this.means,\n      stdevs: this.stdevs,\n      U: this.U,\n      S: this.S\n    };\n  }\n\n  _adjust(dataset) {\n    if (this.center) {\n      const mean = dataset.mean('column');\n      const stdevs = this.scale\n        ? dataset.standardDeviation('column', { mean })\n        : null;\n      this.means = mean;\n      dataset.subRowVector(mean);\n      if (this.scale) {\n        for (var i = 0; i < stdevs.length; i++) {\n          if (stdevs[i] === 0) {\n            throw new RangeError(\n              `Cannot scale the dataset (standard deviation is zero at index ${i}`\n            );\n          }\n        }\n        this.stdevs = stdevs;\n        dataset.divRowVector(stdevs);\n      }\n    }\n  }\n\n  _computeFromCovarianceMatrix(dataset) {\n    const evd = new EVD(dataset, { assumeSymmetric: true });\n    this.U = evd.eigenvectorMatrix;\n    this.U.flipRows();\n    this.S = evd.realEigenvalues;\n    this.S.reverse();\n  }\n}\n","export function squaredEuclidean(p, q) {\r\n    let d = 0;\r\n    for (let i = 0; i < p.length; i++) {\r\n        d += (p[i] - q[i]) * (p[i] - q[i]);\r\n    }\r\n    return d;\r\n}\r\nexport function euclidean(p, q) {\r\n    return Math.sqrt(squaredEuclidean(p, q));\r\n}\r\n","'use strict';\n\n\n/**\n * Computes a distance/similarity matrix given an array of data and a distance/similarity function.\n * @param {Array} data An array of data\n * @param {function} distanceFn  A function that accepts two arguments and computes a distance/similarity between them\n * @return {Array<Array>} The similarity matrix. The similarity matrix is square and has a size equal to the length of\n * the data array\n */\nfunction distanceMatrix(data, distanceFn) {\n    const length = data.length;\n    let result = Array.from({length}).map(() => Array.from({length}));\n\n    // Compute upper distance matrix\n    for (let i = 0; i < length; i++) {\n        for (let j = 0; j <= i; j++) {\n            result[i][j] = distanceFn(data[i], data[j]);\n        }\n    }\n\n    // Copy to lower distance matrix\n    for (let i = 0; i < length; i++) {\n        for (let j = i + 1; j < length; j++) {\n            result[i][j] = result[j][i];\n        }\n    }\n\n    return result;\n}\n\nmodule.exports = distanceMatrix;\n","// Generated by CoffeeScript 1.8.0\n(function() {\n  var Heap, defaultCmp, floor, heapify, heappop, heappush, heappushpop, heapreplace, insort, min, nlargest, nsmallest, updateItem, _siftdown, _siftup;\n\n  floor = Math.floor, min = Math.min;\n\n\n  /*\n  Default comparison function to be used\n   */\n\n  defaultCmp = function(x, y) {\n    if (x < y) {\n      return -1;\n    }\n    if (x > y) {\n      return 1;\n    }\n    return 0;\n  };\n\n\n  /*\n  Insert item x in list a, and keep it sorted assuming a is sorted.\n  \n  If x is already in a, insert it to the right of the rightmost x.\n  \n  Optional args lo (default 0) and hi (default a.length) bound the slice\n  of a to be searched.\n   */\n\n  insort = function(a, x, lo, hi, cmp) {\n    var mid;\n    if (lo == null) {\n      lo = 0;\n    }\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    if (lo < 0) {\n      throw new Error('lo must be non-negative');\n    }\n    if (hi == null) {\n      hi = a.length;\n    }\n    while (lo < hi) {\n      mid = floor((lo + hi) / 2);\n      if (cmp(x, a[mid]) < 0) {\n        hi = mid;\n      } else {\n        lo = mid + 1;\n      }\n    }\n    return ([].splice.apply(a, [lo, lo - lo].concat(x)), x);\n  };\n\n\n  /*\n  Push item onto heap, maintaining the heap invariant.\n   */\n\n  heappush = function(array, item, cmp) {\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    array.push(item);\n    return _siftdown(array, 0, array.length - 1, cmp);\n  };\n\n\n  /*\n  Pop the smallest item off the heap, maintaining the heap invariant.\n   */\n\n  heappop = function(array, cmp) {\n    var lastelt, returnitem;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    lastelt = array.pop();\n    if (array.length) {\n      returnitem = array[0];\n      array[0] = lastelt;\n      _siftup(array, 0, cmp);\n    } else {\n      returnitem = lastelt;\n    }\n    return returnitem;\n  };\n\n\n  /*\n  Pop and return the current smallest value, and add the new item.\n  \n  This is more efficient than heappop() followed by heappush(), and can be\n  more appropriate when using a fixed size heap. Note that the value\n  returned may be larger than item! That constrains reasonable use of\n  this routine unless written as part of a conditional replacement:\n      if item > array[0]\n        item = heapreplace(array, item)\n   */\n\n  heapreplace = function(array, item, cmp) {\n    var returnitem;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    returnitem = array[0];\n    array[0] = item;\n    _siftup(array, 0, cmp);\n    return returnitem;\n  };\n\n\n  /*\n  Fast version of a heappush followed by a heappop.\n   */\n\n  heappushpop = function(array, item, cmp) {\n    var _ref;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    if (array.length && cmp(array[0], item) < 0) {\n      _ref = [array[0], item], item = _ref[0], array[0] = _ref[1];\n      _siftup(array, 0, cmp);\n    }\n    return item;\n  };\n\n\n  /*\n  Transform list into a heap, in-place, in O(array.length) time.\n   */\n\n  heapify = function(array, cmp) {\n    var i, _i, _j, _len, _ref, _ref1, _results, _results1;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    _ref1 = (function() {\n      _results1 = [];\n      for (var _j = 0, _ref = floor(array.length / 2); 0 <= _ref ? _j < _ref : _j > _ref; 0 <= _ref ? _j++ : _j--){ _results1.push(_j); }\n      return _results1;\n    }).apply(this).reverse();\n    _results = [];\n    for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n      i = _ref1[_i];\n      _results.push(_siftup(array, i, cmp));\n    }\n    return _results;\n  };\n\n\n  /*\n  Update the position of the given item in the heap.\n  This function should be called every time the item is being modified.\n   */\n\n  updateItem = function(array, item, cmp) {\n    var pos;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    pos = array.indexOf(item);\n    if (pos === -1) {\n      return;\n    }\n    _siftdown(array, 0, pos, cmp);\n    return _siftup(array, pos, cmp);\n  };\n\n\n  /*\n  Find the n largest elements in a dataset.\n   */\n\n  nlargest = function(array, n, cmp) {\n    var elem, result, _i, _len, _ref;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    result = array.slice(0, n);\n    if (!result.length) {\n      return result;\n    }\n    heapify(result, cmp);\n    _ref = array.slice(n);\n    for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n      elem = _ref[_i];\n      heappushpop(result, elem, cmp);\n    }\n    return result.sort(cmp).reverse();\n  };\n\n\n  /*\n  Find the n smallest elements in a dataset.\n   */\n\n  nsmallest = function(array, n, cmp) {\n    var elem, i, los, result, _i, _j, _len, _ref, _ref1, _results;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    if (n * 10 <= array.length) {\n      result = array.slice(0, n).sort(cmp);\n      if (!result.length) {\n        return result;\n      }\n      los = result[result.length - 1];\n      _ref = array.slice(n);\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        elem = _ref[_i];\n        if (cmp(elem, los) < 0) {\n          insort(result, elem, 0, null, cmp);\n          result.pop();\n          los = result[result.length - 1];\n        }\n      }\n      return result;\n    }\n    heapify(array, cmp);\n    _results = [];\n    for (i = _j = 0, _ref1 = min(n, array.length); 0 <= _ref1 ? _j < _ref1 : _j > _ref1; i = 0 <= _ref1 ? ++_j : --_j) {\n      _results.push(heappop(array, cmp));\n    }\n    return _results;\n  };\n\n  _siftdown = function(array, startpos, pos, cmp) {\n    var newitem, parent, parentpos;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    newitem = array[pos];\n    while (pos > startpos) {\n      parentpos = (pos - 1) >> 1;\n      parent = array[parentpos];\n      if (cmp(newitem, parent) < 0) {\n        array[pos] = parent;\n        pos = parentpos;\n        continue;\n      }\n      break;\n    }\n    return array[pos] = newitem;\n  };\n\n  _siftup = function(array, pos, cmp) {\n    var childpos, endpos, newitem, rightpos, startpos;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    endpos = array.length;\n    startpos = pos;\n    newitem = array[pos];\n    childpos = 2 * pos + 1;\n    while (childpos < endpos) {\n      rightpos = childpos + 1;\n      if (rightpos < endpos && !(cmp(array[childpos], array[rightpos]) < 0)) {\n        childpos = rightpos;\n      }\n      array[pos] = array[childpos];\n      pos = childpos;\n      childpos = 2 * pos + 1;\n    }\n    array[pos] = newitem;\n    return _siftdown(array, startpos, pos, cmp);\n  };\n\n  Heap = (function() {\n    Heap.push = heappush;\n\n    Heap.pop = heappop;\n\n    Heap.replace = heapreplace;\n\n    Heap.pushpop = heappushpop;\n\n    Heap.heapify = heapify;\n\n    Heap.updateItem = updateItem;\n\n    Heap.nlargest = nlargest;\n\n    Heap.nsmallest = nsmallest;\n\n    function Heap(cmp) {\n      this.cmp = cmp != null ? cmp : defaultCmp;\n      this.nodes = [];\n    }\n\n    Heap.prototype.push = function(x) {\n      return heappush(this.nodes, x, this.cmp);\n    };\n\n    Heap.prototype.pop = function() {\n      return heappop(this.nodes, this.cmp);\n    };\n\n    Heap.prototype.peek = function() {\n      return this.nodes[0];\n    };\n\n    Heap.prototype.contains = function(x) {\n      return this.nodes.indexOf(x) !== -1;\n    };\n\n    Heap.prototype.replace = function(x) {\n      return heapreplace(this.nodes, x, this.cmp);\n    };\n\n    Heap.prototype.pushpop = function(x) {\n      return heappushpop(this.nodes, x, this.cmp);\n    };\n\n    Heap.prototype.heapify = function() {\n      return heapify(this.nodes, this.cmp);\n    };\n\n    Heap.prototype.updateItem = function(x) {\n      return updateItem(this.nodes, x, this.cmp);\n    };\n\n    Heap.prototype.clear = function() {\n      return this.nodes = [];\n    };\n\n    Heap.prototype.empty = function() {\n      return this.nodes.length === 0;\n    };\n\n    Heap.prototype.size = function() {\n      return this.nodes.length;\n    };\n\n    Heap.prototype.clone = function() {\n      var heap;\n      heap = new Heap();\n      heap.nodes = this.nodes.slice(0);\n      return heap;\n    };\n\n    Heap.prototype.toArray = function() {\n      return this.nodes.slice(0);\n    };\n\n    Heap.prototype.insert = Heap.prototype.push;\n\n    Heap.prototype.top = Heap.prototype.peek;\n\n    Heap.prototype.front = Heap.prototype.peek;\n\n    Heap.prototype.has = Heap.prototype.contains;\n\n    Heap.prototype.copy = Heap.prototype.clone;\n\n    return Heap;\n\n  })();\n\n  (function(root, factory) {\n    if (typeof define === 'function' && define.amd) {\n      return define([], factory);\n    } else if (typeof exports === 'object') {\n      return module.exports = factory();\n    } else {\n      return root.Heap = factory();\n    }\n  })(this, function() {\n    return Heap;\n  });\n\n}).call(this);\n","module.exports = require('./lib/heap');\n","import Heap from 'heap';\n\nexport default class Cluster {\n  constructor() {\n    this.children = [];\n    this.distance = -1;\n    this.index = [];\n  }\n\n  /**\n   * Creates an array of values where maximum distance smaller than the threshold\n   * @param {number} threshold\n   * @return {Array <Cluster>}\n   */\n  cut(threshold) {\n    if (threshold < 0) throw new RangeError('Threshold too small');\n    var root = new Cluster();\n    root.children = this.children;\n    root.distance = this.distance;\n    root.index = this.index;\n    var list = [root];\n    var ans = [];\n    while (list.length > 0) {\n      var aux = list.shift();\n      if (threshold >= aux.distance) {\n        ans.push(aux);\n      } else {\n        list = list.concat(aux.children);\n      }\n    }\n    return ans;\n  }\n\n  /**\n   * Merge the leaves in the minimum way to have 'minGroups' number of clusters\n   * @param {number} minGroups - Them minimum number of children the first level of the tree should have\n   * @return {Cluster}\n   */\n  group(minGroups) {\n    if (!Number.isInteger(minGroups) || minGroups < 1) {\n      throw new RangeError('Number of groups must be a positive integer');\n    }\n\n    const heap = new Heap(function (a, b) {\n      return b.distance - a.distance;\n    });\n\n    heap.push(this);\n\n    while (heap.size() < minGroups) {\n      var first = heap.pop();\n      if (first.children.length === 0) {\n        break;\n      }\n      first.children.forEach((child) => heap.push(child));\n    }\n\n    var root = new Cluster();\n    root.children = heap.toArray();\n    root.distance = this.distance;\n\n    return root;\n  }\n\n  /**\n   * Traverses the tree depth-first and provide callback to be called on each individual node\n   * @param {function} cb - The callback to be called on each node encounter\n   * @type {Cluster}\n   */\n  traverse(cb) {\n    function visit(root, callback) {\n      callback(root);\n      if (root.children) {\n        for (var i = root.children.length - 1; i >= 0; i--) {\n          visit(root.children[i], callback);\n        }\n      }\n    }\n    visit(this, cb);\n  }\n}\n","import Cluster from './Cluster';\n\nexport default class ClusterLeaf extends Cluster {\n  constructor(index) {\n    super();\n    this.index = index;\n    this.distance = 0;\n    this.children = [];\n  }\n}\n","import { euclidean } from 'ml-distance-euclidean';\nimport distanceMatrix from 'ml-distance-matrix';\n\nimport ClusterLeaf from './ClusterLeaf';\nimport Cluster from './Cluster';\n\n/**\n * @private\n * @param cluster1\n * @param cluster2\n * @param disFun\n * @returns {number}\n */\nfunction simpleLink(cluster1, cluster2, disFun) {\n  var m = 10e100;\n  for (var i = 0; i < cluster1.length; i++) {\n    for (var j = 0; j < cluster2.length; j++) {\n      var d = disFun[cluster1[i]][cluster2[j]];\n      m = Math.min(d, m);\n    }\n  }\n  return m;\n}\n\n/**\n * @private\n * @param cluster1\n * @param cluster2\n * @param disFun\n * @returns {number}\n */\nfunction completeLink(cluster1, cluster2, disFun) {\n  var m = -1;\n  for (var i = 0; i < cluster1.length; i++) {\n    for (var j = 0; j < cluster2.length; j++) {\n      var d = disFun[cluster1[i]][cluster2[j]];\n      m = Math.max(d, m);\n    }\n  }\n  return m;\n}\n\n/**\n * @private\n * @param cluster1\n * @param cluster2\n * @param disFun\n * @returns {number}\n */\nfunction averageLink(cluster1, cluster2, disFun) {\n  var m = 0;\n  for (var i = 0; i < cluster1.length; i++) {\n    for (var j = 0; j < cluster2.length; j++) {\n      m += disFun[cluster1[i]][cluster2[j]];\n    }\n  }\n  return m / (cluster1.length * cluster2.length);\n}\n\n/**\n * @private\n * @param cluster1\n * @param cluster2\n * @param disFun\n * @returns {*}\n */\nfunction centroidLink(cluster1, cluster2, disFun) {\n  var dist = new Array(cluster1.length * cluster2.length);\n  for (var i = 0; i < cluster1.length; i++) {\n    for (var j = 0; j < cluster2.length; j++) {\n      dist[i * cluster2.length + j] = disFun[cluster1[i]][cluster2[j]];\n    }\n  }\n  return median(dist);\n}\n\n/**\n * @private\n * @param cluster1\n * @param cluster2\n * @param disFun\n * @returns {number}\n */\nfunction wardLink(cluster1, cluster2, disFun) {\n  return (\n    (centroidLink(cluster1, cluster2, disFun) *\n      cluster1.length *\n      cluster2.length) /\n    (cluster1.length + cluster2.length)\n  );\n}\n\nfunction compareNumbers(a, b) {\n  return a - b;\n}\n\nfunction median(values, alreadySorted) {\n  if (alreadySorted === undefined) alreadySorted = false;\n  if (!alreadySorted) {\n    values = [].concat(values).sort(compareNumbers);\n  }\n  var l = values.length;\n  var half = Math.floor(l / 2);\n  if (l % 2 === 0) {\n    return (values[half - 1] + values[half]) * 0.5;\n  } else {\n    return values[half];\n  }\n}\n\n/**\n * Continuously merge nodes that have the least dissimilarity\n * @param {Array<Array<number>>} distance - Array of points to be clustered\n * @param {object} [options]\n * @param {Function} [options.distanceFunction]\n * @param {string} [options.method]\n * @param {boolean} [options.isDistanceMatrix]\n * @option isDistanceMatrix: Is the input a distance matrix?\n * @constructor\n */\nexport function agnes(data, options = {}) {\n  const {\n    distanceFunction = euclidean,\n    method = 'single',\n    isDistanceMatrix = false\n  } = options;\n  let methodFunc;\n\n  var len = data.length;\n  var distance = data; // If source\n  if (!isDistanceMatrix) {\n    distance = distanceMatrix(data, distanceFunction);\n  }\n\n  // allows to use a string or a given function\n  if (typeof method === 'string') {\n    switch (method) {\n      case 'single':\n        methodFunc = simpleLink;\n        break;\n      case 'complete':\n        methodFunc = completeLink;\n        break;\n      case 'average':\n        methodFunc = averageLink;\n        break;\n      case 'centroid':\n        methodFunc = centroidLink;\n        break;\n      case 'ward':\n        methodFunc = wardLink;\n        break;\n      default:\n        throw new RangeError(`unknown clustering method: ${method}`);\n    }\n  } else if (typeof method !== 'function') {\n    throw new TypeError('method must be a string or function');\n  }\n\n  var list = new Array(len);\n  for (var i = 0; i < distance.length; i++) {\n    list[i] = new ClusterLeaf(i);\n  }\n  var min = 10e5;\n  var d = {};\n  var dis = 0;\n\n  while (list.length > 1) {\n    // calculates the minimum distance\n    d = {};\n    min = 10e5;\n    for (var j = 0; j < list.length; j++) {\n      for (var k = j + 1; k < list.length; k++) {\n        var fdistance, sdistance;\n        if (list[j] instanceof ClusterLeaf) {\n          fdistance = [list[j].index];\n        } else {\n          fdistance = new Array(list[j].index.length);\n          for (var e = 0; e < fdistance.length; e++) {\n            fdistance[e] = list[j].index[e].index;\n          }\n        }\n        if (list[k] instanceof ClusterLeaf) {\n          sdistance = [list[k].index];\n        } else {\n          sdistance = new Array(list[k].index.length);\n          for (var f = 0; f < sdistance.length; f++) {\n            sdistance[f] = list[k].index[f].index;\n          }\n        }\n        dis = methodFunc(fdistance, sdistance, distance).toFixed(4);\n        if (dis in d) {\n          d[dis].push([list[j], list[k]]);\n        } else {\n          d[dis] = [[list[j], list[k]]];\n        }\n        min = Math.min(dis, min);\n      }\n    }\n    // cluster dots\n    var dmin = d[min.toFixed(4)];\n    var clustered = new Array(dmin.length);\n    var count = 0;\n    while (dmin.length > 0) {\n      let aux = dmin.shift();\n      const filterInt = function (n) {\n        return aux.indexOf(n) !== -1;\n      };\n      const filterDiff = function (n) {\n        return aux.indexOf(n) === -1;\n      };\n      for (var q = 0; q < dmin.length; q++) {\n        var int = dmin[q].filter(filterInt);\n        if (int.length > 0) {\n          var diff = dmin[q].filter(filterDiff);\n          aux = aux.concat(diff);\n          dmin.splice(q--, 1);\n        }\n      }\n      clustered[count++] = aux;\n    }\n    clustered.length = count;\n\n    for (var ii = 0; ii < clustered.length; ii++) {\n      var obj = new Cluster();\n      obj.children = clustered[ii].concat();\n      obj.distance = min;\n      obj.index = new Array(len);\n      var indCount = 0;\n      for (var jj = 0; jj < clustered[ii].length; jj++) {\n        if (clustered[ii][jj] instanceof ClusterLeaf) {\n          obj.index[indCount++] = clustered[ii][jj];\n        } else {\n          indCount += clustered[ii][jj].index.length;\n          obj.index = clustered[ii][jj].index.concat(obj.index);\n        }\n        list.splice(list.indexOf(clustered[ii][jj]), 1);\n      }\n      obj.index.length = indCount;\n      list.push(obj);\n    }\n  }\n  return list[0];\n}\n","import { euclidean } from 'ml-distance-euclidean';\n\nimport ClusterLeaf from './ClusterLeaf';\nimport Cluster from './Cluster';\n\n/**\n * @private\n * Returns the most distant point and his distance\n * @param {Array <Array <number>>} splitting - Clusters to split\n * @param {Array <Array <number>>} data - Original data\n * @param {function} disFun - Distance function\n * @returns {{d: number, p: number}} - d: maximum difference between points, p: the point more distant\n */\nfunction diff(splitting, data, disFun) {\n  var ans = {\n    d: 0,\n    p: 0\n  };\n\n  var Ci = new Array(splitting[0].length);\n  for (var e = 0; e < splitting[0].length; e++) {\n    Ci[e] = data[splitting[0][e]];\n  }\n  var Cj = new Array(splitting[1].length);\n  for (var f = 0; f < splitting[1].length; f++) {\n    Cj[f] = data[splitting[1][f]];\n  }\n\n  var dist, ndist;\n  for (var i = 0; i < Ci.length; i++) {\n    dist = 0;\n    for (var j = 0; j < Ci.length; j++) {\n      if (i !== j) {\n        dist += disFun(Ci[i], Ci[j]);\n      }\n    }\n    dist /= Ci.length - 1;\n    ndist = 0;\n    for (var k = 0; k < Cj.length; k++) {\n      ndist += disFun(Ci[i], Cj[k]);\n    }\n    ndist /= Cj.length;\n    if (dist - ndist > ans.d) {\n      ans.d = dist - ndist;\n      ans.p = i;\n    }\n  }\n  return ans;\n}\n\n/**\n * @private\n * Intra-cluster distance\n * @param {Array} index\n * @param {Array} data\n * @param {function} disFun\n * @returns {number}\n */\nfunction intrDist(index, data, disFun) {\n  var dist = 0;\n  var count = 0;\n  for (var i = 0; i < index.length; i++) {\n    for (var j = i; j < index.length; j++) {\n      dist += disFun(data[index[i].index], data[index[j].index]);\n      count++;\n    }\n  }\n  return dist / count;\n}\n\n/**\n * Splits the higher level clusters\n * @param {Array <Array <number>>} data - Array of points to be clustered\n * @param {object} [options]\n * @param {Function} [options.distanceFunction]\n * @constructor\n */\nexport function diana(data, options = {}) {\n  const { distanceFunction = euclidean } = options;\n  var tree = new Cluster();\n  tree.children = new Array(data.length);\n  tree.index = new Array(data.length);\n  for (var ind = 0; ind < data.length; ind++) {\n    tree.children[ind] = new ClusterLeaf(ind);\n    tree.index[ind] = new ClusterLeaf(ind);\n  }\n\n  tree.distance = intrDist(tree.index, data, distanceFunction);\n  var m, M, clId, dist, rebel;\n  var list = [tree];\n  while (list.length > 0) {\n    M = 0;\n    clId = 0;\n    for (var i = 0; i < list.length; i++) {\n      m = 0;\n      for (var j = 0; j < list[i].length; j++) {\n        for (var l = j + 1; l < list[i].length; l++) {\n          m = Math.max(\n            distanceFunction(\n              data[list[i].index[j].index],\n              data[list[i].index[l].index]\n            ),\n            m\n          );\n        }\n      }\n      if (m > M) {\n        M = m;\n        clId = i;\n      }\n    }\n    M = 0;\n    if (list[clId].index.length === 2) {\n      list[clId].children = [list[clId].index[0], list[clId].index[1]];\n      list[clId].distance = distanceFunction(\n        data[list[clId].index[0].index],\n        data[list[clId].index[1].index]\n      );\n    } else if (list[clId].index.length === 3) {\n      list[clId].children = [\n        list[clId].index[0],\n        list[clId].index[1],\n        list[clId].index[2]\n      ];\n      var d = [\n        distanceFunction(\n          data[list[clId].index[0].index],\n          data[list[clId].index[1].index]\n        ),\n        distanceFunction(\n          data[list[clId].index[1].index],\n          data[list[clId].index[2].index]\n        )\n      ];\n      list[clId].distance = (d[0] + d[1]) / 2;\n    } else {\n      var C = new Cluster();\n      var sG = new Cluster();\n      var splitting = [new Array(list[clId].index.length), []];\n      for (var spl = 0; spl < splitting[0].length; spl++) {\n        splitting[0][spl] = spl;\n      }\n      for (var ii = 0; ii < splitting[0].length; ii++) {\n        dist = 0;\n        for (var jj = 0; jj < splitting[0].length; jj++) {\n          if (ii !== jj) {\n            dist += distanceFunction(\n              data[list[clId].index[splitting[0][jj]].index],\n              data[list[clId].index[splitting[0][ii]].index]\n            );\n          }\n        }\n        dist /= splitting[0].length - 1;\n        if (dist > M) {\n          M = dist;\n          rebel = ii;\n        }\n      }\n      splitting[1] = [rebel];\n      splitting[0].splice(rebel, 1);\n      dist = diff(splitting, data, distanceFunction);\n      while (dist.d > 0) {\n        splitting[1].push(splitting[0][dist.p]);\n        splitting[0].splice(dist.p, 1);\n        dist = diff(splitting, data, distanceFunction);\n      }\n      var fData = new Array(splitting[0].length);\n      C.index = new Array(splitting[0].length);\n      for (var e = 0; e < fData.length; e++) {\n        fData[e] = data[list[clId].index[splitting[0][e]].index];\n        C.index[e] = list[clId].index[splitting[0][e]];\n        C.children[e] = list[clId].index[splitting[0][e]];\n      }\n      var sData = new Array(splitting[1].length);\n      sG.index = new Array(splitting[1].length);\n      for (var f = 0; f < sData.length; f++) {\n        sData[f] = data[list[clId].index[splitting[1][f]].index];\n        sG.index[f] = list[clId].index[splitting[1][f]];\n        sG.children[f] = list[clId].index[splitting[1][f]];\n      }\n      C.distance = intrDist(C.index, data, distanceFunction);\n      sG.distance = intrDist(sG.index, data, distanceFunction);\n      list.push(C);\n      list.push(sG);\n      list[clId].children = [C, sG];\n    }\n    list.splice(clId, 1);\n  }\n  return tree;\n}\n","export * from './agnes';\nexport * from './diana';\n// export * from './birch';\n// export * './cure';\n// export * from './chameleon';\n","'use strict';\nimport { squaredEuclidean } from 'ml-distance-euclidean';\nconst defaultOptions = {\n    distanceFunction: squaredEuclidean\n};\nexport default function nearestVector(listVectors, vector, options = defaultOptions) {\n    const distanceFunction = options.distanceFunction || defaultOptions.distanceFunction;\n    const similarityFunction = options.similarityFunction || defaultOptions.similarityFunction;\n    let vectorIndex = -1;\n    if (typeof similarityFunction === 'function') {\n        // maximum similarity\n        let maxSim = Number.MIN_VALUE;\n        for (let j = 0; j < listVectors.length; j++) {\n            const sim = similarityFunction(vector, listVectors[j]);\n            if (sim > maxSim) {\n                maxSim = sim;\n                vectorIndex = j;\n            }\n        }\n    }\n    else if (typeof distanceFunction === 'function') {\n        // minimum distance\n        let minDist = Number.MAX_VALUE;\n        for (let i = 0; i < listVectors.length; i++) {\n            const dist = distanceFunction(vector, listVectors[i]);\n            if (dist < minDist) {\n                minDist = dist;\n                vectorIndex = i;\n            }\n        }\n    }\n    else {\n        throw new Error(\"A similarity or distance function it's required\");\n    }\n    return vectorIndex;\n}\nexport function findNearestVector(vectorList, vector, options = defaultOptions) {\n    const index = nearestVector(vectorList, vector, options);\n    return vectorList[index];\n}\n","import nearestVector from 'ml-nearest-vector';\n\n/**\n * Calculates the distance matrix for a given array of points\n * @ignore\n * @param {Array<Array<number>>} data - the [x,y,z,...] points to cluster\n * @param {function} distance - Distance function to use between the points\n * @return {Array<Array<number>>} - matrix with the distance values\n */\nexport function calculateDistanceMatrix(data, distance) {\n  var distanceMatrix = new Array(data.length);\n  for (var i = 0; i < data.length; ++i) {\n    for (var j = i; j < data.length; ++j) {\n      if (!distanceMatrix[i]) {\n        distanceMatrix[i] = new Array(data.length);\n      }\n      if (!distanceMatrix[j]) {\n        distanceMatrix[j] = new Array(data.length);\n      }\n      const dist = distance(data[i], data[j]);\n      distanceMatrix[i][j] = dist;\n      distanceMatrix[j][i] = dist;\n    }\n  }\n  return distanceMatrix;\n}\n\n/**\n * Updates the cluster identifier based in the new data\n * @ignore\n * @param {Array<Array<number>>} data - the [x,y,z,...] points to cluster\n * @param {Array<Array<number>>} centers - the K centers in format [x,y,z,...]\n * @param {Array <number>} clusterID - the cluster identifier for each data dot\n * @param {function} distance - Distance function to use between the points\n * @return {Array} the cluster identifier for each data dot\n */\nexport function updateClusterID(data, centers, clusterID, distance) {\n  for (var i = 0; i < data.length; i++) {\n    clusterID[i] = nearestVector(centers, data[i], {\n      distanceFunction: distance\n    });\n  }\n  return clusterID;\n}\n\n/**\n * Update the center values based in the new configurations of the clusters\n * @ignore\n * @param {Array<Array<number>>} prevCenters - Centroids from the previous iteration\n * @param {Array <Array <number>>} data - the [x,y,z,...] points to cluster\n * @param {Array <number>} clusterID - the cluster identifier for each data dot\n * @param {number} K - Number of clusters\n * @return {Array} he K centers in format [x,y,z,...]\n */\nexport function updateCenters(prevCenters, data, clusterID, K) {\n  const nDim = data[0].length;\n\n  // copy previous centers\n  var centers = new Array(K);\n  var centersLen = new Array(K);\n  for (var i = 0; i < K; i++) {\n    centers[i] = new Array(nDim);\n    centersLen[i] = 0;\n    for (var j = 0; j < nDim; j++) {\n      centers[i][j] = 0;\n    }\n  }\n\n  // add the value for all dimensions of the point\n  for (var l = 0; l < data.length; l++) {\n    centersLen[clusterID[l]]++;\n    for (var dim = 0; dim < nDim; dim++) {\n      centers[clusterID[l]][dim] += data[l][dim];\n    }\n  }\n\n  // divides by length\n  for (var id = 0; id < K; id++) {\n    for (var d = 0; d < nDim; d++) {\n      if (centersLen[id]) {\n        centers[id][d] /= centersLen[id];\n      } else {\n        centers[id][d] = prevCenters[id][d];\n      }\n    }\n  }\n  return centers;\n}\n\n/**\n * The centers have moved more than the tolerance value?\n * @ignore\n * @param {Array<Array<number>>} centers - the K centers in format [x,y,z,...]\n * @param {Array<Array<number>>} oldCenters - the K old centers in format [x,y,z,...]\n * @param {function} distanceFunction - Distance function to use between the points\n * @param {number} tolerance - Allowed distance for the centroids to move\n * @return {boolean}\n */\nexport function hasConverged(centers, oldCenters, distanceFunction, tolerance) {\n  for (var i = 0; i < centers.length; i++) {\n    if (distanceFunction(centers[i], oldCenters[i]) > tolerance) {\n      return false;\n    }\n  }\n  return true;\n}\n","const LOOP = 8;\nconst FLOAT_MUL = 1 / 16777216;\nconst sh1 = 15;\nconst sh2 = 18;\nconst sh3 = 11;\nfunction multiply_uint32(n, m) {\n    n >>>= 0;\n    m >>>= 0;\n    const nlo = n & 0xffff;\n    const nhi = n - nlo;\n    return (((nhi * m) >>> 0) + nlo * m) >>> 0;\n}\nexport default class XSadd {\n    constructor(seed = Date.now()) {\n        this.state = new Uint32Array(4);\n        this.init(seed);\n        this.random = this.getFloat.bind(this);\n    }\n    /**\n     * Returns a 32-bit integer r (0 <= r < 2^32)\n     */\n    getUint32() {\n        this.nextState();\n        return (this.state[3] + this.state[2]) >>> 0;\n    }\n    /**\n     * Returns a floating point number r (0.0 <= r < 1.0)\n     */\n    getFloat() {\n        return (this.getUint32() >>> 8) * FLOAT_MUL;\n    }\n    init(seed) {\n        if (!Number.isInteger(seed)) {\n            throw new TypeError('seed must be an integer');\n        }\n        this.state[0] = seed;\n        this.state[1] = 0;\n        this.state[2] = 0;\n        this.state[3] = 0;\n        for (let i = 1; i < LOOP; i++) {\n            this.state[i & 3] ^=\n                (i +\n                    multiply_uint32(1812433253, this.state[(i - 1) & 3] ^ ((this.state[(i - 1) & 3] >>> 30) >>> 0))) >>>\n                    0;\n        }\n        this.periodCertification();\n        for (let i = 0; i < LOOP; i++) {\n            this.nextState();\n        }\n    }\n    periodCertification() {\n        if (this.state[0] === 0 &&\n            this.state[1] === 0 &&\n            this.state[2] === 0 &&\n            this.state[3] === 0) {\n            this.state[0] = 88; // X\n            this.state[1] = 83; // S\n            this.state[2] = 65; // A\n            this.state[3] = 68; // D\n        }\n    }\n    nextState() {\n        let t = this.state[0];\n        t ^= t << sh1;\n        t ^= t >>> sh2;\n        t ^= this.state[3] << sh3;\n        this.state[0] = this.state[1];\n        this.state[1] = this.state[2];\n        this.state[2] = this.state[3];\n        this.state[3] = t;\n    }\n}\n","const PROB_TOLERANCE = 0.00000001;\nfunction randomChoice(values, options = {}, random = Math.random) {\n    const { size = 1, replace = false, probabilities } = options;\n    let valuesArr;\n    let cumSum;\n    if (typeof values === 'number') {\n        valuesArr = getArray(values);\n    }\n    else {\n        valuesArr = values.slice();\n    }\n    if (probabilities) {\n        if (!replace) {\n            throw new Error('choice with probabilities and no replacement is not implemented');\n        }\n        // check input is sane\n        if (probabilities.length !== valuesArr.length) {\n            throw new Error('the length of probabilities option should be equal to the number of choices');\n        }\n        cumSum = [probabilities[0]];\n        for (let i = 1; i < probabilities.length; i++) {\n            cumSum[i] = cumSum[i - 1] + probabilities[i];\n        }\n        if (Math.abs(1 - cumSum[cumSum.length - 1]) > PROB_TOLERANCE) {\n            throw new Error(`probabilities should sum to 1, but instead sums to ${cumSum[cumSum.length - 1]}`);\n        }\n    }\n    if (replace === false && size > valuesArr.length) {\n        throw new Error('size option is too large');\n    }\n    const result = [];\n    for (let i = 0; i < size; i++) {\n        const index = randomIndex(valuesArr.length, random, cumSum);\n        result.push(valuesArr[index]);\n        if (!replace) {\n            valuesArr.splice(index, 1);\n        }\n    }\n    return result;\n}\nfunction getArray(n) {\n    const arr = [];\n    for (let i = 0; i < n; i++) {\n        arr.push(i);\n    }\n    return arr;\n}\nfunction randomIndex(n, random, cumSum) {\n    const rand = random();\n    if (!cumSum) {\n        return Math.floor(rand * n);\n    }\n    else {\n        let idx = 0;\n        while (rand > cumSum[idx]) {\n            idx++;\n        }\n        return idx;\n    }\n}\nexport default randomChoice;\n","// tslint:disable-next-line\nimport XSAdd from 'ml-xsadd';\nimport choice from './choice';\n/**\n * @classdesc Random class\n */\nexport default class Random {\n    /**\n     * @param [seedOrRandom=Math.random] - Control the random number generator used by the Random class instance. Pass a random number generator function with a uniform distribution over the half-open interval [0, 1[. If seed will pass it to ml-xsadd to create a seeded random number generator. If undefined will use Math.random.\n     */\n    constructor(seedOrRandom = Math.random) {\n        if (typeof seedOrRandom === 'number') {\n            const xsadd = new XSAdd(seedOrRandom);\n            this.randomGenerator = xsadd.random;\n        }\n        else {\n            this.randomGenerator = seedOrRandom;\n        }\n    }\n    choice(values, options) {\n        if (typeof values === 'number') {\n            return choice(values, options, this.randomGenerator);\n        }\n        return choice(values, options, this.randomGenerator);\n    }\n    /**\n     * Draw a random number from a uniform distribution on [0,1)\n     * @return The random number\n     */\n    random() {\n        return this.randomGenerator();\n    }\n    /**\n     * Draw a random integer from a uniform distribution on [low, high). If only low is specified, the number is drawn on [0, low)\n     * @param low - The lower bound of the uniform distribution interval.\n     * @param high - The higher bound of the uniform distribution interval.\n     */\n    randInt(low, high) {\n        if (high === undefined) {\n            high = low;\n            low = 0;\n        }\n        return low + Math.floor(this.randomGenerator() * (high - low));\n    }\n    /**\n     * Draw several random number from a uniform distribution on [0, 1)\n     * @param size - The number of number to draw\n     * @return - The list of drawn numbers.\n     */\n    randomSample(size) {\n        const result = [];\n        for (let i = 0; i < size; i++) {\n            result.push(this.random());\n        }\n        return result;\n    }\n}\n","import Random from 'ml-random';\nimport { squaredEuclidean } from 'ml-distance-euclidean';\nimport { Matrix } from 'ml-matrix';\n\n/**\n * Choose K different random points from the original data\n * @ignore\n * @param {Array<Array<number>>} data - Points in the format to cluster [x,y,z,...]\n * @param {number} K - number of clusters\n * @param {number} seed - seed for random number generation\n * @return {Array<Array<number>>} - Initial random points\n */\nexport function random(data, K, seed) {\n  const random = new Random(seed);\n  return random.choice(data, { size: K });\n}\n\n/**\n * Chooses the most distant points to a first random pick\n * @ignore\n * @param {Array<Array<number>>} data - Points in the format to cluster [x,y,z,...]\n * @param {number} K - number of clusters\n * @param {Array<Array<number>>} distanceMatrix - matrix with the distance values\n * @param {number} seed - seed for random number generation\n * @return {Array<Array<number>>} - Initial random points\n */\nexport function mostDistant(data, K, distanceMatrix, seed) {\n  const random = new Random(seed);\n  var ans = new Array(K);\n  // chooses a random point as initial cluster\n  ans[0] = Math.floor(random.random() * data.length);\n\n  if (K > 1) {\n    // chooses the more distant point\n    var maxDist = { dist: -1, index: -1 };\n    for (var l = 0; l < data.length; ++l) {\n      if (distanceMatrix[ans[0]][l] > maxDist.dist) {\n        maxDist.dist = distanceMatrix[ans[0]][l];\n        maxDist.index = l;\n      }\n    }\n    ans[1] = maxDist.index;\n\n    if (K > 2) {\n      // chooses the set of points that maximises the min distance\n      for (var k = 2; k < K; ++k) {\n        var center = { dist: -1, index: -1 };\n        for (var m = 0; m < data.length; ++m) {\n          // minimum distance to centers\n          var minDistCent = { dist: Number.MAX_VALUE, index: -1 };\n          for (var n = 0; n < k; ++n) {\n            if (\n              distanceMatrix[n][m] < minDistCent.dist &&\n              ans.indexOf(m) === -1\n            ) {\n              minDistCent = {\n                dist: distanceMatrix[n][m],\n                index: m\n              };\n            }\n          }\n\n          if (\n            minDistCent.dist !== Number.MAX_VALUE &&\n            minDistCent.dist > center.dist\n          ) {\n            center = Object.assign({}, minDistCent);\n          }\n        }\n\n        ans[k] = center.index;\n      }\n    }\n  }\n\n  return ans.map((index) => data[index]);\n}\n\n// Implementation inspired from scikit\nexport function kmeanspp(X, K, options = {}) {\n  X = new Matrix(X);\n  const nSamples = X.rows;\n  const random = new Random(options.seed);\n  // Set the number of trials\n  const centers = [];\n  const localTrials = options.localTrials || 2 + Math.floor(Math.log(K));\n\n  // Pick the first center at random from the dataset\n  const firstCenterIdx = random.randInt(nSamples);\n  centers.push(X.getRow(firstCenterIdx));\n\n  // Init closest distances\n  let closestDistSquared = new Matrix(1, X.rows);\n  for (let i = 0; i < X.rows; i++) {\n    closestDistSquared.set(0, i, squaredEuclidean(X.getRow(i), centers[0]));\n  }\n  let cumSumClosestDistSquared = [cumSum(closestDistSquared.getRow(0))];\n  const factor = 1 / cumSumClosestDistSquared[0][nSamples - 1];\n  let probabilities = Matrix.mul(closestDistSquared, factor);\n\n  // Iterate over the remaining centers\n  for (let i = 1; i < K; i++) {\n    const candidateIdx = random.choice(nSamples, {\n      replace: true,\n      size: localTrials,\n      probabilities: probabilities[0]\n    });\n\n    const candidates = X.selection(candidateIdx, range(X.columns));\n    const distanceToCandidates = euclideanDistances(candidates, X);\n\n    let bestCandidate;\n    let bestPot;\n    let bestDistSquared;\n\n    for (let j = 0; j < localTrials; j++) {\n      const newDistSquared = Matrix.min(closestDistSquared, [distanceToCandidates.getRow(j)]);\n      const newPot = newDistSquared.sum();\n      if (bestCandidate === undefined || newPot < bestPot) {\n        bestCandidate = candidateIdx[j];\n        bestPot = newPot;\n        bestDistSquared = newDistSquared;\n      }\n    }\n    centers[i] = X.getRow(bestCandidate);\n    closestDistSquared = bestDistSquared;\n    cumSumClosestDistSquared = [cumSum(closestDistSquared.getRow(0))];\n    probabilities = Matrix.mul(\n      closestDistSquared,\n      1 / cumSumClosestDistSquared[0][nSamples - 1]\n    );\n  }\n  return centers;\n}\n\nfunction euclideanDistances(A, B) {\n  const result = new Matrix(A.rows, B.rows);\n  for (let i = 0; i < A.rows; i++) {\n    for (let j = 0; j < B.rows; j++) {\n      result.set(i, j, squaredEuclidean(A.getRow(i), B.getRow(j)));\n    }\n  }\n  return result;\n}\n\nfunction range(l) {\n  let r = [];\n  for (let i = 0; i < l; i++) {\n    r.push(i);\n  }\n  return r;\n}\n\nfunction cumSum(arr) {\n  let cumSum = [arr[0]];\n  for (let i = 1; i < arr.length; i++) {\n    cumSum[i] = cumSum[i - 1] + arr[i];\n  }\n  return cumSum;\n}\n","import { updateClusterID } from './utils';\n\nconst distanceSymbol = Symbol('distance');\n\nexport default class KMeansResult {\n  /**\n   * Result of the kmeans algorithm\n   * @param {Array<number>} clusters - the cluster identifier for each data dot\n   * @param {Array<Array<object>>} centroids - the K centers in format [x,y,z,...], the error and size of the cluster\n   * @param {boolean} converged - Converge criteria satisfied\n   * @param {number} iterations - Current number of iterations\n   * @param {function} distance - (*Private*) Distance function to use between the points\n   * @constructor\n   */\n  constructor(clusters, centroids, converged, iterations, distance) {\n    this.clusters = clusters;\n    this.centroids = centroids;\n    this.converged = converged;\n    this.iterations = iterations;\n    this[distanceSymbol] = distance;\n  }\n\n  /**\n   * Allows to compute for a new array of points their cluster id\n   * @param {Array<Array<number>>} data - the [x,y,z,...] points to cluster\n   * @return {Array<number>} - cluster id for each point\n   */\n  nearest(data) {\n    const clusterID = new Array(data.length);\n    const centroids = this.centroids.map(function (centroid) {\n      return centroid.centroid;\n    });\n    return updateClusterID(data, centroids, clusterID, this[distanceSymbol]);\n  }\n\n  /**\n   * Returns a KMeansResult with the error and size of the cluster\n   * @ignore\n   * @param {Array<Array<number>>} data - the [x,y,z,...] points to cluster\n   * @return {KMeansResult}\n   */\n  computeInformation(data) {\n    var enrichedCentroids = this.centroids.map(function (centroid) {\n      return {\n        centroid: centroid,\n        error: 0,\n        size: 0\n      };\n    });\n\n    for (var i = 0; i < data.length; i++) {\n      enrichedCentroids[this.clusters[i]].error += this[distanceSymbol](\n        data[i],\n        this.centroids[this.clusters[i]]\n      );\n      enrichedCentroids[this.clusters[i]].size++;\n    }\n\n    for (var j = 0; j < this.centroids.length; j++) {\n      if (enrichedCentroids[j].size) {\n        enrichedCentroids[j].error /= enrichedCentroids[j].size;\n      } else {\n        enrichedCentroids[j].error = null;\n      }\n    }\n\n    return new KMeansResult(\n      this.clusters,\n      enrichedCentroids,\n      this.converged,\n      this.iterations,\n      this[distanceSymbol]\n    );\n  }\n}\n","import { squaredEuclidean } from 'ml-distance-euclidean';\n\nimport {\n  updateClusterID,\n  updateCenters,\n  hasConverged,\n  calculateDistanceMatrix\n} from './utils';\nimport { mostDistant, random, kmeanspp } from './initialization';\nimport KMeansResult from './KMeansResult';\n\nconst defaultOptions = {\n  maxIterations: 100,\n  tolerance: 1e-6,\n  withIterations: false,\n  initialization: 'kmeans++',\n  distanceFunction: squaredEuclidean\n};\n\n/**\n * Each step operation for kmeans\n * @ignore\n * @param {Array<Array<number>>} centers - K centers in format [x,y,z,...]\n * @param {Array<Array<number>>} data - Points [x,y,z,...] to cluster\n * @param {Array<number>} clusterID - Cluster identifier for each data dot\n * @param {number} K - Number of clusters\n * @param {object} [options] - Option object\n * @param {number} iterations - Current number of iterations\n * @return {KMeansResult}\n */\nfunction step(centers, data, clusterID, K, options, iterations) {\n  clusterID = updateClusterID(\n    data,\n    centers,\n    clusterID,\n    options.distanceFunction\n  );\n  var newCenters = updateCenters(centers, data, clusterID, K);\n  var converged = hasConverged(\n    newCenters,\n    centers,\n    options.distanceFunction,\n    options.tolerance\n  );\n  return new KMeansResult(\n    clusterID,\n    newCenters,\n    converged,\n    iterations,\n    options.distanceFunction\n  );\n}\n\n/**\n * Generator version for the algorithm\n * @ignore\n * @param {Array<Array<number>>} centers - K centers in format [x,y,z,...]\n * @param {Array<Array<number>>} data - Points [x,y,z,...] to cluster\n * @param {Array<number>} clusterID - Cluster identifier for each data dot\n * @param {number} K - Number of clusters\n * @param {object} [options] - Option object\n */\nfunction* kmeansGenerator(centers, data, clusterID, K, options) {\n  var converged = false;\n  var stepNumber = 0;\n  var stepResult;\n  while (!converged && stepNumber < options.maxIterations) {\n    stepResult = step(centers, data, clusterID, K, options, ++stepNumber);\n    yield stepResult.computeInformation(data);\n    converged = stepResult.converged;\n    centers = stepResult.centroids;\n  }\n}\n\n/**\n * K-means algorithm\n * @param {Array<Array<number>>} data - Points in the format to cluster [x,y,z,...]\n * @param {number} K - Number of clusters\n * @param {object} [options] - Option object\n * @param {number} [options.maxIterations = 100] - Maximum of iterations allowed\n * @param {number} [options.tolerance = 1e-6] - Error tolerance\n * @param {boolean} [options.withIterations = false] - Store clusters and centroids for each iteration\n * @param {function} [options.distanceFunction = squaredDistance] - Distance function to use between the points\n * @param {number} [options.seed] - Seed for random initialization.\n * @param {string|Array<Array<number>>} [options.initialization = 'kmeans++'] - K centers in format [x,y,z,...] or a method for initialize the data:\n *  * You can either specify your custom start centroids, or select one of the following initialization method:\n *  * `'kmeans++'` will use the kmeans++ method as described by http://ilpubs.stanford.edu:8090/778/1/2006-13.pdf\n *  * `'random'` will choose K random different values.\n *  * `'mostDistant'` will choose the more distant points to a first random pick\n * @return {KMeansResult} - Cluster identifier for each data dot and centroids with the following fields:\n *  * `'clusters'`: Array of indexes for the clusters.\n *  * `'centroids'`: Array with the resulting centroids.\n *  * `'iterations'`: Number of iterations that took to converge\n */\nexport default function kmeans(data, K, options) {\n  options = Object.assign({}, defaultOptions, options);\n\n  if (K <= 0 || K > data.length || !Number.isInteger(K)) {\n    throw new Error(\n      'K should be a positive integer smaller than the number of points'\n    );\n  }\n\n  var centers;\n  if (Array.isArray(options.initialization)) {\n    if (options.initialization.length !== K) {\n      throw new Error('The initial centers should have the same length as K');\n    } else {\n      centers = options.initialization;\n    }\n  } else {\n    switch (options.initialization) {\n      case 'kmeans++':\n        centers = kmeanspp(data, K, options);\n        break;\n      case 'random':\n        centers = random(data, K, options.seed);\n        break;\n      case 'mostDistant':\n        centers = mostDistant(\n          data,\n          K,\n          calculateDistanceMatrix(data, options.distanceFunction),\n          options.seed\n        );\n        break;\n      default:\n        throw new Error(\n          `Unknown initialization method: \"${options.initialization}\"`\n        );\n    }\n  }\n\n  // infinite loop until convergence\n  if (options.maxIterations === 0) {\n    options.maxIterations = Number.MAX_VALUE;\n  }\n\n  var clusterID = new Array(data.length);\n  if (options.withIterations) {\n    return kmeansGenerator(centers, data, clusterID, K, options);\n  } else {\n    var converged = false;\n    var stepNumber = 0;\n    var stepResult;\n    while (!converged && stepNumber < options.maxIterations) {\n      stepResult = step(centers, data, clusterID, K, options, ++stepNumber);\n      converged = stepResult.converged;\n      centers = stepResult.centroids;\n    }\n    return stepResult.computeInformation(data);\n  }\n}\n","import Matrix from 'ml-matrix';\n\n/**\n * @private\n * Function that retuns an array of matrices of the cases that belong to each class.\n * @param {Matrix} X - dataset\n * @param {Array} y - predictions\n * @return {Array}\n */\nexport function separateClasses(X, y) {\n  var features = X.columns;\n\n  var classes = 0;\n  var totalPerClasses = new Array(10000); // max upperbound of classes\n  for (var i = 0; i < y.length; i++) {\n    if (totalPerClasses[y[i]] === undefined) {\n      totalPerClasses[y[i]] = 0;\n      classes++;\n    }\n    totalPerClasses[y[i]]++;\n  }\n  var separatedClasses = new Array(classes);\n  var currentIndex = new Array(classes);\n  for (i = 0; i < classes; ++i) {\n    separatedClasses[i] = new Matrix(totalPerClasses[i], features);\n    currentIndex[i] = 0;\n  }\n  for (i = 0; i < X.rows; ++i) {\n    separatedClasses[y[i]].setRow(currentIndex[y[i]], X.getRow(i));\n    currentIndex[y[i]]++;\n  }\n  return separatedClasses;\n}\n","import { Matrix } from 'ml-matrix';\n\nimport { separateClasses } from './utils';\n\nexport class GaussianNB {\n  /**\n   * Constructor for the Gaussian Naive Bayes classifier, the parameters here is just for loading purposes.\n   * @constructor\n   * @param {boolean} reload\n   * @param {object} model\n   */\n  constructor(reload, model) {\n    if (reload) {\n      this.means = model.means;\n      this.calculateProbabilities = model.calculateProbabilities;\n    }\n  }\n\n  /**\n   * Function that trains the classifier with a matrix that represents the training set and an array that\n   * represents the label of each row in the training set. the labels must be numbers between 0 to n-1 where\n   * n represents the number of classes.\n   *\n   * WARNING: in the case that one class, all the cases in one or more features have the same value, the\n   * Naive Bayes classifier will not work well.\n   * @param {Matrix|Array} trainingSet\n   * @param {Matrix|Array} trainingLabels\n   */\n  train(trainingSet, trainingLabels) {\n    var C1 = Math.sqrt(2 * Math.PI); // constant to precalculate the squared root\n    trainingSet = Matrix.checkMatrix(trainingSet);\n\n    if (trainingSet.rows !== trainingLabels.length) {\n      throw new RangeError(\n        'the size of the training set and the training labels must be the same.'\n      );\n    }\n\n    var separatedClasses = separateClasses(trainingSet, trainingLabels);\n    var calculateProbabilities = new Array(separatedClasses.length);\n    this.means = new Array(separatedClasses.length);\n    for (var i = 0; i < separatedClasses.length; ++i) {\n      var means = separatedClasses[i].mean('column');\n      var std = separatedClasses[i].standardDeviation('column', {\n        mean: means\n      });\n\n      var logPriorProbability = Math.log(\n        separatedClasses[i].rows / trainingSet.rows\n      );\n      calculateProbabilities[i] = new Array(means.length + 1);\n\n      calculateProbabilities[i][0] = logPriorProbability;\n      for (var j = 1; j < means.length + 1; ++j) {\n        var currentStd = std[j - 1];\n        calculateProbabilities[i][j] = [\n          1 / (C1 * currentStd),\n          -2 * currentStd * currentStd\n        ];\n      }\n\n      this.means[i] = means;\n    }\n\n    this.calculateProbabilities = calculateProbabilities;\n  }\n\n  /**\n   * function that predicts each row of the dataset (must be a matrix).\n   *\n   * @param {Matrix|Array} dataset\n   * @return {Array}\n   */\n  predict(dataset) {\n    dataset = Matrix.checkMatrix(dataset);\n    if (dataset.rows === this.calculateProbabilities[0].length) {\n      throw new RangeError(\n        'the dataset must have the same features as the training set'\n      );\n    }\n\n    var predictions = new Array(dataset.rows);\n\n    for (var i = 0; i < predictions.length; ++i) {\n      predictions[i] = getCurrentClass(\n        dataset.getRow(i),\n        this.means,\n        this.calculateProbabilities\n      );\n    }\n\n    return predictions;\n  }\n\n  /**\n   * Function that export the NaiveBayes model.\n   * @return {object}\n   */\n  toJSON() {\n    return {\n      modelName: 'NaiveBayes',\n      means: this.means,\n      calculateProbabilities: this.calculateProbabilities\n    };\n  }\n\n  /**\n   * Function that create a GaussianNB classifier with the given model.\n   * @param {object} model\n   * @return {GaussianNB}\n   */\n  static load(model) {\n    if (model.modelName !== 'NaiveBayes') {\n      throw new RangeError(\n        'The current model is not a Multinomial Naive Bayes, current model:',\n        model.name\n      );\n    }\n\n    return new GaussianNB(true, model);\n  }\n}\n\n/**\n * @private\n * Function the retrieves a prediction with one case.\n *\n * @param {Array} currentCase\n * @param {Array} mean - Precalculated means of each class trained\n * @param {Array} classes - Precalculated value of each class (Prior probability and probability function of each feature)\n * @return {number}\n */\nfunction getCurrentClass(currentCase, mean, classes) {\n  var maxProbability = 0;\n  var predictedClass = -1;\n\n  // going through all precalculated values for the classes\n  for (var i = 0; i < classes.length; ++i) {\n    var currentProbability = classes[i][0]; // initialize with the prior probability\n    for (var j = 1; j < classes[0][1].length + 1; ++j) {\n      currentProbability += calculateLogProbability(\n        currentCase[j - 1],\n        mean[i][j - 1],\n        classes[i][j][0],\n        classes[i][j][1]\n      );\n    }\n\n    currentProbability = Math.exp(currentProbability);\n    if (currentProbability > maxProbability) {\n      maxProbability = currentProbability;\n      predictedClass = i;\n    }\n  }\n\n  return predictedClass;\n}\n\n/**\n * @private\n * function that retrieves the probability of the feature given the class.\n * @param {number} value - value of the feature.\n * @param {number} mean - mean of the feature for the given class.\n * @param {number} C1 - precalculated value of (1 / (sqrt(2*pi) * std)).\n * @param {number} C2 - precalculated value of (2 * std^2) for the denominator of the exponential.\n * @return {number}\n */\nfunction calculateLogProbability(value, mean, C1, C2) {\n  value = value - mean;\n  return Math.log(C1 * Math.exp((value * value) / C2));\n}\n","import { Matrix } from 'ml-matrix';\n\nimport { separateClasses } from './utils';\n\nexport class MultinomialNB {\n  /**\n   * Constructor for Multinomial Naive Bayes, the model parameter is for load purposes.\n   * @constructor\n   * @param {object} model - for load purposes.\n   */\n  constructor(model) {\n    if (model) {\n      this.conditionalProbability = Matrix.checkMatrix(\n        model.conditionalProbability\n      );\n      this.priorProbability = Matrix.checkMatrix(model.priorProbability);\n    }\n  }\n\n  /**\n   * Train the classifier with the current training set and labels, the labels must be numbers between 0 and n.\n   * @param {Matrix|Array} trainingSet\n   * @param {Array} trainingLabels\n   */\n  train(trainingSet, trainingLabels) {\n    trainingSet = Matrix.checkMatrix(trainingSet);\n\n    if (trainingSet.rows !== trainingLabels.length) {\n      throw new RangeError(\n        'the size of the training set and the training labels must be the same.'\n      );\n    }\n\n    var separateClass = separateClasses(trainingSet, trainingLabels);\n\n    this.priorProbability = new Matrix(separateClass.length, 1);\n\n    for (var i = 0; i < separateClass.length; ++i) {\n      this.priorProbability.set(i, 0, Math.log(\n        separateClass[i].rows / trainingSet.rows\n      ));\n    }\n\n    var features = trainingSet.columns;\n    this.conditionalProbability = new Matrix(separateClass.length, features);\n    for (i = 0; i < separateClass.length; ++i) {\n      var classValues = Matrix.checkMatrix(separateClass[i]);\n      var total = classValues.sum();\n      var divisor = total + features;\n      this.conditionalProbability.setRow(\n        i,\n        Matrix.rowVector(classValues\n          .sum('column'))\n          .add(1)\n          .div(divisor)\n          .apply(matrixLog)\n      );\n    }\n  }\n\n  /**\n   * Retrieves the predictions for the dataset with the current model.\n   * @param {Matrix|Array} dataset\n   * @return {Array} - predictions from the dataset.\n   */\n  predict(dataset) {\n    dataset = Matrix.checkMatrix(dataset);\n    var predictions = new Array(dataset.rows);\n    for (var i = 0; i < dataset.rows; ++i) {\n      var currentElement = dataset.getRowVector(i);\n      const v = Matrix.columnVector(this.conditionalProbability\n        .clone()\n        .mulRowVector(currentElement)\n        .sum('row'));\n      predictions[i] = v\n        .add(this.priorProbability)\n        .maxIndex()[0];\n    }\n\n    return predictions;\n  }\n\n  /**\n   * Function that saves the current model.\n   * @return {object} - model in JSON format.\n   */\n  toJSON() {\n    return {\n      name: 'MultinomialNB',\n      priorProbability: this.priorProbability,\n      conditionalProbability: this.conditionalProbability\n    };\n  }\n\n  /**\n   * Creates a new MultinomialNB from the given model\n   * @param {object} model\n   * @return {MultinomialNB}\n   */\n  static load(model) {\n    if (model.name !== 'MultinomialNB') {\n      throw new RangeError(`${model.name} is not a Multinomial Naive Bayes`);\n    }\n\n    return new MultinomialNB(model);\n  }\n}\n\nfunction matrixLog(i, j) {\n  this.set(i, j, Math.log(this.get(i, j)));\n}\n","/*\n * Original code from:\n *\n * k-d Tree JavaScript - V 1.01\n *\n * https://github.com/ubilabs/kd-tree-javascript\n *\n * @author Mircea Pricop <pricop@ubilabs.net>, 2012\n * @author Martin Kleppe <kleppe@ubilabs.net>, 2012\n * @author Ubilabs http://ubilabs.net, 2012\n * @license MIT License <http://www.opensource.org/licenses/mit-license.php>\n */\n\nfunction Node(obj, dimension, parent) {\n  this.obj = obj;\n  this.left = null;\n  this.right = null;\n  this.parent = parent;\n  this.dimension = dimension;\n}\n\nexport default class KDTree {\n  constructor(points, metric) {\n    // If points is not an array, assume we're loading a pre-built tree\n    if (!Array.isArray(points)) {\n      this.dimensions = points.dimensions;\n      this.root = points;\n      restoreParent(this.root);\n    } else {\n      this.dimensions = new Array(points[0].length);\n      for (var i = 0; i < this.dimensions.length; i++) {\n        this.dimensions[i] = i;\n      }\n      this.root = buildTree(points, 0, null, this.dimensions);\n    }\n    this.metric = metric;\n  }\n\n  // Convert to a JSON serializable structure; this just requires removing\n  // the `parent` property\n  toJSON() {\n    const result = toJSONImpl(this.root, true);\n    result.dimensions = this.dimensions;\n    return result;\n  }\n\n  nearest(point, maxNodes, maxDistance) {\n    const metric = this.metric;\n    const dimensions = this.dimensions;\n    var i;\n\n    const bestNodes = new BinaryHeap(function (e) {\n      return -e[1];\n    });\n\n    function nearestSearch(node) {\n      const dimension = dimensions[node.dimension];\n      const ownDistance = metric(point, node.obj);\n      const linearPoint = {};\n      var bestChild, linearDistance, otherChild, i;\n\n      function saveNode(node, distance) {\n        bestNodes.push([node, distance]);\n        if (bestNodes.size() > maxNodes) {\n          bestNodes.pop();\n        }\n      }\n\n      for (i = 0; i < dimensions.length; i += 1) {\n        if (i === node.dimension) {\n          linearPoint[dimensions[i]] = point[dimensions[i]];\n        } else {\n          linearPoint[dimensions[i]] = node.obj[dimensions[i]];\n        }\n      }\n\n      linearDistance = metric(linearPoint, node.obj);\n\n      if (node.right === null && node.left === null) {\n        if (bestNodes.size() < maxNodes || ownDistance < bestNodes.peek()[1]) {\n          saveNode(node, ownDistance);\n        }\n        return;\n      }\n\n      if (node.right === null) {\n        bestChild = node.left;\n      } else if (node.left === null) {\n        bestChild = node.right;\n      } else {\n        if (point[dimension] < node.obj[dimension]) {\n          bestChild = node.left;\n        } else {\n          bestChild = node.right;\n        }\n      }\n\n      nearestSearch(bestChild);\n\n      if (bestNodes.size() < maxNodes || ownDistance < bestNodes.peek()[1]) {\n        saveNode(node, ownDistance);\n      }\n\n      if (\n        bestNodes.size() < maxNodes ||\n        Math.abs(linearDistance) < bestNodes.peek()[1]\n      ) {\n        if (bestChild === node.left) {\n          otherChild = node.right;\n        } else {\n          otherChild = node.left;\n        }\n        if (otherChild !== null) {\n          nearestSearch(otherChild);\n        }\n      }\n    }\n\n    if (maxDistance) {\n      for (i = 0; i < maxNodes; i += 1) {\n        bestNodes.push([null, maxDistance]);\n      }\n    }\n\n    if (this.root) {\n      nearestSearch(this.root);\n    }\n\n    const result = [];\n    for (i = 0; i < Math.min(maxNodes, bestNodes.content.length); i += 1) {\n      if (bestNodes.content[i][0]) {\n        result.push([bestNodes.content[i][0].obj, bestNodes.content[i][1]]);\n      }\n    }\n    return result;\n  }\n}\n\nfunction toJSONImpl(src) {\n  const dest = new Node(src.obj, src.dimension, null);\n  if (src.left) dest.left = toJSONImpl(src.left);\n  if (src.right) dest.right = toJSONImpl(src.right);\n  return dest;\n}\n\nfunction buildTree(points, depth, parent, dimensions) {\n  const dim = depth % dimensions.length;\n\n  if (points.length === 0) {\n    return null;\n  }\n  if (points.length === 1) {\n    return new Node(points[0], dim, parent);\n  }\n\n  points.sort((a, b) => a[dimensions[dim]] - b[dimensions[dim]]);\n\n  const median = Math.floor(points.length / 2);\n  const node = new Node(points[median], dim, parent);\n  node.left = buildTree(points.slice(0, median), depth + 1, node, dimensions);\n  node.right = buildTree(points.slice(median + 1), depth + 1, node, dimensions);\n\n  return node;\n}\n\nfunction restoreParent(root) {\n  if (root.left) {\n    root.left.parent = root;\n    restoreParent(root.left);\n  }\n\n  if (root.right) {\n    root.right.parent = root;\n    restoreParent(root.right);\n  }\n}\n\n// Binary heap implementation from:\n// http://eloquentjavascript.net/appendix2.html\nclass BinaryHeap {\n  constructor(scoreFunction) {\n    this.content = [];\n    this.scoreFunction = scoreFunction;\n  }\n\n  push(element) {\n    // Add the new element to the end of the array.\n    this.content.push(element);\n    // Allow it to bubble up.\n    this.bubbleUp(this.content.length - 1);\n  }\n\n  pop() {\n    // Store the first element so we can return it later.\n    var result = this.content[0];\n    // Get the element at the end of the array.\n    var end = this.content.pop();\n    // If there are any elements left, put the end element at the\n    // start, and let it sink down.\n    if (this.content.length > 0) {\n      this.content[0] = end;\n      this.sinkDown(0);\n    }\n    return result;\n  }\n\n  peek() {\n    return this.content[0];\n  }\n\n  size() {\n    return this.content.length;\n  }\n\n  bubbleUp(n) {\n    // Fetch the element that has to be moved.\n    var element = this.content[n];\n    // When at 0, an element can not go up any further.\n    while (n > 0) {\n      // Compute the parent element's index, and fetch it.\n      const parentN = Math.floor((n + 1) / 2) - 1;\n      const parent = this.content[parentN];\n      // Swap the elements if the parent is greater.\n      if (this.scoreFunction(element) < this.scoreFunction(parent)) {\n        this.content[parentN] = element;\n        this.content[n] = parent;\n        // Update 'n' to continue at the new position.\n        n = parentN;\n      } else {\n        // Found a parent that is less, no need to move it further.\n        break;\n      }\n    }\n  }\n\n  sinkDown(n) {\n    // Look up the target element and its score.\n    var length = this.content.length;\n    var element = this.content[n];\n    var elemScore = this.scoreFunction(element);\n\n    while (true) {\n      // Compute the indices of the child elements.\n      var child2N = (n + 1) * 2;\n      var child1N = child2N - 1;\n      // This is used to store the new position of the element,\n      // if any.\n      var swap = null;\n      // If the first child exists (is inside the array)...\n      if (child1N < length) {\n        // Look it up and compute its score.\n        var child1 = this.content[child1N];\n        var child1Score = this.scoreFunction(child1);\n        // If the score is less than our element's, we need to swap.\n        if (child1Score < elemScore) {\n          swap = child1N;\n        }\n      }\n      // Do the same checks for the other child.\n      if (child2N < length) {\n        var child2 = this.content[child2N];\n        var child2Score = this.scoreFunction(child2);\n        if (child2Score < (swap === null ? elemScore : child1Score)) {\n          swap = child2N;\n        }\n      }\n\n      // If the element needs to be moved, swap it, and continue.\n      if (swap !== null) {\n        this.content[n] = this.content[swap];\n        this.content[swap] = element;\n        n = swap;\n      } else {\n        // Otherwise, we are done.\n        break;\n      }\n    }\n  }\n}\n","import { euclidean as euclideanDistance } from 'ml-distance-euclidean';\n\nimport KDTree from './KDTree';\n\nexport default class KNN {\n  /**\n   * @param {Array} dataset\n   * @param {Array} labels\n   * @param {object} options\n   * @param {number} [options.k=numberOfClasses + 1] - Number of neighbors to classify.\n   * @param {function} [options.distance=euclideanDistance] - Distance function that takes two parameters.\n   */\n  constructor(dataset, labels, options = {}) {\n    if (dataset === true) {\n      const model = labels;\n      this.kdTree = new KDTree(model.kdTree, options);\n      this.k = model.k;\n      this.classes = new Set(model.classes);\n      this.isEuclidean = model.isEuclidean;\n      return;\n    }\n\n    const classes = new Set(labels);\n\n    const { distance = euclideanDistance, k = classes.size + 1 } = options;\n\n    const points = new Array(dataset.length);\n    for (var i = 0; i < points.length; ++i) {\n      points[i] = dataset[i].slice();\n    }\n\n    for (i = 0; i < labels.length; ++i) {\n      points[i].push(labels[i]);\n    }\n\n    this.kdTree = new KDTree(points, distance);\n    this.k = k;\n    this.classes = classes;\n    this.isEuclidean = distance === euclideanDistance;\n  }\n\n  /**\n   * Create a new KNN instance with the given model.\n   * @param {object} model\n   * @param {function} distance=euclideanDistance - distance function must be provided if the model wasn't trained with euclidean distance.\n   * @return {KNN}\n   */\n  static load(model, distance = euclideanDistance) {\n    if (model.name !== 'KNN') {\n      throw new Error(`invalid model: ${model.name}`);\n    }\n    if (!model.isEuclidean && distance === euclideanDistance) {\n      throw new Error(\n        'a custom distance function was used to create the model. Please provide it again'\n      );\n    }\n    if (model.isEuclidean && distance !== euclideanDistance) {\n      throw new Error(\n        'the model was created with the default distance function. Do not load it with another one'\n      );\n    }\n    return new KNN(true, model, distance);\n  }\n\n  /**\n   * Return a JSON containing the kd-tree model.\n   * @return {object} JSON KNN model.\n   */\n  toJSON() {\n    return {\n      name: 'KNN',\n      kdTree: this.kdTree,\n      k: this.k,\n      classes: Array.from(this.classes),\n      isEuclidean: this.isEuclidean\n    };\n  }\n\n  /**\n   * Predicts the output given the matrix to predict.\n   * @param {Array} dataset\n   * @return {Array} predictions\n   */\n  predict(dataset) {\n    if (Array.isArray(dataset)) {\n      if (typeof dataset[0] === 'number') {\n        return getSinglePrediction(this, dataset);\n      } else if (\n        Array.isArray(dataset[0]) &&\n        typeof dataset[0][0] === 'number'\n      ) {\n        const predictions = new Array(dataset.length);\n        for (var i = 0; i < dataset.length; i++) {\n          predictions[i] = getSinglePrediction(this, dataset[i]);\n        }\n        return predictions;\n      }\n    }\n    throw new TypeError('dataset to predict must be an array or a matrix');\n  }\n}\n\nfunction getSinglePrediction(knn, currentCase) {\n  var nearestPoints = knn.kdTree.nearest(currentCase, knn.k);\n  var pointsPerClass = {};\n  var predictedClass = -1;\n  var maxPoints = -1;\n  var lastElement = nearestPoints[0][0].length - 1;\n\n  for (var element of knn.classes) {\n    pointsPerClass[element] = 0;\n  }\n\n  for (var i = 0; i < nearestPoints.length; ++i) {\n    var currentClass = nearestPoints[i][0][lastElement];\n    var currentPoints = ++pointsPerClass[currentClass];\n    if (currentPoints > maxPoints) {\n      predictedClass = currentClass;\n      maxPoints = currentPoints;\n    }\n  }\n\n  return predictedClass;\n}\n","import Matrix from 'ml-matrix';\n\n/**\n * @private\n * Function that given vector, returns its norm\n * @param {Vector} X\n * @return {number} Norm of the vector\n */\nexport function norm(X) {\n  return Math.sqrt(X.clone().apply(pow2array).sum());\n}\n\n/**\n * @private\n * Function that pow 2 each element of a Matrix or a Vector,\n * used in the apply method of the Matrix object\n * @param {number} i - index i.\n * @param {number} j - index j.\n * @return {Matrix} The Matrix object modified at the index i, j.\n * */\nexport function pow2array(i, j) {\n  this.set(i, j, this.get(i, j) ** 2);\n}\n\n/**\n * @private\n * Function that normalize the dataset and return the means and\n * standard deviation of each feature.\n * @param {Matrix} dataset\n * @return {object} dataset normalized, means and standard deviations\n */\nexport function featureNormalize(dataset) {\n  var means = dataset.mean('column');\n  var std = dataset.standardDeviation('column', { mean: means, unbiased: true });\n  var result = Matrix.checkMatrix(dataset).subRowVector(means);\n  return { result: result.divRowVector(std), means: means, std: std };\n}\n\n/**\n * @private\n * Function that initialize an array of matrices.\n * @param {Array} array\n * @param {boolean} isMatrix\n * @return {Array} array with the matrices initialized.\n */\nexport function initializeMatrices(array, isMatrix) {\n  if (isMatrix) {\n    for (var i = 0; i < array.length; ++i) {\n      for (var j = 0; j < array[i].length; ++j) {\n        var elem = array[i][j];\n        array[i][j] = elem !== null ? new Matrix(array[i][j]) : undefined;\n      }\n    }\n  } else {\n    for (i = 0; i < array.length; ++i) {\n      array[i] = new Matrix(array[i]);\n    }\n  }\n\n  return array;\n}\n","import Matrix from 'ml-matrix';\n\nimport * as Utils from './utils';\n\n/**\n * @class PLS\n */\nexport class PLS {\n  /**\n   * Constructor for Partial Least Squares (PLS)\n   * @param {object} options\n   * @param {number} [options.latentVectors] - Number of latent vector to get (if the algorithm doesn't find a good model below the tolerance)\n   * @param {number} [options.tolerance=1e-5]\n   * @param {boolean} [options.scale=true] - rescale dataset using mean.\n   * @param {object} model - for load purposes.\n   */\n  constructor(options, model) {\n    if (options === true) {\n      this.meanX = model.meanX;\n      this.stdDevX = model.stdDevX;\n      this.meanY = model.meanY;\n      this.stdDevY = model.stdDevY;\n      this.PBQ = Matrix.checkMatrix(model.PBQ);\n      this.R2X = model.R2X;\n      this.scale = model.scale;\n      this.scaleMethod = model.scaleMethod;\n      this.tolerance = model.tolerance;\n    } else {\n      var {\n        tolerance = 1e-5,\n        scale = true,\n      } = options;\n      this.tolerance = tolerance;\n      this.scale = scale;\n      this.latentVectors = options.latentVectors;\n    }\n  }\n\n  /**\n   * Fits the model with the given data and predictions, in this function is calculated the\n   * following outputs:\n   *\n   * T - Score matrix of X\n   * P - Loading matrix of X\n   * U - Score matrix of Y\n   * Q - Loading matrix of Y\n   * B - Matrix of regression coefficient\n   * W - Weight matrix of X\n   *\n   * @param {Matrix|Array} trainingSet\n   * @param {Matrix|Array} trainingValues\n   */\n  train(trainingSet, trainingValues) {\n    trainingSet = Matrix.checkMatrix(trainingSet);\n    trainingValues = Matrix.checkMatrix(trainingValues);\n\n    if (trainingSet.length !== trainingValues.length) {\n      throw new RangeError('The number of X rows must be equal to the number of Y rows');\n    }\n\n    this.meanX = trainingSet.mean('column');\n    this.stdDevX = trainingSet.standardDeviation('column', { mean: this.meanX, unbiased: true });\n    this.meanY = trainingValues.mean('column');\n    this.stdDevY = trainingValues.standardDeviation('column', { mean: this.meanY, unbiased: true });\n\n    if (this.scale) {\n      trainingSet = trainingSet.clone().subRowVector(this.meanX).divRowVector(this.stdDevX);\n      trainingValues = trainingValues.clone().subRowVector(this.meanY).divRowVector(this.stdDevY);\n    }\n\n    if (this.latentVectors === undefined) {\n      this.latentVectors = Math.min(trainingSet.rows - 1, trainingSet.columns);\n    }\n\n    var rx = trainingSet.rows;\n    var cx = trainingSet.columns;\n    var ry = trainingValues.rows;\n    var cy = trainingValues.columns;\n\n    var ssqXcal = trainingSet.clone().mul(trainingSet).sum(); // for the r²\n    var sumOfSquaresY = trainingValues.clone().mul(trainingValues).sum();\n\n    var tolerance = this.tolerance;\n    var n = this.latentVectors;\n    var T = Matrix.zeros(rx, n);\n    var P = Matrix.zeros(cx, n);\n    var U = Matrix.zeros(ry, n);\n    var Q = Matrix.zeros(cy, n);\n    var B = Matrix.zeros(n, n);\n    var W = P.clone();\n    var k = 0;\n\n    while (Utils.norm(trainingValues) > tolerance && k < n) {\n      var transposeX = trainingSet.transpose();\n      var transposeY = trainingValues.transpose();\n\n      var tIndex = maxSumColIndex(trainingSet.clone().mul(trainingSet));\n      var uIndex = maxSumColIndex(trainingValues.clone().mul(trainingValues));\n\n      var t1 = trainingSet.getColumnVector(tIndex);\n      var u = trainingValues.getColumnVector(uIndex);\n      var t = Matrix.zeros(rx, 1);\n\n      while (Utils.norm(t1.clone().sub(t)) > tolerance) {\n        var w = transposeX.mmul(u);\n        w.div(Utils.norm(w));\n        t = t1;\n        t1 = trainingSet.mmul(w);\n        var q = transposeY.mmul(t1);\n        q.div(Utils.norm(q));\n        u = trainingValues.mmul(q);\n      }\n\n      t = t1;\n      var num = transposeX.mmul(t);\n      var den = t.transpose().mmul(t).get(0, 0);\n      var p = num.div(den);\n      var pnorm = Utils.norm(p);\n      p.div(pnorm);\n      t.mul(pnorm);\n      w.mul(pnorm);\n\n      num = u.transpose().mmul(t);\n      den = t.transpose().mmul(t).get(0, 0);\n      var b = num.div(den).get(0, 0);\n      trainingSet.sub(t.mmul(p.transpose()));\n      trainingValues.sub(t.clone().mul(b).mmul(q.transpose()));\n\n      T.setColumn(k, t);\n      P.setColumn(k, p);\n      U.setColumn(k, u);\n      Q.setColumn(k, q);\n      W.setColumn(k, w);\n\n      B.set(k, k, b);\n      k++;\n    }\n\n    k--;\n    T = T.subMatrix(0, T.rows - 1, 0, k);\n    P = P.subMatrix(0, P.rows - 1, 0, k);\n    U = U.subMatrix(0, U.rows - 1, 0, k);\n    Q = Q.subMatrix(0, Q.rows - 1, 0, k);\n    W = W.subMatrix(0, W.rows - 1, 0, k);\n    B = B.subMatrix(0, k, 0, k);\n\n    // TODO: review of R2Y\n    // this.R2Y = t.transpose().mmul(t).mul(q[k][0]*q[k][0]).divS(ssqYcal)[0][0];\n    //\n    this.ssqYcal = sumOfSquaresY;\n    this.E = trainingSet;\n    this.F = trainingValues;\n    this.T = T;\n    this.P = P;\n    this.U = U;\n    this.Q = Q;\n    this.W = W;\n    this.B = B;\n    this.PBQ = P.mmul(B).mmul(Q.transpose());\n    this.R2X = t.transpose().mmul(t).mmul(p.transpose().mmul(p)).div(ssqXcal).get(0, 0);\n  }\n\n  /**\n   * Predicts the behavior of the given dataset.\n   * @param {Matrix|Array} dataset - data to be predicted.\n   * @return {Matrix} - predictions of each element of the dataset.\n   */\n  predict(dataset) {\n    var X = Matrix.checkMatrix(dataset);\n    if (this.scale) {\n      X = X.subRowVector(this.meanX).divRowVector(this.stdDevX);\n    }\n    var Y = X.mmul(this.PBQ);\n    Y = Y.mulRowVector(this.stdDevY).addRowVector(this.meanY);\n    return Y;\n  }\n\n  /**\n   * Returns the explained variance on training of the PLS model\n   * @return {number}\n   */\n  getExplainedVariance() {\n    return this.R2X;\n  }\n\n  /**\n   * Export the current model to JSON.\n   * @return {object} - Current model.\n   */\n  toJSON() {\n    return {\n      name: 'PLS',\n      R2X: this.R2X,\n      meanX: this.meanX,\n      stdDevX: this.stdDevX,\n      meanY: this.meanY,\n      stdDevY: this.stdDevY,\n      PBQ: this.PBQ,\n      tolerance: this.tolerance,\n      scale: this.scale,\n    };\n  }\n\n  /**\n   * Load a PLS model from a JSON Object\n   * @param {object} model\n   * @return {PLS} - PLS object from the given model\n   */\n  static load(model) {\n    if (model.name !== 'PLS') {\n      throw new RangeError(`Invalid model: ${model.name}`);\n    }\n    return new PLS(true, model);\n  }\n}\n\n/**\n * @private\n * Function that returns the index where the sum of each\n * column vector is maximum.\n * @param {Matrix} data\n * @return {number} index of the maximum\n */\nfunction maxSumColIndex(data) {\n  return Matrix.rowVector(data.sum('column')).maxIndex()[0];\n}\n","import { Matrix, SingularValueDecomposition, inverse } from 'ml-matrix';\n\nimport { initializeMatrices } from './utils';\n\n/**\n * @class KOPLS\n */\nexport class KOPLS {\n  /**\n     * Constructor for Kernel-based Orthogonal Projections to Latent Structures (K-OPLS)\n     * @param {object} options\n     * @param {number} [options.predictiveComponents] - Number of predictive components to use.\n     * @param {number} [options.orthogonalComponents] - Number of Y-Orthogonal components.\n     * @param {Kernel} [options.kernel] - Kernel object to apply, see [ml-kernel](https://github.com/mljs/kernel).\n     * @param {object} model - for load purposes.\n     */\n  constructor(options, model) {\n    if (options === true) {\n      this.trainingSet = new Matrix(model.trainingSet);\n      this.YLoadingMat = new Matrix(model.YLoadingMat);\n      this.SigmaPow = new Matrix(model.SigmaPow);\n      this.YScoreMat = new Matrix(model.YScoreMat);\n      this.predScoreMat = initializeMatrices(model.predScoreMat, false);\n      this.YOrthLoadingVec = initializeMatrices(model.YOrthLoadingVec, false);\n      this.YOrthEigen = model.YOrthEigen;\n      this.YOrthScoreMat = initializeMatrices(model.YOrthScoreMat, false);\n      this.toNorm = initializeMatrices(model.toNorm, false);\n      this.TURegressionCoeff = initializeMatrices(model.TURegressionCoeff, false);\n      this.kernelX = initializeMatrices(model.kernelX, true);\n      this.kernel = model.kernel;\n      this.orthogonalComp = model.orthogonalComp;\n      this.predictiveComp = model.predictiveComp;\n    } else {\n      if (options.predictiveComponents === undefined) {\n        throw new RangeError('no predictive components found!');\n      }\n      if (options.orthogonalComponents === undefined) {\n        throw new RangeError('no orthogonal components found!');\n      }\n      if (options.kernel === undefined) {\n        throw new RangeError('no kernel found!');\n      }\n\n      this.orthogonalComp = options.orthogonalComponents;\n      this.predictiveComp = options.predictiveComponents;\n      this.kernel = options.kernel;\n    }\n  }\n\n  /**\n     * Train the K-OPLS model with the given training set and labels.\n     * @param {Matrix|Array} trainingSet\n     * @param {Matrix|Array} trainingValues\n     */\n  train(trainingSet, trainingValues) {\n    trainingSet = Matrix.checkMatrix(trainingSet);\n    trainingValues = Matrix.checkMatrix(trainingValues);\n\n    // to save and compute kernel with the prediction dataset.\n    this.trainingSet = trainingSet.clone();\n\n    var kernelX = this.kernel.compute(trainingSet);\n\n    var Identity = Matrix.eye(kernelX.rows, kernelX.rows, 1);\n    var temp = kernelX;\n    kernelX = new Array(this.orthogonalComp + 1);\n    for (let i = 0; i < this.orthogonalComp + 1; i++) {\n      kernelX[i] = new Array(this.orthogonalComp + 1);\n    }\n    kernelX[0][0] = temp;\n\n    var result = new SingularValueDecomposition(trainingValues.transpose().mmul(kernelX[0][0]).mmul(trainingValues), {\n      computeLeftSingularVectors: true,\n      computeRightSingularVectors: false\n    });\n    var YLoadingMat = result.leftSingularVectors;\n    var Sigma = result.diagonalMatrix;\n\n    YLoadingMat = YLoadingMat.subMatrix(0, YLoadingMat.rows - 1, 0, this.predictiveComp - 1);\n    Sigma = Sigma.subMatrix(0, this.predictiveComp - 1, 0, this.predictiveComp - 1);\n\n    var YScoreMat = trainingValues.mmul(YLoadingMat);\n\n    var predScoreMat = new Array(this.orthogonalComp + 1);\n    var TURegressionCoeff = new Array(this.orthogonalComp + 1);\n    var YOrthScoreMat = new Array(this.orthogonalComp);\n    var YOrthLoadingVec = new Array(this.orthogonalComp);\n    var YOrthEigen = new Array(this.orthogonalComp);\n    var YOrthScoreNorm = new Array(this.orthogonalComp);\n\n    var SigmaPow = Matrix.pow(Sigma, -0.5);\n    // to avoid errors, check infinity\n    SigmaPow.apply(function (i, j) {\n      if (this.get(i, j) === Infinity) {\n        this.set(i, j, 0);\n      }\n    });\n\n    for (var i = 0; i < this.orthogonalComp; ++i) {\n      predScoreMat[i] = kernelX[0][i].transpose().mmul(YScoreMat).mmul(SigmaPow);\n\n      var TpiPrime = predScoreMat[i].transpose();\n      TURegressionCoeff[i] = inverse(TpiPrime.mmul(predScoreMat[i])).mmul(TpiPrime).mmul(YScoreMat);\n\n      result = new SingularValueDecomposition(TpiPrime.mmul(Matrix.sub(kernelX[i][i], predScoreMat[i].mmul(TpiPrime))).mmul(predScoreMat[i]), {\n        computeLeftSingularVectors: true,\n        computeRightSingularVectors: false\n      });\n      var CoTemp = result.leftSingularVectors;\n      var SoTemp = result.diagonalMatrix;\n\n      YOrthLoadingVec[i] = CoTemp.subMatrix(0, CoTemp.rows - 1, 0, 0);\n      YOrthEigen[i] = SoTemp.get(0, 0);\n\n      YOrthScoreMat[i] = Matrix.sub(kernelX[i][i], predScoreMat[i].mmul(TpiPrime)).mmul(predScoreMat[i]).mmul(YOrthLoadingVec[i]).mul(Math.pow(YOrthEigen[i], -0.5));\n\n      var toiPrime = YOrthScoreMat[i].transpose();\n      YOrthScoreNorm[i] = Matrix.sqrt(toiPrime.mmul(YOrthScoreMat[i]));\n\n      YOrthScoreMat[i] = YOrthScoreMat[i].divRowVector(YOrthScoreNorm[i]);\n\n      var ITo = Matrix.sub(Identity, YOrthScoreMat[i].mmul(YOrthScoreMat[i].transpose()));\n\n      kernelX[0][i + 1] = kernelX[0][i].mmul(ITo);\n      kernelX[i + 1][i + 1] = ITo.mmul(kernelX[i][i]).mmul(ITo);\n    }\n\n    var lastScoreMat = predScoreMat[this.orthogonalComp] = kernelX[0][this.orthogonalComp].transpose().mmul(YScoreMat).mmul(SigmaPow);\n\n    var lastTpPrime = lastScoreMat.transpose();\n    TURegressionCoeff[this.orthogonalComp] = inverse(lastTpPrime.mmul(lastScoreMat)).mmul(lastTpPrime).mmul(YScoreMat);\n\n    this.YLoadingMat = YLoadingMat;\n    this.SigmaPow = SigmaPow;\n    this.YScoreMat = YScoreMat;\n    this.predScoreMat = predScoreMat;\n    this.YOrthLoadingVec = YOrthLoadingVec;\n    this.YOrthEigen = YOrthEigen;\n    this.YOrthScoreMat = YOrthScoreMat;\n    this.toNorm = YOrthScoreNorm;\n    this.TURegressionCoeff = TURegressionCoeff;\n    this.kernelX = kernelX;\n  }\n\n  /**\n     * Predicts the output given the matrix to predict.\n     * @param {Matrix|Array} toPredict\n     * @return {{y: Matrix, predScoreMat: Array<Matrix>, predYOrthVectors: Array<Matrix>}} predictions\n     */\n  predict(toPredict) {\n    var KTestTrain = this.kernel.compute(toPredict, this.trainingSet);\n\n    var temp = KTestTrain;\n    KTestTrain = new Array(this.orthogonalComp + 1);\n    for (let i = 0; i < this.orthogonalComp + 1; i++) {\n      KTestTrain[i] = new Array(this.orthogonalComp + 1);\n    }\n    KTestTrain[0][0] = temp;\n\n    var YOrthScoreVector = new Array(this.orthogonalComp);\n    var predScoreMat = new Array(this.orthogonalComp);\n\n    var i;\n    for (i = 0; i < this.orthogonalComp; ++i) {\n      predScoreMat[i] = KTestTrain[i][0].mmul(this.YScoreMat).mmul(this.SigmaPow);\n\n      YOrthScoreVector[i] = Matrix.sub(KTestTrain[i][i], predScoreMat[i].mmul(this.predScoreMat[i].transpose())).mmul(this.predScoreMat[i]).mmul(this.YOrthLoadingVec[i]).mul(Math.pow(this.YOrthEigen[i], -0.5));\n\n      YOrthScoreVector[i] = YOrthScoreVector[i].divRowVector(this.toNorm[i]);\n\n      var scoreMatPrime = this.YOrthScoreMat[i].transpose();\n      KTestTrain[i + 1][0] = Matrix.sub(KTestTrain[i][0], YOrthScoreVector[i].mmul(scoreMatPrime).mmul(this.kernelX[0][i].transpose()));\n\n      var p1 = Matrix.sub(KTestTrain[i][0], KTestTrain[i][i].mmul(this.YOrthScoreMat[i]).mmul(scoreMatPrime));\n      var p2 = YOrthScoreVector[i].mmul(scoreMatPrime).mmul(this.kernelX[i][i]);\n      var p3 = p2.mmul(this.YOrthScoreMat[i]).mmul(scoreMatPrime);\n\n      KTestTrain[i + 1][i + 1] = p1.sub(p2).add(p3);\n    }\n\n    predScoreMat[i] = KTestTrain[i][0].mmul(this.YScoreMat).mmul(this.SigmaPow);\n    var prediction = predScoreMat[i].mmul(this.TURegressionCoeff[i]).mmul(this.YLoadingMat.transpose());\n\n    return {\n      prediction: prediction,\n      predScoreMat: predScoreMat,\n      predYOrthVectors: YOrthScoreVector\n    };\n  }\n\n  /**\n     * Export the current model to JSON.\n     * @return {object} - Current model.\n     */\n  toJSON() {\n    return {\n      name: 'K-OPLS',\n      YLoadingMat: this.YLoadingMat,\n      SigmaPow: this.SigmaPow,\n      YScoreMat: this.YScoreMat,\n      predScoreMat: this.predScoreMat,\n      YOrthLoadingVec: this.YOrthLoadingVec,\n      YOrthEigen: this.YOrthEigen,\n      YOrthScoreMat: this.YOrthScoreMat,\n      toNorm: this.toNorm,\n      TURegressionCoeff: this.TURegressionCoeff,\n      kernelX: this.kernelX,\n      trainingSet: this.trainingSet,\n      orthogonalComp: this.orthogonalComp,\n      predictiveComp: this.predictiveComp\n    };\n  }\n\n  /**\n     * Load a K-OPLS with the given model.\n     * @param {object} model\n     * @param {Kernel} kernel - kernel used on the model, see [ml-kernel](https://github.com/mljs/kernel).\n     * @return {KOPLS}\n     */\n  static load(model, kernel) {\n    if (model.name !== 'K-OPLS') {\n      throw new RangeError(`Invalid model: ${model.name}`);\n    }\n\n    if (!kernel) {\n      throw new RangeError('You must provide a kernel for the model!');\n    }\n\n    model.kernel = kernel;\n    return new KOPLS(true, model);\n  }\n}\n","/**\n *  Constructs a confusion matrix\n * @class ConfusionMatrix\n * @example\n * const CM = new ConfusionMatrix([[13, 2], [10, 5]], ['cat', 'dog'])\n * @param {Array<Array<number>>} matrix - The confusion matrix, a 2D Array. Rows represent the actual label and columns\n *     the predicted label.\n * @param {Array<any>} labels - Labels of the confusion matrix, a 1D Array\n */\nclass ConfusionMatrix {\n    constructor(matrix, labels) {\n        if (matrix.length !== matrix[0].length) {\n            throw new Error('Confusion matrix must be square');\n        }\n        if (labels.length !== matrix.length) {\n            throw new Error('Confusion matrix and labels should have the same length');\n        }\n        this.labels = labels;\n        this.matrix = matrix;\n    }\n\n\n    /**\n     * Construct confusion matrix from the predicted and actual labels (classes). Be sure to provide the arguments in\n     * the correct order!\n     * @param {Array<any>} actual  - The predicted labels of the classification\n     * @param {Array<any>} predicted     - The actual labels of the classification. Has to be of same length as\n     *     predicted.\n     * @param {object} [options] - Additional options\n     * @param {Array<any>} [options.labels] - The list of labels that should be used. If not provided the distinct set\n     *     of labels present in predicted and actual is used. Labels are compared using the strict equality operator\n     *     '==='\n     * @return {ConfusionMatrix} - Confusion matrix\n     */\n    static fromLabels(actual, predicted, options = {}) {\n        if (predicted.length !== actual.length) {\n            throw new Error('predicted and actual must have the same length');\n        }\n        let distinctLabels;\n        if (options.labels) {\n            distinctLabels = new Set(options.labels);\n        } else {\n            distinctLabels = new Set([...actual, ...predicted]);\n        }\n        distinctLabels = Array.from(distinctLabels);\n        if (options.sort) {\n            distinctLabels.sort(options.sort);\n        }\n\n        // Create confusion matrix and fill with 0's\n        const matrix = Array.from({length: distinctLabels.length});\n        for (let i = 0; i < matrix.length; i++) {\n            matrix[i] = new Array(matrix.length);\n            matrix[i].fill(0);\n        }\n\n        for (let i = 0; i < predicted.length; i++) {\n            const actualIdx = distinctLabels.indexOf(actual[i]);\n            const predictedIdx = distinctLabels.indexOf(predicted[i]);\n            if (actualIdx >= 0 && predictedIdx >= 0) {\n                matrix[actualIdx][predictedIdx]++;\n            }\n        }\n\n        return new ConfusionMatrix(matrix, distinctLabels);\n    }\n\n    /**\n     * Get the confusion matrix\n     * @return {Array<Array<number> >}\n     */\n    getMatrix() {\n        return this.matrix;\n    }\n\n    getLabels() {\n        return this.labels;\n    }\n\n    /**\n     * Get the total number of samples\n     * @return {number}\n     */\n    getTotalCount() {\n        let predicted = 0;\n        for (var i = 0; i < this.matrix.length; i++) {\n            for (var j = 0; j < this.matrix.length; j++) {\n                predicted += this.matrix[i][j];\n            }\n        }\n        return predicted;\n    }\n\n    /**\n     * Get the total number of true predictions\n     * @return {number}\n     */\n    getTrueCount() {\n        var count = 0;\n        for (var i = 0; i < this.matrix.length; i++) {\n            count += this.matrix[i][i];\n        }\n        return count;\n    }\n\n    /**\n     * Get the total number of false predictions.\n     * @return {number}\n     */\n    getFalseCount() {\n        return this.getTotalCount() - this.getTrueCount();\n    }\n\n    /**\n     * Get the number of true positive predictions.\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getTruePositiveCount(label) {\n        const index = this.getIndex(label);\n        return this.matrix[index][index];\n    }\n\n    /**\n     * Get the number of true negative predictions\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getTrueNegativeCount(label) {\n        const index = this.getIndex(label);\n        var count = 0;\n        for (var i = 0; i < this.matrix.length; i++) {\n            for (var j = 0; j < this.matrix.length; j++) {\n                if (i !== index && j !== index) {\n                    count += this.matrix[i][j];\n                }\n            }\n        }\n        return count;\n    }\n\n    /**\n     * Get the number of false positive predictions.\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getFalsePositiveCount(label) {\n        const index = this.getIndex(label);\n        var count = 0;\n        for (var i = 0; i < this.matrix.length; i++) {\n            if (i !== index) {\n                count += this.matrix[i][index];\n            }\n        }\n        return count;\n    }\n\n    /**\n     * Get the number of false negative predictions.\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getFalseNegativeCount(label) {\n        const index = this.getIndex(label);\n        var count = 0;\n        for (var i = 0; i < this.matrix.length; i++) {\n            if (i !== index) {\n                count += this.matrix[index][i];\n            }\n        }\n        return count;\n    }\n\n    /**\n     * Get the number of real positive samples.\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getPositiveCount(label) {\n        return this.getTruePositiveCount(label) + this.getFalseNegativeCount(label);\n    }\n\n    /**\n     * Get the number of real negative samples.\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getNegativeCount(label) {\n        return this.getTrueNegativeCount(label) + this.getFalsePositiveCount(label);\n    }\n\n    /**\n     * Get the index in the confusion matrix that corresponds to the given label\n     * @param {any} label - The label to search for\n     * @throws if the label is not found\n     * @return {number}\n     */\n    getIndex(label) {\n        const index = this.labels.indexOf(label);\n        if (index === -1) throw new Error('The label does not exist');\n        return index;\n    }\n\n    /**\n     * Get the true positive rate a.k.a. sensitivity. Computes the ratio between the number of true positive predictions and the total number of positive samples.\n     * {@link https://en.wikipedia.org/wiki/Sensitivity_and_specificity}\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number} - The true positive rate [0-1]\n     */\n    getTruePositiveRate(label) {\n        return this.getTruePositiveCount(label) / this.getPositiveCount(label);\n    }\n\n    /**\n     * Get the true negative rate a.k.a. specificity. Computes the ration between the number of true negative predictions and the total number of negative samples.\n     * {@link https://en.wikipedia.org/wiki/Sensitivity_and_specificity}\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getTrueNegativeRate(label) {\n        return this.getTrueNegativeCount(label) / this.getNegativeCount(label);\n    }\n\n    /**\n     * Get the positive predictive value a.k.a. precision. Computes TP / (TP + FP)\n     * {@link https://en.wikipedia.org/wiki/Positive_and_negative_predictive_values}\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getPositivePredictiveValue(label) {\n        const TP = this.getTruePositiveCount(label);\n        return TP / (TP + this.getFalsePositiveCount(label));\n    }\n\n    /**\n     * Negative predictive value\n     * {@link https://en.wikipedia.org/wiki/Positive_and_negative_predictive_values}\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getNegativePredictiveValue(label) {\n        const TN = this.getTrueNegativeCount(label);\n        return TN / (TN + this.getFalseNegativeCount(label));\n    }\n\n    /**\n     * False negative rate a.k.a. miss rate.\n     * {@link https://en.wikipedia.org/wiki/Type_I_and_type_II_errors#False_positive_and_false_negative_rates}\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getFalseNegativeRate(label) {\n        return 1 - this.getTruePositiveRate(label);\n    }\n\n    /**\n     * False positive rate a.k.a. fall-out rate.\n     * {@link https://en.wikipedia.org/wiki/Type_I_and_type_II_errors#False_positive_and_false_negative_rates}\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getFalsePositiveRate(label) {\n        return 1 - this.getTrueNegativeRate(label);\n    }\n\n    /**\n     * False discovery rate (FDR)\n     * {@link https://en.wikipedia.org/wiki/False_discovery_rate}\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getFalseDiscoveryRate(label) {\n        const FP = this.getFalsePositiveCount(label);\n        return FP / (FP + this.getTruePositiveCount(label));\n    }\n\n    /**\n     * False omission rate (FOR)\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getFalseOmissionRate(label) {\n        const FN = this.getFalseNegativeCount(label);\n        return FN / (FN + this.getTruePositiveCount(label));\n    }\n\n    /**\n     * F1 score\n     * {@link https://en.wikipedia.org/wiki/F1_score}\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getF1Score(label) {\n        const TP = this.getTruePositiveCount(label);\n        return 2 * TP / (2 * TP + this.getFalsePositiveCount(label) + this.getFalseNegativeCount(label));\n    }\n\n    /**\n     * Matthews correlation coefficient (MCC)\n     * {@link https://en.wikipedia.org/wiki/Matthews_correlation_coefficient}\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getMatthewsCorrelationCoefficient(label) {\n        const TP = this.getTruePositiveCount(label);\n        const TN = this.getTrueNegativeCount(label);\n        const FP = this.getFalsePositiveCount(label);\n        const FN = this.getFalseNegativeCount(label);\n        return (TP * TN - FP * FN) / Math.sqrt((TP + FP) * (TP + FN) * (TN + FP) * (TN + FN));\n    }\n\n    /**\n     * Informedness\n     * {@link https://en.wikipedia.org/wiki/Youden%27s_J_statistic}\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getInformedness(label) {\n        return this.getTruePositiveRate(label) + this.getTrueNegativeRate(label) - 1;\n    }\n\n    /**\n     * Markedness\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {number}\n     */\n    getMarkedness(label) {\n        return this.getPositivePredictiveValue(label) + this.getNegativePredictiveValue(label) - 1;\n    }\n\n    /**\n     * Get the confusion table.\n     * @param {any} label - The label that should be considered \"positive\"\n     * @return {Array<Array<number> >} - The 2x2 confusion table. [[TP, FN], [FP, TN]]\n     */\n    getConfusionTable(label) {\n        return [\n            [\n                this.getTruePositiveCount(label),\n                this.getFalseNegativeCount(label)\n            ],\n            [\n                this.getFalsePositiveCount(label),\n                this.getTrueNegativeCount(label)\n            ]\n        ];\n    }\n\n    /**\n     * Get total accuracy.\n     * @return {number} - The ratio between the number of true predictions and total number of classifications ([0-1])\n     */\n    getAccuracy() {\n        let correct = 0;\n        let incorrect = 0;\n        for (var i = 0; i < this.matrix.length; i++) {\n            for (var j = 0; j < this.matrix.length; j++) {\n                if (i === j) correct += this.matrix[i][j];\n                else incorrect += this.matrix[i][j];\n            }\n        }\n        return correct / (correct + incorrect);\n    }\n\n\n    /**\n     * Returns the element in the confusion matrix that corresponds to the given actual and predicted labels.\n     * @param {any} actual - The true label\n     * @param {any} predicted - The predicted label\n     * @return {number} - The element in the confusion matrix\n     */\n    getCount(actual, predicted) {\n        const actualIndex = this.getIndex(actual);\n        const predictedIndex = this.getIndex(predicted);\n        return this.matrix[actualIndex][predictedIndex];\n    }\n\n    /**\n     * Compute the general prediction accuracy\n     * @deprecated Use getAccuracy\n     * @return {number} - The prediction accuracy ([0-1]\n     */\n    get accuracy() {\n        return this.getAccuracy();\n    }\n\n    /**\n     * Compute the number of predicted observations\n     * @deprecated Use getTotalCount\n     * @return {number}\n     */\n    get total() {\n        return this.getTotalCount();\n    }\n}\n\nmodule.exports = ConfusionMatrix;\n","'use strict';\nconst defaultOptions = {\n  mode: 'index'\n};\n\nmodule.exports = function *(M, N, options) {\n  options = Object.assign({}, defaultOptions, options);\n  var a = new Array(N);\n  var c = new Array(M);\n  var b = new Array(N);\n  var p = new Array(N + 2);\n  var x, y, z;\n\n  // init a and b\n  for (var i = 0; i < N; i++) {\n    a[i] = i;\n    if (i < N - M) b[i] = 0;\n    else b[i] = 1;\n  }\n\n  // init c\n  for (i = 0; i < M; i++) {\n    c[i] = N - M + i;\n  }\n\n  // init p\n  for (i = 0; i < p.length; i++) {\n    if (i === 0) p[i] = N + 1;\n    else if (i <= N - M) p[i] = 0;\n    else if (i <= N) p[i] = i - N + M;\n    else p[i] = -2;\n  }\n\n  function twiddle() {\n    var i, j, k;\n    j = 1;\n    while (p[j] <= 0) {\n      j++;\n    }\n    if (p[j - 1] === 0) {\n      for (i = j - 1; i !== 1; i--) {\n        p[i] = -1;\n      }\n      p[j] = 0;\n      x = z = 0;\n      p[1] = 1;\n      y = j - 1;\n    } else {\n      if (j > 1) {\n        p[j - 1] = 0;\n      }\n      do {\n        j++;\n      }\n      while (p[j] > 0);\n      k = j - 1;\n      i = j;\n      while (p[i] === 0) {\n        p[i++] = -1;\n      }\n      if (p[i] === -1) {\n        p[i] = p[k];\n        z = p[k] - 1;\n        x = i - 1;\n        y = k - 1;\n        p[k] = -1;\n      } else {\n        if (i === p[0]) {\n          return 0;\n        } else {\n          p[j] = p[i];\n          z = p[i] - 1;\n          p[i] = 0;\n          x = j - 1;\n          y = i - 1;\n        }\n      }\n    }\n    return 1;\n  }\n\n  if (options.mode === 'index') {\n    yield c.slice();\n    while (twiddle()) {\n      c[z] = a[x];\n      yield c.slice();\n    }\n  } else if (options.mode === 'mask') {\n    yield b.slice();\n    while (twiddle()) {\n      b[x] = 1;\n      b[y] = 0;\n      yield b.slice();\n    }\n  } else {\n    throw new Error('Invalid mode');\n  }\n};\n","'use strict';\n\nconst ConfusionMatrix = require('ml-confusion-matrix');\n\nconst CV = {};\nconst combinations = require('ml-combinations');\n\n/**\n * Performs a leave-one-out cross-validation (LOO-CV) of the given samples. In LOO-CV, 1 observation is used as the\n * validation set while the rest is used as the training set. This is repeated once for each observation. LOO-CV is a\n * special case of LPO-CV. @see leavePout\n * @param {function} Classifier - The classifier's constructor to use for the cross validation. Expect ml-classifier\n *     api.\n * @param {Array} features - The features for all samples of the data-set\n * @param {Array} labels - The classification class of all samples of the data-set\n * @param {object} classifierOptions - The classifier options with which the classifier should be instantiated.\n * @return {ConfusionMatrix} - The cross-validation confusion matrix\n */\nCV.leaveOneOut = function (Classifier, features, labels, classifierOptions) {\n    if (typeof labels === 'function') {\n        var callback = labels;\n        labels = features;\n        features = Classifier;\n        return CV.leavePOut(features, labels, 1, callback);\n    }\n    return CV.leavePOut(Classifier, features, labels, classifierOptions, 1);\n};\n\n\n/**\n * Performs a leave-p-out cross-validation (LPO-CV) of the given samples. In LPO-CV, p observations are used as the\n * validation set while the rest is used as the training set. This is repeated as many times as there are possible\n * ways to combine p observations from the set (unordered without replacement). Be aware that for relatively small\n * data-set size this can require a very large number of training and testing to do!\n * @param {function} Classifier - The classifier's constructor to use for the cross validation. Expect ml-classifier\n *     api.\n * @param {Array} features - The features for all samples of the data-set\n * @param {Array} labels - The classification class of all samples of the data-set\n * @param {object} classifierOptions - The classifier options with which the classifier should be instantiated.\n * @param {number} p - The size of the validation sub-samples' set\n * @return {ConfusionMatrix} - The cross-validation confusion matrix\n */\nCV.leavePOut = function (Classifier, features, labels, classifierOptions, p) {\n    if (typeof classifierOptions === 'function') {\n        var callback = classifierOptions;\n        p = labels;\n        labels = features;\n        features = Classifier;\n    }\n    check(features, labels);\n    const distinct = getDistinct(labels);\n    const confusionMatrix = initMatrix(distinct.length, distinct.length);\n\n    var N = features.length;\n    var gen = combinations(p, N);\n    var allIdx = new Array(N);\n    for (let i = 0; i < N; i++) {\n        allIdx[i] = i;\n    }\n    for (const testIdx of gen) {\n        var trainIdx = allIdx.slice();\n\n        for (let i = testIdx.length - 1; i >= 0; i--) {\n            trainIdx.splice(testIdx[i], 1);\n        }\n\n        if (callback) {\n            validateWithCallback(features, labels, testIdx, trainIdx, confusionMatrix, distinct, callback);\n        } else {\n            validate(Classifier, features, labels, classifierOptions, testIdx, trainIdx, confusionMatrix, distinct);\n        }\n\n    }\n\n    return new ConfusionMatrix(confusionMatrix, distinct);\n};\n\n/**\n * Performs k-fold cross-validation (KF-CV). KF-CV separates the data-set into k random equally sized partitions, and\n * uses each as a validation set, with all other partitions used in the training set. Observations left over from if k\n * does not divide the number of observations are left out of the cross-validation process.\n * @param {function} Classifier - The classifier's to use for the cross validation. Expect ml-classifier api.\n * @param {Array} features - The features for all samples of the data-set\n * @param {Array} labels - The classification class of all samples of the data-set\n * @param {object} classifierOptions - The classifier options with which the classifier should be instantiated.\n * @param {number} k - The number of partitions to create\n * @return {ConfusionMatrix} - The cross-validation confusion matrix\n */\nCV.kFold = function (Classifier, features, labels, classifierOptions, k) {\n    if (typeof classifierOptions === 'function') {\n        var callback = classifierOptions;\n        k = labels;\n        labels = features;\n        features = Classifier;\n    }\n    check(features, labels);\n    const distinct = getDistinct(labels);\n    const confusionMatrix = initMatrix(distinct.length, distinct.length);\n    var N = features.length;\n    var allIdx = new Array(N);\n    for (var i = 0; i < N; i++) {\n        allIdx[i] = i;\n    }\n\n    var l = Math.floor(N / k);\n    // create random k-folds\n    var current = [];\n    var folds = [];\n    while (allIdx.length) {\n        var randi = Math.floor(Math.random() * allIdx.length);\n        current.push(allIdx[randi]);\n        allIdx.splice(randi, 1);\n        if (current.length === l) {\n            folds.push(current);\n            current = [];\n        }\n    }\n    if (current.length) folds.push(current);\n    folds = folds.slice(0, k);\n\n\n    for (i = 0; i < folds.length; i++) {\n        var testIdx = folds[i];\n        var trainIdx = [];\n        for (var j = 0; j < folds.length; j++) {\n            if (j !== i) trainIdx = trainIdx.concat(folds[j]);\n        }\n\n        if (callback) {\n            validateWithCallback(features, labels, testIdx, trainIdx, confusionMatrix, distinct, callback);\n        } else {\n            validate(Classifier, features, labels, classifierOptions, testIdx, trainIdx, confusionMatrix, distinct);\n        }\n    }\n\n    return new ConfusionMatrix(confusionMatrix, distinct);\n};\n\nfunction check(features, labels) {\n    if (features.length !== labels.length) {\n        throw new Error('features and labels should have the same length');\n    }\n}\n\nfunction initMatrix(rows, columns) {\n    return new Array(rows).fill(0).map(() => new Array(columns).fill(0));\n}\n\nfunction getDistinct(arr) {\n    var s = new Set();\n    for (let i = 0; i < arr.length; i++) {\n        s.add(arr[i]);\n    }\n    return Array.from(s);\n}\n\nfunction validate(Classifier, features, labels, classifierOptions, testIdx, trainIdx, confusionMatrix, distinct) {\n    const {testFeatures, trainFeatures, testLabels, trainLabels} = getTrainTest(features, labels, testIdx, trainIdx);\n\n    var classifier;\n    if (Classifier.prototype.train) {\n        classifier = new Classifier(classifierOptions);\n        classifier.train(trainFeatures, trainLabels);\n    } else {\n        classifier = new Classifier(trainFeatures, trainLabels, classifierOptions);\n    }\n\n    var predictedLabels = classifier.predict(testFeatures);\n    updateConfusionMatrix(confusionMatrix, testLabels, predictedLabels, distinct);\n}\n\nfunction validateWithCallback(features, labels, testIdx, trainIdx, confusionMatrix, distinct, callback) {\n    const {testFeatures, trainFeatures, testLabels, trainLabels} = getTrainTest(features, labels, testIdx, trainIdx);\n    const predictedLabels = callback(trainFeatures, trainLabels, testFeatures);\n    updateConfusionMatrix(confusionMatrix, testLabels, predictedLabels, distinct);\n}\n\nfunction updateConfusionMatrix(confusionMatrix, testLabels, predictedLabels, distinct) {\n\n    for (var i = 0; i < predictedLabels.length; i++) {\n        const actualIdx = distinct.indexOf(testLabels[i]);\n        const predictedIdx = distinct.indexOf(predictedLabels[i]);\n        if (actualIdx < 0 || predictedIdx < 0) {\n            // eslint-disable-next-line no-console\n            console.warn(`ignore unknown predicted label ${predictedLabels[i]}`);\n        }\n        confusionMatrix[actualIdx][predictedIdx]++;\n    }\n}\n\n\nfunction getTrainTest(features, labels, testIdx, trainIdx) {\n    return {\n        testFeatures: testIdx.map(function (index) {\n            return features[index];\n        }),\n        trainFeatures: trainIdx.map(function (index) {\n            return features[index];\n        }),\n        testLabels: testIdx.map(function (index) {\n            return labels[index];\n        }),\n        trainLabels: trainIdx.map(function (index) {\n            return labels[index];\n        })\n    };\n}\n\nmodule.exports = CV;\n","'use strict';\n\nvar mlMatrix = require('ml-matrix');\n\nfunction logistic(val) {\n  return 1 / (1 + Math.exp(-val));\n}\n\nfunction expELU(val, param) {\n  return val < 0 ? param * (Math.exp(val) - 1) : val;\n}\n\nfunction softExponential(val, param) {\n  if (param < 0) {\n    return -Math.log(1 - param * (val + param)) / param;\n  }\n  if (param > 0) {\n    return ((Math.exp(param * val) - 1) / param) + param;\n  }\n  return val;\n}\n\nfunction softExponentialPrime(val, param) {\n  if (param < 0) {\n    return 1 / (1 - param * (param + val));\n  } else {\n    return Math.exp(param * val);\n  }\n}\n\nconst ACTIVATION_FUNCTIONS = {\n  tanh: {\n    activation: Math.tanh,\n    derivate: (val) => 1 - (val * val)\n  },\n  identity: {\n    activation: (val) => val,\n    derivate: () => 1\n  },\n  logistic: {\n    activation: logistic,\n    derivate: (val) => logistic(val) * (1 - logistic(val))\n  },\n  arctan: {\n    activation: Math.atan,\n    derivate: (val) => 1 / (val * val + 1)\n  },\n  softsign: {\n    activation: (val) => val / (1 + Math.abs(val)),\n    derivate: (val) => 1 / ((1 + Math.abs(val)) * (1 + Math.abs(val)))\n  },\n  relu: {\n    activation: (val) => (val < 0 ? 0 : val),\n    derivate: (val) => (val < 0 ? 0 : 1)\n  },\n  softplus: {\n    activation: (val) => Math.log(1 + Math.exp(val)),\n    derivate: (val) => 1 / (1 + Math.exp(-val))\n  },\n  bent: {\n    activation: (val) => ((Math.sqrt(val * val + 1) - 1) / 2) + val,\n    derivate: (val) => (val / (2 * Math.sqrt(val * val + 1))) + 1\n  },\n  sinusoid: {\n    activation: Math.sin,\n    derivate: Math.cos\n  },\n  sinc: {\n    activation: (val) => (val === 0 ? 1 : Math.sin(val) / val),\n    derivate: (val) => (val === 0 ? 0 : (Math.cos(val) / val) - (Math.sin(val) / (val * val)))\n  },\n  gaussian: {\n    activation: (val) => Math.exp(-(val * val)),\n    derivate: (val) => -2 * val * Math.exp(-(val * val))\n  },\n  'parametric-relu': {\n    activation: (val, param) => (val < 0 ? param * val : val),\n    derivate: (val, param) => (val < 0 ? param : 1)\n  },\n  'exponential-elu': {\n    activation: expELU,\n    derivate: (val, param) => (val < 0 ? expELU(val, param) + param : 1)\n  },\n  'soft-exponential': {\n    activation: softExponential,\n    derivate: softExponentialPrime\n  }\n};\n\nclass Layer {\n  /**\n     * @private\n     * Create a new layer with the given options\n     * @param {object} options\n     * @param {number} [options.inputSize] - Number of conections that enter the neurons.\n     * @param {number} [options.outputSize] - Number of conections that leave the neurons.\n     * @param {number} [options.regularization] - Regularization parameter.\n     * @param {number} [options.epsilon] - Learning rate parameter.\n     * @param {string} [options.activation] - Activation function parameter from the FeedForwardNeuralNetwork class.\n     * @param {number} [options.activationParam] - Activation parameter if needed.\n     */\n  constructor(options) {\n    this.inputSize = options.inputSize;\n    this.outputSize = options.outputSize;\n    this.regularization = options.regularization;\n    this.epsilon = options.epsilon;\n    this.activation = options.activation;\n    this.activationParam = options.activationParam;\n\n    var selectedFunction = ACTIVATION_FUNCTIONS[options.activation];\n    var params = selectedFunction.activation.length;\n\n    var actFunction = params > 1 ? (val) => selectedFunction.activation(val, options.activationParam) : selectedFunction.activation;\n    var derFunction = params > 1 ? (val) => selectedFunction.derivate(val, options.activationParam) : selectedFunction.derivate;\n\n    this.activationFunction = function (i, j) {\n      this.set(i, j, actFunction(this.get(i, j)));\n    };\n    this.derivate = function (i, j) {\n      this.set(i, j, derFunction(this.get(i, j)));\n    };\n\n    if (options.model) {\n      // load model\n      this.W = mlMatrix.Matrix.checkMatrix(options.W);\n      this.b = mlMatrix.Matrix.checkMatrix(options.b);\n    } else {\n      // default constructor\n      this.W = mlMatrix.Matrix.rand(this.inputSize, this.outputSize);\n      this.b = mlMatrix.Matrix.zeros(1, this.outputSize);\n\n      this.W.apply(function (i, j) {\n        this.set(i, j, this.get(i, j) / Math.sqrt(options.inputSize));\n      });\n    }\n  }\n\n  /**\n     * @private\n     * propagate the given input through the current layer.\n     * @param {Matrix} X - input.\n     * @return {Matrix} output at the current layer.\n     */\n  forward(X) {\n    var z = X.mmul(this.W).addRowVector(this.b);\n    z.apply(this.activationFunction);\n    this.a = z.clone();\n    return z;\n  }\n\n  /**\n     * @private\n     * apply backpropagation algorithm at the current layer\n     * @param {Matrix} delta - delta values estimated at the following layer.\n     * @param {Matrix} a - 'a' values from the following layer.\n     * @return {Matrix} the new delta values for the next layer.\n     */\n  backpropagation(delta, a) {\n    this.dW = a.transpose().mmul(delta);\n    this.db = mlMatrix.Matrix.rowVector(delta.sum('column'));\n\n    var aCopy = a.clone();\n    return delta.mmul(this.W.transpose()).mul(aCopy.apply(this.derivate));\n  }\n\n  /**\n     * @private\n     * Function that updates the weights at the current layer with the derivatives.\n     */\n  update() {\n    this.dW.add(this.W.clone().mul(this.regularization));\n    this.W.add(this.dW.mul(-this.epsilon));\n    this.b.add(this.db.mul(-this.epsilon));\n  }\n\n  /**\n     * @private\n     * Export the current layer to JSON.\n     * @return {object} model\n     */\n  toJSON() {\n    return {\n      model: 'Layer',\n      inputSize: this.inputSize,\n      outputSize: this.outputSize,\n      regularization: this.regularization,\n      epsilon: this.epsilon,\n      activation: this.activation,\n      W: this.W,\n      b: this.b\n    };\n  }\n\n  /**\n     * @private\n     * Creates a new Layer with the given model.\n     * @param {object} model\n     * @return {Layer}\n     */\n  static load(model) {\n    if (model.model !== 'Layer') {\n      throw new RangeError('the current model is not a Layer model');\n    }\n    return new Layer(model);\n  }\n}\n\nclass OutputLayer extends Layer {\n  constructor(options) {\n    super(options);\n\n    this.activationFunction = function (i, j) {\n      this.set(i, j, Math.exp(this.get(i, j)));\n    };\n  }\n\n  static load(model) {\n    if (model.model !== 'Layer') {\n      throw new RangeError('the current model is not a Layer model');\n    }\n\n    return new OutputLayer(model);\n  }\n}\n\nclass FeedForwardNeuralNetworks {\n  /**\n   * Create a new Feedforward neural network model.\n   * @class FeedForwardNeuralNetworks\n   * @param {object} [options]\n   * @param {Array} [options.hiddenLayers=[10]] - Array that contains the sizes of the hidden layers.\n   * @param {number} [options.iterations=50] - Number of iterations at the training step.\n   * @param {number} [options.learningRate=0.01] - Learning rate of the neural net (also known as epsilon).\n   * @param {number} [options.regularization=0.01] - Regularization parameter af the neural net.\n   * @param {string} [options.activation='tanh'] - activation function to be used. (options: 'tanh'(default),\n   * 'identity', 'logistic', 'arctan', 'softsign', 'relu', 'softplus', 'bent', 'sinusoid', 'sinc', 'gaussian').\n   * (single-parametric options: 'parametric-relu', 'exponential-relu', 'soft-exponential').\n   * @param {number} [options.activationParam=1] - if the selected activation function needs a parameter.\n   */\n  constructor(options) {\n    options = options || {};\n    if (options.model) {\n      // load network\n      this.hiddenLayers = options.hiddenLayers;\n      this.iterations = options.iterations;\n      this.learningRate = options.learningRate;\n      this.regularization = options.regularization;\n      this.dicts = options.dicts;\n      this.activation = options.activation;\n      this.activationParam = options.activationParam;\n      this.model = new Array(options.layers.length);\n\n      for (var i = 0; i < this.model.length - 1; ++i) {\n        this.model[i] = Layer.load(options.layers[i]);\n      }\n      this.model[this.model.length - 1] = OutputLayer.load(options.layers[this.model.length - 1]);\n    } else {\n      // default constructor\n      this.hiddenLayers = options.hiddenLayers || [10];\n      this.iterations = options.iterations || 50;\n\n      this.learningRate = options.learningRate || 0.01;\n      this.regularization = options.regularization || 0.01;\n\n      this.activation = options.activation || 'tanh';\n      this.activationParam = options.activationParam || 1;\n      if (!(this.activation in Object.keys(ACTIVATION_FUNCTIONS))) {\n        this.activation = 'tanh';\n      }\n    }\n  }\n\n  /**\n   * @private\n   * Function that build and initialize the neural net.\n   * @param {number} inputSize - total of features to fit.\n   * @param {number} outputSize - total of labels of the prediction set.\n   */\n  buildNetwork(inputSize, outputSize) {\n    var size = 2 + (this.hiddenLayers.length - 1);\n    this.model = new Array(size);\n\n    // input layer\n    this.model[0] = new Layer({\n      inputSize: inputSize,\n      outputSize: this.hiddenLayers[0],\n      activation: this.activation,\n      activationParam: this.activationParam,\n      regularization: this.regularization,\n      epsilon: this.learningRate\n    });\n\n    // hidden layers\n    for (var i = 1; i < this.hiddenLayers.length; ++i) {\n      this.model[i] = new Layer({\n        inputSize: this.hiddenLayers[i - 1],\n        outputSize: this.hiddenLayers[i],\n        activation: this.activation,\n        activationParam: this.activationParam,\n        regularization: this.regularization,\n        epsilon: this.learningRate\n      });\n    }\n\n    // output layer\n    this.model[size - 1] = new OutputLayer({\n      inputSize: this.hiddenLayers[this.hiddenLayers.length - 1],\n      outputSize: outputSize,\n      activation: this.activation,\n      activationParam: this.activationParam,\n      regularization: this.regularization,\n      epsilon: this.learningRate\n    });\n  }\n\n  /**\n   * Train the neural net with the given features and labels.\n   * @param {Matrix|Array} features\n   * @param {Matrix|Array} labels\n   */\n  train(features, labels) {\n    features = mlMatrix.Matrix.checkMatrix(features);\n    this.dicts = dictOutputs(labels);\n\n    var inputSize = features.columns;\n    var outputSize = Object.keys(this.dicts.inputs).length;\n\n    if (!this.model) {\n      this.buildNetwork(inputSize, outputSize);\n    }\n\n    for (var i = 0; i < this.iterations; ++i) {\n      var probabilities = this.propagate(features);\n      this.backpropagation(features, labels, probabilities);\n    }\n  }\n\n  /**\n   * @private\n   * Propagate the input(training set) and retrives the probabilities of each class.\n   * @param {Matrix} X\n   * @return {Matrix} probabilities of each class.\n   */\n  propagate(X) {\n    var input = X;\n    for (var i = 0; i < this.model.length; ++i) {\n      input = this.model[i].forward(input);\n    }\n\n    // get probabilities\n    return input.divColumnVector(input.sum('row'));\n  }\n\n  /**\n   * @private\n   * Function that applies the backpropagation algorithm on each layer of the network\n   * in order to fit the features and labels.\n   * @param {Matrix} features\n   * @param {Array} labels\n   * @param {Matrix} probabilities - probabilities of each class of the feature set.\n   */\n  backpropagation(features, labels, probabilities) {\n    for (var i = 0; i < probabilities.rows; ++i) {\n      probabilities.set(i, this.dicts.inputs[labels[i]], probabilities.get(i, this.dicts.inputs[labels[i]]) - 1);\n    }\n\n    // remember, the last delta doesn't matter\n    var delta = probabilities;\n    for (i = this.model.length - 1; i >= 0; --i) {\n      var a = i > 0 ? this.model[i - 1].a : features;\n      delta = this.model[i].backpropagation(delta, a);\n    }\n\n    for (i = 0; i < this.model.length; ++i) {\n      this.model[i].update();\n    }\n  }\n\n  /**\n   * Predict the output given the feature set.\n   * @param {Array|Matrix} features\n   * @return {Array}\n   */\n  predict(features) {\n    features = mlMatrix.Matrix.checkMatrix(features);\n    var outputs = new Array(features.rows);\n    var probabilities = this.propagate(features);\n    for (var i = 0; i < features.rows; ++i) {\n      outputs[i] = this.dicts.outputs[probabilities.maxRowIndex(i)[1]];\n    }\n\n    return outputs;\n  }\n\n  /**\n   * Export the current model to JSON.\n   * @return {object} model\n   */\n  toJSON() {\n    var model = {\n      model: 'FNN',\n      hiddenLayers: this.hiddenLayers,\n      iterations: this.iterations,\n      learningRate: this.learningRate,\n      regularization: this.regularization,\n      activation: this.activation,\n      activationParam: this.activationParam,\n      dicts: this.dicts,\n      layers: new Array(this.model.length)\n    };\n\n    for (var i = 0; i < this.model.length; ++i) {\n      model.layers[i] = this.model[i].toJSON();\n    }\n\n    return model;\n  }\n\n  /**\n   * Load a Feedforward Neural Network with the current model.\n   * @param {object} model\n   * @return {FeedForwardNeuralNetworks}\n   */\n  static load(model) {\n    if (model.model !== 'FNN') {\n      throw new RangeError('the current model is not a feed forward network');\n    }\n\n    return new FeedForwardNeuralNetworks(model);\n  }\n}\n\n/**\n * @private\n * Method that given an array of labels(predictions), returns two dictionaries, one to transform from labels to\n * numbers and other in the reverse way\n * @param {Array} array\n * @return {object}\n */\nfunction dictOutputs(array) {\n  var inputs = {};\n  var outputs = {};\n  var index = 0;\n  for (var i = 0; i < array.length; i += 1) {\n    if (inputs[array[i]] === undefined) {\n      inputs[array[i]] = index;\n      outputs[index] = array[i];\n      index++;\n    }\n  }\n\n  return {\n    inputs: inputs,\n    outputs: outputs\n  };\n}\n\nmodule.exports = FeedForwardNeuralNetworks;\n","function NodeSquare(x, y, weights, som) {\n    this.x = x;\n    this.y = y;\n    this.weights = weights;\n    this.som = som;\n    this.neighbors = {};\n}\n\nNodeSquare.prototype.adjustWeights = function adjustWeights(target, learningRate, influence) {\n    for (var i = 0, ii = this.weights.length; i < ii; i++) {\n        this.weights[i] += learningRate * influence * (target[i] - this.weights[i]);\n    }\n};\n\nNodeSquare.prototype.getDistance = function getDistance(otherNode) {\n    return Math.max(Math.abs(this.x - otherNode.x), Math.abs(this.y - otherNode.y));\n};\n\nNodeSquare.prototype.getDistanceTorus = function getDistanceTorus(otherNode) {\n    var distX = Math.abs(this.x - otherNode.x),\n        distY = Math.abs(this.y - otherNode.y);\n    return Math.max(Math.min(distX, this.som.gridDim.x - distX), Math.min(distY, this.som.gridDim.y - distY));\n};\n\nNodeSquare.prototype.getNeighbors = function getNeighbors(xy) {\n    if (!this.neighbors[xy]) {\n        this.neighbors[xy] = new Array(2);\n\n        // left or bottom neighbor\n        var v;\n        if (this[xy] > 0) {\n            v = this[xy] - 1;\n        } else if (this.som.torus) {\n            v = this.som.gridDim[xy] - 1\n        }\n        if (typeof v !== 'undefined') {\n            var x, y;\n            if (xy === 'x') {\n                x = v;\n                y = this.y;\n            } else {\n                x = this.x;\n                y = v;\n            }\n            this.neighbors[xy][0] = this.som.nodes[x][y];\n        }\n\n        // top or right neighbor\n        var w;\n        if (this[xy] < (this.som.gridDim[xy] - 1)) {\n            w = this[xy] + 1;\n        } else if (this.som.torus) {\n            w = 0;\n        }\n        if (typeof w !== 'undefined') {\n            if (xy === 'x') {\n                x = w;\n                y = this.y;\n            } else {\n                x = this.x;\n                y = w;\n            }\n            this.neighbors[xy][1] = this.som.nodes[x][y];\n        }\n    }\n    return this.neighbors[xy];\n};\n\nNodeSquare.prototype.getPos = function getPos(xy, element) {\n    var neighbors = this.getNeighbors(xy),\n        distance = this.som.distance,\n        bestNeighbor,\n        direction;\n    if(neighbors[0]) {\n        if (neighbors[1]) {\n            var dist1 = distance(element, neighbors[0].weights),\n                dist2 = distance(element, neighbors[1].weights);\n            if(dist1 < dist2) {\n                bestNeighbor = neighbors[0];\n                direction = -1;\n            } else {\n                bestNeighbor = neighbors[1];\n                direction = 1;\n            }\n        } else {\n            bestNeighbor = neighbors[0];\n            direction = -1;\n        }\n    } else {\n        bestNeighbor = neighbors[1];\n        direction = 1;\n    }\n    var simA = 1 - distance(element, this.weights),\n        simB = 1 - distance(element, bestNeighbor.weights);\n    var factor = ((simA - simB) / (2 - simA - simB));\n    return 0.5 + 0.5 * factor * direction;\n};\n\nNodeSquare.prototype.getPosition = function getPosition(element) {\n    return [\n        this.getPos('x', element),\n        this.getPos('y', element)\n    ];\n};\n\nmodule.exports = NodeSquare;","var NodeSquare = require('./node-square');\n\nfunction NodeHexagonal(x, y, weights, som) {\n\n    NodeSquare.call(this, x, y, weights, som);\n\n    this.hX = x - Math.floor(y / 2);\n    this.z = 0 - this.hX - y;\n\n}\n\nNodeHexagonal.prototype = new NodeSquare;\nNodeHexagonal.prototype.constructor = NodeHexagonal;\n\nNodeHexagonal.prototype.getDistance = function getDistanceHexagonal(otherNode) {\n    return Math.max(Math.abs(this.hX - otherNode.hX), Math.abs(this.y - otherNode.y), Math.abs(this.z - otherNode.z));\n};\n\nNodeHexagonal.prototype.getDistanceTorus = function getDistanceTorus(otherNode) {\n    var distX = Math.abs(this.hX - otherNode.hX),\n        distY = Math.abs(this.y - otherNode.y),\n        distZ = Math.abs(this.z - otherNode.z);\n    return Math.max(Math.min(distX, this.som.gridDim.x - distX), Math.min(distY, this.som.gridDim.y - distY), Math.min(distZ, this.som.gridDim.z - distZ));\n};\n\nNodeHexagonal.prototype.getPosition = function getPosition() {\n    throw new Error('Unimplemented : cannot get position of the points for hexagonal grid');\n};\n\nmodule.exports = NodeHexagonal;","'use strict';\n\nvar NodeSquare = require('./node-square'),\n    NodeHexagonal = require('./node-hexagonal');\n\nvar defaultOptions = {\n    fields: 3,\n    randomizer: Math.random,\n    distance: squareEuclidean,\n    iterations: 10,\n    learningRate: 0.1,\n    gridType: 'rect',\n    torus: true,\n    method: 'random'\n};\n\nfunction SOM(x, y, options, reload) {\n\n    this.x = x;\n    this.y = y;\n\n    options = options || {};\n    this.options = {};\n    for (var i in defaultOptions) {\n        if (options.hasOwnProperty(i)) {\n            this.options[i] = options[i];\n        } else {\n            this.options[i] = defaultOptions[i];\n        }\n    }\n\n    if (typeof this.options.fields === 'number') {\n        this.numWeights = this.options.fields;\n    } else if (Array.isArray(this.options.fields)) {\n        this.numWeights = this.options.fields.length;\n        var converters = getConverters(this.options.fields);\n        this.extractor = converters.extractor;\n        this.creator = converters.creator;\n    } else {\n        throw new Error('Invalid fields definition');\n    }\n\n    if (this.options.gridType === 'rect') {\n        this.nodeType = NodeSquare;\n        this.gridDim = {\n            x: x,\n            y: y\n        };\n    } else {\n        this.nodeType = NodeHexagonal;\n        var hx = this.x - Math.floor(this.y / 2);\n        this.gridDim = {\n            x: hx,\n            y: this.y,\n            z: -(0 - hx - this.y)\n        };\n    }\n\n    this.torus = this.options.torus;\n    this.distanceMethod = this.torus ? 'getDistanceTorus' : 'getDistance';\n\n    this.distance = this.options.distance;\n\n    this.maxDistance = getMaxDistance(this.distance, this.numWeights);\n\n    if (reload === true) { // For model loading\n        this.done = true;\n        return;\n    }\n    if (!(x > 0 && y > 0)) {\n        throw new Error('x and y must be positive');\n    }\n\n    this.times = {\n        findBMU: 0,\n        adjust: 0\n    };\n\n    this.randomizer = this.options.randomizer;\n\n    this.iterationCount = 0;\n    this.iterations = this.options.iterations;\n\n    this.startLearningRate = this.learningRate = this.options.learningRate;\n\n    this.mapRadius = Math.floor(Math.max(x, y) / 2);\n\n    this.algorithmMethod = this.options.method;\n\n    this._initNodes();\n\n    this.done = false;\n}\n\nSOM.load = function loadModel(model, distance) {\n    if (model.name === 'SOM') {\n        var x = model.data.length,\n            y = model.data[0].length;\n        if (distance) {\n            model.options.distance = distance;\n        } else if (model.options.distance) {\n            model.options.distance = eval('(' + model.options.distance + ')');\n        }\n        var som = new SOM(x, y, model.options, true);\n        som.nodes = new Array(x);\n        for (var i = 0; i < x; i++) {\n            som.nodes[i] = new Array(y);\n            for (var j = 0; j < y; j++) {\n                som.nodes[i][j] = new som.nodeType(i, j, model.data[i][j], som);\n            }\n        }\n        return som;\n    } else {\n        throw new Error('expecting a SOM model');\n    }\n};\n\nSOM.prototype.export = function exportModel(includeDistance) {\n    if (!this.done) {\n        throw new Error('model is not ready yet');\n    }\n    var model = {\n        name: 'SOM'\n    };\n    model.options = {\n        fields: this.options.fields,\n        gridType: this.options.gridType,\n        torus: this.options.torus\n    };\n    model.data = new Array(this.x);\n    for (var i = 0; i < this.x; i++) {\n        model.data[i] = new Array(this.y);\n        for (var j = 0; j < this.y; j++) {\n            model.data[i][j] = this.nodes[i][j].weights;\n        }\n    }\n    if (includeDistance) {\n        model.options.distance = this.distance.toString();\n    }\n    return model;\n};\n\nSOM.prototype._initNodes = function initNodes() {\n    var now = Date.now(),\n        i, j, k;\n    this.nodes = new Array(this.x);\n    for (i = 0; i < this.x; i++) {\n        this.nodes[i] = new Array(this.y);\n        for (j = 0; j < this.y; j++) {\n            var weights = new Array(this.numWeights);\n            for (k = 0; k < this.numWeights; k++) {\n                weights[k] = this.randomizer();\n            }\n            this.nodes[i][j] = new this.nodeType(i, j, weights, this);\n        }\n    }\n    this.times.initNodes = Date.now() - now;\n};\n\nSOM.prototype.setTraining = function setTraining(trainingSet) {\n    if (this.trainingSet) {\n        throw new Error('training set has already been set');\n    }\n    var now = Date.now();\n    var convertedSet = trainingSet;\n    var i, l = trainingSet.length;\n    if (this.extractor) {\n        convertedSet = new Array(l);\n        for (i = 0; i < l; i++) {\n            convertedSet[i] = this.extractor(trainingSet[i]);\n        }\n    }\n    this.numIterations = this.iterations * l;\n\n    if (this.algorithmMethod === 'random') {\n        this.timeConstant = this.numIterations / Math.log(this.mapRadius);\n    } else {\n        this.timeConstant = l / Math.log(this.mapRadius);\n    }\n    this.trainingSet = convertedSet;\n    this.times.setTraining = Date.now() - now;\n};\n\nSOM.prototype.trainOne = function trainOne() {\n    if (this.done) {\n\n        return false;\n\n    } else if (this.numIterations-- > 0) {\n\n        var neighbourhoodRadius,\n            trainingValue,\n            trainingSetFactor;\n\n        if (this.algorithmMethod === 'random') { // Pick a random value of the training set at each step\n            neighbourhoodRadius = this.mapRadius * Math.exp(-this.iterationCount / this.timeConstant);\n            trainingValue = getRandomValue(this.trainingSet, this.randomizer);\n            this._adjust(trainingValue, neighbourhoodRadius);\n            this.learningRate = this.startLearningRate * Math.exp(-this.iterationCount / this.numIterations);\n        } else { // Get next input vector\n            trainingSetFactor = -Math.floor(this.iterationCount / this.trainingSet.length);\n            neighbourhoodRadius = this.mapRadius * Math.exp(trainingSetFactor / this.timeConstant);\n            trainingValue = this.trainingSet[this.iterationCount % this.trainingSet.length];\n            this._adjust(trainingValue, neighbourhoodRadius);\n            if (((this.iterationCount + 1) % this.trainingSet.length) === 0) {\n                this.learningRate = this.startLearningRate * Math.exp(trainingSetFactor / Math.floor(this.numIterations / this.trainingSet.length));\n            }\n        }\n\n        this.iterationCount++;\n\n        return true;\n\n    } else {\n\n        this.done = true;\n        return false;\n\n    }\n};\n\nSOM.prototype._adjust = function adjust(trainingValue, neighbourhoodRadius) {\n    var now = Date.now(),\n        x, y, dist, influence;\n\n    var bmu = this._findBestMatchingUnit(trainingValue);\n\n    var now2 = Date.now();\n    this.times.findBMU += now2 - now;\n\n    var radiusLimit = Math.floor(neighbourhoodRadius);\n    var xMin = bmu.x - radiusLimit,\n        xMax = bmu.x + radiusLimit,\n        yMin = bmu.y - radiusLimit,\n        yMax = bmu.y + radiusLimit;\n\n    for (x = xMin; x <= xMax; x++) {\n        var theX = x;\n        if (x < 0) {\n            theX += this.x;\n        } else if (x >= this.x) {\n            theX -= this.x;\n        }\n        for (y = yMin; y <= yMax; y++) {\n            var theY = y;\n            if (y < 0) {\n                theY += this.y;\n            } else if (y >= this.y) {\n                theY -= this.y;\n            }\n\n            dist = bmu[this.distanceMethod](this.nodes[theX][theY]);\n\n            if (dist < neighbourhoodRadius) {\n                influence = Math.exp(-dist / (2 * neighbourhoodRadius));\n                this.nodes[theX][theY].adjustWeights(trainingValue, this.learningRate, influence);\n            }\n\n        }\n    }\n\n    this.times.adjust += (Date.now() - now2);\n\n};\n\nSOM.prototype.train = function train(trainingSet) {\n    if (!this.done) {\n        this.setTraining(trainingSet);\n        while (this.trainOne()) {\n        }\n    }\n};\n\nSOM.prototype.getConvertedNodes = function getConvertedNodes() {\n    var result = new Array(this.x);\n    for (var i = 0; i < this.x; i++) {\n        result[i] = new Array(this.y);\n        for (var j = 0; j < this.y; j++) {\n            var node = this.nodes[i][j];\n            result[i][j] = this.creator ? this.creator(node.weights) : node.weights;\n        }\n    }\n    return result;\n};\n\nSOM.prototype._findBestMatchingUnit = function findBestMatchingUnit(candidate) {\n\n    var bmu,\n        lowest = Infinity,\n        dist;\n\n    for (var i = 0; i < this.x; i++) {\n        for (var j = 0; j < this.y; j++) {\n            dist = this.distance(this.nodes[i][j].weights, candidate);\n            if (dist < lowest) {\n                lowest = dist;\n                bmu = this.nodes[i][j];\n            }\n        }\n    }\n\n    return bmu;\n\n};\n\nSOM.prototype.predict = function predict(data, computePosition) {\n    if (typeof data === 'boolean') {\n        computePosition = data;\n        data = null;\n    }\n    if (!data) {\n        data = this.trainingSet;\n    }\n    if (Array.isArray(data) && (Array.isArray(data[0]) || (typeof data[0] === 'object'))) { // predict a dataset\n        var self = this;\n        return data.map(function (element) {\n            return self._predict(element, computePosition);\n        });\n    } else { // predict a single element\n        return this._predict(data, computePosition);\n    }\n};\n\nSOM.prototype._predict = function _predict(element, computePosition) {\n    if (!Array.isArray(element)) {\n        element = this.extractor(element);\n    }\n    var bmu = this._findBestMatchingUnit(element);\n    var result = [bmu.x, bmu.y];\n    if (computePosition) {\n        result[2] = bmu.getPosition(element);\n    }\n    return result;\n};\n\n// As seen in http://www.scholarpedia.org/article/Kohonen_network\nSOM.prototype.getQuantizationError = function getQuantizationError() {\n    var fit = this.getFit(),\n        l = fit.length,\n        sum = 0;\n    for (var i = 0; i < l; i++) {\n        sum += fit[i];\n    }\n    return sum / l;\n};\n\nSOM.prototype.getFit = function getFit(dataset) {\n    if (!dataset) {\n        dataset = this.trainingSet;\n    }\n    var l = dataset.length,\n        bmu,\n        result = new Array(l);\n    for (var i = 0; i < l; i++) {\n        bmu = this._findBestMatchingUnit(dataset[i]);\n        result[i] = Math.sqrt(this.distance(dataset[i], bmu.weights));\n    }\n    return result;\n};\n\nfunction getConverters(fields) {\n    var l = fields.length,\n        normalizers = new Array(l),\n        denormalizers = new Array(l);\n    for (var i = 0; i < l; i++) {\n        normalizers[i] = getNormalizer(fields[i].range);\n        denormalizers[i] = getDenormalizer(fields[i].range);\n    }\n    return {\n        extractor: function extractor(value) {\n            var result = new Array(l);\n            for (var i = 0; i < l; i++) {\n                result[i] = normalizers[i](value[fields[i].name]);\n            }\n            return result;\n        },\n        creator: function creator(value) {\n            var result = {};\n            for (var i = 0; i < l; i++) {\n                result[fields[i].name] = denormalizers[i](value[i]);\n            }\n            return result;\n        }\n    };\n}\n\nfunction getNormalizer(minMax) {\n    return function normalizer(value) {\n        return (value - minMax[0]) / (minMax[1] - minMax[0]);\n    };\n}\n\nfunction getDenormalizer(minMax) {\n    return function denormalizer(value) {\n        return (minMax[0] + value * (minMax[1] - minMax[0]));\n    };\n}\n\nfunction squareEuclidean(a, b) {\n    var d = 0;\n    for (var i = 0, ii = a.length; i < ii; i++) {\n        d += (a[i] - b[i]) * (a[i] - b[i]);\n    }\n    return d;\n}\n\nfunction getRandomValue(arr, randomizer) {\n    return arr[Math.floor(randomizer() * arr.length)];\n}\n\nfunction getMaxDistance(distance, numWeights) {\n    var zero = new Array(numWeights),\n        one = new Array(numWeights);\n    for (var i = 0; i < numWeights; i++) {\n        zero[i] = 0;\n        one[i] = 1;\n    }\n    return distance(zero, one);\n}\n\nmodule.exports = SOM;","export default function maybeToPrecision(value, digits) {\n  if (value < 0) {\n    value = 0 - value;\n    if (typeof digits === 'number') {\n      return `- ${value.toPrecision(digits)}`;\n    } else {\n      return `- ${value.toString()}`;\n    }\n  } else {\n    if (typeof digits === 'number') {\n      return value.toPrecision(digits);\n    } else {\n      return value.toString();\n    }\n  }\n}\n","export default function checkArraySize(x, y) {\n  if (!Array.isArray(x) || !Array.isArray(y)) {\n    throw new TypeError('x and y must be arrays');\n  }\n  if (x.length !== y.length) {\n    throw new RangeError('x and y arrays must have the same length');\n  }\n}\n","export { default as maybeToPrecision } from './maybeToPrecision';\nexport { default as checkArrayLength } from './checkArrayLength';\n\nexport default class BaseRegression {\n  constructor() {\n    if (new.target === BaseRegression) {\n      throw new Error('BaseRegression must be subclassed');\n    }\n  }\n\n  predict(x) {\n    if (typeof x === 'number') {\n      return this._predict(x);\n    } else if (Array.isArray(x)) {\n      const y = [];\n      for (let i = 0; i < x.length; i++) {\n        y.push(this._predict(x[i]));\n      }\n      return y;\n    } else {\n      throw new TypeError('x must be a number or array');\n    }\n  }\n\n  _predict() {\n    throw new Error('_predict must be implemented');\n  }\n\n  train() {\n    // Do nothing for this package\n  }\n\n  toString() {\n    return '';\n  }\n\n  toLaTeX() {\n    return '';\n  }\n\n  /**\n   * Return the correlation coefficient of determination (r) and chi-square.\n   * @param {Array<number>} x\n   * @param {Array<number>} y\n   * @return {object}\n   */\n  score(x, y) {\n    if (!Array.isArray(x) || !Array.isArray(y) || x.length !== y.length) {\n      throw new Error('x and y must be arrays of the same length');\n    }\n\n    const n = x.length;\n    const y2 = new Array(n);\n    for (let i = 0; i < n; i++) {\n      y2[i] = this._predict(x[i]);\n    }\n\n    let xSum = 0;\n    let ySum = 0;\n    let chi2 = 0;\n    let rmsd = 0;\n    let xSquared = 0;\n    let ySquared = 0;\n    let xY = 0;\n    for (let i = 0; i < n; i++) {\n      xSum += y2[i];\n      ySum += y[i];\n      xSquared += y2[i] * y2[i];\n      ySquared += y[i] * y[i];\n      xY += y2[i] * y[i];\n      if (y[i] !== 0) {\n        chi2 += ((y[i] - y2[i]) * (y[i] - y2[i])) / y[i];\n      }\n      rmsd += (y[i] - y2[i]) * (y[i] - y2[i]);\n    }\n\n    const r =\n      (n * xY - xSum * ySum) /\n      Math.sqrt((n * xSquared - xSum * xSum) * (n * ySquared - ySum * ySum));\n\n    return {\n      r: r,\n      r2: r * r,\n      chi2: chi2,\n      rmsd: Math.sqrt(rmsd / n)\n    };\n  }\n}\n","import BaseRegression, {\n  checkArrayLength,\n  maybeToPrecision\n} from 'ml-regression-base';\nimport { Matrix, MatrixTransposeView, solve } from 'ml-matrix';\n\nexport default class PolynomialRegression extends BaseRegression {\n  constructor(x, y, degree) {\n    super();\n    if (x === true) {\n      this.degree = y.degree;\n      this.powers = y.powers;\n      this.coefficients = y.coefficients;\n    } else {\n      checkArrayLength(x, y);\n      regress(this, x, y, degree);\n    }\n  }\n\n  _predict(x) {\n    let y = 0;\n    for (let k = 0; k < this.powers.length; k++) {\n      y += this.coefficients[k] * Math.pow(x, this.powers[k]);\n    }\n    return y;\n  }\n\n  toJSON() {\n    return {\n      name: 'polynomialRegression',\n      degree: this.degree,\n      powers: this.powers,\n      coefficients: this.coefficients\n    };\n  }\n\n  toString(precision) {\n    return this._toFormula(precision, false);\n  }\n\n  toLaTeX(precision) {\n    return this._toFormula(precision, true);\n  }\n\n  _toFormula(precision, isLaTeX) {\n    let sup = '^';\n    let closeSup = '';\n    let times = ' * ';\n    if (isLaTeX) {\n      sup = '^{';\n      closeSup = '}';\n      times = '';\n    }\n\n    let fn = '';\n    let str = '';\n    for (let k = 0; k < this.coefficients.length; k++) {\n      str = '';\n      if (this.coefficients[k] !== 0) {\n        if (this.powers[k] === 0) {\n          str = maybeToPrecision(this.coefficients[k], precision);\n        } else {\n          if (this.powers[k] === 1) {\n            str =\n              `${maybeToPrecision(this.coefficients[k], precision) + times}x`;\n          } else {\n            str =\n              `${maybeToPrecision(this.coefficients[k], precision) +\n              times\n              }x${\n                sup\n              }${this.powers[k]\n              }${closeSup}`;\n          }\n        }\n\n        if (this.coefficients[k] > 0 && k !== this.coefficients.length - 1) {\n          str = ` + ${str}`;\n        } else if (k !== this.coefficients.length - 1) {\n          str = ` ${str}`;\n        }\n      }\n      fn = str + fn;\n    }\n    if (fn.charAt(0) === '+') {\n      fn = fn.slice(1);\n    }\n\n    return `f(x) = ${fn}`;\n  }\n\n  static load(json) {\n    if (json.name !== 'polynomialRegression') {\n      throw new TypeError('not a polynomial regression model');\n    }\n    return new PolynomialRegression(true, json);\n  }\n}\n\nfunction regress(pr, x, y, degree) {\n  const n = x.length;\n  let powers;\n  if (Array.isArray(degree)) {\n    powers = degree;\n    degree = powers.length;\n  } else {\n    degree++;\n    powers = new Array(degree);\n    for (let k = 0; k < degree; k++) {\n      powers[k] = k;\n    }\n  }\n  const F = new Matrix(n, degree);\n  const Y = new Matrix([y]);\n  for (let k = 0; k < degree; k++) {\n    for (let i = 0; i < n; i++) {\n      if (powers[k] === 0) {\n        F.set(i, k, 1);\n      } else {\n        F.set(i, k, Math.pow(x[i], powers[k]));\n      }\n    }\n  }\n\n  const FT = new MatrixTransposeView(F);\n  const A = FT.mmul(F);\n  const B = FT.mmul(new MatrixTransposeView(Y));\n\n  pr.degree = degree - 1;\n  pr.powers = powers;\n  pr.coefficients = solve(A, B).to1DArray();\n}\n","import BaseRegression, {\n  checkArrayLength,\n  maybeToPrecision\n} from 'ml-regression-base';\n\nexport default class SimpleLinearRegression extends BaseRegression {\n  constructor(x, y) {\n    super();\n    if (x === true) {\n      this.slope = y.slope;\n      this.intercept = y.intercept;\n      this.coefficients = [y.intercept, y.slope];\n    } else {\n      checkArrayLength(x, y);\n      regress(this, x, y);\n    }\n  }\n\n  toJSON() {\n    return {\n      name: 'simpleLinearRegression',\n      slope: this.slope,\n      intercept: this.intercept\n    };\n  }\n\n  _predict(x) {\n    return this.slope * x + this.intercept;\n  }\n\n  computeX(y) {\n    return (y - this.intercept) / this.slope;\n  }\n\n  toString(precision) {\n    let result = 'f(x) = ';\n    if (this.slope !== 0) {\n      const xFactor = maybeToPrecision(this.slope, precision);\n      result += `${xFactor === '1' ? '' : `${xFactor} * `}x`;\n      if (this.intercept !== 0) {\n        const absIntercept = Math.abs(this.intercept);\n        const operator = absIntercept === this.intercept ? '+' : '-';\n        result += ` ${operator} ${maybeToPrecision(absIntercept, precision)}`;\n      }\n    } else {\n      result += maybeToPrecision(this.intercept, precision);\n    }\n    return result;\n  }\n\n  toLaTeX(precision) {\n    return this.toString(precision);\n  }\n\n  static load(json) {\n    if (json.name !== 'simpleLinearRegression') {\n      throw new TypeError('not a SLR model');\n    }\n    return new SimpleLinearRegression(true, json);\n  }\n}\n\nfunction regress(slr, x, y) {\n  const n = x.length;\n  let xSum = 0;\n  let ySum = 0;\n\n  let xSquared = 0;\n  let xY = 0;\n\n  for (let i = 0; i < n; i++) {\n    xSum += x[i];\n    ySum += y[i];\n    xSquared += x[i] * x[i];\n    xY += x[i] * y[i];\n  }\n\n  const numerator = n * xY - xSum * ySum;\n  slr.slope = numerator / (n * xSquared - xSum * xSum);\n  slr.intercept = (1 / n) * ySum - slr.slope * (1 / n) * xSum;\n  slr.coefficients = [slr.intercept, slr.slope];\n}\n","import BaseRegression, {\n  checkArrayLength,\n  maybeToPrecision\n} from 'ml-regression-base';\nimport SimpleLinearRegression from 'ml-regression-simple-linear';\n\nexport default class ExponentialRegression extends BaseRegression {\n  constructor(x, y) {\n    super();\n    if (x === true) {\n      this.A = y.A;\n      this.B = y.B;\n    } else {\n      checkArrayLength(x, y);\n      regress(this, x, y);\n    }\n  }\n\n  _predict(input) {\n    return this.B * Math.exp(input * this.A);\n  }\n\n  toJSON() {\n    return {\n      name: 'exponentialRegression',\n      A: this.A,\n      B: this.B\n    };\n  }\n\n  toString(precision) {\n    return (\n      `f(x) = ${\n        maybeToPrecision(this.B, precision)\n      } * e^(${\n        maybeToPrecision(this.A, precision)\n      } * x)`\n    );\n  }\n\n  toLaTeX(precision) {\n    if (this.A >= 0) {\n      return (\n        `f(x) = ${\n          maybeToPrecision(this.B, precision)\n        }e^{${\n          maybeToPrecision(this.A, precision)\n        }x}`\n      );\n    } else {\n      return (\n        `f(x) = \\\\frac{${\n          maybeToPrecision(this.B, precision)\n        }}{e^{${\n          maybeToPrecision(-this.A, precision)\n        }x}}`\n      );\n    }\n  }\n\n  static load(json) {\n    if (json.name !== 'exponentialRegression') {\n      throw new TypeError('not a exponential regression model');\n    }\n    return new ExponentialRegression(true, json);\n  }\n}\n\nfunction regress(er, x, y) {\n  const n = x.length;\n  const yl = new Array(n);\n  for (let i = 0; i < n; i++) {\n    yl[i] = Math.log(y[i]);\n  }\n\n  const linear = new SimpleLinearRegression(x, yl);\n  er.A = linear.slope;\n  er.B = Math.exp(linear.intercept);\n}\n","import BaseRegression, {\n  checkArrayLength,\n  maybeToPrecision\n} from 'ml-regression-base';\nimport SimpleLinearRegression from 'ml-regression-simple-linear';\n\nexport default class PowerRegression extends BaseRegression {\n  constructor(x, y) {\n    super();\n    if (x === true) {\n      // reloading model\n      this.A = y.A;\n      this.B = y.B;\n    } else {\n      checkArrayLength(x, y);\n      regress(this, x, y);\n    }\n  }\n\n  _predict(newInputs) {\n    return this.A * Math.pow(newInputs, this.B);\n  }\n\n  toJSON() {\n    return {\n      name: 'powerRegression',\n      A: this.A,\n      B: this.B\n    };\n  }\n\n  toString(precision) {\n    return `f(x) = ${maybeToPrecision(\n      this.A,\n      precision\n    )} * x^${maybeToPrecision(this.B, precision)}`;\n  }\n\n  toLaTeX(precision) {\n    let latex = '';\n    if (this.B >= 0) {\n      latex = `f(x) = ${maybeToPrecision(\n        this.A,\n        precision\n      )}x^{${maybeToPrecision(this.B, precision)}}`;\n    } else {\n      latex = `f(x) = \\\\frac{${maybeToPrecision(\n        this.A,\n        precision\n      )}}{x^{${maybeToPrecision(-this.B, precision)}}}`;\n    }\n    latex = latex.replace(/e([+-]?[0-9]+)/g, 'e^{$1}');\n    return latex;\n  }\n\n  static load(json) {\n    if (json.name !== 'powerRegression') {\n      throw new TypeError('not a power regression model');\n    }\n    return new PowerRegression(true, json);\n  }\n}\n\nfunction regress(pr, x, y) {\n  const n = x.length;\n  const xl = new Array(n);\n  const yl = new Array(n);\n  for (let i = 0; i < n; i++) {\n    xl[i] = Math.log(x[i]);\n    yl[i] = Math.log(y[i]);\n  }\n\n  const linear = new SimpleLinearRegression(xl, yl);\n  pr.A = Math.exp(linear.intercept);\n  pr.B = linear.slope;\n}\n","import Matrix, { SVD, pseudoInverse } from 'ml-matrix';\n\nexport default class MultivariateLinearRegression {\n  constructor(x, y, options = {}) {\n    const { intercept = true, statistics = true } = options;\n    this.statistics = statistics;\n    if (x === true) {\n      this.weights = y.weights;\n      this.inputs = y.inputs;\n      this.outputs = y.outputs;\n      this.intercept = y.intercept;\n    } else {\n      x = new Matrix(x);\n      y = new Matrix(y);\n      if (intercept) {\n        x.addColumn(new Array(x.rows).fill(1));\n      }\n      let xt = x.transpose();\n      const xx = xt\n        .mmul(x);\n      const xy = xt\n        .mmul(y);\n      const invxx = new SVD(xx)\n        .inverse();\n      const beta = xy\n        .transpose()\n        .mmul(invxx)\n        .transpose();\n      this.weights = beta.to2DArray();\n      this.inputs = x.columns;\n      this.outputs = y.columns;\n      if (intercept) this.inputs--;\n      this.intercept = intercept;\n      if (statistics) {\n        /*\n         * Let's add some basic statistics about the beta's to be able to interpret them.\n         * source: http://dept.stat.lsa.umich.edu/~kshedden/Courses/Stat401/Notes/401-multreg.pdf\n         * validated against Excel Regression AddIn\n         * test: \"datamining statistics test\"\n         */\n        const fittedValues = x.mmul(beta);\n        const residuals = y.clone().addM(fittedValues.neg());\n        const variance =\n          residuals\n            .to2DArray()\n            .map((ri) => Math.pow(ri[0], 2))\n            .reduce((a, b) => a + b) /\n          (y.rows - x.columns);\n        this.stdError = Math.sqrt(variance);\n        this.stdErrorMatrix = pseudoInverse(xx).mul(variance);\n        this.stdErrors = this.stdErrorMatrix\n          .diagonal()\n          .map((d) => Math.sqrt(d));\n        this.tStats = this.weights.map((d, i) =>\n          (this.stdErrors[i] === 0 ? 0 : d[0] / this.stdErrors[i])\n        );\n      }\n    }\n  }\n\n  predict(x) {\n    if (Array.isArray(x)) {\n      if (typeof x[0] === 'number') {\n        return this._predict(x);\n      } else if (Array.isArray(x[0])) {\n        const y = new Array(x.length);\n        for (let i = 0; i < x.length; i++) {\n          y[i] = this._predict(x[i]);\n        }\n        return y;\n      }\n    } else if (Matrix.isMatrix(x)) {\n      const y = new Matrix(x.rows, this.outputs);\n      for (let i = 0; i < x.rows; i++) {\n        y.setRow(i, this._predict(x.getRow(i)));\n      }\n      return y;\n    }\n    throw new TypeError('x must be a matrix or array of numbers');\n  }\n\n  _predict(x) {\n    const result = new Array(this.outputs);\n    if (this.intercept) {\n      for (let i = 0; i < this.outputs; i++) {\n        result[i] = this.weights[this.inputs][i];\n      }\n    } else {\n      result.fill(0);\n    }\n    for (let i = 0; i < this.inputs; i++) {\n      for (let j = 0; j < this.outputs; j++) {\n        result[j] += this.weights[i][j] * x[i];\n      }\n    }\n    return result;\n  }\n\n  score() {\n    throw new Error('score method is not implemented yet');\n  }\n\n  toJSON() {\n    return {\n      name: 'multivariateLinearRegression',\n      weights: this.weights,\n      inputs: this.inputs,\n      outputs: this.outputs,\n      intercept: this.intercept,\n      summary: this.statistics\n        ? {\n          regressionStatistics: {\n            standardError: this.stdError,\n            observations: this.outputs\n          },\n          variables: this.weights.map((d, i) => {\n            return {\n              label:\n                  i === this.weights.length - 1\n                    ? 'Intercept'\n                    : `X Variable ${i + 1}`,\n              coefficients: d,\n              standardError: this.stdErrors[i],\n              tStat: this.tStats[i]\n            };\n          })\n        }\n        : undefined\n    };\n  }\n\n  static load(model) {\n    if (model.name !== 'multivariateLinearRegression') {\n      throw new Error('not a MLR model');\n    }\n    return new MultivariateLinearRegression(true, model);\n  }\n}\n","'use strict';\n\nconst { squaredEuclidean } = require('ml-distance-euclidean');\n\nconst defaultOptions = {\n  sigma: 1\n};\n\nclass GaussianKernel {\n  constructor(options) {\n    options = Object.assign({}, defaultOptions, options);\n    this.sigma = options.sigma;\n    this.divisor = 2 * options.sigma * options.sigma;\n  }\n  compute(x, y) {\n    const distance = squaredEuclidean(x, y);\n    return Math.exp(-distance / this.divisor);\n  }\n}\n\nmodule.exports = GaussianKernel;\n","'use strict';\n\nconst defaultOptions = {\n  degree: 1,\n  constant: 1,\n  scale: 1\n};\n\nclass PolynomialKernel {\n  constructor(options) {\n    options = Object.assign({}, defaultOptions, options);\n\n    this.degree = options.degree;\n    this.constant = options.constant;\n    this.scale = options.scale;\n  }\n\n  compute(x, y) {\n    var sum = 0;\n    for (var i = 0; i < x.length; i++) {\n      sum += x[i] * y[i];\n    }\n    return Math.pow(this.scale * sum + this.constant, this.degree);\n  }\n}\n\nmodule.exports = PolynomialKernel;\n","'use strict';\n\nconst defaultOptions = {\n  alpha: 0.01,\n  constant: -Math.E\n};\n\nclass SigmoidKernel {\n  constructor(options) {\n    options = Object.assign({}, defaultOptions, options);\n    this.alpha = options.alpha;\n    this.constant = options.constant;\n  }\n\n  compute(x, y) {\n    var sum = 0;\n    for (var i = 0; i < x.length; i++) {\n      sum += x[i] * y[i];\n    }\n    return Math.tanh(this.alpha * sum + this.constant);\n  }\n}\n\nmodule.exports = SigmoidKernel;\n","'use strict';\n\nconst defaultOptions = {\n  sigma: 1,\n  degree: 1\n};\n\nclass ANOVAKernel {\n  constructor(options) {\n    options = Object.assign({}, defaultOptions, options);\n    this.sigma = options.sigma;\n    this.degree = options.degree;\n  }\n\n  compute(x, y) {\n    var sum = 0;\n    var len = Math.min(x.length, y.length);\n    for (var i = 1; i <= len; ++i) {\n      sum += Math.pow(\n        Math.exp(\n          -this.sigma *\n            Math.pow(Math.pow(x[i - 1], i) - Math.pow(y[i - 1], i), 2)\n        ),\n        this.degree\n      );\n    }\n    return sum;\n  }\n}\n\nmodule.exports = ANOVAKernel;\n","'use strict';\n\nconst { squaredEuclidean } = require('ml-distance-euclidean');\n\nconst defaultOptions = {\n  sigma: 1\n};\n\nclass CauchyKernel {\n  constructor(options) {\n    options = Object.assign({}, defaultOptions, options);\n    this.sigma = options.sigma;\n  }\n\n  compute(x, y) {\n    return 1 / (1 + squaredEuclidean(x, y) / (this.sigma * this.sigma));\n  }\n}\n\nmodule.exports = CauchyKernel;\n","'use strict';\n\nconst { euclidean } = require('ml-distance-euclidean');\n\nconst defaultOptions = {\n  sigma: 1\n};\n\nclass ExponentialKernel {\n  constructor(options) {\n    options = Object.assign({}, defaultOptions, options);\n    this.sigma = options.sigma;\n    this.divisor = 2 * options.sigma * options.sigma;\n  }\n\n  compute(x, y) {\n    const distance = euclidean(x, y);\n    return Math.exp(-distance / this.divisor);\n  }\n}\n\nmodule.exports = ExponentialKernel;\n","'use strict';\n\nclass HistogramIntersectionKernel {\n  compute(x, y) {\n    var min = Math.min(x.length, y.length);\n    var sum = 0;\n    for (var i = 0; i < min; ++i) {\n      sum += Math.min(x[i], y[i]);\n    }\n\n    return sum;\n  }\n}\n\nmodule.exports = HistogramIntersectionKernel;\n","'use strict';\n\nconst { euclidean } = require('ml-distance-euclidean');\n\nconst defaultOptions = {\n  sigma: 1\n};\n\nclass LaplacianKernel {\n  constructor(options) {\n    options = Object.assign({}, defaultOptions, options);\n    this.sigma = options.sigma;\n  }\n\n  compute(x, y) {\n    const distance = euclidean(x, y);\n    return Math.exp(-distance / this.sigma);\n  }\n}\n\nmodule.exports = LaplacianKernel;\n","'use strict';\n\nconst { squaredEuclidean } = require('ml-distance-euclidean');\n\nconst defaultOptions = {\n  constant: 1\n};\n\nclass MultiquadraticKernel {\n  constructor(options) {\n    options = Object.assign({}, defaultOptions, options);\n    this.constant = options.constant;\n  }\n\n  compute(x, y) {\n    return Math.sqrt(squaredEuclidean(x, y) + this.constant * this.constant);\n  }\n}\n\nmodule.exports = MultiquadraticKernel;\n","'use strict';\n\nconst { squaredEuclidean } = require('ml-distance-euclidean');\n\nconst defaultOptions = {\n  constant: 1\n};\n\nclass RationalQuadraticKernel {\n  constructor(options) {\n    options = Object.assign({}, defaultOptions, options);\n    this.constant = options.constant;\n  }\n\n  compute(x, y) {\n    const distance = squaredEuclidean(x, y);\n    return 1 - distance / (distance + this.constant);\n  }\n}\n\nmodule.exports = RationalQuadraticKernel;\n","'use strict';\n\nconst { Matrix, MatrixTransposeView } = require('ml-matrix');\nconst GaussianKernel = require('ml-kernel-gaussian');\nconst PolynomialKernel = require('ml-kernel-polynomial');\nconst SigmoidKernel = require('ml-kernel-sigmoid');\n\nconst ANOVAKernel = require('./kernels/anova-kernel');\nconst CauchyKernel = require('./kernels/cauchy-kernel');\nconst ExponentialKernel = require('./kernels/exponential-kernel');\nconst HistogramKernel = require('./kernels/histogram-intersection-kernel');\nconst LaplacianKernel = require('./kernels/laplacian-kernel');\nconst MultiquadraticKernel = require('./kernels/multiquadratic-kernel');\nconst RationalKernel = require('./kernels/rational-quadratic-kernel');\n\nconst kernelType = {\n  gaussian: GaussianKernel,\n  rbf: GaussianKernel,\n  polynomial: PolynomialKernel,\n  poly: PolynomialKernel,\n  anova: ANOVAKernel,\n  cauchy: CauchyKernel,\n  exponential: ExponentialKernel,\n  histogram: HistogramKernel,\n  min: HistogramKernel,\n  laplacian: LaplacianKernel,\n  multiquadratic: MultiquadraticKernel,\n  rational: RationalKernel,\n  sigmoid: SigmoidKernel,\n  mlp: SigmoidKernel\n};\n\nclass Kernel {\n  constructor(type, options) {\n    this.kernelType = type;\n    if (type === 'linear') return;\n\n    if (typeof type === 'string') {\n      type = type.toLowerCase();\n\n      var KernelConstructor = kernelType[type];\n      if (KernelConstructor) {\n        this.kernelFunction = new KernelConstructor(options);\n      } else {\n        throw new Error(`unsupported kernel type: ${type}`);\n      }\n    } else if (typeof type === 'object' && typeof type.compute === 'function') {\n      this.kernelFunction = type;\n    } else {\n      throw new TypeError(\n        'first argument must be a valid kernel type or instance'\n      );\n    }\n  }\n\n  compute(inputs, landmarks) {\n    inputs = Matrix.checkMatrix(inputs);\n    if (landmarks === undefined) {\n      landmarks = inputs;\n    } else {\n      landmarks = Matrix.checkMatrix(landmarks);\n    }\n    if (this.kernelType === 'linear') {\n      return inputs.mmul(new MatrixTransposeView(landmarks));\n    }\n\n    const kernelMatrix = new Matrix(inputs.rows, landmarks.rows);\n    if (inputs === landmarks) {\n      // fast path, matrix is symmetric\n      for (let i = 0; i < inputs.rows; i++) {\n        for (let j = i; j < inputs.rows; j++) {\n          const value = this.kernelFunction.compute(\n            inputs.getRow(i),\n            inputs.getRow(j)\n          );\n          kernelMatrix.set(i, j, value);\n          kernelMatrix.set(j, i, value);\n        }\n      }\n    } else {\n      for (let i = 0; i < inputs.rows; i++) {\n        for (let j = 0; j < landmarks.rows; j++) {\n          kernelMatrix.set(\n            i,\n            j,\n            this.kernelFunction.compute(inputs.getRow(i), landmarks.getRow(j))\n          );\n        }\n      }\n    }\n    return kernelMatrix;\n  }\n}\n\nmodule.exports = Kernel;\n","import BaseRegression, {\n  checkArrayLength,\n  maybeToPrecision\n} from 'ml-regression-base';\nimport median from 'ml-array-median';\n\nexport default class TheilSenRegression extends BaseRegression {\n  /**\n   * Theil–Sen estimator\n   * https://en.wikipedia.org/wiki/Theil%E2%80%93Sen_estimator\n   * @param {Array<number>|boolean} x\n   * @param {Array<number>|object} y\n   * @constructor\n   */\n  constructor(x, y) {\n    super();\n    if (x === true) {\n      // loads the model\n      this.slope = y.slope;\n      this.intercept = y.intercept;\n      this.coefficients = y.coefficients;\n    } else {\n      // creates the model\n      checkArrayLength(x, y);\n      theilSen(this, x, y);\n    }\n  }\n\n  toJSON() {\n    return {\n      name: 'TheilSenRegression',\n      slope: this.slope,\n      intercept: this.intercept\n    };\n  }\n\n  _predict(input) {\n    return this.slope * input + this.intercept;\n  }\n\n  computeX(input) {\n    return (input - this.intercept) / this.slope;\n  }\n\n  toString(precision) {\n    var result = 'f(x) = ';\n    if (this.slope) {\n      var xFactor = maybeToPrecision(this.slope, precision);\n      result += `${Math.abs(xFactor - 1) < 1e-5 ? '' : `${xFactor} * `}x`;\n      if (this.intercept) {\n        var absIntercept = Math.abs(this.intercept);\n        var operator = absIntercept === this.intercept ? '+' : '-';\n        result +=\n          ` ${operator} ${maybeToPrecision(absIntercept, precision)}`;\n      }\n    } else {\n      result += maybeToPrecision(this.intercept, precision);\n    }\n    return result;\n  }\n\n  toLaTeX(precision) {\n    return this.toString(precision);\n  }\n\n  static load(json) {\n    if (json.name !== 'TheilSenRegression') {\n      throw new TypeError('not a Theil-Sen model');\n    }\n    return new TheilSenRegression(true, json);\n  }\n}\n\nfunction theilSen(regression, x, y) {\n  let len = x.length;\n  let slopes = new Array(len * len);\n  let count = 0;\n  for (let i = 0; i < len; ++i) {\n    for (let j = i + 1; j < len; ++j) {\n      if (x[i] !== x[j]) {\n        slopes[count++] = (y[j] - y[i]) / (x[j] - x[i]);\n      }\n    }\n  }\n  slopes.length = count;\n  let medianSlope = median(slopes);\n\n  let cuts = new Array(len);\n  for (let i = 0; i < len; ++i) {\n    cuts[i] = y[i] - medianSlope * x[i];\n  }\n\n  regression.slope = medianSlope;\n  regression.intercept = median(cuts);\n  regression.coefficients = [regression.intercept, regression.slope];\n}\n","import BaseRegression, {\n  checkArrayLength,\n  maybeToPrecision\n} from 'ml-regression-base';\nimport { solve } from 'ml-matrix';\n\n/**\n * @class RobustPolynomialRegression\n * @param {Array<number>} x\n * @param {Array<number>} y\n * @param {number} degree - polynomial degree\n */\nexport default class RobustPolynomialRegression extends BaseRegression {\n  constructor(x, y, degree) {\n    super();\n    if (x === true) {\n      this.degree = y.degree;\n      this.powers = y.powers;\n      this.coefficients = y.coefficients;\n    } else {\n      checkArrayLength(x, y);\n      robustPolynomial(this, x, y, degree);\n    }\n  }\n\n  toJSON() {\n    return {\n      name: 'robustPolynomialRegression',\n      degree: this.degree,\n      powers: this.powers,\n      coefficients: this.coefficients\n    };\n  }\n\n  _predict(x) {\n    return predict(x, this.powers, this.coefficients);\n  }\n\n  /**\n   * Display the formula\n   * @param {number} precision - precision for the numbers\n   * @return {string}\n   */\n  toString(precision) {\n    return this._toFormula(precision, false);\n  }\n\n  /**\n   * Display the formula in LaTeX format\n   * @param {number} precision - precision for the numbers\n   * @return {string}\n   */\n  toLaTeX(precision) {\n    return this._toFormula(precision, true);\n  }\n\n  _toFormula(precision, isLaTeX) {\n    let sup = '^';\n    let closeSup = '';\n    let times = ' * ';\n    if (isLaTeX) {\n      sup = '^{';\n      closeSup = '}';\n      times = '';\n    }\n\n    let fn = '';\n    let str = '';\n    for (let k = 0; k < this.coefficients.length; k++) {\n      str = '';\n      if (this.coefficients[k] !== 0) {\n        if (this.powers[k] === 0) {\n          str = maybeToPrecision(this.coefficients[k], precision);\n        } else {\n          if (this.powers[k] === 1) {\n            str = `${maybeToPrecision(this.coefficients[k], precision) +\n              times}x`;\n          } else {\n            str = `${maybeToPrecision(this.coefficients[k], precision) +\n              times}x${sup}${this.powers[k]}${closeSup}`;\n          }\n        }\n\n        if (this.coefficients[k] > 0 && k !== this.coefficients.length - 1) {\n          str = ` + ${str}`;\n        } else if (k !== this.coefficients.length - 1) {\n          str = ` ${str}`;\n        }\n      }\n      fn = str + fn;\n    }\n    if (fn.charAt(0) === '+') {\n      fn = fn.slice(1);\n    }\n\n    return `f(x) = ${fn}`;\n  }\n\n  static load(json) {\n    if (json.name !== 'robustPolynomialRegression') {\n      throw new TypeError('not a RobustPolynomialRegression model');\n    }\n    return new RobustPolynomialRegression(true, json);\n  }\n}\n\nfunction robustPolynomial(regression, x, y, degree) {\n  let powers = Array(degree)\n    .fill(0)\n    .map((_, index) => index);\n\n  const tuples = getRandomTuples(x, y, degree);\n\n  var min;\n  for (var i = 0; i < tuples.length; i++) {\n    var tuple = tuples[i];\n    var coefficients = calcCoefficients(tuple, powers);\n\n    var residuals = x.slice();\n    for (var j = 0; j < x.length; j++) {\n      residuals[j] = y[j] - predict(x[j], powers, coefficients);\n      residuals[j] = {\n        residual: residuals[j] * residuals[j],\n        coefficients\n      };\n    }\n\n    var median = residualsMedian(residuals);\n    if (!min || median.residual < min.residual) {\n      min = median;\n    }\n  }\n\n  regression.degree = degree;\n  regression.powers = powers;\n  regression.coefficients = min.coefficients;\n}\n\n/**\n * @ignore\n * @param {Array<number>} x\n * @param {Array<number>} y\n * @param {number} degree\n * @return {Array<{x:number,y:number}>}\n */\nfunction getRandomTuples(x, y, degree) {\n  var len = Math.floor(x.length / degree);\n  var tuples = new Array(len);\n\n  for (var i = 0; i < x.length; i++) {\n    var pos = Math.floor(Math.random() * len);\n\n    var counter = 0;\n    while (counter < x.length) {\n      if (!tuples[pos]) {\n        tuples[pos] = [\n          {\n            x: x[i],\n            y: y[i]\n          }\n        ];\n        break;\n      } else if (tuples[pos].length < degree) {\n        tuples[pos].push({\n          x: x[i],\n          y: y[i]\n        });\n        break;\n      } else {\n        counter++;\n        pos = (pos + 1) % len;\n      }\n    }\n\n    if (counter === x.length) {\n      return tuples;\n    }\n  }\n  return tuples;\n}\n\n/**\n * @ignore\n * @param {{x:number,y:number}} tuple\n * @param {Array<number>} powers\n * @return {Array<number>}\n */\nfunction calcCoefficients(tuple, powers) {\n  var X = tuple.slice();\n  var Y = tuple.slice();\n  for (var i = 0; i < X.length; i++) {\n    Y[i] = [tuple[i].y];\n    X[i] = new Array(powers.length);\n    for (var j = 0; j < powers.length; j++) {\n      X[i][j] = Math.pow(tuple[i].x, powers[j]);\n    }\n  }\n\n  return solve(X, Y).to1DArray();\n}\n\nfunction predict(x, powers, coefficients) {\n  let y = 0;\n  for (let k = 0; k < powers.length; k++) {\n    y += coefficients[k] * Math.pow(x, powers[k]);\n  }\n  return y;\n}\n\nfunction residualsMedian(residuals) {\n  residuals.sort((a, b) => a.residual - b.residual);\n\n  var l = residuals.length;\n  var half = Math.floor(l / 2);\n  return l % 2 === 0 ? residuals[half - 1] : residuals[half];\n}\n","/**\n * Calculate current error\n * @ignore\n * @param {{x:Array<number>, y:Array<number>}} data - Array of points to fit in the format [x1, x2, ... ], [y1, y2, ... ]\n * @param {Array<number>} parameters - Array of current parameter values\n * @param {function} parameterizedFunction - The parameters and returns a function with the independent variable as a parameter\n * @return {number}\n */\nexport default function errorCalculation(\n  data,\n  parameters,\n  parameterizedFunction\n) {\n  var error = 0;\n  const func = parameterizedFunction(parameters);\n\n  for (var i = 0; i < data.x.length; i++) {\n    error += Math.abs(data.y[i] - func(data.x[i]));\n  }\n\n  return error;\n}\n","import { inverse, Matrix } from 'ml-matrix';\n\n/**\n * Difference of the matrix function over the parameters\n * @ignore\n * @param {{x:Array<number>, y:Array<number>}} data - Array of points to fit in the format [x1, x2, ... ], [y1, y2, ... ]\n * @param {Array<number>} evaluatedData - Array of previous evaluated function values\n * @param {Array<number>} params - Array of previous parameter values\n * @param {number} gradientDifference - Adjustment for decrease the damping parameter\n * @param {function} paramFunction - The parameters and returns a function with the independent variable as a parameter\n * @return {Matrix}\n */\nfunction gradientFunction(\n  data,\n  evaluatedData,\n  params,\n  gradientDifference,\n  paramFunction\n) {\n  const n = params.length;\n  const m = data.x.length;\n\n  var ans = new Array(n);\n\n  for (var param = 0; param < n; param++) {\n    ans[param] = new Array(m);\n    var auxParams = params.concat();\n    auxParams[param] += gradientDifference;\n    var funcParam = paramFunction(auxParams);\n\n    for (var point = 0; point < m; point++) {\n      ans[param][point] = evaluatedData[point] - funcParam(data.x[point]);\n    }\n  }\n  return new Matrix(ans);\n}\n\n/**\n * Matrix function over the samples\n * @ignore\n * @param {{x:Array<number>, y:Array<number>}} data - Array of points to fit in the format [x1, x2, ... ], [y1, y2, ... ]\n * @param {Array<number>} evaluatedData - Array of previous evaluated function values\n * @return {Matrix}\n */\nfunction matrixFunction(data, evaluatedData) {\n  const m = data.x.length;\n\n  var ans = new Array(m);\n\n  for (var point = 0; point < m; point++) {\n    ans[point] = [data.y[point] - evaluatedData[point]];\n  }\n\n  return new Matrix(ans);\n}\n\n/**\n * Iteration for Levenberg-Marquardt\n * @ignore\n * @param {{x:Array<number>, y:Array<number>}} data - Array of points to fit in the format [x1, x2, ... ], [y1, y2, ... ]\n * @param {Array<number>} params - Array of previous parameter values\n * @param {number} damping - Levenberg-Marquardt parameter\n * @param {number} gradientDifference - Adjustment for decrease the damping parameter\n * @param {function} parameterizedFunction - The parameters and returns a function with the independent variable as a parameter\n * @return {Array<number>}\n */\nexport default function step(\n  data,\n  params,\n  damping,\n  gradientDifference,\n  parameterizedFunction\n) {\n  var value = damping * gradientDifference * gradientDifference;\n  var identity = Matrix.eye(params.length, params.length, value);\n\n  const func = parameterizedFunction(params);\n  var evaluatedData = data.x.map((e) => func(e));\n\n  var gradientFunc = gradientFunction(\n    data,\n    evaluatedData,\n    params,\n    gradientDifference,\n    parameterizedFunction\n  );\n  var matrixFunc = matrixFunction(data, evaluatedData);\n  var inverseMatrix = inverse(\n    identity.add(gradientFunc.mmul(gradientFunc.transpose()))\n  );\n\n  params = new Matrix([params]);\n  params = params.sub(\n    inverseMatrix\n      .mmul(gradientFunc)\n      .mmul(matrixFunc)\n      .mul(gradientDifference)\n      .transpose()\n  );\n\n  return params.to1DArray();\n}\n","import errorCalculation from './errorCalculation';\nimport step from './step';\n\n/**\n * Curve fitting algorithm\n * @param {{x:Array<number>, y:Array<number>}} data - Array of points to fit in the format [x1, x2, ... ], [y1, y2, ... ]\n * @param {function} parameterizedFunction - The parameters and returns a function with the independent variable as a parameter\n * @param {object} [options] - Options object\n * @param {number} [options.damping] - Levenberg-Marquardt parameter\n * @param {number} [options.gradientDifference = 10e-2] - Adjustment for decrease the damping parameter\n * @param {Array<number>} [options.minValues] - Minimum allowed values for parameters\n * @param {Array<number>} [options.maxValues] - Maximum allowed values for parameters\n * @param {Array<number>} [options.initialValues] - Array of initial parameter values\n * @param {number} [options.maxIterations = 100] - Maximum of allowed iterations\n * @param {number} [options.errorTolerance = 10e-3] - Minimum uncertainty allowed for each point\n * @return {{parameterValues: Array<number>, parameterError: number, iterations: number}}\n */\nexport default function levenbergMarquardt(\n  data,\n  parameterizedFunction,\n  options = {}\n) {\n  let {\n    maxIterations = 100,\n    gradientDifference = 10e-2,\n    damping = 0,\n    errorTolerance = 10e-3,\n    minValues,\n    maxValues,\n    initialValues\n  } = options;\n\n  if (damping <= 0) {\n    throw new Error('The damping option must be a positive number');\n  } else if (!data.x || !data.y) {\n    throw new Error('The data parameter must have x and y elements');\n  } else if (\n    !Array.isArray(data.x) ||\n    data.x.length < 2 ||\n    !Array.isArray(data.y) ||\n    data.y.length < 2\n  ) {\n    throw new Error(\n      'The data parameter elements must be an array with more than 2 points'\n    );\n  } else if (data.x.length !== data.y.length) {\n    throw new Error('The data parameter elements must have the same size');\n  }\n\n  var parameters =\n    initialValues || new Array(parameterizedFunction.length).fill(1);\n  let parLen = parameters.length;\n  maxValues = maxValues || new Array(parLen).fill(Number.MAX_SAFE_INTEGER);\n  minValues = minValues || new Array(parLen).fill(Number.MIN_SAFE_INTEGER);\n\n  if (maxValues.length !== minValues.length) {\n    throw new Error('minValues and maxValues must be the same size');\n  }\n\n  if (!Array.isArray(parameters)) {\n    throw new Error('initialValues must be an array');\n  }\n\n  var error = errorCalculation(data, parameters, parameterizedFunction);\n\n  var converged = error <= errorTolerance;\n\n  for (\n    var iteration = 0;\n    iteration < maxIterations && !converged;\n    iteration++\n  ) {\n    parameters = step(\n      data,\n      parameters,\n      damping,\n      gradientDifference,\n      parameterizedFunction\n    );\n\n    for (let k = 0; k < parLen; k++) {\n      parameters[k] = Math.min(\n        Math.max(minValues[k], parameters[k]),\n        maxValues[k]\n      );\n    }\n\n    error = errorCalculation(data, parameters, parameterizedFunction);\n    if (isNaN(error)) break;\n    converged = error <= errorTolerance;\n  }\n\n  return {\n    parameterValues: parameters,\n    parameterError: error,\n    iterations: iteration\n  };\n}\n","module.exports = function(haystack, needle, comparator, low, high) {\n  var mid, cmp;\n\n  if(low === undefined)\n    low = 0;\n\n  else {\n    low = low|0;\n    if(low < 0 || low >= haystack.length)\n      throw new RangeError(\"invalid lower bound\");\n  }\n\n  if(high === undefined)\n    high = haystack.length - 1;\n\n  else {\n    high = high|0;\n    if(high < low || high >= haystack.length)\n      throw new RangeError(\"invalid upper bound\");\n  }\n\n  while(low <= high) {\n    /* Note that \"(low + high) >>> 1\" may overflow, and results in a typecast\n     * to double (which gives the wrong results). */\n    mid = low + (high - low >> 1);\n    cmp = +comparator(haystack[mid], needle, mid, haystack);\n\n    /* Too low. */\n    if(cmp < 0.0)\n      low  = mid + 1;\n\n    /* Too high. */\n    else if(cmp > 0.0)\n      high = mid - 1;\n\n    /* Key found. */\n    else\n      return mid;\n  }\n\n  /* Key not found. */\n  return ~low;\n}\n","'use strict';\n\nfunction assertNumber(number) {\n\tif (typeof number !== 'number' || Number.isNaN(number)) {\n\t\tthrow new TypeError('Expected a number');\n\t}\n}\n\nexports.ascending = (left, right) => {\n\tassertNumber(left);\n\tassertNumber(right);\n\treturn left - right;\n};\n\nexports.descending = (left, right) => {\n\tassertNumber(left);\n\tassertNumber(right);\n\treturn right - left;\n};\n","import binarySearch from 'binary-search';\nimport { ascending } from 'num-sort';\n\nexport const largestPrime = 0x7fffffff;\n\nconst primeNumbers = [\n  // chunk #0\n  largestPrime, // 2^31-1\n\n  // chunk #1\n  5,\n  11,\n  23,\n  47,\n  97,\n  197,\n  397,\n  797,\n  1597,\n  3203,\n  6421,\n  12853,\n  25717,\n  51437,\n  102877,\n  205759,\n  411527,\n  823117,\n  1646237,\n  3292489,\n  6584983,\n  13169977,\n  26339969,\n  52679969,\n  105359939,\n  210719881,\n  421439783,\n  842879579,\n  1685759167,\n\n  // chunk #2\n  433,\n  877,\n  1759,\n  3527,\n  7057,\n  14143,\n  28289,\n  56591,\n  113189,\n  226379,\n  452759,\n  905551,\n  1811107,\n  3622219,\n  7244441,\n  14488931,\n  28977863,\n  57955739,\n  115911563,\n  231823147,\n  463646329,\n  927292699,\n  1854585413,\n\n  // chunk #3\n  953,\n  1907,\n  3821,\n  7643,\n  15287,\n  30577,\n  61169,\n  122347,\n  244703,\n  489407,\n  978821,\n  1957651,\n  3915341,\n  7830701,\n  15661423,\n  31322867,\n  62645741,\n  125291483,\n  250582987,\n  501165979,\n  1002331963,\n  2004663929,\n\n  // chunk #4\n  1039,\n  2081,\n  4177,\n  8363,\n  16729,\n  33461,\n  66923,\n  133853,\n  267713,\n  535481,\n  1070981,\n  2141977,\n  4283963,\n  8567929,\n  17135863,\n  34271747,\n  68543509,\n  137087021,\n  274174111,\n  548348231,\n  1096696463,\n\n  // chunk #5\n  31,\n  67,\n  137,\n  277,\n  557,\n  1117,\n  2237,\n  4481,\n  8963,\n  17929,\n  35863,\n  71741,\n  143483,\n  286973,\n  573953,\n  1147921,\n  2295859,\n  4591721,\n  9183457,\n  18366923,\n  36733847,\n  73467739,\n  146935499,\n  293871013,\n  587742049,\n  1175484103,\n\n  // chunk #6\n  599,\n  1201,\n  2411,\n  4831,\n  9677,\n  19373,\n  38747,\n  77509,\n  155027,\n  310081,\n  620171,\n  1240361,\n  2480729,\n  4961459,\n  9922933,\n  19845871,\n  39691759,\n  79383533,\n  158767069,\n  317534141,\n  635068283,\n  1270136683,\n\n  // chunk #7\n  311,\n  631,\n  1277,\n  2557,\n  5119,\n  10243,\n  20507,\n  41017,\n  82037,\n  164089,\n  328213,\n  656429,\n  1312867,\n  2625761,\n  5251529,\n  10503061,\n  21006137,\n  42012281,\n  84024581,\n  168049163,\n  336098327,\n  672196673,\n  1344393353,\n\n  // chunk #8\n  3,\n  7,\n  17,\n  37,\n  79,\n  163,\n  331,\n  673,\n  1361,\n  2729,\n  5471,\n  10949,\n  21911,\n  43853,\n  87719,\n  175447,\n  350899,\n  701819,\n  1403641,\n  2807303,\n  5614657,\n  11229331,\n  22458671,\n  44917381,\n  89834777,\n  179669557,\n  359339171,\n  718678369,\n  1437356741,\n\n  // chunk #9\n  43,\n  89,\n  179,\n  359,\n  719,\n  1439,\n  2879,\n  5779,\n  11579,\n  23159,\n  46327,\n  92657,\n  185323,\n  370661,\n  741337,\n  1482707,\n  2965421,\n  5930887,\n  11861791,\n  23723597,\n  47447201,\n  94894427,\n  189788857,\n  379577741,\n  759155483,\n  1518310967,\n\n  // chunk #10\n  379,\n  761,\n  1523,\n  3049,\n  6101,\n  12203,\n  24407,\n  48817,\n  97649,\n  195311,\n  390647,\n  781301,\n  1562611,\n  3125257,\n  6250537,\n  12501169,\n  25002389,\n  50004791,\n  100009607,\n  200019221,\n  400038451,\n  800076929,\n  1600153859,\n\n  // chunk #11\n  13,\n  29,\n  59,\n  127,\n  257,\n  521,\n  1049,\n  2099,\n  4201,\n  8419,\n  16843,\n  33703,\n  67409,\n  134837,\n  269683,\n  539389,\n  1078787,\n  2157587,\n  4315183,\n  8630387,\n  17260781,\n  34521589,\n  69043189,\n  138086407,\n  276172823,\n  552345671,\n  1104691373,\n\n  // chunk #12\n  19,\n  41,\n  83,\n  167,\n  337,\n  677,\n  1361,\n  2729,\n  5471,\n  10949,\n  21911,\n  43853,\n  87719,\n  175447,\n  350899,\n  701819,\n  1403641,\n  2807303,\n  5614657,\n  11229331,\n  22458671,\n  44917381,\n  89834777,\n  179669557,\n  359339171,\n  718678369,\n  1437356741,\n\n  // chunk #13\n  53,\n  107,\n  223,\n  449,\n  907,\n  1823,\n  3659,\n  7321,\n  14653,\n  29311,\n  58631,\n  117269,\n  234539,\n  469099,\n  938207,\n  1876417,\n  3752839,\n  7505681,\n  15011389,\n  30022781,\n  60045577,\n  120091177,\n  240182359,\n  480364727,\n  960729461,\n  1921458943\n];\n\nprimeNumbers.sort(ascending);\n\nexport function nextPrime(value) {\n  let index = binarySearch(primeNumbers, value, ascending);\n  if (index < 0) {\n    index = ~index;\n  }\n  return primeNumbers[index];\n}\n","import { largestPrime, nextPrime } from './primeFinder';\n\nconst FREE = 0;\nconst FULL = 1;\nconst REMOVED = 2;\n\nconst defaultInitialCapacity = 150;\nconst defaultMinLoadFactor = 1 / 6;\nconst defaultMaxLoadFactor = 2 / 3;\n\nexport default class HashTable {\n  constructor(options = {}) {\n    if (options instanceof HashTable) {\n      this.table = options.table.slice();\n      this.values = options.values.slice();\n      this.state = options.state.slice();\n      this.minLoadFactor = options.minLoadFactor;\n      this.maxLoadFactor = options.maxLoadFactor;\n      this.distinct = options.distinct;\n      this.freeEntries = options.freeEntries;\n      this.lowWaterMark = options.lowWaterMark;\n      this.highWaterMark = options.maxLoadFactor;\n      return;\n    }\n\n    const initialCapacity =\n      options.initialCapacity === undefined\n        ? defaultInitialCapacity\n        : options.initialCapacity;\n    if (initialCapacity < 0) {\n      throw new RangeError(\n        `initial capacity must not be less than zero: ${initialCapacity}`\n      );\n    }\n\n    const minLoadFactor =\n      options.minLoadFactor === undefined\n        ? defaultMinLoadFactor\n        : options.minLoadFactor;\n    const maxLoadFactor =\n      options.maxLoadFactor === undefined\n        ? defaultMaxLoadFactor\n        : options.maxLoadFactor;\n    if (minLoadFactor < 0 || minLoadFactor >= 1) {\n      throw new RangeError(`invalid minLoadFactor: ${minLoadFactor}`);\n    }\n    if (maxLoadFactor <= 0 || maxLoadFactor >= 1) {\n      throw new RangeError(`invalid maxLoadFactor: ${maxLoadFactor}`);\n    }\n    if (minLoadFactor >= maxLoadFactor) {\n      throw new RangeError(\n        `minLoadFactor (${minLoadFactor}) must be smaller than maxLoadFactor (${maxLoadFactor})`\n      );\n    }\n\n    let capacity = initialCapacity;\n    // User wants to put at least capacity elements. We need to choose the size based on the maxLoadFactor to\n    // avoid the need to rehash before this capacity is reached.\n    // actualCapacity * maxLoadFactor >= capacity\n    capacity = (capacity / maxLoadFactor) | 0;\n    capacity = nextPrime(capacity);\n    if (capacity === 0) capacity = 1;\n\n    this.table = newArray(capacity);\n    this.values = newArray(capacity);\n    this.state = newArray(capacity);\n\n    this.minLoadFactor = minLoadFactor;\n    if (capacity === largestPrime) {\n      this.maxLoadFactor = 1;\n    } else {\n      this.maxLoadFactor = maxLoadFactor;\n    }\n\n    this.distinct = 0;\n    this.freeEntries = capacity;\n\n    this.lowWaterMark = 0;\n    this.highWaterMark = chooseHighWaterMark(capacity, this.maxLoadFactor);\n  }\n\n  clone() {\n    return new HashTable(this);\n  }\n\n  get size() {\n    return this.distinct;\n  }\n\n  get(key) {\n    const i = this.indexOfKey(key);\n    if (i < 0) return 0;\n    return this.values[i];\n  }\n\n  set(key, value) {\n    let i = this.indexOfInsertion(key);\n    if (i < 0) {\n      i = -i - 1;\n      this.values[i] = value;\n      return false;\n    }\n\n    if (this.distinct > this.highWaterMark) {\n      const newCapacity = chooseGrowCapacity(\n        this.distinct + 1,\n        this.minLoadFactor,\n        this.maxLoadFactor\n      );\n      this.rehash(newCapacity);\n      return this.set(key, value);\n    }\n\n    this.table[i] = key;\n    this.values[i] = value;\n    if (this.state[i] === FREE) this.freeEntries--;\n    this.state[i] = FULL;\n    this.distinct++;\n\n    if (this.freeEntries < 1) {\n      const newCapacity = chooseGrowCapacity(\n        this.distinct + 1,\n        this.minLoadFactor,\n        this.maxLoadFactor\n      );\n      this.rehash(newCapacity);\n    }\n\n    return true;\n  }\n\n  remove(key, noRehash) {\n    const i = this.indexOfKey(key);\n    if (i < 0) return false;\n\n    this.state[i] = REMOVED;\n    this.distinct--;\n\n    if (!noRehash) this.maybeShrinkCapacity();\n\n    return true;\n  }\n\n  delete(key, noRehash) {\n    const i = this.indexOfKey(key);\n    if (i < 0) return false;\n\n    this.state[i] = FREE;\n    this.distinct--;\n\n    if (!noRehash) this.maybeShrinkCapacity();\n\n    return true;\n  }\n\n  maybeShrinkCapacity() {\n    if (this.distinct < this.lowWaterMark) {\n      const newCapacity = chooseShrinkCapacity(\n        this.distinct,\n        this.minLoadFactor,\n        this.maxLoadFactor\n      );\n      this.rehash(newCapacity);\n    }\n  }\n\n  containsKey(key) {\n    return this.indexOfKey(key) >= 0;\n  }\n\n  indexOfKey(key) {\n    const table = this.table;\n    const state = this.state;\n    const length = this.table.length;\n\n    const hash = key & 0x7fffffff;\n    let i = hash % length;\n    let decrement = hash % (length - 2);\n    if (decrement === 0) decrement = 1;\n\n    while (state[i] !== FREE && (state[i] === REMOVED || table[i] !== key)) {\n      i -= decrement;\n      if (i < 0) i += length;\n    }\n\n    if (state[i] === FREE) return -1;\n    return i;\n  }\n\n  containsValue(value) {\n    return this.indexOfValue(value) >= 0;\n  }\n\n  indexOfValue(value) {\n    const values = this.values;\n    const state = this.state;\n\n    for (var i = 0; i < state.length; i++) {\n      if (state[i] === FULL && values[i] === value) {\n        return i;\n      }\n    }\n\n    return -1;\n  }\n\n  indexOfInsertion(key) {\n    const table = this.table;\n    const state = this.state;\n    const length = table.length;\n\n    const hash = key & 0x7fffffff;\n    let i = hash % length;\n    let decrement = hash % (length - 2);\n    if (decrement === 0) decrement = 1;\n\n    while (state[i] === FULL && table[i] !== key) {\n      i -= decrement;\n      if (i < 0) i += length;\n    }\n\n    if (state[i] === REMOVED) {\n      const j = i;\n      while (state[i] !== FREE && (state[i] === REMOVED || table[i] !== key)) {\n        i -= decrement;\n        if (i < 0) i += length;\n      }\n      if (state[i] === FREE) i = j;\n    }\n\n    if (state[i] === FULL) {\n      return -i - 1;\n    }\n\n    return i;\n  }\n\n  ensureCapacity(minCapacity) {\n    if (this.table.length < minCapacity) {\n      const newCapacity = nextPrime(minCapacity);\n      this.rehash(newCapacity);\n    }\n  }\n\n  rehash(newCapacity) {\n    const oldCapacity = this.table.length;\n\n    if (newCapacity <= this.distinct) throw new Error('Unexpected');\n\n    const oldTable = this.table;\n    const oldValues = this.values;\n    const oldState = this.state;\n\n    const newTable = newArray(newCapacity);\n    const newValues = newArray(newCapacity);\n    const newState = newArray(newCapacity);\n\n    this.lowWaterMark = chooseLowWaterMark(newCapacity, this.minLoadFactor);\n    this.highWaterMark = chooseHighWaterMark(newCapacity, this.maxLoadFactor);\n\n    this.table = newTable;\n    this.values = newValues;\n    this.state = newState;\n    this.freeEntries = newCapacity - this.distinct;\n\n    for (var i = 0; i < oldCapacity; i++) {\n      if (oldState[i] === FULL) {\n        var element = oldTable[i];\n        var index = this.indexOfInsertion(element);\n        newTable[index] = element;\n        newValues[index] = oldValues[i];\n        newState[index] = FULL;\n      }\n    }\n  }\n\n  forEachKey(callback) {\n    for (var i = 0; i < this.state.length; i++) {\n      if (this.state[i] === FULL) {\n        if (!callback(this.table[i])) return false;\n      }\n    }\n    return true;\n  }\n\n  forEachValue(callback) {\n    for (var i = 0; i < this.state.length; i++) {\n      if (this.state[i] === FULL) {\n        if (!callback(this.values[i])) return false;\n      }\n    }\n    return true;\n  }\n\n  forEachPair(callback) {\n    for (var i = 0; i < this.state.length; i++) {\n      if (this.state[i] === FULL) {\n        if (!callback(this.table[i], this.values[i])) return false;\n      }\n    }\n    return true;\n  }\n}\n\nfunction chooseLowWaterMark(capacity, minLoad) {\n  return (capacity * minLoad) | 0;\n}\n\nfunction chooseHighWaterMark(capacity, maxLoad) {\n  return Math.min(capacity - 2, (capacity * maxLoad) | 0);\n}\n\nfunction chooseGrowCapacity(size, minLoad, maxLoad) {\n  return nextPrime(\n    Math.max(size + 1, ((4 * size) / (3 * minLoad + maxLoad)) | 0)\n  );\n}\n\nfunction chooseShrinkCapacity(size, minLoad, maxLoad) {\n  return nextPrime(\n    Math.max(size + 1, ((4 * size) / (minLoad + 3 * maxLoad)) | 0)\n  );\n}\n\nfunction newArray(size) {\n  return Array(size).fill(0);\n}\n","import HashTable from 'ml-hash-table';\n\nexport class SparseMatrix {\n  constructor(rows, columns, options = {}) {\n    if (rows instanceof SparseMatrix) {\n      // clone\n      const other = rows;\n      this._init(\n        other.rows,\n        other.columns,\n        other.elements.clone(),\n        other.threshold\n      );\n      return;\n    }\n\n    if (Array.isArray(rows)) {\n      const matrix = rows;\n      rows = matrix.length;\n      options = columns || {};\n      columns = matrix[0].length;\n      this._init(rows, columns, new HashTable(options), options.threshold);\n      for (var i = 0; i < rows; i++) {\n        for (var j = 0; j < columns; j++) {\n          var value = matrix[i][j];\n          if (this.threshold && Math.abs(value) < this.threshold) value = 0;\n          if (value !== 0) {\n            this.elements.set(i * columns + j, matrix[i][j]);\n          }\n        }\n      }\n    } else {\n      this._init(rows, columns, new HashTable(options), options.threshold);\n    }\n  }\n\n  _init(rows, columns, elements, threshold) {\n    this.rows = rows;\n    this.columns = columns;\n    this.elements = elements;\n    this.threshold = threshold || 0;\n  }\n\n  static eye(rows = 1, columns = rows) {\n    const min = Math.min(rows, columns);\n    const matrix = new SparseMatrix(rows, columns, { initialCapacity: min });\n    for (var i = 0; i < min; i++) {\n      matrix.set(i, i, 1);\n    }\n    return matrix;\n  }\n\n  clone() {\n    return new SparseMatrix(this);\n  }\n\n  to2DArray() {\n    const copy = new Array(this.rows);\n    for (var i = 0; i < this.rows; i++) {\n      copy[i] = new Array(this.columns);\n      for (var j = 0; j < this.columns; j++) {\n        copy[i][j] = this.get(i, j);\n      }\n    }\n    return copy;\n  }\n\n  isSquare() {\n    return this.rows === this.columns;\n  }\n\n  isSymmetric() {\n    if (!this.isSquare()) return false;\n\n    var symmetric = true;\n    this.forEachNonZero((i, j, v) => {\n      if (this.get(j, i) !== v) {\n        symmetric = false;\n        return false;\n      }\n      return v;\n    });\n    return symmetric;\n  }\n\n  /**\n   * Search for the wither band in the main diagonals\n   * @return {number}\n   */\n  bandWidth() {\n    let min = this.columns;\n    let max = -1;\n    this.forEachNonZero((i, j, v) => {\n      let diff = i - j;\n      min = Math.min(min, diff);\n      max = Math.max(max, diff);\n      return v;\n    });\n    return max - min;\n  }\n\n  /**\n   * Test if a matrix is consider banded using a threshold\n   * @param {number} width\n   * @return {boolean}\n   */\n  isBanded(width) {\n    let bandWidth = this.bandWidth();\n    return bandWidth <= width;\n  }\n\n  get cardinality() {\n    return this.elements.size;\n  }\n\n  get size() {\n    return this.rows * this.columns;\n  }\n\n  get(row, column) {\n    return this.elements.get(row * this.columns + column);\n  }\n\n  set(row, column, value) {\n    if (this.threshold && Math.abs(value) < this.threshold) value = 0;\n    if (value === 0) {\n      this.elements.remove(row * this.columns + column);\n    } else {\n      this.elements.set(row * this.columns + column, value);\n    }\n    return this;\n  }\n\n  mmul(other) {\n    if (this.columns !== other.rows) {\n      // eslint-disable-next-line no-console\n      console.warn(\n        'Number of columns of left matrix are not equal to number of rows of right matrix.'\n      );\n    }\n\n    const m = this.rows;\n    const p = other.columns;\n\n    const result = new SparseMatrix(m, p);\n    this.forEachNonZero((i, j, v1) => {\n      other.forEachNonZero((k, l, v2) => {\n        if (j === k) {\n          result.set(i, l, result.get(i, l) + v1 * v2);\n        }\n        return v2;\n      });\n      return v1;\n    });\n    return result;\n  }\n\n  kroneckerProduct(other) {\n    const m = this.rows;\n    const n = this.columns;\n    const p = other.rows;\n    const q = other.columns;\n\n    const result = new SparseMatrix(m * p, n * q, {\n      initialCapacity: this.cardinality * other.cardinality\n    });\n    this.forEachNonZero((i, j, v1) => {\n      other.forEachNonZero((k, l, v2) => {\n        result.set(p * i + k, q * j + l, v1 * v2);\n        return v2;\n      });\n      return v1;\n    });\n    return result;\n  }\n\n  forEachNonZero(callback) {\n    this.elements.forEachPair((key, value) => {\n      const i = (key / this.columns) | 0;\n      const j = key % this.columns;\n      let r = callback(i, j, value);\n      if (r === false) return false; // stop iteration\n      if (this.threshold && Math.abs(r) < this.threshold) r = 0;\n      if (r !== value) {\n        if (r === 0) {\n          this.elements.remove(key, true);\n        } else {\n          this.elements.set(key, r);\n        }\n      }\n      return true;\n    });\n    this.elements.maybeShrinkCapacity();\n    return this;\n  }\n\n  getNonZeros() {\n    const cardinality = this.cardinality;\n    const rows = new Array(cardinality);\n    const columns = new Array(cardinality);\n    const values = new Array(cardinality);\n    var idx = 0;\n    this.forEachNonZero((i, j, value) => {\n      rows[idx] = i;\n      columns[idx] = j;\n      values[idx] = value;\n      idx++;\n      return value;\n    });\n    return { rows, columns, values };\n  }\n\n  setThreshold(newThreshold) {\n    if (newThreshold !== 0 && newThreshold !== this.threshold) {\n      this.threshold = newThreshold;\n      this.forEachNonZero((i, j, v) => v);\n    }\n    return this;\n  }\n\n  /**\n   * @return {SparseMatrix} - New transposed sparse matrix\n   */\n  transpose() {\n    let trans = new SparseMatrix(this.columns, this.rows, {\n      initialCapacity: this.cardinality\n    });\n    this.forEachNonZero((i, j, value) => {\n      trans.set(j, i, value);\n      return value;\n    });\n    return trans;\n  }\n}\n\nSparseMatrix.prototype.klass = 'Matrix';\n\nSparseMatrix.identity = SparseMatrix.eye;\nSparseMatrix.prototype.tensorProduct = SparseMatrix.prototype.kroneckerProduct;\n\n/*\n Add dynamically instance and static methods for mathematical operations\n */\n\nvar inplaceOperator = `\n(function %name%(value) {\n    if (typeof value === 'number') return this.%name%S(value);\n    return this.%name%M(value);\n})\n`;\n\nvar inplaceOperatorScalar = `\n(function %name%S(value) {\n    this.forEachNonZero((i, j, v) => v %op% value);\n    return this;\n})\n`;\n\nvar inplaceOperatorMatrix = `\n(function %name%M(matrix) {\n    matrix.forEachNonZero((i, j, v) => {\n        this.set(i, j, this.get(i, j) %op% v);\n        return v;\n    });\n    return this;\n})\n`;\n\nvar staticOperator = `\n(function %name%(matrix, value) {\n    var newMatrix = new SparseMatrix(matrix);\n    return newMatrix.%name%(value);\n})\n`;\n\nvar inplaceMethod = `\n(function %name%() {\n    this.forEachNonZero((i, j, v) => %method%(v));\n    return this;\n})\n`;\n\nvar staticMethod = `\n(function %name%(matrix) {\n    var newMatrix = new SparseMatrix(matrix);\n    return newMatrix.%name%();\n})\n`;\n\nconst operators = [\n  // Arithmetic operators\n  ['+', 'add'],\n  ['-', 'sub', 'subtract'],\n  ['*', 'mul', 'multiply'],\n  ['/', 'div', 'divide'],\n  ['%', 'mod', 'modulus'],\n  // Bitwise operators\n  ['&', 'and'],\n  ['|', 'or'],\n  ['^', 'xor'],\n  ['<<', 'leftShift'],\n  ['>>', 'signPropagatingRightShift'],\n  ['>>>', 'rightShift', 'zeroFillRightShift']\n];\n\nfor (const operator of operators) {\n  for (let i = 1; i < operator.length; i++) {\n    SparseMatrix.prototype[operator[i]] = eval(\n      fillTemplateFunction(inplaceOperator, {\n        name: operator[i],\n        op: operator[0]\n      })\n    );\n    SparseMatrix.prototype[`${operator[i]}S`] = eval(\n      fillTemplateFunction(inplaceOperatorScalar, {\n        name: `${operator[i]}S`,\n        op: operator[0]\n      })\n    );\n    SparseMatrix.prototype[`${operator[i]}M`] = eval(\n      fillTemplateFunction(inplaceOperatorMatrix, {\n        name: `${operator[i]}M`,\n        op: operator[0]\n      })\n    );\n\n    SparseMatrix[operator[i]] = eval(\n      fillTemplateFunction(staticOperator, { name: operator[i] })\n    );\n  }\n}\n\nvar methods = [['~', 'not']];\n\n[\n  'abs',\n  'acos',\n  'acosh',\n  'asin',\n  'asinh',\n  'atan',\n  'atanh',\n  'cbrt',\n  'ceil',\n  'clz32',\n  'cos',\n  'cosh',\n  'exp',\n  'expm1',\n  'floor',\n  'fround',\n  'log',\n  'log1p',\n  'log10',\n  'log2',\n  'round',\n  'sign',\n  'sin',\n  'sinh',\n  'sqrt',\n  'tan',\n  'tanh',\n  'trunc'\n].forEach(function (mathMethod) {\n  methods.push([`Math.${mathMethod}`, mathMethod]);\n});\n\nfor (const method of methods) {\n  for (let i = 1; i < method.length; i++) {\n    SparseMatrix.prototype[method[i]] = eval(\n      fillTemplateFunction(inplaceMethod, {\n        name: method[i],\n        method: method[0]\n      })\n    );\n    SparseMatrix[method[i]] = eval(\n      fillTemplateFunction(staticMethod, { name: method[i] })\n    );\n  }\n}\n\nfunction fillTemplateFunction(template, values) {\n  for (const i in values) {\n    template = template.replace(new RegExp(`%${i}%`, 'g'), values[i]);\n  }\n  return template;\n}\n","export default function additiveSymmetric(a, b) {\n  var i = 0;\n  var ii = a.length;\n  var d = 0;\n  for (; i < ii; i++) {\n    d += ((a[i] - b[i]) * (a[i] - b[i]) * (a[i] + b[i])) / (a[i] * b[i]);\n  }\n  return 2 * d;\n}\n","export default function avg(a, b) {\n  var ii = a.length;\n  var max = 0;\n  var ans = 0;\n  var aux = 0;\n  for (var i = 0; i < ii; i++) {\n    aux = Math.abs(a[i] - b[i]);\n    ans += aux;\n    if (max < aux) {\n      max = aux;\n    }\n  }\n  return (max + ans) / 2;\n}\n","export default function bhattacharyya(a, b) {\n  var ii = a.length;\n  var ans = 0;\n  for (var i = 0; i < ii; i++) {\n    ans += Math.sqrt(a[i] * b[i]);\n  }\n  return -Math.log(ans);\n}\n","export default function canberra(a, b) {\n  var ii = a.length;\n  var ans = 0;\n  for (var i = 0; i < ii; i++) {\n    ans += Math.abs(a[i] - b[i]) / (a[i] + b[i]);\n  }\n  return ans;\n}\n","export default function chebyshev(a, b) {\n  var ii = a.length;\n  var max = 0;\n  var aux = 0;\n  for (var i = 0; i < ii; i++) {\n    aux = Math.abs(a[i] - b[i]);\n    if (max < aux) {\n      max = aux;\n    }\n  }\n  return max;\n}\n","export default function clark(a, b) {\n  var i = 0;\n  var ii = a.length;\n  var d = 0;\n  for (; i < ii; i++) {\n    d += Math.sqrt(\n      ((a[i] - b[i]) * (a[i] - b[i])) / ((a[i] + b[i]) * (a[i] + b[i]))\n    );\n  }\n  return 2 * d;\n}\n","export default function czekanowskiSimilarity(a, b) {\n  var up = 0;\n  var down = 0;\n  for (var i = 0; i < a.length; i++) {\n    up += Math.min(a[i], b[i]);\n    down += a[i] + b[i];\n  }\n  return (2 * up) / down;\n}\n","import czekanowskiSimilarity from '../similarities/czekanowski';\n\nexport default function czekanowskiDistance(a, b) {\n  return 1 - czekanowskiSimilarity(a, b);\n}\n","export default function dice(a, b) {\n  var ii = a.length;\n  var p = 0;\n  var q1 = 0;\n  var q2 = 0;\n  for (var i = 0; i < ii; i++) {\n    p += a[i] * a[i];\n    q1 += b[i] * b[i];\n    q2 += (a[i] - b[i]) * (a[i] - b[i]);\n  }\n  return q2 / (p + q1);\n}\n","export default function divergence(a, b) {\n  var i = 0;\n  var ii = a.length;\n  var d = 0;\n  for (; i < ii; i++) {\n    d += ((a[i] - b[i]) * (a[i] - b[i])) / ((a[i] + b[i]) * (a[i] + b[i]));\n  }\n  return 2 * d;\n}\n","export default function fidelity(a, b) {\n  var ii = a.length;\n  var ans = 0;\n  for (var i = 0; i < ii; i++) {\n    ans += Math.sqrt(a[i] * b[i]);\n  }\n  return ans;\n}\n","export default function gower(a, b) {\n  var ii = a.length;\n  var ans = 0;\n  for (var i = 0; i < ii; i++) {\n    ans += Math.abs(a[i] - b[i]);\n  }\n  return ans / ii;\n}\n","export default function harmonicMean(a, b) {\n  var ii = a.length;\n  var ans = 0;\n  for (var i = 0; i < ii; i++) {\n    ans += (a[i] * b[i]) / (a[i] + b[i]);\n  }\n  return 2 * ans;\n}\n","export default function hellinger(a, b) {\n  var ii = a.length;\n  var ans = 0;\n  for (var i = 0; i < ii; i++) {\n    ans += Math.sqrt(a[i] * b[i]);\n  }\n  return 2 * Math.sqrt(1 - ans);\n}\n","export default function innerProduct(a, b) {\n  var ii = a.length;\n  var ans = 0;\n  for (var i = 0; i < ii; i++) {\n    ans += a[i] * b[i];\n  }\n  return ans;\n}\n","export default function intersection(a, b) {\n  var ii = a.length;\n  var ans = 0;\n  for (var i = 0; i < ii; i++) {\n    ans += Math.min(a[i], b[i]);\n  }\n  return 1 - ans;\n}\n","export default function jaccard(a, b) {\n  var ii = a.length;\n  var p1 = 0;\n  var p2 = 0;\n  var q1 = 0;\n  var q2 = 0;\n  for (var i = 0; i < ii; i++) {\n    p1 += a[i] * b[i];\n    p2 += a[i] * a[i];\n    q1 += b[i] * b[i];\n    q2 += (a[i] - b[i]) * (a[i] - b[i]);\n  }\n  return q2 / (p2 + q1 - p1);\n}\n","export default function jeffreys(a, b) {\n  var ii = a.length;\n  var ans = 0;\n  for (var i = 0; i < ii; i++) {\n    ans += (a[i] - b[i]) * Math.log(a[i] / b[i]);\n  }\n  return ans;\n}\n","export default function jensenDifference(a, b) {\n  var ii = a.length;\n  var ans = 0;\n  for (var i = 0; i < ii; i++) {\n    ans +=\n      (a[i] * Math.log(a[i]) + b[i] * Math.log(b[i])) / 2 -\n      ((a[i] + b[i]) / 2) * Math.log((a[i] + b[i]) / 2);\n  }\n  return ans;\n}\n","export default function jensenShannon(a, b) {\n  var ii = a.length;\n  var p = 0;\n  var q = 0;\n  for (var i = 0; i < ii; i++) {\n    p += a[i] * Math.log((2 * a[i]) / (a[i] + b[i]));\n    q += b[i] * Math.log((2 * b[i]) / (a[i] + b[i]));\n  }\n  return (p + q) / 2;\n}\n","export default function kdivergence(a, b) {\n  var ii = a.length;\n  var ans = 0;\n  for (var i = 0; i < ii; i++) {\n    ans += a[i] * Math.log((2 * a[i]) / (a[i] + b[i]));\n  }\n  return ans;\n}\n","export default function kulczynski(a, b) {\n  var ii = a.length;\n  var up = 0;\n  var down = 0;\n  for (var i = 0; i < ii; i++) {\n    up += Math.abs(a[i] - b[i]);\n    down += Math.min(a[i], b[i]);\n  }\n  return up / down;\n}\n","export default function kullbackLeibler(a, b) {\n  var ii = a.length;\n  var ans = 0;\n  for (var i = 0; i < ii; i++) {\n    ans += a[i] * Math.log(a[i] / b[i]);\n  }\n  return ans;\n}\n","export default function kumarHassebrook(a, b) {\n  var ii = a.length;\n  var p = 0;\n  var p2 = 0;\n  var q2 = 0;\n  for (var i = 0; i < ii; i++) {\n    p += a[i] * b[i];\n    p2 += a[i] * a[i];\n    q2 += b[i] * b[i];\n  }\n  return p / (p2 + q2 - p);\n}\n","export default function kumarJohnson(a, b) {\n  var ii = a.length;\n  var ans = 0;\n  for (var i = 0; i < ii; i++) {\n    ans +=\n      Math.pow(a[i] * a[i] - b[i] * b[i], 2) / (2 * Math.pow(a[i] * b[i], 1.5));\n  }\n  return ans;\n}\n","export default function lorentzian(a, b) {\n  var ii = a.length;\n  var ans = 0;\n  for (var i = 0; i < ii; i++) {\n    ans += Math.log(Math.abs(a[i] - b[i]) + 1);\n  }\n  return ans;\n}\n","export default function manhattan(a, b) {\n  var i = 0;\n  var ii = a.length;\n  var d = 0;\n  for (; i < ii; i++) {\n    d += Math.abs(a[i] - b[i]);\n  }\n  return d;\n}\n","export default function matusita(a, b) {\n  var ii = a.length;\n  var ans = 0;\n  for (var i = 0; i < ii; i++) {\n    ans += Math.sqrt(a[i] * b[i]);\n  }\n  return Math.sqrt(2 - 2 * ans);\n}\n","export default function minkowski(a, b, p) {\n  var i = 0;\n  var ii = a.length;\n  var d = 0;\n  for (; i < ii; i++) {\n    d += Math.pow(Math.abs(a[i] - b[i]), p);\n  }\n  return Math.pow(d, 1 / p);\n}\n","export default function motyka(a, b) {\n  var ii = a.length;\n  var up = 0;\n  var down = 0;\n  for (var i = 0; i < ii; i++) {\n    up += Math.min(a[i], b[i]);\n    down += a[i] + b[i];\n  }\n  return 1 - up / down;\n}\n","export default function neyman(a, b) {\n  var i = 0;\n  var ii = a.length;\n  var d = 0;\n  for (; i < ii; i++) {\n    d += ((a[i] - b[i]) * (a[i] - b[i])) / a[i];\n  }\n  return d;\n}\n","export default function pearson(a, b) {\n  var i = 0;\n  var ii = a.length;\n  var d = 0;\n  for (; i < ii; i++) {\n    d += ((a[i] - b[i]) * (a[i] - b[i])) / b[i];\n  }\n  return d;\n}\n","export default function probabilisticSymmetric(a, b) {\n  var i = 0;\n  var ii = a.length;\n  var d = 0;\n  for (; i < ii; i++) {\n    d += ((a[i] - b[i]) * (a[i] - b[i])) / (a[i] + b[i]);\n  }\n  return 2 * d;\n}\n","export default function ruzicka(a, b) {\n  var ii = a.length;\n  var up = 0;\n  var down = 0;\n  for (var i = 0; i < ii; i++) {\n    up += Math.min(a[i], b[i]);\n    down += Math.max(a[i], b[i]);\n  }\n  return up / down;\n}\n","export default function soergel(a, b) {\n  var ii = a.length;\n  var up = 0;\n  var down = 0;\n  for (var i = 0; i < ii; i++) {\n    up += Math.abs(a[i] - b[i]);\n    down += Math.max(a[i], b[i]);\n  }\n  return up / down;\n}\n","export default function sorensen(a, b) {\n  var ii = a.length;\n  var up = 0;\n  var down = 0;\n  for (var i = 0; i < ii; i++) {\n    up += Math.abs(a[i] - b[i]);\n    down += a[i] + b[i];\n  }\n  return up / down;\n}\n","export default function squared(a, b) {\n  var i = 0;\n  var ii = a.length;\n  var d = 0;\n  for (; i < ii; i++) {\n    d += ((a[i] - b[i]) * (a[i] - b[i])) / (a[i] + b[i]);\n  }\n  return d;\n}\n","export default function squaredChord(a, b) {\n  var ii = a.length;\n  var ans = 0;\n  for (var i = 0; i < ii; i++) {\n    ans +=\n      (Math.sqrt(a[i]) - Math.sqrt(b[i])) * (Math.sqrt(a[i]) - Math.sqrt(b[i]));\n  }\n  return ans;\n}\n","export default function taneja(a, b) {\n  var ii = a.length;\n  var ans = 0;\n  for (var i = 0; i < ii; i++) {\n    ans +=\n      ((a[i] + b[i]) / 2) *\n      Math.log((a[i] + b[i]) / (2 * Math.sqrt(a[i] * b[i])));\n  }\n  return ans;\n}\n","export default function tanimoto(a, b, bitvector) {\n  if (bitvector) {\n    var inter = 0;\n    var union = 0;\n    for (var j = 0; j < a.length; j++) {\n      inter += a[j] && b[j];\n      union += a[j] || b[j];\n    }\n    if (union === 0) {\n      return 1;\n    }\n    return inter / union;\n  } else {\n    var ii = a.length;\n    var p = 0;\n    var q = 0;\n    var m = 0;\n    for (var i = 0; i < ii; i++) {\n      p += a[i];\n      q += b[i];\n      m += Math.min(a[i], b[i]);\n    }\n    return 1 - (p + q - 2 * m) / (p + q - m);\n  }\n}\n","import tanimotoS from '../similarities/tanimoto';\n\nexport default function tanimoto(a, b, bitvector) {\n  if (bitvector) {\n    return 1 - tanimotoS(a, b, bitvector);\n  } else {\n    var ii = a.length;\n    var p = 0;\n    var q = 0;\n    var m = 0;\n    for (var i = 0; i < ii; i++) {\n      p += a[i];\n      q += b[i];\n      m += Math.min(a[i], b[i]);\n    }\n    return (p + q - 2 * m) / (p + q - m);\n  }\n}\n","export default function topsoe(a, b) {\n  var ii = a.length;\n  var ans = 0;\n  for (var i = 0; i < ii; i++) {\n    ans +=\n      a[i] * Math.log((2 * a[i]) / (a[i] + b[i])) +\n      b[i] * Math.log((2 * b[i]) / (a[i] + b[i]));\n  }\n  return ans;\n}\n","export default function waveHedges(a, b) {\n  var ii = a.length;\n  var ans = 0;\n  for (var i = 0; i < ii; i++) {\n    ans += 1 - Math.min(a[i], b[i]) / Math.max(a[i], b[i]);\n  }\n  return ans;\n}\n","import binarySearch from 'binary-search';\nimport { ascending } from 'num-sort';\n\n/**\n * Function that creates the tree\n * @param {Array<Array<number>>} spectrum\n * @param {object} [options]\n * @return {Tree|null}\n * left and right have the same structure than the parent,\n * or are null if they are leaves\n */\nexport function createTree(spectrum, options = {}) {\n  var X = spectrum[0];\n  const {\n    minWindow = 0.16,\n    threshold = 0.01,\n    from = X[0],\n    to = X[X.length - 1]\n  } = options;\n\n  return mainCreateTree(\n    spectrum[0],\n    spectrum[1],\n    from,\n    to,\n    minWindow,\n    threshold\n  );\n}\n\nfunction mainCreateTree(X, Y, from, to, minWindow, threshold) {\n  if (to - from < minWindow) {\n    return null;\n  }\n\n  // search first point\n  var start = binarySearch(X, from, ascending);\n  if (start < 0) {\n    start = ~start;\n  }\n\n  // stop at last point\n  var sum = 0;\n  var center = 0;\n  for (var i = start; i < X.length; i++) {\n    if (X[i] >= to) {\n      break;\n    }\n    sum += Y[i];\n    center += X[i] * Y[i];\n  }\n\n  if (sum < threshold) {\n    return null;\n  }\n\n  center /= sum;\n  if (center - from < 1e-6 || to - center < 1e-6) {\n    return null;\n  }\n  if (center - from < minWindow / 4) {\n    return mainCreateTree(X, Y, center, to, minWindow, threshold);\n  } else {\n    if (to - center < minWindow / 4) {\n      return mainCreateTree(X, Y, from, center, minWindow, threshold);\n    } else {\n      return new Tree(\n        sum,\n        center,\n        mainCreateTree(X, Y, from, center, minWindow, threshold),\n        mainCreateTree(X, Y, center, to, minWindow, threshold)\n      );\n    }\n  }\n}\n\nclass Tree {\n  constructor(sum, center, left, right) {\n    this.sum = sum;\n    this.center = center;\n    this.left = left;\n    this.right = right;\n  }\n}\n","import { createTree } from './createTree';\n\n/**\n * Similarity between two nodes\n * @param {Tree|Array<Array<number>>} a - tree A node\n * @param {Tree|Array<Array<number>>} b - tree B node\n * @param {object} [options]\n * @return {number} similarity measure between tree nodes\n */\nexport function getSimilarity(a, b, options = {}) {\n  const { alpha = 0.1, beta = 0.33, gamma = 0.001 } = options;\n\n  if (a === null || b === null) {\n    return 0;\n  }\n  if (Array.isArray(a)) {\n    a = createTree(a);\n  }\n  if (Array.isArray(b)) {\n    b = createTree(b);\n  }\n\n  var C =\n    (alpha * Math.min(a.sum, b.sum)) / Math.max(a.sum, b.sum) +\n    (1 - alpha) * Math.exp(-gamma * Math.abs(a.center - b.center));\n\n  return (\n    beta * C +\n    ((1 - beta) *\n      (getSimilarity(a.left, b.left, options) +\n        getSimilarity(a.right, b.right, options))) /\n      2\n  );\n}\n","import { getSimilarity } from './getSimilarity';\n\nexport { createTree } from './createTree';\n\nexport function treeSimilarity(A, B, options = {}) {\n  return getSimilarity(A, B, options);\n}\n\nexport function getFunction(options = {}) {\n  return (A, B) => getSimilarity(A, B, options);\n}\n","export default function cosine(a, b) {\n  var ii = a.length;\n  var p = 0;\n  var p2 = 0;\n  var q2 = 0;\n  for (var i = 0; i < ii; i++) {\n    p += a[i] * b[i];\n    p2 += a[i] * a[i];\n    q2 += b[i] * b[i];\n  }\n  return p / (Math.sqrt(p2) * Math.sqrt(q2));\n}\n","import diceD from '../distances/dice';\n\nexport default function dice(a, b) {\n  return 1 - diceD(a, b);\n}\n","import intersectionD from '../distances/intersection';\n\nexport default function intersection(a, b) {\n  return 1 - intersectionD(a, b);\n}\n","import jaccardD from '../distances/jaccard';\n\nexport default function jaccard(a, b) {\n  return 1 - jaccardD(a, b);\n}\n","import kulczynskiD from '../distances/kulczynski';\n\nexport default function kulczynski(a, b) {\n  return 1 / kulczynskiD(a, b);\n}\n","import motykaD from '../distances/motyka';\n\nexport default function motyka(a, b) {\n  return 1 - motykaD(a, b);\n}\n","import mean from 'ml-array-mean';\n\nimport cosine from './cosine';\n\nexport default function pearson(a, b) {\n  var avgA = mean(a);\n  var avgB = mean(b);\n\n  var newA = new Array(a.length);\n  var newB = new Array(b.length);\n  for (var i = 0; i < newA.length; i++) {\n    newA[i] = a[i] - avgA;\n    newB[i] = b[i] - avgB;\n  }\n\n  return cosine(newA, newB);\n}\n","import squaredChordD from '../distances/squaredChord';\n\nexport default function squaredChord(a, b) {\n  return 1 - squaredChordD(a, b);\n}\n","'use strict';\n\n// Accuracy\nexports.acc = pred => {\n    const l = pred.cutoffs.length;\n    const result = new Array(l);\n    for (var i = 0; i < l; i++) {\n        result[i] = (pred.tn[i] + pred.tp[i]) / (l - 1);\n    }\n    return result;\n};\n\n// Error rate\nexports.err = pred => {\n    const l = pred.cutoffs.length;\n    const result = new Array(l);\n    for (var i = 0; i < l; i++) {\n        result[i] = (pred.fn[i] + pred.fp[i] / (l - 1));\n    }\n    return result;\n};\n\n// False positive rate\nexports.fpr = pred => {\n    const l = pred.cutoffs.length;\n    const result = new Array(l);\n    for (var i = 0; i < l; i++) {\n        result[i] = pred.fp[i] / pred.nNeg;\n    }\n    return result;\n};\n\n// True positive rate\nexports.tpr = pred => {\n    const l = pred.cutoffs.length;\n    const result = new Array(l);\n    for (var i = 0; i < l; i++) {\n        result[i] = pred.tp[i] / pred.nPos;\n    }\n    return result;\n};\n\n// False negative rate\nexports.fnr = pred => {\n    const l = pred.cutoffs.length;\n    const result = new Array(l);\n    for (var i = 0; i < l; i++) {\n        result[i] = pred.fn[i] / pred.nPos;\n    }\n    return result;\n};\n\n// True negative rate\nexports.tnr = pred => {\n    const l = pred.cutoffs.length;\n    const result = new Array(l);\n    for (var i = 0; i < l; i++) {\n        result[i] = pred.tn[i] / pred.nNeg;\n    }\n    return result;\n};\n\n// Positive predictive value\nexports.ppv = pred => {\n    const l = pred.cutoffs.length;\n    const result = new Array(l);\n    for (var i = 0; i < l; i++) {\n        result[i] = (pred.fp[i] + pred.tp[i] !== 0) ? (pred.tp[i] / (pred.fp[i] + pred.tp[i])) : 0;\n    }\n    return result;\n};\n\n// Negative predictive value\nexports.npv = pred => {\n    const l = pred.cutoffs.length;\n    const result = new Array(l);\n    for (var i = 0; i < l; i++) {\n        result[i] = (pred.fn[i] + pred.tn[i] !== 0) ? (pred.tn[i] / (pred.fn[i] + pred.tn[i])) : 0;\n    }\n    return result;\n};\n\n// Prediction conditioned fallout\nexports.pcfall = pred => {\n    const l = pred.cutoffs.length;\n    const result = new Array(l);\n    for (var i = 0; i < l; i++) {\n        result[i] = (pred.fp[i] + pred.tp[i] !== 0) ? 1 - (pred.tp[i] / (pred.fp[i] + pred.tp[i])) : 1;\n    }\n    return result;\n};\n\n// Prediction conditioned miss\nexports.pcmiss = pred => {\n    const l = pred.cutoffs.length;\n    const result = new Array(l);\n    for (var i = 0; i < l; i++) {\n        result[i] = (pred.fn[i] + pred.tn[i] !== 0) ? 1 - (pred.tn[i] / (pred.fn[i] + pred.tn[i])) : 1;\n    }\n    return result;\n};\n\n// Lift value\nexports.lift = pred => {\n    const l = pred.cutoffs.length;\n    const result = new Array(l);\n    for (var i = 0; i < l; i++) {\n        result[i] = (pred.nPosPred[i] !== 0) ? ((pred.tp[i] / pred.nPos) / (pred.nPosPred[i] / pred.nSamples)) : 0;\n    }\n    return result;\n};\n\n// Rate of positive predictions\nexports.rpp = pred => {\n    const l = pred.cutoffs.length;\n    const result = new Array(l);\n    for (var i = 0; i < l; i++) {\n        result[i] = pred.nPosPred[i] / pred.nSamples;\n    }\n    return result;\n};\n\n// Rate of negative predictions\nexports.rnp = pred => {\n    const l = pred.cutoffs.length;\n    const result = new Array(l);\n    for (var i = 0; i < l; i++) {\n        result[i] = pred.nNegPred[i] / pred.nSamples;\n    }\n    return result;\n};\n\n// Threshold\nexports.threshold = pred => {\n    const clone = pred.cutoffs.slice();\n    clone[0] = clone[1]; // Remove the infinite value\n    return clone;\n};\n","'use strict';\n\nconst measures = require('./measures');\n\nclass Performance {\n    /**\n     *\n     * @param prediction - The prediction matrix\n     * @param target - The target matrix (values: truthy for same class, falsy for different class)\n     * @param options\n     *\n     * @option    all    True if the entire matrix must be used. False to ignore the diagonal and lower part (default is false, for similarity/distance matrices)\n     * @option    max    True if the max value corresponds to a perfect match (like in similarity matrices), false if it is the min value (default is false, like in distance matrices. All values will be multiplied by -1)\n     */\n    constructor(prediction, target, options) {\n        options = options || {};\n        if (prediction.length !== target.length || prediction[0].length !== target[0].length) {\n            throw new Error('dimensions of prediction and target do not match');\n        }\n        const rows = prediction.length;\n        const columns = prediction[0].length;\n        const isDistance = !options.max;\n\n        const predP = [];\n\n        if (options.all) {\n            for (var i = 0; i < rows; i++) {\n                for (var j = 0; j < columns; j++) {\n                    predP.push({\n                        pred: prediction[i][j],\n                        targ: target[i][j]\n                    });\n                }\n            }\n        } else {\n            if (rows < 3 || rows !== columns) {\n                throw new Error('When \"all\" option is false, the prediction matrix must be square and have at least 3 columns');\n            }\n            for (var i = 0; i < rows - 1; i++) {\n                for (var j = i + 1; j < columns; j++) {\n                    predP.push({\n                        pred: prediction[i][j],\n                        targ: target[i][j]\n                    });\n                }\n            }\n        }\n\n        if (isDistance) {\n            predP.sort((a, b) => a.pred - b.pred);\n        } else {\n            predP.sort((a, b) => b.pred - a.pred);\n        }\n        \n        const cutoffs = this.cutoffs = [isDistance ? Number.MIN_VALUE : Number.MAX_VALUE];\n        const fp = this.fp = [0];\n        const tp = this.tp = [0];\n\n        var nPos = 0;\n        var nNeg = 0;\n\n        var currentPred = predP[0].pred;\n        var nTp = 0;\n        var nFp = 0;\n        for (var i = 0; i < predP.length; i++) {\n            if (predP[i].pred !== currentPred) {\n                cutoffs.push(currentPred);\n                fp.push(nFp);\n                tp.push(nTp);\n                currentPred = predP[i].pred;\n            }\n            if (predP[i].targ) {\n                nPos++;\n                nTp++;\n            } else {\n                nNeg++;\n                nFp++;\n            }\n        }\n        cutoffs.push(currentPred);\n        fp.push(nFp);\n        tp.push(nTp);\n\n        const l = cutoffs.length;\n        const fn = this.fn = new Array(l);\n        const tn = this.tn = new Array(l);\n        const nPosPred = this.nPosPred = new Array(l);\n        const nNegPred = this.nNegPred = new Array(l);\n\n        for (var i = 0; i < l; i++) {\n            fn[i] = nPos - tp[i];\n            tn[i] = nNeg - fp[i];\n\n            nPosPred[i] = tp[i] + fp[i];\n            nNegPred[i] = tn[i] + fn[i];\n        }\n\n        this.nPos = nPos;\n        this.nNeg = nNeg;\n        this.nSamples = nPos + nNeg;\n    }\n\n    /**\n     * Computes a measure from the prediction object.\n     *\n     * Many measures are available and can be combined :\n     * To create a ROC curve, you need fpr and tpr\n     * To create a DET curve, you need fnr and fpr\n     * To create a Lift chart, you need rpp and lift\n     *\n     * Possible measures are : threshold (Threshold), acc (Accuracy), err (Error rate),\n     * fpr (False positive rate), tpr (True positive rate), fnr (False negative rate), tnr (True negative rate), ppv (Positive predictive value),\n     * npv (Negative predictive value), pcfall (Prediction-conditioned fallout), pcmiss (Prediction-conditioned miss), lift (Lift value), rpp (Rate of positive predictions), rnp (Rate of negative predictions)\n     *\n     * @param measure - The short name of the measure\n     *\n     * @return [number]\n     */\n    getMeasure(measure) {\n        if (typeof measure !== 'string') {\n            throw new Error('No measure specified');\n        }\n        if (!measures[measure]) {\n            throw new Error(`The specified measure (${measure}) does not exist`);\n        }\n        return measures[measure](this);\n    }\n\n    /**\n     * Returns the area under the ROC curve\n     */\n    getAURC() {\n        const l = this.cutoffs.length;\n        const x = new Array(l);\n        const y = new Array(l);\n        for (var i = 0; i < l; i++) {\n            x[i] = this.fp[i] / this.nNeg;\n            y[i] = this.tp[i] / this.nPos;\n        }\n        var auc = 0;\n        for (i = 1; i < l; i++) {\n            auc += 0.5 * (x[i] - x[i - 1]) * (y[i] + y[i - 1]);\n        }\n        return auc;\n    }\n\n    /**\n     * Returns the area under the DET curve\n     */\n    getAUDC() {\n        const l = this.cutoffs.length;\n        const x = new Array(l);\n        const y = new Array(l);\n        for (var i = 0; i < l; i++) {\n            x[i] = this.fn[i] / this.nPos;\n            y[i] = this.fp[i] / this.nNeg;\n        }\n        var auc = 0;\n        for (i = 1; i < l; i++) {\n            auc += 0.5 * (x[i] + x[i - 1]) * (y[i] - y[i - 1]);\n        }\n        return auc;\n    }\n\n    getDistribution(options) {\n        options = options || {};\n        var cutLength = this.cutoffs.length;\n        var cutLow = options.xMin || Math.floor(this.cutoffs[cutLength - 1] * 100) / 100;\n        var cutHigh = options.xMax || Math.ceil(this.cutoffs[1] * 100) / 100;\n        var interval = options.interval || Math.floor(((cutHigh - cutLow) / 20 * 10000000) - 1) / 10000000; // Trick to avoid the precision problem of float numbers\n\n        var xLabels = [];\n        var interValues = [];\n        var intraValues = [];\n        var interCumPercent = [];\n        var intraCumPercent = [];\n\n        var nTP = this.tp[cutLength - 1], currentTP = 0;\n        var nFP = this.fp[cutLength - 1], currentFP = 0;\n\n        for (var i = cutLow, j = (cutLength - 1); i <= cutHigh; i += interval) {\n            while (this.cutoffs[j] < i)\n                j--;\n\n            xLabels.push(i);\n\n            var thisTP = nTP - currentTP - this.tp[j];\n            var thisFP = nFP - currentFP - this.fp[j];\n\n            currentTP += thisTP;\n            currentFP += thisFP;\n\n            interValues.push(thisFP);\n            intraValues.push(thisTP);\n\n            interCumPercent.push(100 - (nFP - this.fp[j]) / nFP * 100);\n            intraCumPercent.push(100 - (nTP - this.tp[j]) / nTP * 100);\n        }\n\n        return {\n            xLabels: xLabels,\n            interValues: interValues,\n            intraValues: intraValues,\n            interCumPercent: interCumPercent,\n            intraCumPercent: intraCumPercent\n        };\n    }\n}\n\nPerformance.names = {\n    acc: 'Accuracy',\n    err: 'Error rate',\n    fpr: 'False positive rate',\n    tpr: 'True positive rate',\n    fnr: 'False negative rate',\n    tnr: 'True negative rate',\n    ppv: 'Positive predictive value',\n    npv: 'Negative predictive value',\n    pcfall: 'Prediction-conditioned fallout',\n    pcmiss: 'Prediction-conditioned miss',\n    lift: 'Lift value',\n    rpp: 'Rate of positive predictions',\n    rnp: 'Rate of negative predictions',\n    threshold: 'Threshold'\n};\n\nmodule.exports = Performance;\n","'use strict';\n\nvar defaultOptions = {\n  size: 1,\n  value: 0\n};\n\n/**\n * Case when the entry is an array\n * @param data\n * @param options\n * @returns {Array}\n */\nfunction arrayCase(data, options) {\n  var len = data.length;\n  if (typeof options.size === 'number') {\n    options.size = [options.size, options.size];\n  }\n\n  var cond = len + options.size[0] + options.size[1];\n\n  var output;\n  if (options.output) {\n    if (options.output.length !== cond) {\n      throw new RangeError('Wrong output size');\n    }\n    output = options.output;\n  } else {\n    output = new Array(cond);\n  }\n\n  var i;\n  if (options.value === 'circular') {\n    for (i = 0; i < cond; i++) {\n      if (i < options.size[0]) {\n        output[i] = data[(len - (options.size[0] % len) + i) % len];\n      } else if (i < options.size[0] + len) {\n        output[i] = data[i - options.size[0]];\n      } else {\n        output[i] = data[(i - options.size[0]) % len];\n      }\n    }\n  } else if (options.value === 'replicate') {\n    for (i = 0; i < cond; i++) {\n      if (i < options.size[0]) output[i] = data[0];\n      else if (i < options.size[0] + len) output[i] = data[i - options.size[0]];\n      else output[i] = data[len - 1];\n    }\n  } else if (options.value === 'symmetric') {\n    if (options.size[0] > len || options.size[1] > len) {\n      throw new RangeError(\n        'expanded value should not be bigger than the data length'\n      );\n    }\n    for (i = 0; i < cond; i++) {\n      if (i < options.size[0]) output[i] = data[options.size[0] - 1 - i];\n      else if (i < options.size[0] + len) output[i] = data[i - options.size[0]];\n      else output[i] = data[2 * len + options.size[0] - i - 1];\n    }\n  } else {\n    for (i = 0; i < cond; i++) {\n      if (i < options.size[0]) output[i] = options.value;\n      else if (i < options.size[0] + len) output[i] = data[i - options.size[0]];\n      else output[i] = options.value;\n    }\n  }\n\n  return output;\n}\n\n/**\n * Case when the entry is a matrix\n * @param data\n * @param options\n * @returns {Array}\n */\nfunction matrixCase(data, options) {\n  // var row = data.length;\n  // var col = data[0].length;\n  if (options.size[0] === undefined) {\n    options.size = [options.size, options.size, options.size, options.size];\n  }\n  throw new Error('matrix not supported yet, sorry');\n}\n\n/**\n * Pads and array\n * @param {Array <number>} data\n * @param {object} options\n */\nfunction padArray(data, options) {\n  options = Object.assign({}, defaultOptions, options);\n  if (Array.isArray(data)) {\n    if (Array.isArray(data[0])) return matrixCase(data, options);\n    else return arrayCase(data, options);\n  } else {\n    throw new TypeError('data should be an array');\n  }\n}\n\nmodule.exports = padArray;\n","'use strict';\n\nconst { Matrix, MatrixTransposeView, inverse } = require('ml-matrix');\nconst padArray = require('ml-pad-array');\n\nconst defaultOptions = {\n  windowSize: 5,\n  derivative: 1,\n  polynomial: 2,\n  pad: 'none',\n  padValue: 'replicate'\n};\n\n/**\n * Savitzky-Golay filter\n * @param {Array <number>} data\n * @param {number} h\n * @param {Object} options\n * @returns {Array}\n */\nfunction SavitzkyGolay(data, h, options) {\n  options = Object.assign({}, defaultOptions, options);\n  if (\n    options.windowSize % 2 === 0 ||\n    options.windowSize < 5 ||\n    !Number.isInteger(options.windowSize)\n  ) {\n    throw new RangeError(\n      'Invalid window size (should be odd and at least 5 integer number)'\n    );\n  }\n  if (options.derivative < 0 || !Number.isInteger(options.derivative)) {\n    throw new RangeError('Derivative should be a positive integer');\n  }\n  if (options.polynomial < 1 || !Number.isInteger(options.polynomial)) {\n    throw new RangeError('Polynomial should be a positive integer');\n  }\n\n  var C, norm;\n  var step = Math.floor(options.windowSize / 2);\n\n  if (options.pad === 'pre') {\n    data = padArray(data, { size: step, value: options.padValue });\n  }\n\n  var ans = new Array(data.length - 2 * step);\n\n  if (\n    options.windowSize === 5 &&\n    options.polynomial === 2 &&\n    (options.derivative === 1 || options.derivative === 2)\n  ) {\n    if (options.derivative === 1) {\n      C = [-2, -1, 0, 1, 2];\n      norm = 10;\n    } else {\n      C = [2, -1, -2, -1, 2];\n      norm = 7;\n    }\n  } else {\n    var J = Matrix.ones(options.windowSize, options.polynomial + 1);\n    var inic = -(options.windowSize - 1) / 2;\n    for (var i = 0; i < J.rows; i++) {\n      for (var j = 0; j < J.columns; j++) {\n        if (inic + 1 !== 0 || j !== 0) J.set(i, j, Math.pow(inic + i, j));\n      }\n    }\n    var Jtranspose = new MatrixTransposeView(J);\n    var Jinv = inverse(Jtranspose.mmul(J));\n    C = Jinv.mmul(Jtranspose);\n    C = C.getRow(options.derivative);\n    norm = 1;\n  }\n  var det = norm * Math.pow(h, options.derivative);\n  for (var k = step; k < data.length - step; k++) {\n    var d = 0;\n    for (var l = 0; l < C.length; l++) d += (C[l] * data[l + k - step]) / det;\n    ans[k - step] = d;\n  }\n\n  if (options.pad === 'post') {\n    ans = padArray(ans, { size: step, value: options.padValue });\n  }\n\n  return ans;\n}\n\nmodule.exports = SavitzkyGolay;\n","// auxiliary file to create the 256 look at table elements\n\nvar ans = new Array(256);\nfor (var i = 0; i < 256; i++) {\n    var num = i;\n    var c = 0;\n    while (num) {\n        num = num & (num - 1);\n        c++;\n    }\n    ans[i] = c;\n}\n\nmodule.exports = ans;","'use strict';\n\nvar eightBits = require('./creator');\n\n/**\n * Count the number of true values in an array\n * @param {Array} arr\n * @return {number}\n */\nfunction count(arr) {\n    var c = 0;\n    for (var i = 0; i < arr.length; i++) {\n        c += eightBits[arr[i] & 0xff] + eightBits[(arr[i] >> 8) & 0xff] + eightBits[(arr[i] >> 16) & 0xff] + eightBits[(arr[i] >> 24) & 0xff];\n    }\n    return c;\n}\n\n/**\n * Logical AND operation\n * @param {Array} arr1\n * @param {Array} arr2\n * @return {Array}\n */\nfunction and(arr1, arr2) {\n    var ans = new Array(arr1.length);\n    for (var i = 0; i < arr1.length; i++)\n        ans[i] = arr1[i] & arr2[i];\n    return ans;\n}\n\n/**\n * Logical OR operation\n * @param {Array} arr1\n * @param {Array} arr2\n * @return {Array}\n */\nfunction or(arr1, arr2) {\n    var ans = new Array(arr1.length);\n    for (var i = 0; i < arr1.length; i++)\n        ans[i] = arr1[i] | arr2[i];\n    return ans;\n}\n\n/**\n * Logical XOR operation\n * @param {Array} arr1\n * @param {Array} arr2\n * @return {Array}\n */\nfunction xor(arr1, arr2) {\n    var ans = new Array(arr1.length);\n    for (var i = 0; i < arr1.length; i++)\n        ans[i] = arr1[i] ^ arr2[i];\n    return ans;\n}\n\n/**\n * Logical NOT operation\n * @param {Array} arr\n * @return {Array}\n */\nfunction not(arr) {\n    var ans = new Array(arr.length);\n    for (var i = 0; i < ans.length; i++)\n        ans[i] = ~arr[i];\n    return ans;\n}\n\n/**\n * Gets the n value of array arr\n * @param {Array} arr\n * @param {number} n\n * @return {boolean}\n */\nfunction getBit(arr, n) {\n    var index = n >> 5; // Same as Math.floor(n/32)\n    var mask = 1 << (31 - n % 32);\n    return Boolean(arr[index] & mask);\n}\n\n/**\n * Sets the n value of array arr to the value val\n * @param {Array} arr\n * @param {number} n\n * @param {boolean} val\n * @return {Array}\n */\nfunction setBit(arr, n, val) {\n    var index = n >> 5; // Same as Math.floor(n/32)\n    var mask = 1 << (31 - n % 32);\n    if (val)\n        arr[index] = mask | arr[index];\n    else\n        arr[index] = ~mask & arr[index];\n    return arr;\n}\n\n/**\n * Translates an array of numbers to a string of bits\n * @param {Array} arr\n * @returns {string}\n */\nfunction toBinaryString(arr) {\n    var str = '';\n    for (var i = 0; i < arr.length; i++) {\n        var obj = (arr[i] >>> 0).toString(2);\n        str += '00000000000000000000000000000000'.substr(obj.length) + obj;\n    }\n    return str;\n}\n\n/**\n * Creates an array of numbers based on a string of bits\n * @param {string} str\n * @returns {Array}\n */\nfunction parseBinaryString(str) {\n    var len = str.length / 32;\n    var ans = new Array(len);\n    for (var i = 0; i < len; i++) {\n        ans[i] = parseInt(str.substr(i*32, 32), 2) | 0;\n    }\n    return ans;\n}\n\n/**\n * Translates an array of numbers to a hex string\n * @param {Array} arr\n * @returns {string}\n */\nfunction toHexString(arr) {\n    var str = '';\n    for (var i = 0; i < arr.length; i++) {\n        var obj = (arr[i] >>> 0).toString(16);\n        str += '00000000'.substr(obj.length) + obj;\n    }\n    return str;\n}\n\n/**\n * Creates an array of numbers based on a hex string\n * @param {string} str\n * @returns {Array}\n */\nfunction parseHexString(str) {\n    var len = str.length / 8;\n    var ans = new Array(len);\n    for (var i = 0; i < len; i++) {\n        ans[i] = parseInt(str.substr(i*8, 8), 16) | 0;\n    }\n    return ans;\n}\n\n/**\n * Creates a human readable string of the array\n * @param {Array} arr\n * @returns {string}\n */\nfunction toDebug(arr) {\n    var binary = toBinaryString(arr);\n    var str = '';\n    for (var i = 0; i < arr.length; i++) {\n        str += '0000'.substr((i * 32).toString(16).length) + (i * 32).toString(16) + ':';\n        for (var j = 0; j < 32; j += 4) {\n            str += ' ' + binary.substr(i * 32 + j, 4);\n        }\n        if (i < arr.length - 1) str += '\\n';\n    }\n    return str\n}\n\nmodule.exports = {\n    count: count,\n    and: and,\n    or: or,\n    xor: xor,\n    not: not,\n    getBit: getBit,\n    setBit: setBit,\n    toBinaryString: toBinaryString,\n    parseBinaryString: parseBinaryString,\n    toHexString: toHexString,\n    parseHexString: parseHexString,\n    toDebug: toDebug\n};\n","import isArray from 'is-any-array';\n\n/**\n * Computes the mode of the given values\n * @param {Array<number>} input\n * @return {number}\n */\n\nfunction mode(input) {\n  if (!isArray(input)) {\n    throw new TypeError('input must be an array');\n  }\n\n  if (input.length === 0) {\n    throw new TypeError('input must not be empty');\n  }\n\n  var maxValue = 0;\n  var maxCount = 0;\n  var count = 0;\n  var counts = {};\n\n  for (var i = 0; i < input.length; ++i) {\n    var element = input[i];\n    count = counts[element];\n\n    if (count) {\n      counts[element]++;\n      count++;\n    } else {\n      counts[element] = count = 1;\n    }\n\n    if (count > maxCount) {\n      maxCount = count;\n      maxValue = input[i];\n    }\n  }\n\n  return maxValue;\n}\n\nexport default mode;\n","/**\n * Computes the norm of the given values\n * @param {Array<number>} input\n * @param {object} [options={}]\n * @param {string} [algorithm='absolute']\n * @return {number}\n */\nfunction norm(input) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var _options$algorithm = options.algorithm,\n      algorithm = _options$algorithm === void 0 ? 'absolute' : _options$algorithm;\n\n  if (!Array.isArray(input)) {\n    throw new Error('input must be an array');\n  }\n\n  if (input.length === 0) {\n    throw new Error('input must not be empty');\n  }\n\n  switch (algorithm.toLowerCase()) {\n    case 'absolute':\n      var sum = absoluteSum(input);\n      if (sum === 0) return input.slice(0);\n      return input.map(function (element) {\n        return element / sum;\n      });\n\n    default:\n      throw new Error(\"norm: unknown algorithm: \".concat(algorithm));\n  }\n}\n\nfunction absoluteSum(input) {\n  var sum = 0;\n\n  for (var i = 0; i < input.length; i++) {\n    sum += Math.abs(input[i]);\n  }\n\n  return sum;\n}\n\nexport default norm;\n","import isArray from 'is-any-array';\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\n/**\n * Fill an array with sequential numbers\n * @param {Array<number>} [input] - optional destination array (if not provided a new array will be created)\n * @param {object} [options={}]\n * @param {number} [options.from=0] - first value in the array\n * @param {number} [options.to=10] - last value in the array\n * @param {number} [options.size=input.length] - size of the array (if not provided calculated from step)\n * @param {number} [options.step] - if not provided calculated from size\n * @return {Array<number>}\n */\n\nfunction sequentialFill() {\n  var input = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (_typeof(input) === 'object' && !isArray(input)) {\n    options = input;\n    input = [];\n  }\n\n  if (!isArray(input)) {\n    throw new TypeError('input must be an array');\n  }\n\n  var _options = options,\n      _options$from = _options.from,\n      from = _options$from === void 0 ? 0 : _options$from,\n      _options$to = _options.to,\n      to = _options$to === void 0 ? 10 : _options$to,\n      _options$size = _options.size,\n      size = _options$size === void 0 ? input.length : _options$size,\n      step = _options.step;\n\n  if (size && step) {\n    throw new Error('step is defined by the array size');\n  }\n\n  if (!size) {\n    if (step) {\n      size = Math.floor((to - from) / step) + 1;\n    } else {\n      size = to - from + 1;\n    }\n  }\n\n  if (!step && size) {\n    step = (to - from) / (size - 1);\n  }\n\n  if (Array.isArray(input)) {\n    input.length = 0; // only works with normal array\n\n    for (var i = 0; i < size; i++) {\n      input.push(from);\n      from += step;\n    }\n  } else {\n    if (input.length !== size) {\n      throw new Error('sequentialFill typed array must have the correct length');\n    }\n\n    for (var _i = 0; _i < size; _i++) {\n      input[_i] = from;\n      from += step;\n    }\n  }\n\n  return input;\n}\n\nexport default sequentialFill;\n","import arrayMean from 'ml-array-mean';\nimport isArray from 'is-any-array';\n\n/**\n * Computes the variance of the given values\n * @param {Array} values\n * @param {object} [options]\n * @param {boolean} [options.unbiased = true] - if true, divide by (n-1); if false, divide by n.\n * @param {number} [options.mean = arrayMean] - precalculated mean, if any.\n * @return {number}\n */\n\nfunction variance(values) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!isArray(values)) {\n    throw new TypeError('input must be an array');\n  }\n\n  var _options$unbiased = options.unbiased,\n      unbiased = _options$unbiased === void 0 ? true : _options$unbiased,\n      _options$mean = options.mean,\n      mean = _options$mean === void 0 ? arrayMean(values) : _options$mean;\n  var sqrError = 0;\n\n  for (var i = 0; i < values.length; i++) {\n    var x = values[i] - mean;\n    sqrError += x * x;\n  }\n\n  if (unbiased) {\n    return sqrError / (values.length - 1);\n  } else {\n    return sqrError / values.length;\n  }\n}\n\nexport default variance;\n","import variance from 'ml-array-variance';\n\n/**\n * Computes the standard deviation of the given values\n * @param {Array} values\n * @param {object} [options]\n * @param {boolean} [options.unbiased = true] - if true, divide by (n-1); if false, divide by n.\n * @param {number} [options.mean = arrayMean] - precalculated mean, if any.\n * @return {number}\n */\n\nfunction standardDeviation(values) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return Math.sqrt(variance(values, options));\n}\n\nexport default standardDeviation;\n","/**\n * Merge abscissa values if the ordinate value is in a list of centroids\n * @param {object} originalPoints\n * @param {Array<number>} originalPoints.x\n * @param {Array<number>} originalPoints.y\n * @param {Array<number>} centroids\n * @param {object} [options]\n * @param {number} [options.window = 0.01] - has to be a positive number\n * @return {{x: Array<number>, y: Array<number>}}\n */\nexport default function mergeByCentroids(\n  originalPoints,\n  centroids,\n  options = {}\n) {\n  const { window = 0.01 } = options;\n\n  var mergedPoints = {\n    x: centroids.slice(),\n    y: new Array(centroids.length).fill(0)\n  };\n\n  var originalIndex = 0;\n  var mergedIndex = 0;\n  while (\n    originalIndex < originalPoints.x.length &&\n    mergedIndex < centroids.length\n  ) {\n    var diff = originalPoints.x[originalIndex] - centroids[mergedIndex];\n    if (Math.abs(diff) < window) {\n      mergedPoints.y[mergedIndex] += originalPoints.y[originalIndex++];\n    } else if (diff < 0) {\n      originalIndex++;\n    } else {\n      mergedIndex++;\n    }\n  }\n\n  return mergedPoints;\n}\n","import binarySearch from 'binary-search';\nimport { ascending, descending } from 'num-sort';\n\n/**\n *\n * @param {object} points\n * @param {Array<number>} originalPoints.x\n * @param {Array<number>} originalPoints.y\n * @param {*} options\n * @return {{x: Array<number>, y: Array<number>}}\n */\nexport default function closestX(points, options) {\n  const { x, y } = points;\n  const { target = x[0], reverse = false } = options;\n\n  let index;\n  if (reverse) {\n    index = binarySearch(x, target, descending);\n  } else {\n    index = binarySearch(x, target, ascending);\n  }\n\n  if (index >= 0) {\n    return {\n      x: x[index],\n      y: y[index]\n    };\n  } else {\n    index = ~index;\n    if (\n      (index !== 0 && Math.abs(x[index] - target) > 0.5) ||\n      index === x.length\n    ) {\n      return {\n        x: x[index - 1],\n        y: y[index - 1]\n      };\n    } else {\n      return {\n        x: x[index],\n        y: y[index]\n      };\n    }\n  }\n}\n","/**\n * Merge abscissas values on similar ordinates and weight the group of abscissas\n * @param {object} points\n * @param {Array<number>} points.x - sorted abscissas values\n * @param {Array<number>} points.y - ordinates values\n * @param {object} [options]\n * @param {number} [options.groupWidth = 0.001] - window for abscissas to merge\n * @return {{x: Array<number>, y: Array<number>}}\n */\nexport default function maxMerge(points, options = {}) {\n  const { x, y } = points;\n  const { groupWidth = 0.001 } = options;\n\n  var merged = { x: [], y: [] };\n  var maxAbscissa = { x: [], y: [] };\n  var size = 0;\n  var index = 0;\n\n  while (index < x.length) {\n    if (size === 0 || x[index] - merged.x[size - 1] > groupWidth) {\n      maxAbscissa.x.push(x[index]);\n      maxAbscissa.y.push(y[index]);\n      merged.x.push(x[index]);\n      merged.y.push(y[index]);\n      index++;\n      size++;\n    } else {\n      if (y[index] > maxAbscissa.y[size - 1]) {\n        maxAbscissa.x[size - 1] = x[index];\n        maxAbscissa.y[size - 1] = y[index];\n      }\n      merged.x[size - 1] = x[index];\n      merged.y[size - 1] += y[index];\n      index++;\n    }\n  }\n\n  merged.x = maxAbscissa.x.slice();\n\n  return merged;\n}\n","import binarySearch from 'binary-search';\nimport { ascending, descending } from 'num-sort';\n\n/**\n * @param {object} points\n * @param {Array<number>} points.x - sorted abscissas values\n * @param {Array<number>} points.y - ordinates values\n * @param {object} [options]\n * @param {object} [options.from = {index: 0}]\n * @param {object} [options.to = {index: x.length-1}]\n * @param {boolean} [options.reverse = false]\n * @return {{index: number, value: number}}\n */\nexport default function maxY(points, options = {}) {\n  const { x, y } = points;\n  let {\n    from = { index: 0 },\n    to = { index: x.length },\n    reverse = false\n  } = options;\n\n  if (from.value !== undefined && from.index === undefined) {\n    from.index = calculateIndex(from.value, x, reverse);\n  }\n\n  if (to.value !== undefined && to.index === undefined) {\n    to.index = calculateIndex(to.value, x, reverse);\n  }\n\n  var currentMax = Number.MIN_VALUE;\n  var currentIndex;\n  for (var i = from.index; i < to.index; i++) {\n    if (currentMax < y[i]) {\n      currentMax = y[i];\n      currentIndex = i;\n    }\n  }\n\n  return {\n    index: currentIndex,\n    value: currentMax\n  };\n}\n\n/**\n * @param {number} value\n * @param {Array<number>} x\n * @param {boolean} reverse\n * @return {number} index of the value in the array\n */\nfunction calculateIndex(value, x, reverse) {\n  let index;\n  if (reverse) {\n    index = binarySearch(x, value, descending);\n  } else {\n    index = binarySearch(x, value, ascending);\n  }\n\n  if (index < 0) {\n    throw new Error(`the value ${value} doesn't belongs to the abscissa value`);\n  }\n\n  return index;\n}\n","export default function sortX(points, options = {}) {\n  const { x, y } = points;\n  const { reverse = false } = options;\n\n  var sortFunc;\n  if (!reverse) {\n    sortFunc = (a, b) => a.x - b.x;\n  } else {\n    sortFunc = (a, b) => b.x - a.x;\n  }\n\n  var grouped = x\n    .map((val, index) => ({\n      x: val,\n      y: y[index]\n    }))\n    .sort(sortFunc);\n\n  var response = { x: x.slice(), y: y.slice() };\n  for (var i = 0; i < x.length; i++) {\n    response.x[i] = grouped[i].x;\n    response.y[i] = grouped[i].y;\n  }\n\n  return response;\n}\n","\n/**\n * In place modification of the 2 arrays to make X unique and sum the Y if X has the same value\n * @param {object} [points={}] : Object of points contains property x (an array) and y (an array)\n * @return points\n */\n\nexport default function uniqueX(points = {}) {\n  const { x, y } = points;\n  if (x.length < 2) return;\n  if (x.length !== y.length) {\n    throw new Error('The X and Y arrays mush have the same length');\n  }\n\n  let current = x[0];\n  let counter = 0;\n\n  for (let i = 1; i < x.length; i++) {\n    if (current !== x[i]) {\n      counter++;\n      current = x[i];\n      x[counter] = x[i];\n      if (i !== counter) {\n        y[counter] = 0;\n      }\n    }\n    if (i !== counter) {\n      y[counter] += y[i];\n    }\n  }\n\n  x.length = counter + 1;\n  y.length = counter + 1;\n}\n","/**\n * Merge abscissas values on similar ordinates and weight the group of abscissas\n * @param {object} points\n * @param {Array<number>} points.x - sorted abscissas values\n * @param {Array<number>} points.y - ordinates values\n * @param {object} [options]\n * @param {number} [options.groupWidth = 0.001] - window for abscissas to merge\n * @return {{x: Array<number>, y: Array<number>}}\n */\nexport default function weightedMerge(points, options = {}) {\n  const { x, y } = points;\n  const { groupWidth = 0.001 } = options;\n\n  var merged = { x: [], y: [] };\n  var weightedAbscissa = { x: [], y: [] };\n  var size = 0;\n  var index = 0;\n\n  while (index < x.length) {\n    if (size === 0 || x[index] - merged.x[size - 1] > groupWidth) {\n      weightedAbscissa.x.push(x[index] * y[index]);\n      weightedAbscissa.y.push(y[index]);\n      merged.x.push(x[index]);\n      merged.y.push(y[index]);\n      index++;\n      size++;\n    } else {\n      weightedAbscissa.x[size - 1] += x[index] * y[index];\n      weightedAbscissa.y[size - 1] += y[index];\n      merged.x[size - 1] = x[index];\n      merged.y[size - 1] += y[index];\n      index++;\n    }\n  }\n\n  for (var i = 0; i < merged.x.length; i++) {\n    merged.x[i] = weightedAbscissa.x[i] / weightedAbscissa.y[i];\n  }\n\n  return merged;\n}\n","/**\n * Function that calculates the integral of the line between two\n * x-coordinates, given the slope and intercept of the line.\n * @param {number} x0\n * @param {number} x1\n * @param {number} slope\n * @param {number} intercept\n * @return {number} integral value.\n */\nexport default function integral(x0, x1, slope, intercept) {\n  return (\n    0.5 * slope * x1 * x1 +\n    intercept * x1 -\n    (0.5 * slope * x0 * x0 + intercept * x0)\n  );\n}\n","import integral from './integral';\n\n/**\n * function that retrieves the getEquallySpacedData with the variant \"smooth\"\n *\n * @param {Array<number>} x\n * @param {Array<number>} y\n * @param {number} from - Initial point\n * @param {number} to - Final point\n * @param {number} numberOfPoints\n * @return {Array} - Array of y's equally spaced with the variant \"smooth\"\n */\nexport default function equallySpacedSmooth(x, y, from, to, numberOfPoints) {\n  var xLength = x.length;\n\n  var step = (to - from) / (numberOfPoints - 1);\n  var halfStep = step / 2;\n\n  var output = new Array(numberOfPoints);\n\n  var initialOriginalStep = x[1] - x[0];\n  var lastOriginalStep = x[xLength - 1] - x[xLength - 2];\n\n  // Init main variables\n  var min = from - halfStep;\n  var max = from + halfStep;\n\n  var previousX = Number.MIN_VALUE;\n  var previousY = 0;\n  var nextX = x[0] - initialOriginalStep;\n  var nextY = 0;\n\n  var currentValue = 0;\n  var slope = 0;\n  var intercept = 0;\n  var sumAtMin = 0;\n  var sumAtMax = 0;\n\n  var i = 0; // index of input\n  var j = 0; // index of output\n\n  function getSlope(x0, y0, x1, y1) {\n    return (y1 - y0) / (x1 - x0);\n  }\n\n  main: while (true) {\n    if (previousX <= min && min <= nextX) {\n      add = integral(0, min - previousX, slope, previousY);\n      sumAtMin = currentValue + add;\n    }\n\n    while (nextX - max >= 0) {\n      // no overlap with original point, just consume current value\n      var add = integral(0, max - previousX, slope, previousY);\n      sumAtMax = currentValue + add;\n\n      output[j++] = (sumAtMax - sumAtMin) / step;\n\n      if (j === numberOfPoints) {\n        break main;\n      }\n\n      min = max;\n      max += step;\n      sumAtMin = sumAtMax;\n    }\n\n    currentValue += integral(previousX, nextX, slope, intercept);\n\n    previousX = nextX;\n    previousY = nextY;\n\n    if (i < xLength) {\n      nextX = x[i];\n      nextY = y[i];\n      i++;\n    } else if (i === xLength) {\n      nextX += lastOriginalStep;\n      nextY = 0;\n    }\n\n    slope = getSlope(previousX, previousY, nextX, nextY);\n    intercept = -slope * previousX + previousY;\n  }\n\n  return output;\n}\n","/**\n * function that retrieves the getEquallySpacedData with the variant \"slot\"\n *\n * @param {Array<number>} x\n * @param {Array<number>} y\n * @param {number} from - Initial point\n * @param {number} to - Final point\n * @param {number} numberOfPoints\n * @return {Array} - Array of y's equally spaced with the variant \"slot\"\n */\nexport default function equallySpacedSlot(x, y, from, to, numberOfPoints) {\n  var xLength = x.length;\n\n  var step = (to - from) / (numberOfPoints - 1);\n  var halfStep = step / 2;\n  var lastStep = x[x.length - 1] - x[x.length - 2];\n\n  var start = from - halfStep;\n  var output = new Array(numberOfPoints);\n\n  // Init main variables\n  var min = start;\n  var max = start + step;\n\n  var previousX = -Number.MAX_VALUE;\n  var previousY = 0;\n  var nextX = x[0];\n  var nextY = y[0];\n  var frontOutsideSpectra = 0;\n  var backOutsideSpectra = true;\n\n  var currentValue = 0;\n\n  // for slot algorithm\n  var currentPoints = 0;\n\n  var i = 1; // index of input\n  var j = 0; // index of output\n\n  main: while (true) {\n    if (previousX >= nextX) throw new Error('x must be an increasing serie');\n    while (previousX - max > 0) {\n      // no overlap with original point, just consume current value\n      if (backOutsideSpectra) {\n        currentPoints++;\n        backOutsideSpectra = false;\n      }\n\n      output[j] = currentPoints <= 0 ? 0 : currentValue / currentPoints;\n      j++;\n\n      if (j === numberOfPoints) {\n        break main;\n      }\n\n      min = max;\n      max += step;\n      currentValue = 0;\n      currentPoints = 0;\n    }\n\n    if (previousX > min) {\n      currentValue += previousY;\n      currentPoints++;\n    }\n\n    if (previousX === -Number.MAX_VALUE || frontOutsideSpectra > 1) {\n      currentPoints--;\n    }\n\n    previousX = nextX;\n    previousY = nextY;\n\n    if (i < xLength) {\n      nextX = x[i];\n      nextY = y[i];\n      i++;\n    } else {\n      nextX += lastStep;\n      nextY = 0;\n      frontOutsideSpectra++;\n    }\n  }\n\n  return output;\n}\n","export default function getZones(from, to, numberOfPoints, exclusions = []) {\n  if (from > to) {\n    [from, to] = [to, from];\n  }\n\n  // in exclusions from and to have to be defined\n  exclusions = exclusions.filter(\n    (exclusion) => exclusion.from !== undefined && exclusion.to !== undefined\n  );\n\n  exclusions = JSON.parse(JSON.stringify(exclusions));\n  // we ensure that from before to\n  exclusions.forEach((exclusion) => {\n    if (exclusion.from > exclusion.to) {\n      [exclusion.to, exclusion.from] = [exclusion.from, exclusion.to];\n    }\n  });\n\n  exclusions.sort((a, b) => a.from - b.from);\n\n  // we will rework the exclusions in order to remove overlap and outside range (from / to)\n  exclusions.forEach((exclusion) => {\n    if (exclusion.from < from) exclusion.from = from;\n    if (exclusion.to > to) exclusion.to = to;\n  });\n  for (let i = 0; i < exclusions.length - 1; i++) {\n    if (exclusions[i].to > exclusions[i + 1].from) {\n      exclusions[i].to = exclusions[i + 1].from;\n    }\n  }\n  exclusions = exclusions.filter((exclusion) => exclusion.from < exclusion.to);\n\n  if (!exclusions || exclusions.length === 0) {\n    return [{ from, to, numberOfPoints }];\n  }\n\n  // need to deal with overlapping exclusions and out of bound exclusions\n\n  let toRemove = exclusions.reduce(\n    (previous, exclusion) => (previous += exclusion.to - exclusion.from),\n    0\n  );\n  let total = to - from;\n  let unitsPerPoint = (total - toRemove) / numberOfPoints;\n  let zones = [];\n  let currentFrom = from;\n  let totalPoints = 0;\n  for (let exclusion of exclusions) {\n    let currentNbPoints = Math.round(\n      (exclusion.from - currentFrom) / unitsPerPoint\n    );\n    totalPoints += currentNbPoints;\n    if (currentNbPoints > 0) {\n      zones.push({\n        from: currentFrom,\n        to: exclusion.from,\n        numberOfPoints: currentNbPoints\n      });\n    }\n\n    currentFrom = exclusion.to;\n  }\n  if (numberOfPoints - totalPoints > 0) {\n    zones.push({\n      from: currentFrom,\n      to: to,\n      numberOfPoints: numberOfPoints - totalPoints\n    });\n  }\n\n  return zones;\n}\n","import sequentialFill from 'ml-array-sequential-fill';\n\nimport equallySpacedSmooth from './equallySpacedSmooth';\nimport equallySpacedSlot from './equallySpacedSlot';\nimport getZones from './getZones';\n\n/**\n * Function that returns a Number array of equally spaced numberOfPoints\n * containing a representation of intensities of the spectra arguments x\n * and y.\n *\n * The options parameter contains an object in the following form:\n * from: starting point\n * to: last point\n * numberOfPoints: number of points between from and to\n * variant: \"slot\" or \"smooth\" - smooth is the default option\n *\n * The slot variant consist that each point in the new array is calculated\n * averaging the existing points between the slot that belongs to the current\n * value. The smooth variant is the same but takes the integral of the range\n * of the slot and divide by the step size between two points in the new array.\n *\n * @param {object} [arrayXY={}] - object containing 2 properties x and y (both an array)\n * @param {object} [options={}]\n * @param {number} [options.from=x[0]]\n * @param {number} [options.to=x[x.length-1]]\n * @param {string} [options.variant='smooth']\n * @param {number} [options.numberOfPoints=100]\n * @param {Array} [options.exclusions=[]] array of from / to that should be skipped for the generation of the points\n * @return {object<x: Array, y:Array>} new object with x / y array with the equally spaced data.\n */\n\nexport default function equallySpaced(arrayXY = {}, options = {}) {\n  let { x, y } = arrayXY;\n  let xLength = x.length;\n  let reverse = false;\n  if (x.length > 1 && x[0] > x[1]) {\n    x = x.slice().reverse();\n    y = y.slice().reverse();\n    reverse = true;\n  }\n\n  let {\n    from = x[0],\n    to = x[xLength - 1],\n    variant = 'smooth',\n    numberOfPoints = 100,\n    exclusions = []\n  } = options;\n\n  if (xLength !== y.length) {\n    throw new RangeError(\"the x and y vector doesn't have the same size.\");\n  }\n\n  if (typeof from !== 'number' || isNaN(from)) {\n    throw new RangeError(\"'from' option must be a number\");\n  }\n\n  if (typeof to !== 'number' || isNaN(to)) {\n    throw new RangeError(\"'to' option must be a number\");\n  }\n\n  if (typeof numberOfPoints !== 'number' || isNaN(numberOfPoints)) {\n    throw new RangeError(\"'numberOfPoints' option must be a number\");\n  }\n\n  let zones = getZones(from, to, numberOfPoints, exclusions);\n\n  let xResult = [];\n  let yResult = [];\n  for (let zone of zones) {\n    let zoneResult = processZone(\n      x,\n      y,\n      zone.from,\n      zone.to,\n      zone.numberOfPoints,\n      variant,\n      reverse\n    );\n    xResult.push(...zoneResult.x);\n    yResult.push(...zoneResult.y);\n  }\n\n  if (reverse) {\n    if (from < to) {\n      return { x: xResult.reverse(), y: yResult.reverse() };\n    } else {\n      return { x: xResult, y: yResult };\n    }\n  } else {\n    if (from < to) {\n      return { x: xResult, y: yResult };\n    } else {\n      return { x: xResult.reverse(), y: yResult.reverse() };\n    }\n  }\n}\n\nfunction processZone(x, y, from, to, numberOfPoints, variant) {\n  if (numberOfPoints < 1) {\n    throw new RangeError('the number of points must be at least 1');\n  }\n\n  var output =\n    variant === 'slot'\n      ? equallySpacedSlot(x, y, from, to, numberOfPoints)\n      : equallySpacedSmooth(x, y, from, to, numberOfPoints);\n\n  return {\n    x: sequentialFill({\n      from,\n      to,\n      size: numberOfPoints\n    }),\n    y: output\n  };\n}\n","export default function getZones(from, to, exclusions = []) {\n  if (from > to) {\n    [from, to] = [to, from];\n  }\n\n  // in exclusions from and to have to be defined\n  exclusions = exclusions.filter(\n    (exclusion) => exclusion.from !== undefined && exclusion.to !== undefined\n  );\n\n  exclusions = JSON.parse(JSON.stringify(exclusions));\n  // we ensure that from before to\n  exclusions.forEach((exclusion) => {\n    if (exclusion.from > exclusion.to) {\n      [exclusion.to, exclusion.from] = [exclusion.from, exclusion.to];\n    }\n  });\n\n  exclusions.sort((a, b) => a.from - b.from);\n\n  // we will rework the exclusions in order to remove overlap and outside range (from / to)\n  exclusions.forEach((exclusion) => {\n    if (exclusion.from < from) exclusion.from = from;\n    if (exclusion.to > to) exclusion.to = to;\n  });\n  for (let i = 0; i < exclusions.length - 1; i++) {\n    if (exclusions[i].to > exclusions[i + 1].from) {\n      exclusions[i].to = exclusions[i + 1].from;\n    }\n  }\n  exclusions = exclusions.filter((exclusion) => exclusion.from < exclusion.to);\n\n  if (!exclusions || exclusions.length === 0) {\n    return [{ from, to }];\n  }\n\n  let zones = [];\n  let currentFrom = from;\n  for (let exclusion of exclusions) {\n    if (currentFrom < exclusion.from) {\n      zones.push({\n        from: currentFrom,\n        to: exclusion.from\n      });\n    }\n\n    currentFrom = exclusion.to;\n  }\n  if (currentFrom < to) {\n    zones.push({\n      from: currentFrom,\n      to: to\n    });\n  }\n\n  return zones;\n}\n","import getZones from './getZones';\n\n/**\n * Filter an array x/y based on various criteria\n * x points are expected to be sorted\n *\n * @param {object} points\n * @param {object} [options={}]\n * @param {array} [options.from]\n * @param {array} [options.to]\n * @param {array} [options.exclusions=[]]\n * @return {{x: Array<number>, y: Array<number>}}\n */\n\nexport default function filterX(points, options = {}) {\n  const { x, y } = points;\n  const { from = x[0], to = x[x.length - 1], exclusions = [] } = options;\n\n  let zones = getZones(from, to, exclusions);\n\n\n  let currentZoneIndex = 0;\n  let newX = [];\n  let newY = [];\n  let position = 0;\n  while (position < x.length) {\n    if (\n      x[position] <= zones[currentZoneIndex].to &&\n      x[position] >= zones[currentZoneIndex].from\n    ) {\n      newX.push(x[position]);\n      newY.push(y[position]);\n    } else {\n      if (x[position] > zones[currentZoneIndex].to) {\n        currentZoneIndex++;\n        if (!zones[currentZoneIndex]) break;\n      }\n    }\n    position++;\n  }\n\n  return {\n    x: newX,\n    y: newY\n  };\n}\n","import { DecisionTreeClassifier, DecisionTreeRegression } from 'ml-cart';\nimport {\n  RandomForestClassifier,\n  RandomForestRegression\n} from 'ml-random-forest';\n\n// Try to keep this list in the same structure as the README.\n\n// Unsupervised learning\nexport { PCA } from 'ml-pca';\nimport * as HClust from 'ml-hclust';\nexport { HClust };\nexport { default as KMeans } from 'ml-kmeans';\n\n// Supervised learning\nimport * as NaiveBayes from 'ml-naivebayes';\nexport { NaiveBayes };\nexport { default as KNN } from 'ml-knn';\nexport { PLS, KOPLS } from 'ml-pls';\nexport { default as CrossValidation } from 'ml-cross-validation';\nexport { default as ConfusionMatrix } from 'ml-confusion-matrix';\nexport { DecisionTreeClassifier };\nexport { RandomForestClassifier };\n\n// Artificial neural networks\nexport { default as FNN } from 'ml-fnn';\nexport { default as SOM } from 'ml-som';\n\n// Regression\nexport {\n  SimpleLinearRegression,\n  PolynomialRegression,\n  MultivariateLinearRegression,\n  PowerRegression,\n  ExponentialRegression,\n  TheilSenRegression,\n  RobustPolynomialRegression\n} from 'ml-regression';\nexport { DecisionTreeRegression };\nexport { RandomForestRegression };\n\n// Optimization\nexport { default as levenbergMarquardt } from 'ml-levenberg-marquardt';\n\n// Math\nimport * as MatrixLib from 'ml-matrix';\nconst {\n  Matrix,\n  SVD,\n  EVD,\n  CholeskyDecomposition,\n  LuDecomposition,\n  QrDecomposition\n} = MatrixLib;\nexport {\n  MatrixLib,\n  Matrix,\n  SVD,\n  EVD,\n  CholeskyDecomposition,\n  LuDecomposition,\n  QrDecomposition\n};\n\nexport { SparseMatrix } from 'ml-sparse-matrix';\nexport { default as Kernel } from 'ml-kernel';\nimport { distance, similarity } from 'ml-distance';\nexport { distance as Distance, similarity as Similarity };\nexport { default as distanceMatrix } from 'ml-distance-matrix';\nexport { default as XSadd } from 'ml-xsadd';\n\n// Statistics\nexport { default as Performance } from 'ml-performance';\n\n// Data preprocessing\nexport { default as savitzkyGolay } from 'ml-savitzky-golay';\n\n// Utility\nexport { default as BitArray } from 'ml-bit-array';\nexport { default as HashTable } from 'ml-hash-table';\nexport { default as padArray } from 'ml-pad-array';\nexport { default as binarySearch } from 'binary-search';\nimport * as numSort from 'num-sort';\nexport { numSort };\nexport { default as Random } from 'ml-random';\n\nimport min from 'ml-array-min';\nimport max from 'ml-array-max';\nimport median from 'ml-array-median';\nimport mean from 'ml-array-mean';\nimport mode from 'ml-array-mode';\nimport normed from 'ml-array-normed';\nimport rescale from 'ml-array-rescale';\nimport sequentialFill from 'ml-array-sequential-fill';\nimport standardDeviation from 'ml-array-standard-deviation';\nimport variance from 'ml-array-variance';\nexport const Array = {\n  min,\n  max,\n  median,\n  mean,\n  mode,\n  normed,\n  rescale,\n  sequentialFill,\n  standardDeviation,\n  variance\n};\n\nimport centroidsMerge from 'ml-array-xy-centroids-merge';\nimport closestX from 'ml-arrayxy-closestx';\nimport maxMerge from 'ml-array-xy-max-merge';\nimport maxY from 'ml-array-xy-max-y';\nimport sortX from 'ml-array-xy-sort-x';\nimport uniqueX from 'ml-arrayxy-uniquex';\nimport weightedMerge from 'ml-array-xy-weighted-merge';\nimport equallySpaced from 'ml-array-xy-equally-spaced';\nimport filterX from 'ml-array-xy-filter-x';\nexport const ArrayXY = {\n  centroidsMerge,\n  closestX,\n  maxMerge,\n  maxY,\n  sortX,\n  uniqueX,\n  weightedMerge,\n  equallySpaced,\n  filterX\n};\n"],"names":["toString","Object","prototype","isAnyArray","object","call","endsWith","max","input","isArray","TypeError","length","i","min","rescale","options","arguments","undefined","output","Array","currentMin","currentMax","RangeError","_options$min","minValue","autoMinMax","_options$max","maxValue","factor","checkRowIndex","matrix","index","outer","rows","checkColumnIndex","columns","checkRowVector","vector","to1DArray","checkColumnVector","checkIndices","rowIndices","columnIndices","row","checkRowIndices","column","checkColumnIndices","rowOut","some","r","from","columnOut","c","checkRange","startRow","endRow","startColumn","endColumn","checkNumber","newArray","value","array","push","name","sumByRow","sum","j","get","sumByColumn","sumAll","v","productByRow","productByColumn","productAll","varianceByRow","unbiased","mean","cols","variance","sum1","sum2","x","varianceByColumn","varianceAll","size","centerByRow","set","centerByColumn","centerAll","getScaleByRow","scale","Math","pow","sqrt","scaleByRow","getScaleByColumn","scaleByColumn","getScaleAll","divider","scaleAll","inspectMatrix","indent","repeat","indentData","constructor","inspectData","maxRows","maxColumns","maxNumSize","maxI","maxJ","result","line","formatNumber","join","num","numStr","String","padEnd","precise","toPrecision","exponential","toExponential","eIndex","indexOf","e","substring","installMathOperations","AbstractMatrix","Matrix","add","addS","addM","checkMatrix","newMatrix","sub","subS","subM","subtract","subtractS","subtractM","mul","mulS","mulM","multiply","multiplyS","multiplyM","div","divS","divM","divide","divideS","divideM","mod","modS","modM","modulus","modulusS","modulusM","and","andS","andM","or","orS","orM","xor","xorS","xorM","leftShift","leftShiftS","leftShiftM","signPropagatingRightShift","signPropagatingRightShiftS","signPropagatingRightShiftM","rightShift","rightShiftS","rightShiftM","zeroFillRightShift","zeroFillRightShiftS","zeroFillRightShiftM","not","abs","acos","acosh","asin","asinh","atan","atanh","cbrt","ceil","clz32","cos","cosh","exp","expm1","floor","fround","log","log1p","log10","log2","round","sign","sin","sinh","tan","tanh","trunc","arg0","powS","powM","from1DArray","newRows","newColumns","newData","rowVector","columnVector","zeros","ones","fill","rand","random","randInt","Number","isInteger","interval","eye","diag","data","l","matrix1","matrix2","isMatrix","klass","apply","callback","to2DArray","copy","toJSON","isRowVector","isColumnVector","isVector","isSquare","isSymmetric","isEchelonForm","previousColumn","checked","isReducedEchelonForm","k","echelonForm","clone","h","iMax","swapRows","tmp","reducedEchelonForm","m","n","maxRow","p","pivot","Error","setSubMatrix","neg","getRow","getRowVector","setRow","row1","row2","temp","getColumn","getColumnVector","setColumn","swapColumns","column1","column2","addRowVector","subRowVector","mulRowVector","divRowVector","addColumnVector","subColumnVector","mulColumnVector","divColumnVector","mulRow","mulColumn","maxIndex","idx","minIndex","maxRowIndex","minRow","minRowIndex","maxColumn","maxColumnIndex","minColumn","minColumnIndex","norm","type","cumulativeSum","dot","vector2","vector1","mmul","other","Bcolj","Float64Array","s","strassen2x2","a11","b11","a12","b12","a21","b21","a22","b22","m1","m2","m3","m4","m5","m6","m7","c00","c01","c10","c11","strassen3x3","a00","a01","a02","a10","a20","b00","b01","b02","b10","b20","m8","m9","m10","m11","m12","m13","m14","m15","m16","m17","m18","m19","m20","m21","m22","m23","c02","c12","c20","c21","c22","mmulStrassen","y","r1","c1","r2","c2","console","warn","embed","mat","resultat","blockMult","a","b","halfRows","parseInt","halfCols","subMatrix","scaleRows","isFinite","scaleColumns","flipRows","middle","first","last","flipColumns","kroneckerProduct","q","transpose","sortRows","compareFunction","compareNumbers","sort","sortColumns","subMatrixRow","indices","subMatrixColumn","selection","rowIndex","columnIndex","trace","by","product","standardDeviation","center","Symbol","for","randomInt","diagonal","identity","negate","tensorProduct","nRows","nColumns","arrayData","removeRow","splice","addRow","removeColumn","newRow","addColumn","BaseView","MatrixColumnView","MatrixColumnSelectionView","MatrixFlipColumnView","MatrixFlipRowView","MatrixRowView","MatrixRowSelectionView","MatrixSelectionView","MatrixSubView","MatrixTransposeView","WrapperMatrix1D","_calculateIndex","WrapperMatrix2D","wrap","LuDecomposition","lu","pivotVector","pivotSign","t","LUcolj","kmax","LU","isSingular","col","solve","count","X","determinant","lowerTriangularMatrix","upperTriangularMatrix","pivotPermutationVector","hypotenuse","QrDecomposition","qr","rdiag","nrm","QR","Rdiag","isFullRank","orthogonalMatrix","SingularValueDecomposition","computeLeftSingularVectors","computeRightSingularVectors","autoTranspose","wantu","Boolean","wantv","swapped","aux","nu","ni","U","V","work","si","nct","nrt","mrc","pp","eps","EPSILON","kase","alpha","MIN_VALUE","isNaN","ks","f","cs","sn","sp","spm1","epm1","sk","ek","shift","g","iter","Y","threshold","scols","Ls","rightSingularVectors","VL","vrows","urows","VLU","solveForDiagonal","inverse","vcols","ucols","condition","norm2","rank","tol","ii","leftSingularVectors","diagonalMatrix","useSVD","leftHandSide","rightHandSide","d","subMatrix0","subMatrix1","subMatrix2","xrange","exception","range","dependenciesOneRow","error","thresholdValue","thresholdError","returnArray","linearDependencies","results","Abis","svd","pseudoInverse","svdSolution","SVD","covariance","xMatrix","yMatrix","yIsSame","correlation","sdx","sdy","EigenvalueDecomposition","assumeSymmetric","tred2","tql2","H","ort","orthes","hqr2","realEigenvalues","imaginaryEigenvalues","eigenvectorMatrix","hh","dl1","c3","el1","s2","tst1","low","high","nn","exshift","z","w","ra","sa","vr","vi","notlast","cdivres","cdiv","xr","xi","yr","yi","CholeskyDecomposition","dimension","positiveDefinite","L","B","toDiscreteDistribution","numberOfClasses","counts","giniImpurity","probabilities","getNumberOfClasses","filter","val","arr","giniGain","splitted","splitsImpurity","splits","currentSplit","squaredError","meanArray","currentElement","regressionError","matrixSplitter","lesserX","greaterX","lesserY","greaterY","zip","ret","gainFunctions","gini","Utils","regression","splitFunctions","TreeNode","kind","gainFunction","splitFunction","minNumSamples","maxDepth","bestSplit","XTranspose","bestGain","Infinity","check","currentFeature","splitValues","featureSplit","currentSplitVal","split","gain","maxGain","splitValue","lesser","greater","calculatePrediction","distribution","train","currentDepth","parentGain","splitColumn","splittedMatrix","left","right","classify","setNodeParameters","node","defaultOptions","DecisionTreeClassifier","model","root","Tree","assign","trainingSet","trainingLabels","predict","toPredict","predictions","load","DecisionTreeRegression","trainingValues","checkFloat","examplesBaggingWithReplacement","trainingValue","seed","engine","Random","autoSeed","Xr","featureBagging","replacement","toRet","usedIndex","Set","has","RandomForestBase","maxFeatures","nEstimators","treeOptions","isClassifier","indexes","useSampleBagging","Estimator","DTClassifier","DTRegression","estimators","map","est","res","values","predictionValues","RandomForestClassifier","baseModel","mode","pop","_ref","module","exports","window","median","quickSelectMedian","slice","selectionMethods","arrayMean","arrayMedian","selectionMethod","RandomForestRegression","PCA","dataset","means","stdevs","S","isCovarianceMatrix","_computeFromCovarianceMatrix","useCovarianceMatrix","_adjust","covarianceMatrix","singularValues","eigenvalues","singularValue","nComponents","getExplainedVariance","getCumulativeVariance","explained","getEigenvectors","getEigenvalues","getStandardDeviations","getLoadings","evd","EVD","reverse","squaredEuclidean","euclidean","distanceMatrix","distanceFn","Heap","defaultCmp","heapify","heappop","heappush","heappushpop","heapreplace","insort","nlargest","nsmallest","updateItem","_siftdown","_siftup","lo","hi","cmp","mid","concat","item","lastelt","returnitem","_i","_j","_len","_ref1","_results","_results1","pos","elem","los","startpos","newitem","parent","parentpos","childpos","endpos","rightpos","replace","pushpop","nodes","peek","contains","clear","empty","heap","toArray","insert","top","front","factory","this","require$$0","Cluster","children","distance","cut","list","ans","group","minGroups","forEach","child","traverse","cb","visit","ClusterLeaf","simpleLink","cluster1","cluster2","disFun","completeLink","averageLink","centroidLink","dist","wardLink","alreadySorted","half","agnes","distanceFunction","method","isDistanceMatrix","methodFunc","len","dis","fdistance","sdistance","toFixed","dmin","clustered","filterInt","filterDiff","int","diff","obj","indCount","jj","splitting","Ci","Cj","ndist","intrDist","diana","tree","ind","M","clId","rebel","C","sG","spl","fData","sData","nearestVector","listVectors","similarityFunction","vectorIndex","maxSim","sim","minDist","MAX_VALUE","calculateDistanceMatrix","updateClusterID","centers","clusterID","updateCenters","prevCenters","K","nDim","centersLen","dim","id","hasConverged","oldCenters","tolerance","LOOP","FLOAT_MUL","sh1","sh2","sh3","multiply_uint32","nlo","nhi","XSadd","Date","now","state","Uint32Array","init","getFloat","bind","getUint32","nextState","periodCertification","PROB_TOLERANCE","randomChoice","valuesArr","cumSum","getArray","randomIndex","seedOrRandom","xsadd","XSAdd","randomGenerator","choice","randomSample","mostDistant","maxDist","minDistCent","kmeanspp","nSamples","localTrials","firstCenterIdx","closestDistSquared","cumSumClosestDistSquared","candidateIdx","candidates","distanceToCandidates","euclideanDistances","bestCandidate","bestPot","bestDistSquared","newDistSquared","newPot","A","distanceSymbol","KMeansResult","clusters","centroids","converged","iterations","nearest","centroid","computeInformation","enrichedCentroids","maxIterations","withIterations","initialization","step","newCenters","kmeansGenerator","stepNumber","stepResult","kmeans","separateClasses","features","classes","totalPerClasses","separatedClasses","currentIndex","GaussianNB","reload","calculateProbabilities","C1","PI","std","logPriorProbability","currentStd","getCurrentClass","modelName","currentCase","maxProbability","predictedClass","currentProbability","calculateLogProbability","C2","MultinomialNB","conditionalProbability","priorProbability","separateClass","classValues","total","divisor","matrixLog","Node","KDTree","points","metric","dimensions","restoreParent","buildTree","toJSONImpl","point","maxNodes","maxDistance","bestNodes","BinaryHeap","nearestSearch","ownDistance","linearPoint","bestChild","linearDistance","otherChild","saveNode","content","src","dest","depth","scoreFunction","element","bubbleUp","end","sinkDown","parentN","elemScore","child2N","child1N","swap","child1","child1Score","child2","child2Score","KNN","labels","kdTree","isEuclidean","euclideanDistance","getSinglePrediction","knn","nearestPoints","pointsPerClass","maxPoints","lastElement","currentClass","currentPoints","pow2array","initializeMatrices","PLS","meanX","stdDevX","meanY","stdDevY","PBQ","R2X","scaleMethod","latentVectors","rx","cx","ry","cy","ssqXcal","sumOfSquaresY","T","P","Q","W","transposeX","transposeY","tIndex","maxSumColIndex","uIndex","t1","u","den","pnorm","ssqYcal","E","F","KOPLS","YLoadingMat","SigmaPow","YScoreMat","predScoreMat","YOrthLoadingVec","YOrthEigen","YOrthScoreMat","toNorm","TURegressionCoeff","kernelX","kernel","orthogonalComp","predictiveComp","predictiveComponents","orthogonalComponents","compute","Identity","Sigma","YOrthScoreNorm","TpiPrime","CoTemp","SoTemp","toiPrime","ITo","lastScoreMat","lastTpPrime","KTestTrain","YOrthScoreVector","scoreMatPrime","p1","p2","p3","prediction","predYOrthVectors","ConfusionMatrix","fromLabels","actual","predicted","distinctLabels","actualIdx","predictedIdx","getMatrix","getLabels","getTotalCount","getTrueCount","getFalseCount","getTruePositiveCount","label","getIndex","getTrueNegativeCount","getFalsePositiveCount","getFalseNegativeCount","getPositiveCount","getNegativeCount","getTruePositiveRate","getTrueNegativeRate","getPositivePredictiveValue","TP","getNegativePredictiveValue","TN","getFalseNegativeRate","getFalsePositiveRate","getFalseDiscoveryRate","FP","getFalseOmissionRate","FN","getF1Score","getMatthewsCorrelationCoefficient","getInformedness","getMarkedness","getConfusionTable","getAccuracy","correct","incorrect","getCount","actualIndex","predictedIndex","accuracy","N","twiddle","CV","leaveOneOut","Classifier","classifierOptions","leavePOut","distinct","getDistinct","confusionMatrix","initMatrix","gen","combinations","allIdx","testIdx","trainIdx","validateWithCallback","validate","kFold","current","folds","randi","testFeatures","trainFeatures","testLabels","trainLabels","getTrainTest","classifier","predictedLabels","updateConfusionMatrix","logistic","expELU","param","softExponential","softExponentialPrime","ACTIVATION_FUNCTIONS","activation","derivate","arctan","softsign","relu","softplus","bent","sinusoid","sinc","gaussian","Layer","inputSize","outputSize","regularization","epsilon","activationParam","selectedFunction","params","actFunction","derFunction","activationFunction","mlMatrix","forward","backpropagation","delta","dW","db","aCopy","update","OutputLayer","FeedForwardNeuralNetworks","hiddenLayers","learningRate","dicts","layers","keys","buildNetwork","dictOutputs","inputs","propagate","outputs","NodeSquare","weights","som","neighbors","adjustWeights","target","influence","getDistance","otherNode","getDistanceTorus","distX","distY","gridDim","getNeighbors","xy","torus","getPos","bestNeighbor","direction","dist1","dist2","simA","simB","getPosition","NodeHexagonal","hX","getDistanceHexagonal","distZ","fields","randomizer","squareEuclidean","gridType","SOM","hasOwnProperty","numWeights","converters","getConverters","extractor","creator","nodeType","hx","distanceMethod","getMaxDistance","done","times","findBMU","adjust","iterationCount","startLearningRate","mapRadius","algorithmMethod","_initNodes","loadModel","eval","export","exportModel","includeDistance","initNodes","setTraining","convertedSet","numIterations","timeConstant","trainOne","neighbourhoodRadius","trainingSetFactor","getRandomValue","bmu","_findBestMatchingUnit","now2","radiusLimit","xMin","xMax","yMin","yMax","theX","theY","getConvertedNodes","findBestMatchingUnit","candidate","lowest","computePosition","self","_predict","getQuantizationError","fit","getFit","normalizers","denormalizers","getNormalizer","getDenormalizer","minMax","normalizer","denormalizer","zero","one","maybeToPrecision","digits","checkArraySize","BaseRegression","new","toLaTeX","score","y2","xSum","ySum","chi2","rmsd","xSquared","ySquared","xY","PolynomialRegression","degree","powers","coefficients","checkArrayLength","regress","precision","_toFormula","isLaTeX","sup","closeSup","fn","str","charAt","json","pr","FT","SimpleLinearRegression","slope","intercept","computeX","xFactor","absIntercept","operator","slr","numerator","ExponentialRegression","er","yl","linear","PowerRegression","newInputs","latex","xl","MultivariateLinearRegression","statistics","xt","xx","invxx","beta","fittedValues","residuals","ri","reduce","stdError","stdErrorMatrix","stdErrors","tStats","summary","regressionStatistics","standardError","observations","variables","tStat","sigma","GaussianKernel","constant","PolynomialKernel","SigmoidKernel","ANOVAKernel","CauchyKernel","ExponentialKernel","HistogramIntersectionKernel","LaplacianKernel","MultiquadraticKernel","RationalQuadraticKernel","kernelType","rbf","polynomial","poly","anova","cauchy","histogram","HistogramKernel","laplacian","multiquadratic","rational","RationalKernel","sigmoid","mlp","Kernel","toLowerCase","KernelConstructor","kernelFunction","landmarks","kernelMatrix","TheilSenRegression","theilSen","slopes","medianSlope","cuts","RobustPolynomialRegression","robustPolynomial","_","tuples","getRandomTuples","tuple","calcCoefficients","residual","residualsMedian","counter","errorCalculation","parameters","parameterizedFunction","func","gradientFunction","evaluatedData","gradientDifference","paramFunction","auxParams","funcParam","matrixFunction","damping","gradientFunc","matrixFunc","inverseMatrix","levenbergMarquardt","errorTolerance","minValues","maxValues","initialValues","parLen","MAX_SAFE_INTEGER","MIN_SAFE_INTEGER","iteration","parameterValues","parameterError","haystack","needle","comparator","assertNumber","number","largestPrime","primeNumbers","ascending","nextPrime","binarySearch","FREE","FULL","REMOVED","defaultInitialCapacity","defaultMinLoadFactor","defaultMaxLoadFactor","HashTable","table","minLoadFactor","maxLoadFactor","freeEntries","lowWaterMark","highWaterMark","initialCapacity","capacity","chooseHighWaterMark","key","indexOfKey","indexOfInsertion","newCapacity","chooseGrowCapacity","rehash","remove","noRehash","maybeShrinkCapacity","delete","chooseShrinkCapacity","containsKey","hash","decrement","containsValue","indexOfValue","ensureCapacity","minCapacity","oldCapacity","oldTable","oldValues","oldState","newTable","newValues","newState","chooseLowWaterMark","forEachKey","forEachValue","forEachPair","minLoad","maxLoad","SparseMatrix","_init","elements","symmetric","forEachNonZero","bandWidth","isBanded","width","cardinality","v1","v2","getNonZeros","setThreshold","newThreshold","trans","inplaceOperator","inplaceOperatorScalar","inplaceOperatorMatrix","staticOperator","inplaceMethod","staticMethod","operators","fillTemplateFunction","op","methods","mathMethod","template","RegExp","additiveSymmetric","avg","bhattacharyya","canberra","chebyshev","clark","czekanowskiSimilarity","up","down","czekanowskiDistance","dice","q1","q2","divergence","fidelity","gower","harmonicMean","hellinger","innerProduct","intersection","jaccard","jeffreys","jensenDifference","jensenShannon","kdivergence","kulczynski","kullbackLeibler","kumarHassebrook","kumarJohnson","lorentzian","manhattan","matusita","minkowski","motyka","neyman","pearson","probabilisticSymmetric","ruzicka","soergel","sorensen","squared","squaredChord","taneja","tanimoto","bitvector","inter","union","tanimotoS","topsoe","waveHedges","createTree","spectrum","minWindow","to","mainCreateTree","start","getSimilarity","gamma","treeSimilarity","getFunction","cosine","diceD","intersectionD","jaccardD","kulczynskiD","motykaD","avgA","avgB","newA","newB","squaredChordD","pred","cutoffs","tn","tp","fp","nNeg","nPos","nPosPred","nNegPred","Performance","isDistance","predP","all","targ","currentPred","nTp","nFp","getMeasure","measure","measures","getAURC","auc","getAUDC","getDistribution","cutLength","cutLow","cutHigh","xLabels","interValues","intraValues","interCumPercent","intraCumPercent","nTP","currentTP","nFP","currentFP","thisTP","thisFP","names","acc","err","fpr","tpr","fnr","tnr","ppv","npv","pcfall","pcmiss","lift","rpp","rnp","arrayCase","cond","matrixCase","padArray","windowSize","derivative","pad","padValue","SavitzkyGolay","J","inic","Jtranspose","Jinv","det","eightBits","arr1","arr2","getBit","mask","setBit","toBinaryString","substr","parseBinaryString","toHexString","parseHexString","toDebug","binary","maxCount","_options$algorithm","algorithm","absoluteSum","_typeof","iterator","sequentialFill","_options","_options$from","_options$to","_options$size","_options$unbiased","_options$mean","sqrError","mergeByCentroids","originalPoints","mergedPoints","originalIndex","mergedIndex","closestX","descending","maxMerge","groupWidth","merged","maxAbscissa","maxY","calculateIndex","sortX","sortFunc","grouped","response","uniqueX","weightedMerge","weightedAbscissa","integral","x0","x1","equallySpacedSmooth","numberOfPoints","xLength","halfStep","initialOriginalStep","lastOriginalStep","previousX","previousY","nextX","nextY","currentValue","sumAtMin","sumAtMax","getSlope","y0","y1","main","equallySpacedSlot","lastStep","frontOutsideSpectra","backOutsideSpectra","getZones","exclusions","exclusion","JSON","parse","stringify","toRemove","previous","unitsPerPoint","zones","currentFrom","totalPoints","currentNbPoints","equallySpaced","arrayXY","variant","xResult","yResult","zone","zoneResult","processZone","filterX","currentZoneIndex","newX","newY","position","MatrixLib","normed","ArrayXY","centroidsMerge"],"mappings":"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"}